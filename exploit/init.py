class comp:
    INIT_SCRIPT = """LS0gbm90IG15IGJhc2UgYnV0IHdobyBjYXJlcwoKbG9jYWwgQ29udGVudFByb3ZpZGVyID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb250ZW50UHJvdmlkZXIiKQpsb2NhbCBIdHRwU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiSHR0cFNlcnZpY2UiKQoKLS0gVVRJTFMKCmxvY2FsIGNvcmVfZ3VpID0gZ2FtZTpHZXRTZXJ2aWNlKCJDb3JlR3VpIikKbG9jYWwgY29yZV9wYWNrYWdlcyA9IGdhbWU6R2V0U2VydmljZSgiQ29yZVBhY2thZ2VzIikKCgpsb2NhbCBsb2FkID0gY29yb3V0aW5lLndyYXAoZnVuY3Rpb24oKQoJbG9jYWwgY29tcGlsZSA9IGNvcm91dGluZS53cmFwKGZ1bmN0aW9uKCkKCQlsb2NhbCBsdWFaID0ge30KCQlsb2NhbCBsdWFZID0ge30KCQlsb2NhbCBsdWFYID0ge30KCQlsb2NhbCBsdWFQID0ge30KCQlsb2NhbCBsdWFVID0ge30KCQlsb2NhbCBsdWFLID0ge30KCQlsb2NhbCBzaXplX3NpemVfdCA9IDgKCgkJbG9jYWwgZnVuY3Rpb24gbHVhX2Fzc2VydCh0ZXN0KQoJCQlpZiBub3QgdGVzdCB0aGVuIGVycm9yKCJhc3NlcnRpb24gZmFpbGVkISIpIGVuZAoJCWVuZAoKCQlmdW5jdGlvbiBsdWFaOm1ha2VfZ2V0UyhidWZmKQoJCQlsb2NhbCBiID0gYnVmZgoJCQlyZXR1cm4gZnVuY3Rpb24oKQoJCQkJaWYgbm90IGIgdGhlbiByZXR1cm4gbmlsIGVuZAoJCQkJbG9jYWwgZGF0YSA9IGIKCQkJCWIgPSBuaWwKCQkJCXJldHVybiBkYXRhCgkJCWVuZAoJCWVuZAoKCQlmdW5jdGlvbiBsdWFaOm1ha2VfZ2V0Rihzb3VyY2UpCgkJCWxvY2FsIExVQUxfQlVGRkVSU0laRSA9IDUxMgoJCQlsb2NhbCBwb3MgPSAxCgoJCQlyZXR1cm4gZnVuY3Rpb24oKSAtLSBjaHVuayByZWFkZXIgYW5vbnltb3VzIGZ1bmN0aW9uIGhlcmUKCQkJCWxvY2FsIGJ1ZmYgPSBzb3VyY2U6c3ViKHBvcywgcG9zICsgTFVBTF9CVUZGRVJTSVpFIC0gMSkKCQkJCXBvcyA9IG1hdGgubWluKCNzb3VyY2UgKyAxLCBwb3MgKyBMVUFMX0JVRkZFUlNJWkUpCgkJCQlyZXR1cm4gYnVmZgoJCQllbmQKCQllbmQKCgkJZnVuY3Rpb24gbHVhWjppbml0KHJlYWRlciwgZGF0YSkKCQkJaWYgbm90IHJlYWRlciB0aGVuIHJldHVybiBlbmQKCQkJbG9jYWwgeiA9IHt9CgkJCXoucmVhZGVyID0gcmVhZGVyCgkJCXouZGF0YSA9IGRhdGEgb3IgIiIKCQkJei5uYW1lID0gbmFtZQoJCQlpZiBub3QgZGF0YSBvciBkYXRhID09ICIiIHRoZW4gei5uID0gMCBlbHNlIHoubiA9ICNkYXRhIGVuZAoJCQl6LnAgPSAwCgkJCXJldHVybiB6CgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVo6ZmlsbCh6KQoJCQlsb2NhbCBidWZmID0gei5yZWFkZXIoKQoJCQl6LmRhdGEgPSBidWZmCgkJCWlmIG5vdCBidWZmIG9yIGJ1ZmYgPT0gIiIgdGhlbiByZXR1cm4gIkVPWiIgZW5kCgkJCXoubiwgei5wID0gI2J1ZmYgLSAxLCAxCgkJCXJldHVybiBzdHJpbmcuc3ViKGJ1ZmYsIDEsIDEpCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVo6emdldGMoeikKCQkJbG9jYWwgbiwgcCA9IHoubiwgei5wICsgMQoJCQlpZiBuID4gMCB0aGVuCgkJCQl6Lm4sIHoucCA9IG4gLSAxLCBwCgkJCQlyZXR1cm4gc3RyaW5nLnN1Yih6LmRhdGEsIHAsIHApCgkJCWVsc2UKCQkJCXJldHVybiBzZWxmOmZpbGwoeikKCQkJZW5kCgkJZW5kCgoJCWx1YVguUkVTRVJWRUQgPSBbWwpUS19BTkQgYW5kClRLX0JSRUFLIGJyZWFrClRLX0RPIGRvClRLX0VMU0UgZWxzZQpUS19FTFNFSUYgZWxzZWlmClRLX0VORCBlbmQKVEtfRkFMU0UgZmFsc2UKVEtfRk9SIGZvcgpUS19GVU5DVElPTiBmdW5jdGlvbgpUS19JRiBpZgpUS19JTiBpbgpUS19MT0NBTCBsb2NhbApUS19OSUwgbmlsClRLX05PVCBub3QKVEtfT1Igb3IKVEtfUkVQRUFUIHJlcGVhdApUS19SRVRVUk4gcmV0dXJuClRLX1RIRU4gdGhlbgpUS19UUlVFIHRydWUKVEtfVU5USUwgdW50aWwKVEtfV0hJTEUgd2hpbGUKVEtfQ09OQ0FUIC4uClRLX0RPVFMgLi4uClRLX0VRID09ClRLX0dFID49ClRLX0xFIDw9ClRLX05FIH49ClRLX05BTUUgPG5hbWU+ClRLX05VTUJFUiA8bnVtYmVyPgpUS19TVFJJTkcgPHN0cmluZz4KVEtfRU9TIDxlb2Y+XV0KCgkJbHVhWC5NQVhTUkMgPSA4MAoJCWx1YVguTUFYX0lOVCA9IDIxNDc0ODM2NDUKCQlsdWFYLkxVQV9RUyA9ICInJXMnIgoJCWx1YVguTFVBX0NPTVBBVF9MU1RSID0gMQoKCQlmdW5jdGlvbiBsdWFYOmluaXQoKQoJCQlsb2NhbCB0b2tlbnMsIGVudW1zID0ge30sIHt9CgkJCWZvciB2IGluIHN0cmluZy5nbWF0Y2goc2VsZi5SRVNFUlZFRCwgIlteXG5dKyIpIGRvCgkJCQlsb2NhbCBfLCBfLCB0b2ssIHN0ciA9IHN0cmluZy5maW5kKHYsICIoJVMrKSVzKyglUyspIikKCQkJCXRva2Vuc1t0b2tdID0gc3RyCgkJCQllbnVtc1tzdHJdID0gdG9rCgkJCWVuZAoJCQlzZWxmLnRva2VucyA9IHRva2VucwoJCQlzZWxmLmVudW1zID0gZW51bXMKCQllbmQKCgkJZnVuY3Rpb24gbHVhWDpjaHVua2lkKHNvdXJjZSwgYnVmZmxlbikKCQkJbG9jYWwgb3V0CgkJCWxvY2FsIGZpcnN0ID0gc3RyaW5nLnN1Yihzb3VyY2UsIDEsIDEpCgkJCWlmIGZpcnN0ID09ICI9IiB0aGVuCgkJCQlvdXQgPSBzdHJpbmcuc3ViKHNvdXJjZSwgMiwgYnVmZmxlbikKCQkJZWxzZQoJCQkJaWYgZmlyc3QgPT0gIkAiIHRoZW4KCQkJCQlzb3VyY2UgPSBzdHJpbmcuc3ViKHNvdXJjZSwgMikKCQkJCQlidWZmbGVuID0gYnVmZmxlbiAtICMiICcuLi4nICIKCQkJCQlsb2NhbCBsID0gI3NvdXJjZQoJCQkJCW91dCA9ICIiCgkJCQkJaWYgbCA+IGJ1ZmZsZW4gdGhlbgoJCQkJCQlzb3VyY2UgPSBzdHJpbmcuc3ViKHNvdXJjZSwgMSArIGwgLSBidWZmbGVuKSAKCQkJCQkJb3V0ID0gb3V0Li4iLi4uIgoJCQkJCWVuZAoJCQkJCW91dCA9IG91dC4uc291cmNlCgkJCQllbHNlIAoJCQkJCWxvY2FsIGxlbiA9IHN0cmluZy5maW5kKHNvdXJjZSwgIltcblxyXSIpIAoJCQkJCWxlbiA9IGxlbiBhbmQgKGxlbiAtIDEpIG9yICNzb3VyY2UKCQkJCQlidWZmbGVuID0gYnVmZmxlbiAtICMoIiBbc3RyaW5nIFwiLi4uXCJdICIpCgkJCQkJaWYgbGVuID4gYnVmZmxlbiB0aGVuIGxlbiA9IGJ1ZmZsZW4gZW5kCgkJCQkJb3V0ID0gIltzdHJpbmcgXCIiCgkJCQkJaWYgbGVuIDwgI3NvdXJjZSB0aGVuCgkJCQkJCW91dCA9IG91dC4uc3RyaW5nLnN1Yihzb3VyY2UsIDEsIGxlbikuLiIuLi4iCgkJCQkJZWxzZQoJCQkJCQlvdXQgPSBvdXQuLnNvdXJjZQoJCQkJCWVuZAoJCQkJCW91dCA9IG91dC4uIlwiXSIKCQkJCWVuZAoJCQllbmQKCQkJcmV0dXJuIG91dAoJCWVuZAoKCQlmdW5jdGlvbiBsdWFYOnRva2VuMnN0cihscywgdG9rZW4pCgkJCWlmIHN0cmluZy5zdWIodG9rZW4sIDEsIDMpIH49ICJUS18iIHRoZW4KCQkJCWlmIHN0cmluZy5maW5kKHRva2VuLCAiJWMiKSB0aGVuCgkJCQkJcmV0dXJuIHN0cmluZy5mb3JtYXQoImNoYXIoJWQpIiwgc3RyaW5nLmJ5dGUodG9rZW4pKQoJCQkJZW5kCgkJCQlyZXR1cm4gdG9rZW4KCQkJZWxzZQoJCQkJcmV0dXJuIHNlbGYudG9rZW5zW3Rva2VuXQoJCQllbmQKCQllbmQKCgkJZnVuY3Rpb24gbHVhWDpsZXhlcnJvcihscywgbXNnLCB0b2tlbikKCQkJbG9jYWwgZnVuY3Rpb24gdHh0VG9rZW4obHMsIHRva2VuKQoJCQkJaWYgdG9rZW4gPT0gIlRLX05BTUUiIG9yCgkJCQkJdG9rZW4gPT0gIlRLX1NUUklORyIgb3IKCQkJCQl0b2tlbiA9PSAiVEtfTlVNQkVSIiB0aGVuCgkJCQkJcmV0dXJuIGxzLmJ1ZmYKCQkJCWVsc2UKCQkJCQlyZXR1cm4gc2VsZjp0b2tlbjJzdHIobHMsIHRva2VuKQoJCQkJZW5kCgkJCWVuZAoJCQlsb2NhbCBidWZmID0gc2VsZjpjaHVua2lkKGxzLnNvdXJjZSwgc2VsZi5NQVhTUkMpCgkJCWxvY2FsIG1zZyA9IHN0cmluZy5mb3JtYXQoIiVzOiVkOiAlcyIsIGJ1ZmYsIGxzLmxpbmVudW1iZXIsIG1zZykKCQkJaWYgdG9rZW4gdGhlbgoJCQkJbXNnID0gc3RyaW5nLmZvcm1hdCgiJXMgbmVhciAiLi5zZWxmLkxVQV9RUywgbXNnLCB0eHRUb2tlbihscywgdG9rZW4pKQoJCQllbmQKCQkJZXJyb3IobXNnKQoJCWVuZAoKCQlmdW5jdGlvbiBsdWFYOnN5bnRheGVycm9yKGxzLCBtc2cpCgkJCXNlbGY6bGV4ZXJyb3IobHMsIG1zZywgbHMudC50b2tlbikKCQllbmQKCgkJZnVuY3Rpb24gbHVhWDpjdXJySXNOZXdsaW5lKGxzKQoJCQlyZXR1cm4gbHMuY3VycmVudCA9PSAiXG4iIG9yIGxzLmN1cnJlbnQgPT0gIlxyIgoJCWVuZAoKCQlmdW5jdGlvbiBsdWFYOmluY2xpbmVudW1iZXIobHMpCgkJCWxvY2FsIG9sZCA9IGxzLmN1cnJlbnQKCQkJc2VsZjpuZXh0YyhscykKCQkJaWYgc2VsZjpjdXJySXNOZXdsaW5lKGxzKSBhbmQgbHMuY3VycmVudCB+PSBvbGQgdGhlbgoJCQkJc2VsZjpuZXh0YyhscykKCQkJZW5kCgkJCWxzLmxpbmVudW1iZXIgPSBscy5saW5lbnVtYmVyICsgMQoJCQlpZiBscy5saW5lbnVtYmVyID49IHNlbGYuTUFYX0lOVCB0aGVuCgkJCQlzZWxmOnN5bnRheGVycm9yKGxzLCAiY2h1bmsgaGFzIHRvbyBtYW55IGxpbmVzIikKCQkJZW5kCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVg6c2V0aW5wdXQoTCwgbHMsIHosIHNvdXJjZSkKCQkJaWYgbm90IGxzIHRoZW4gbHMgPSB7fSBlbmQKCQkJaWYgbm90IGxzLmxvb2thaGVhZCB0aGVuIGxzLmxvb2thaGVhZCA9IHt9IGVuZAoJCQlpZiBub3QgbHMudCB0aGVuIGxzLnQgPSB7fSBlbmQKCQkJbHMuZGVjcG9pbnQgPSAiLiIKCQkJbHMuTCA9IEwKCQkJbHMubG9va2FoZWFkLnRva2VuID0gIlRLX0VPUyIgCgkJCWxzLnogPSB6CgkJCWxzLmZzID0gbmlsCgkJCWxzLmxpbmVudW1iZXIgPSAxCgkJCWxzLmxhc3RsaW5lID0gMQoJCQlscy5zb3VyY2UgPSBzb3VyY2UKCQkJc2VsZjpuZXh0YyhscykKCQllbmQKCgkJZnVuY3Rpb24gbHVhWDpjaGVja19uZXh0KGxzLCBzZXQpCgkJCWlmIG5vdCBzdHJpbmcuZmluZChzZXQsIGxzLmN1cnJlbnQsIDEsIDEpIHRoZW4KCQkJCXJldHVybiBmYWxzZQoJCQllbmQKCQkJc2VsZjpzYXZlX2FuZF9uZXh0KGxzKQoJCQlyZXR1cm4gdHJ1ZQoJCWVuZAoKCQlmdW5jdGlvbiBsdWFYOm5leHQobHMpCgkJCWxzLmxhc3RsaW5lID0gbHMubGluZW51bWJlcgoJCQlpZiBscy5sb29rYWhlYWQudG9rZW4gfj0gIlRLX0VPUyIgdGhlbgoJCQkJLS0gdGhpcyBtdXN0IGJlIGNvcHktYnktdmFsdWUKCQkJCWxzLnQuc2VtaW5mbyA9IGxzLmxvb2thaGVhZC5zZW1pbmZvIAoJCQkJbHMudC50b2tlbiA9IGxzLmxvb2thaGVhZC50b2tlbgoJCQkJbHMubG9va2FoZWFkLnRva2VuID0gIlRLX0VPUyIgCgkJCWVsc2UKCQkJCWxzLnQudG9rZW4gPSBzZWxmOmxsZXgobHMsIGxzLnQpIAoJCQllbmQKCQllbmQKCgkJZnVuY3Rpb24gbHVhWDpsb29rYWhlYWQobHMpCgoJCQlscy5sb29rYWhlYWQudG9rZW4gPSBzZWxmOmxsZXgobHMsIGxzLmxvb2thaGVhZCkKCQllbmQKCgkJZnVuY3Rpb24gbHVhWDpuZXh0YyhscykKCQkJbG9jYWwgYyA9IGx1YVo6emdldGMobHMueikKCQkJbHMuY3VycmVudCA9IGMKCQkJcmV0dXJuIGMKCQllbmQKCgkJZnVuY3Rpb24gbHVhWDpzYXZlKGxzLCBjKQoJCQlsb2NhbCBidWZmID0gbHMuYnVmZgoJCQlscy5idWZmID0gYnVmZi4uYwoJCWVuZAoKCQlmdW5jdGlvbiBsdWFYOnNhdmVfYW5kX25leHQobHMpCgkJCXNlbGY6c2F2ZShscywgbHMuY3VycmVudCkKCQkJcmV0dXJuIHNlbGY6bmV4dGMobHMpCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVg6c3RyMmQocykKCQkJbG9jYWwgcmVzdWx0ID0gdG9udW1iZXIocykKCQkJaWYgcmVzdWx0IHRoZW4gcmV0dXJuIHJlc3VsdCBlbmQKCQkJaWYgc3RyaW5nLmxvd2VyKHN0cmluZy5zdWIocywgMSwgMikpID09ICIweCIgdGhlbgoJCQkJcmVzdWx0ID0gdG9udW1iZXIocywgMTYpCgkJCQlpZiByZXN1bHQgdGhlbiByZXR1cm4gcmVzdWx0IGVuZAoJCQllbmQKCQkJcmV0dXJuIG5pbAoJCWVuZAoKCQlmdW5jdGlvbiBsdWFYOmJ1ZmZyZXBsYWNlKGxzLCBmcm9tLCB0bykKCQkJbG9jYWwgcmVzdWx0LCBidWZmID0gIiIsIGxzLmJ1ZmYKCQkJZm9yIHAgPSAxLCAjYnVmZiBkbwoJCQkJbG9jYWwgYyA9IHN0cmluZy5zdWIoYnVmZiwgcCwgcCkKCQkJCWlmIGMgPT0gZnJvbSB0aGVuIGMgPSB0byBlbmQKCQkJCXJlc3VsdCA9IHJlc3VsdC4uYwoJCQllbmQKCQkJbHMuYnVmZiA9IHJlc3VsdAoJCWVuZAoKCQlmdW5jdGlvbiBsdWFYOnRyeWRlY3BvaW50KGxzLCBUb2tlbikKCQkJbG9jYWwgb2xkID0gbHMuZGVjcG9pbnQKCQkJc2VsZjpidWZmcmVwbGFjZShscywgb2xkLCBscy5kZWNwb2ludCkKCQkJbG9jYWwgc2VtaW5mbyA9IHNlbGY6c3RyMmQobHMuYnVmZikKCQkJVG9rZW4uc2VtaW5mbyA9IHNlbWluZm8KCQkJaWYgbm90IHNlbWluZm8gdGhlbgoJCQkJc2VsZjpidWZmcmVwbGFjZShscywgbHMuZGVjcG9pbnQsICIuIikKCQkJCXNlbGY6bGV4ZXJyb3IobHMsICJtYWxmb3JtZWQgbnVtYmVyIiwgIlRLX05VTUJFUiIpCgkJCWVuZAoJCWVuZAoKCQlmdW5jdGlvbiBsdWFYOnJlYWRfbnVtZXJhbChscywgVG9rZW4pCgkJCXJlcGVhdAoJCQkJc2VsZjpzYXZlX2FuZF9uZXh0KGxzKQoJCQl1bnRpbCBzdHJpbmcuZmluZChscy5jdXJyZW50LCAiJUQiKSBhbmQgbHMuY3VycmVudCB+PSAiLiIKCQkJaWYgc2VsZjpjaGVja19uZXh0KGxzLCAiRWUiKSB0aGVuCgkJCQlzZWxmOmNoZWNrX25leHQobHMsICIrLSIpCgkJCWVuZAoJCQl3aGlsZSBzdHJpbmcuZmluZChscy5jdXJyZW50LCAiXiV3JCIpIG9yIGxzLmN1cnJlbnQgPT0gIl8iIGRvCgkJCQlzZWxmOnNhdmVfYW5kX25leHQobHMpCgkJCWVuZAoJCQlzZWxmOmJ1ZmZyZXBsYWNlKGxzLCAiLiIsIGxzLmRlY3BvaW50KQoJCQlsb2NhbCBzZW1pbmZvID0gc2VsZjpzdHIyZChscy5idWZmKQoJCQlUb2tlbi5zZW1pbmZvID0gc2VtaW5mbwoJCQlpZiBub3Qgc2VtaW5mbyB0aGVuCgkJCQlzZWxmOnRyeWRlY3BvaW50KGxzLCBUb2tlbikgCgkJCWVuZAoJCWVuZAoKCQlmdW5jdGlvbiBsdWFYOnNraXBfc2VwKGxzKQoJCQlsb2NhbCBjb3VudCA9IDAKCQkJbG9jYWwgcyA9IGxzLmN1cnJlbnQKCQkJc2VsZjpzYXZlX2FuZF9uZXh0KGxzKQoJCQl3aGlsZSBscy5jdXJyZW50ID09ICI9IiBkbwoJCQkJc2VsZjpzYXZlX2FuZF9uZXh0KGxzKQoJCQkJY291bnQgPSBjb3VudCArIDEKCQkJZW5kCgkJCXJldHVybiAobHMuY3VycmVudCA9PSBzKSBhbmQgY291bnQgb3IgKC1jb3VudCkgLSAxCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVg6cmVhZF9sb25nX3N0cmluZyhscywgVG9rZW4sIHNlcCkKCQkJbG9jYWwgY29udCA9IDAKCQkJc2VsZjpzYXZlX2FuZF9uZXh0KGxzKQoJCQlpZiBzZWxmOmN1cnJJc05ld2xpbmUobHMpIHRoZW4KCQkJCXNlbGY6aW5jbGluZW51bWJlcihscykKCQkJZW5kCgkJCXdoaWxlIHRydWUgZG8KCQkJCWxvY2FsIGMgPSBscy5jdXJyZW50CgkJCQlpZiBjID09ICJFT1oiIHRoZW4KCQkJCQlzZWxmOmxleGVycm9yKGxzLCBUb2tlbiBhbmQgInVuZmluaXNoZWQgbG9uZyBzdHJpbmciIG9yCgkJCQkJCSJ1bmZpbmlzaGVkIGxvbmcgY29tbWVudCIsICJUS19FT1MiKQoJCQkJZWxzZWlmIGMgPT0gIlsiIHRoZW4KCQkJCQlpZiBzZWxmLkxVQV9DT01QQVRfTFNUUiB0aGVuCgkJCQkJCWlmIHNlbGY6c2tpcF9zZXAobHMpID09IHNlcCB0aGVuCgkJCQkJCQlzZWxmOnNhdmVfYW5kX25leHQobHMpCgkJCQkJCQljb250ID0gY29udCArIDEKCQkJCQkJCWlmIHNlbGYuTFVBX0NPTVBBVF9MU1RSID09IDEgdGhlbgoJCQkJCQkJCWlmIHNlcCA9PSAwIHRoZW4KCQkJCQkJCQkJc2VsZjpsZXhlcnJvcihscywgIm5lc3Rpbmcgb2YgW1suLi5dXSBpcyBkZXByZWNhdGVkIiwgIlsiKQoJCQkJCQkJCWVuZAoJCQkJCQkJZW5kCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJZWxzZWlmIGMgPT0gIl0iIHRoZW4KCQkJCQlpZiBzZWxmOnNraXBfc2VwKGxzKSA9PSBzZXAgdGhlbgoJCQkJCQlzZWxmOnNhdmVfYW5kX25leHQobHMpCgkJCQkJCWlmIHNlbGYuTFVBX0NPTVBBVF9MU1RSIGFuZCBzZWxmLkxVQV9DT01QQVRfTFNUUiA9PSAyIHRoZW4KCQkJCQkJCWNvbnQgPSBjb250IC0gMQoJCQkJCQkJaWYgc2VwID09IDAgYW5kIGNvbnQgPj0gMCB0aGVuIGJyZWFrIGVuZAoJCQkJCQllbmQKCQkJCQkJYnJlYWsKCQkJCQllbmQKCQkJCWVsc2VpZiBzZWxmOmN1cnJJc05ld2xpbmUobHMpIHRoZW4KCQkJCQlzZWxmOnNhdmUobHMsICJcbiIpCgkJCQkJc2VsZjppbmNsaW5lbnVtYmVyKGxzKQoJCQkJCWlmIG5vdCBUb2tlbiB0aGVuIGxzLmJ1ZmYgPSAiIiBlbmQKCQkJCWVsc2UKCQkJCQlpZiBUb2tlbiB0aGVuCgkJCQkJCXNlbGY6c2F2ZV9hbmRfbmV4dChscykKCQkJCQllbHNlCgkJCQkJCXNlbGY6bmV4dGMobHMpCgkJCQkJZW5kCgkJCQllbmQKCQkJZW5kCgkJCWlmIFRva2VuIHRoZW4KCQkJCWxvY2FsIHAgPSAzICsgc2VwCgkJCQlUb2tlbi5zZW1pbmZvID0gc3RyaW5nLnN1Yihscy5idWZmLCBwLCAtcCkKCQkJZW5kCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVg6cmVhZF9zdHJpbmcobHMsIGRlbCwgVG9rZW4pCgkJCXNlbGY6c2F2ZV9hbmRfbmV4dChscykKCQkJd2hpbGUgbHMuY3VycmVudCB+PSBkZWwgZG8KCQkJCWxvY2FsIGMgPSBscy5jdXJyZW50CgkJCQlpZiBjID09ICJFT1oiIHRoZW4KCQkJCQlzZWxmOmxleGVycm9yKGxzLCAidW5maW5pc2hlZCBzdHJpbmciLCAiVEtfRU9TIikKCQkJCWVsc2VpZiBzZWxmOmN1cnJJc05ld2xpbmUobHMpIHRoZW4KCQkJCQlzZWxmOmxleGVycm9yKGxzLCAidW5maW5pc2hlZCBzdHJpbmciLCAiVEtfU1RSSU5HIikKCQkJCWVsc2VpZiBjID09ICJcXCIgdGhlbgoJCQkJCWMgPSBzZWxmOm5leHRjKGxzKQoJCQkJCWlmIHNlbGY6Y3VycklzTmV3bGluZShscykgdGhlbiAKCQkJCQkJc2VsZjpzYXZlKGxzLCAiXG4iKQoJCQkJCQlzZWxmOmluY2xpbmVudW1iZXIobHMpCgkJCQkJZWxzZWlmIGMgfj0gIkVPWiIgdGhlbgoJCQkJCQlsb2NhbCBpID0gc3RyaW5nLmZpbmQoImFiZm5ydHYiLCBjLCAxLCAxKQoJCQkJCQlpZiBpIHRoZW4KCQkJCQkJCXNlbGY6c2F2ZShscywgc3RyaW5nLnN1YigiXGFcYlxmXG5cclx0XHYiLCBpLCBpKSkKCQkJCQkJCXNlbGY6bmV4dGMobHMpCgkJCQkJCWVsc2VpZiBub3Qgc3RyaW5nLmZpbmQoYywgIiVkIikgdGhlbgoJCQkJCQkJc2VsZjpzYXZlX2FuZF9uZXh0KGxzKQoJCQkJCQllbHNlCgkJCQkJCQljLCBpID0gMCwgMAoJCQkJCQkJcmVwZWF0CgkJCQkJCQkJYyA9IDEwICogYyArIGxzLmN1cnJlbnQKCQkJCQkJCQlzZWxmOm5leHRjKGxzKQoJCQkJCQkJCWkgPSBpICsgMQoJCQkJCQkJdW50aWwgaSA+PSAzIG9yIG5vdCBzdHJpbmcuZmluZChscy5jdXJyZW50LCAiJWQiKQoJCQkJCQkJaWYgYyA+IDI1NSB0aGVuCgkJCQkJCQkJc2VsZjpsZXhlcnJvcihscywgImVzY2FwZSBzZXF1ZW5jZSB0b28gbGFyZ2UiLCAiVEtfU1RSSU5HIikKCQkJCQkJCWVuZAoJCQkJCQkJc2VsZjpzYXZlKGxzLCBzdHJpbmcuY2hhcihjKSkKCQkJCQkJZW5kCgkJCQkJZW5kCgkJCQllbHNlCgkJCQkJc2VsZjpzYXZlX2FuZF9uZXh0KGxzKQoJCQkJZW5kCgkJCWVuZAoJCQlzZWxmOnNhdmVfYW5kX25leHQobHMpCgkJCVRva2VuLnNlbWluZm8gPSBzdHJpbmcuc3ViKGxzLmJ1ZmYsIDIsIC0yKQoJCWVuZAoKCQlmdW5jdGlvbiBsdWFYOmxsZXgobHMsIFRva2VuKQoJCQlscy5idWZmID0gIiIKCQkJd2hpbGUgdHJ1ZSBkbwoJCQkJbG9jYWwgYyA9IGxzLmN1cnJlbnQKCQkJCWlmIHNlbGY6Y3VycklzTmV3bGluZShscykgdGhlbgoJCQkJCXNlbGY6aW5jbGluZW51bWJlcihscykKCQkJCWVsc2VpZiBjID09ICItIiB0aGVuCgkJCQkJYyA9IHNlbGY6bmV4dGMobHMpCgkJCQkJaWYgYyB+PSAiLSIgdGhlbiByZXR1cm4gIi0iIGVuZAoJCQkJCWxvY2FsIHNlcCA9IC0xCgkJCQkJaWYgc2VsZjpuZXh0YyhscykgPT0gJ1snIHRoZW4KCQkJCQkJc2VwID0gc2VsZjpza2lwX3NlcChscykKCQkJCQkJbHMuYnVmZiA9ICIiCgkJCQkJZW5kCgkJCQkJaWYgc2VwID49IDAgdGhlbgoJCQkJCQlzZWxmOnJlYWRfbG9uZ19zdHJpbmcobHMsIG5pbCwgc2VwKQoJCQkJCQlscy5idWZmID0gIiIKCQkJCQllbHNlCgkJCQkJCXdoaWxlIG5vdCBzZWxmOmN1cnJJc05ld2xpbmUobHMpIGFuZCBscy5jdXJyZW50IH49ICJFT1oiIGRvCgkJCQkJCQlzZWxmOm5leHRjKGxzKQoJCQkJCQllbmQKCQkJCQllbmQKCQkJCWVsc2VpZiBjID09ICJbIiB0aGVuCgkJCQkJbG9jYWwgc2VwID0gc2VsZjpza2lwX3NlcChscykKCQkJCQlpZiBzZXAgPj0gMCB0aGVuCgkJCQkJCXNlbGY6cmVhZF9sb25nX3N0cmluZyhscywgVG9rZW4sIHNlcCkKCQkJCQkJcmV0dXJuICJUS19TVFJJTkciCgkJCQkJZWxzZWlmIHNlcCA9PSAtMSB0aGVuCgkJCQkJCXJldHVybiAiWyIKCQkJCQllbHNlCgkJCQkJCXNlbGY6bGV4ZXJyb3IobHMsICJpbnZhbGlkIGxvbmcgc3RyaW5nIGRlbGltaXRlciIsICJUS19TVFJJTkciKQoJCQkJCWVuZAoJCQkJZWxzZWlmIGMgPT0gIj0iIHRoZW4KCQkJCQljID0gc2VsZjpuZXh0YyhscykKCQkJCQlpZiBjIH49ICI9IiB0aGVuIHJldHVybiAiPSIKCQkJCQllbHNlIHNlbGY6bmV4dGMobHMpOyByZXR1cm4gIlRLX0VRIiBlbmQKCQkJCWVsc2VpZiBjID09ICI8IiB0aGVuCgkJCQkJYyA9IHNlbGY6bmV4dGMobHMpCgkJCQkJaWYgYyB+PSAiPSIgdGhlbiByZXR1cm4gIjwiCgkJCQkJZWxzZSBzZWxmOm5leHRjKGxzKTsgcmV0dXJuICJUS19MRSIgZW5kCgkJCQllbHNlaWYgYyA9PSAiPiIgdGhlbgoJCQkJCWMgPSBzZWxmOm5leHRjKGxzKQoJCQkJCWlmIGMgfj0gIj0iIHRoZW4gcmV0dXJuICI+IgoJCQkJCWVsc2Ugc2VsZjpuZXh0Yyhscyk7IHJldHVybiAiVEtfR0UiIGVuZAoJCQkJZWxzZWlmIGMgPT0gIn4iIHRoZW4KCQkJCQljID0gc2VsZjpuZXh0YyhscykKCQkJCQlpZiBjIH49ICI9IiB0aGVuIHJldHVybiAifiIKCQkJCQllbHNlIHNlbGY6bmV4dGMobHMpOyByZXR1cm4gIlRLX05FIiBlbmQKCQkJCWVsc2VpZiBjID09ICJcIiIgb3IgYyA9PSAiJyIgdGhlbgoJCQkJCXNlbGY6cmVhZF9zdHJpbmcobHMsIGMsIFRva2VuKQoJCQkJCXJldHVybiAiVEtfU1RSSU5HIgoJCQkJZWxzZWlmIGMgPT0gIi4iIHRoZW4KCQkJCQljID0gc2VsZjpzYXZlX2FuZF9uZXh0KGxzKQoJCQkJCWlmIHNlbGY6Y2hlY2tfbmV4dChscywgIi4iKSB0aGVuCgkJCQkJCWlmIHNlbGY6Y2hlY2tfbmV4dChscywgIi4iKSB0aGVuCgkJCQkJCQlyZXR1cm4gIlRLX0RPVFMiCgkJCQkJCWVsc2UgcmV0dXJuICJUS19DT05DQVQiCgkJCQkJCWVuZAoJCQkJCWVsc2VpZiBub3Qgc3RyaW5nLmZpbmQoYywgIiVkIikgdGhlbgoJCQkJCQlyZXR1cm4gIi4iCgkJCQkJZWxzZQoJCQkJCQlzZWxmOnJlYWRfbnVtZXJhbChscywgVG9rZW4pCgkJCQkJCXJldHVybiAiVEtfTlVNQkVSIgoJCQkJCWVuZAoJCQkJZWxzZWlmIGMgPT0gIkVPWiIgdGhlbgoJCQkJCXJldHVybiAiVEtfRU9TIgoJCQkJZWxzZQoJCQkJCWlmIHN0cmluZy5maW5kKGMsICIlcyIpIHRoZW4KCQkJCQkJc2VsZjpuZXh0YyhscykKCQkJCQllbHNlaWYgc3RyaW5nLmZpbmQoYywgIiVkIikgdGhlbgoJCQkJCQlzZWxmOnJlYWRfbnVtZXJhbChscywgVG9rZW4pCgkJCQkJCXJldHVybiAiVEtfTlVNQkVSIgoJCQkJCWVsc2VpZiBzdHJpbmcuZmluZChjLCAiW18lYV0iKSB0aGVuCgkJCQkJCXJlcGVhdAoJCQkJCQkJYyA9IHNlbGY6c2F2ZV9hbmRfbmV4dChscykKCQkJCQkJdW50aWwgYyA9PSAiRU9aIiBvciBub3Qgc3RyaW5nLmZpbmQoYywgIltfJXddIikKCQkJCQkJbG9jYWwgdHMgPSBscy5idWZmCgkJCQkJCWxvY2FsIHRvayA9IHNlbGYuZW51bXNbdHNdCgkJCQkJCWlmIHRvayB0aGVuIHJldHVybiB0b2sgZW5kCgkJCQkJCVRva2VuLnNlbWluZm8gPSB0cwoJCQkJCQlyZXR1cm4gIlRLX05BTUUiCgkJCQkJZWxzZQoJCQkJCQlzZWxmOm5leHRjKGxzKQoJCQkJCQlyZXR1cm4gYwoJCQkJCWVuZAoJCQkJZW5kCgkJCWVuZAoJCWVuZAoKCQlsdWFQLk9wTW9kZSA9IHsgaUFCQyA9IDAsIGlBQnggPSAxLCBpQXNCeCA9IDIgfQoKCQlsdWFQLlNJWkVfQyAgPSA5CgkJbHVhUC5TSVpFX0IgID0gOQoJCWx1YVAuU0laRV9CeCA9IGx1YVAuU0laRV9DICsgbHVhUC5TSVpFX0IKCQlsdWFQLlNJWkVfQSAgPSA4CgoJCWx1YVAuU0laRV9PUCA9IDYKCgkJbHVhUC5QT1NfT1AgPSAwCgkJbHVhUC5QT1NfQSAgPSBsdWFQLlBPU19PUCArIGx1YVAuU0laRV9PUAoJCWx1YVAuUE9TX0MgID0gbHVhUC5QT1NfQSArIGx1YVAuU0laRV9BCgkJbHVhUC5QT1NfQiAgPSBsdWFQLlBPU19DICsgbHVhUC5TSVpFX0MKCQlsdWFQLlBPU19CeCA9IGx1YVAuUE9TX0MKCgkJbHVhUC5NQVhBUkdfQnggID0gbWF0aC5sZGV4cCgxLCBsdWFQLlNJWkVfQngpIC0gMQoJCWx1YVAuTUFYQVJHX3NCeCA9IG1hdGguZmxvb3IobHVhUC5NQVhBUkdfQnggLyAyKQoKCQlsdWFQLk1BWEFSR19BID0gbWF0aC5sZGV4cCgxLCBsdWFQLlNJWkVfQSkgLSAxCgkJbHVhUC5NQVhBUkdfQiA9IG1hdGgubGRleHAoMSwgbHVhUC5TSVpFX0IpIC0gMQoJCWx1YVAuTUFYQVJHX0MgPSBtYXRoLmxkZXhwKDEsIGx1YVAuU0laRV9DKSAtIDEKCgkJZnVuY3Rpb24gbHVhUDpHRVRfT1BDT0RFKGkpIHJldHVybiBzZWxmLlJPcENvZGVbaS5PUF0gZW5kCgkJZnVuY3Rpb24gbHVhUDpTRVRfT1BDT0RFKGksIG8pIGkuT1AgPSBzZWxmLk9wQ29kZVtvXSBlbmQKCgkJZnVuY3Rpb24gbHVhUDpHRVRBUkdfQShpKSByZXR1cm4gaS5BIGVuZAoJCWZ1bmN0aW9uIGx1YVA6U0VUQVJHX0EoaSwgdSkgaS5BID0gdSBlbmQKCgkJZnVuY3Rpb24gbHVhUDpHRVRBUkdfQihpKSByZXR1cm4gaS5CIGVuZAoJCWZ1bmN0aW9uIGx1YVA6U0VUQVJHX0IoaSwgYikgaS5CID0gYiBlbmQKCgkJZnVuY3Rpb24gbHVhUDpHRVRBUkdfQyhpKSByZXR1cm4gaS5DIGVuZAoJCWZ1bmN0aW9uIGx1YVA6U0VUQVJHX0MoaSwgYikgaS5DID0gYiBlbmQKCgkJZnVuY3Rpb24gbHVhUDpHRVRBUkdfQngoaSkgcmV0dXJuIGkuQnggZW5kCgkJZnVuY3Rpb24gbHVhUDpTRVRBUkdfQngoaSwgYikgaS5CeCA9IGIgZW5kCgoJCWZ1bmN0aW9uIGx1YVA6R0VUQVJHX3NCeChpKSByZXR1cm4gaS5CeCAtIHNlbGYuTUFYQVJHX3NCeCBlbmQKCQlmdW5jdGlvbiBsdWFQOlNFVEFSR19zQngoaSwgYikgaS5CeCA9IGIgKyBzZWxmLk1BWEFSR19zQnggZW5kCgoJCWZ1bmN0aW9uIGx1YVA6Q1JFQVRFX0FCQyhvLGEsYixjKQoJCQlyZXR1cm4ge09QID0gc2VsZi5PcENvZGVbb10sIEEgPSBhLCBCID0gYiwgQyA9IGN9CgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVA6Q1JFQVRFX0FCeChvLGEsYmMpCgkJCXJldHVybiB7T1AgPSBzZWxmLk9wQ29kZVtvXSwgQSA9IGEsIEJ4ID0gYmN9CgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVA6Q1JFQVRFX0luc3QoYykKCQkJbG9jYWwgbyA9IGMgJSA2NAoJCQljID0gKGMgLSBvKSAvIDY0CgkJCWxvY2FsIGEgPSBjICUgMjU2CgkJCWMgPSAoYyAtIGEpIC8gMjU2CgkJCXJldHVybiBzZWxmOkNSRUFURV9BQngobywgYSwgYykKCQllbmQKCgkJZnVuY3Rpb24gbHVhUDpJbnN0cnVjdGlvbihpKQoJCQlpZiBpLkJ4IHRoZW4KCQkJCWkuQyA9IGkuQnggJSA1MTIKCQkJCWkuQiA9IChpLkJ4IC0gaS5DKSAvIDUxMgoJCQllbmQKCQkJbG9jYWwgSSA9IGkuQSAqIDY0ICsgaS5PUAoJCQlsb2NhbCBjMCA9IEkgJSAyNTYKCQkJSSA9IGkuQyAqIDY0ICsgKEkgLSBjMCkgLyAyNTYKCQkJbG9jYWwgYzEgPSBJICUgMjU2CgkJCUkgPSBpLkIgKiAxMjggKyAoSSAtIGMxKSAvIDI1NgoJCQlsb2NhbCBjMiA9IEkgJSAyNTYKCQkJbG9jYWwgYzMgPSAoSSAtIGMyKSAvIDI1NgoJCQlyZXR1cm4gc3RyaW5nLmNoYXIoYzAsIGMxLCBjMiwgYzMpCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVA6RGVjb2RlSW5zdCh4KQoJCQlsb2NhbCBieXRlID0gc3RyaW5nLmJ5dGUKCQkJbG9jYWwgaSA9IHt9CgkJCWxvY2FsIEkgPSBieXRlKHgsIDEpCgkJCWxvY2FsIG9wID0gSSAlIDY0CgkJCWkuT1AgPSBvcAoJCQlJID0gYnl0ZSh4LCAyKSAqIDQgKyAoSSAtIG9wKSAvIDY0CgkJCWxvY2FsIGEgPSBJICUgMjU2CgkJCWkuQSA9IGEKCQkJSSA9IGJ5dGUoeCwgMykgKiA0ICsgKEkgLSBhKSAvIDI1NgoJCQlsb2NhbCBjID0gSSAlIDUxMgoJCQlpLkMgPSBjCgkJCWkuQiA9IGJ5dGUoeCwgNCkgKiAyICsgKEkgLSBjKSAvIDUxMgoJCQlsb2NhbCBvcG1vZGUgPSBzZWxmLk9wTW9kZVt0b251bWJlcihzdHJpbmcuc3ViKHNlbGYub3Btb2Rlc1tvcCArIDFdLCA3LCA3KSldCgkJCWlmIG9wbW9kZSB+PSAiaUFCQyIgdGhlbgoJCQkJaS5CeCA9IGkuQiAqIDUxMiArIGkuQwoJCQllbmQKCQkJcmV0dXJuIGkKCQllbmQKCgkJbHVhUC5CSVRSSyA9IG1hdGgubGRleHAoMSwgbHVhUC5TSVpFX0IgLSAxKQoKCQlmdW5jdGlvbiBsdWFQOklTSyh4KSByZXR1cm4geCA+PSBzZWxmLkJJVFJLIGVuZAoKCQlmdW5jdGlvbiBsdWFQOklOREVYSyhyKSByZXR1cm4geCAtIHNlbGYuQklUUksgZW5kCgoJCWx1YVAuTUFYSU5ERVhSSyA9IGx1YVAuQklUUksgLSAxCgoJCWZ1bmN0aW9uIGx1YVA6UktBU0soeCkgcmV0dXJuIHggKyBzZWxmLkJJVFJLIGVuZAoKCQlsdWFQLk5PX1JFRyA9IGx1YVAuTUFYQVJHX0EKCgkJbHVhUC5vcG5hbWVzID0ge30gCgkJbHVhUC5PcENvZGUgPSB7fSAKCQlsdWFQLlJPcENvZGUgPSB7fSAKCgkJbG9jYWwgaSA9IDAKCQlmb3IgdiBpbiBzdHJpbmcuZ21hdGNoKFtbCk1PVkUgTE9BREsgTE9BREJPT0wgTE9BRE5JTCBHRVRVUFZBTApHRVRHTE9CQUwgR0VUVEFCTEUgU0VUR0xPQkFMIFNFVFVQVkFMIFNFVFRBQkxFCk5FV1RBQkxFIFNFTEYgQUREIFNVQiBNVUwKRElWIE1PRCBQT1cgVU5NIE5PVApMRU4gQ09OQ0FUIEpNUCBFUSBMVApMRSBURVNUIFRFU1RTRVQgQ0FMTCBUQUlMQ0FMTApSRVRVUk4gRk9STE9PUCBGT1JQUkVQIFRGT1JMT09QIFNFVExJU1QKQ0xPU0UgQ0xPU1VSRSBWQVJBUkcKXV0sICIlUysiKSBkbwoJCQlsb2NhbCBuID0gIk9QXyIuLnYKCQkJbHVhUC5vcG5hbWVzW2ldID0gdgoJCQlsdWFQLk9wQ29kZVtuXSA9IGkKCQkJbHVhUC5ST3BDb2RlW2ldID0gbgoJCQlpID0gaSArIDEKCQllbmQKCQlsdWFQLk5VTV9PUENPREVTID0gaQoJCWx1YVAuT3BBcmdNYXNrID0geyBPcEFyZ04gPSAwLCBPcEFyZ1UgPSAxLCBPcEFyZ1IgPSAyLCBPcEFyZ0sgPSAzIH0KCgkJZnVuY3Rpb24gbHVhUDpnZXRPcE1vZGUobSkKCQkJcmV0dXJuIHNlbGYub3Btb2Rlc1tzZWxmLk9wQ29kZVttXV0gJSA0CgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVA6Z2V0Qk1vZGUobSkKCQkJcmV0dXJuIG1hdGguZmxvb3Ioc2VsZi5vcG1vZGVzW3NlbGYuT3BDb2RlW21dXSAvIDE2KSAlIDQKCQllbmQKCgkJZnVuY3Rpb24gbHVhUDpnZXRDTW9kZShtKQoJCQlyZXR1cm4gbWF0aC5mbG9vcihzZWxmLm9wbW9kZXNbc2VsZi5PcENvZGVbbV1dIC8gNCkgJSA0CgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVA6dGVzdEFNb2RlKG0pCgkJCXJldHVybiBtYXRoLmZsb29yKHNlbGYub3Btb2Rlc1tzZWxmLk9wQ29kZVttXV0gLyA2NCkgJSAyCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVA6dGVzdFRNb2RlKG0pCgkJCXJldHVybiBtYXRoLmZsb29yKHNlbGYub3Btb2Rlc1tzZWxmLk9wQ29kZVttXV0gLyAxMjgpCgkJZW5kCgoJCWx1YVAuTEZJRUxEU19QRVJfRkxVU0ggPSA1MAoKCQlsb2NhbCBmdW5jdGlvbiBvcG1vZGUodCwgYSwgYiwgYywgbSkKCQkJbG9jYWwgbHVhUCA9IGx1YVAKCQkJcmV0dXJuIHQgKiAxMjggKyBhICogNjQgKwoJCQkJbHVhUC5PcEFyZ01hc2tbYl0gKiAxNiArIGx1YVAuT3BBcmdNYXNrW2NdICogNCArIGx1YVAuT3BNb2RlW21dCgkJZW5kCgoKCQlsdWFQLm9wbW9kZXMgPSB7CgkJCW9wbW9kZSgwLCAxLCAiT3BBcmdLIiwgIk9wQXJnTiIsICJpQUJ4IiksIAoJCQlvcG1vZGUoMCwgMSwgIk9wQXJnVSIsICJPcEFyZ1UiLCAiaUFCQyIpLCAgCgkJCW9wbW9kZSgwLCAxLCAiT3BBcmdSIiwgIk9wQXJnTiIsICJpQUJDIiksICAgIAoJCQlvcG1vZGUoMCwgMSwgIk9wQXJnVSIsICJPcEFyZ04iLCAiaUFCQyIpLCAgICAgCgkJCW9wbW9kZSgwLCAxLCAiT3BBcmdLIiwgIk9wQXJnTiIsICJpQUJ4IiksICAgCgkJCW9wbW9kZSgwLCAxLCAiT3BBcmdSIiwgIk9wQXJnSyIsICJpQUJDIiksICAgICAKCQkJb3Btb2RlKDAsIDAsICJPcEFyZ0siLCAiT3BBcmdOIiwgImlBQngiKSwgICAgCgkJCW9wbW9kZSgwLCAwLCAiT3BBcmdVIiwgIk9wQXJnTiIsICJpQUJDIiksICAgIAoJCQlvcG1vZGUoMCwgMCwgIk9wQXJnSyIsICJPcEFyZ0siLCAiaUFCQyIpLCAgICAgCgkJCW9wbW9kZSgwLCAxLCAiT3BBcmdVIiwgIk9wQXJnVSIsICJpQUJDIiksICAKCQkJb3Btb2RlKDAsIDEsICJPcEFyZ1IiLCAiT3BBcmdLIiwgImlBQkMiKSwgIAoJCQlvcG1vZGUoMCwgMSwgIk9wQXJnSyIsICJPcEFyZ0siLCAiaUFCQyIpLCAgIAoJCQlvcG1vZGUoMCwgMSwgIk9wQXJnSyIsICJPcEFyZ0siLCAiaUFCQyIpLCAgICAKCQkJb3Btb2RlKDAsIDEsICJPcEFyZ0siLCAiT3BBcmdLIiwgImlBQkMiKSwgICAgCgkJCW9wbW9kZSgwLCAxLCAiT3BBcmdLIiwgIk9wQXJnSyIsICJpQUJDIiksICAgCgkJCW9wbW9kZSgwLCAxLCAiT3BBcmdLIiwgIk9wQXJnSyIsICJpQUJDIiksICAgIAoJCQlvcG1vZGUoMCwgMSwgIk9wQXJnSyIsICJPcEFyZ0siLCAiaUFCQyIpLCAgICAgCgkJCW9wbW9kZSgwLCAxLCAiT3BBcmdSIiwgIk9wQXJnTiIsICJpQUJDIiksICAgIAoJCQlvcG1vZGUoMCwgMSwgIk9wQXJnUiIsICJPcEFyZ04iLCAiaUFCQyIpLCAgICAgCgkJCW9wbW9kZSgwLCAxLCAiT3BBcmdSIiwgIk9wQXJnTiIsICJpQUJDIiksICAgCgkJCW9wbW9kZSgwLCAxLCAiT3BBcmdSIiwgIk9wQXJnUiIsICJpQUJDIiksCgkJCW9wbW9kZSgwLCAwLCAiT3BBcmdSIiwgIk9wQXJnTiIsICJpQXNCeCIpLCAKCQkJb3Btb2RlKDEsIDAsICJPcEFyZ0siLCAiT3BBcmdLIiwgImlBQkMiKSwgCgkJCW9wbW9kZSgxLCAwLCAiT3BBcmdLIiwgIk9wQXJnSyIsICJpQUJDIiksIAoJCQlvcG1vZGUoMSwgMCwgIk9wQXJnSyIsICJPcEFyZ0siLCAiaUFCQyIpLCAKCQkJb3Btb2RlKDEsIDEsICJPcEFyZ1IiLCAiT3BBcmdVIiwgImlBQkMiKSwgICAKCQkJb3Btb2RlKDEsIDEsICJPcEFyZ1IiLCAiT3BBcmdVIiwgImlBQkMiKSwgICAKCQkJb3Btb2RlKDAsIDEsICJPcEFyZ1UiLCAiT3BBcmdVIiwgImlBQkMiKSwgIAoJCQlvcG1vZGUoMCwgMSwgIk9wQXJnVSIsICJPcEFyZ1UiLCAiaUFCQyIpLCAgCgkJCW9wbW9kZSgwLCAwLCAiT3BBcmdVIiwgIk9wQXJnTiIsICJpQUJDIiksICAgCgkJCW9wbW9kZSgwLCAxLCAiT3BBcmdSIiwgIk9wQXJnTiIsICJpQXNCeCIpLCAgCgkJCW9wbW9kZSgwLCAxLCAiT3BBcmdSIiwgIk9wQXJnTiIsICJpQXNCeCIpLCAgIAoJCQlvcG1vZGUoMSwgMCwgIk9wQXJnTiIsICJPcEFyZ1UiLCAiaUFCQyIpLCAgICAKCQkJb3Btb2RlKDAsIDAsICJPcEFyZ1UiLCAiT3BBcmdVIiwgImlBQkMiKSwgICAKCQkJb3Btb2RlKDAsIDAsICJPcEFyZ04iLCAiT3BBcmdOIiwgImlBQkMiKSwgICAgIAoJCQlvcG1vZGUoMCwgMSwgIk9wQXJnVSIsICJPcEFyZ04iLCAiaUFCeCIpLCAgCgkJCW9wbW9kZSgwLCAxLCAiT3BBcmdVIiwgIk9wQXJnTiIsICJpQUJDIiksICAgICAKCQl9CgoJCWx1YVAub3Btb2Rlc1swXSA9CgkJCW9wbW9kZSgwLCAxLCAiT3BBcmdSIiwgIk9wQXJnTiIsICJpQUJDIikKCgkJbHVhVS5MVUFfU0lHTkFUVVJFID0gIlwyN0x1YSIKCgkJbHVhVS5MVUFfVE5VTUJFUiAgPSAzCgkJbHVhVS5MVUFfVFNUUklORyAgPSA0CgkJbHVhVS5MVUFfVE5JTCAgICAgPSAwCgkJbHVhVS5MVUFfVEJPT0xFQU4gPSAxCgkJbHVhVS5MVUFfVE5PTkUgICAgPSAtMQoKCQlsdWFVLkxVQUNfVkVSU0lPTiAgICA9IDB4NTEgICAgCgkJbHVhVS5MVUFDX0ZPUk1BVCAgICAgPSAwICAgICAKCQlsdWFVLkxVQUNfSEVBREVSU0laRSA9IDEyICAgCgoJCWZ1bmN0aW9uIGx1YVU6bWFrZV9zZXRTKCkKCQkJbG9jYWwgYnVmZiA9IHt9CgkJCWJ1ZmYuZGF0YSA9ICIiCgkJCWxvY2FsIHdyaXRlciA9CgkJCQlmdW5jdGlvbihzLCBidWZmKQoJCQkJCWlmIG5vdCBzIHRoZW4gcmV0dXJuIDAgZW5kCgkJCQkJYnVmZi5kYXRhID0gYnVmZi5kYXRhLi5zCgkJCQkJcmV0dXJuIDAKCQkJCWVuZAoJCQlyZXR1cm4gd3JpdGVyLCBidWZmCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVU6bWFrZV9zZXRGKGZpbGVuYW1lKQoJCQlsb2NhbCBidWZmID0ge30KCQkJYnVmZi5oID0gaW8ub3BlbihmaWxlbmFtZSwgIndiIikKCQkJaWYgbm90IGJ1ZmYuaCB0aGVuIHJldHVybiBuaWwgZW5kCgkJCWxvY2FsIHdyaXRlciA9CgkJCQlmdW5jdGlvbihzLCBidWZmKSAgCgkJCQkJaWYgbm90IGJ1ZmYuaCB0aGVuIHJldHVybiAwIGVuZAoJCQkJCWlmIG5vdCBzIHRoZW4KCQkJCQlpZiBidWZmLmg6Y2xvc2UoKSB0aGVuIHJldHVybiAwIGVuZAoJCQkJZWxzZQoJCQkJCWlmIGJ1ZmYuaDp3cml0ZShzKSB0aGVuIHJldHVybiAwIGVuZAoJCQkJZW5kCgkJCQkJcmV0dXJuIDEKCQkJCWVuZAoJCQlyZXR1cm4gd3JpdGVyLCBidWZmCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVU6dHR5cGUobykKCQkJbG9jYWwgdHQgPSB0eXBlKG8udmFsdWUpCgkJCWlmIHR0ID09ICJudW1iZXIiIHRoZW4gcmV0dXJuIHNlbGYuTFVBX1ROVU1CRVIKCQkJZWxzZWlmIHR0ID09ICJzdHJpbmciIHRoZW4gcmV0dXJuIHNlbGYuTFVBX1RTVFJJTkcKCQkJZWxzZWlmIHR0ID09ICJuaWwiIHRoZW4gcmV0dXJuIHNlbGYuTFVBX1ROSUwKCQkJZWxzZWlmIHR0ID09ICJib29sZWFuIiB0aGVuIHJldHVybiBzZWxmLkxVQV9UQk9PTEVBTgoJCQllbHNlCgkJCQlyZXR1cm4gc2VsZi5MVUFfVE5PTkUKCQkJZW5kCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVU6ZnJvbV9kb3VibGUoeCkKCQkJbG9jYWwgZnVuY3Rpb24gZ3JhYl9ieXRlKHYpCgkJCQlsb2NhbCBjID0gdiAlIDI1NgoJCQkJcmV0dXJuICh2IC0gYykgLyAyNTYsIHN0cmluZy5jaGFyKGMpCgkJCWVuZAoJCQlsb2NhbCBzaWduID0gMAoJCQlpZiB4IDwgMCB0aGVuIHNpZ24gPSAxOyB4ID0gLXggZW5kCgkJCWxvY2FsIG1hbnRpc3NhLCBleHBvbmVudCA9IG1hdGguZnJleHAoeCkKCQkJaWYgeCA9PSAwIHRoZW4gCgkJCQltYW50aXNzYSwgZXhwb25lbnQgPSAwLCAwCgkJCWVsc2VpZiB4ID09IDEvMCB0aGVuCgkJCQltYW50aXNzYSwgZXhwb25lbnQgPSAwLCAyMDQ3CgkJCWVsc2UKCQkJCW1hbnRpc3NhID0gKG1hbnRpc3NhICogMiAtIDEpICogbWF0aC5sZGV4cCgwLjUsIDUzKQoJCQkJZXhwb25lbnQgPSBleHBvbmVudCArIDEwMjIKCQkJZW5kCgkJCWxvY2FsIHYsIGJ5dGUgPSAiIgoJCQl4ID0gbWF0aC5mbG9vcihtYW50aXNzYSkKCQkJZm9yIGkgPSAxLDYgZG8KCQkJCXgsIGJ5dGUgPSBncmFiX2J5dGUoeCk7IHYgPSB2Li5ieXRlIAoJCQllbmQKCQkJeCwgYnl0ZSA9IGdyYWJfYnl0ZShleHBvbmVudCAqIDE2ICsgeCk7IHYgPSB2Li5ieXRlCgkJCXgsIGJ5dGUgPSBncmFiX2J5dGUoc2lnbiAqIDEyOCArIHgpOyB2ID0gdi4uYnl0ZSAKCQkJcmV0dXJuIHYKCQllbmQKCgkJZnVuY3Rpb24gbHVhVTpmcm9tX2ludCh4KQoJCQlsb2NhbCB2ID0gIiIKCQkJeCA9IG1hdGguZmxvb3IoeCkKCQkJaWYgeCA8IDAgdGhlbiB4ID0gNDI5NDk2NzI5NiArIHggZW5kICAKCQkJZm9yIGkgPSAxLCA0IGRvCgkJCQlsb2NhbCBjID0geCAlIDI1NgoJCQkJdiA9IHYuLnN0cmluZy5jaGFyKGMpOyB4ID0gbWF0aC5mbG9vcih4IC8gMjU2KQoJCQllbmQKCQkJcmV0dXJuIHYKCQllbmQKCgkJZnVuY3Rpb24gbHVhVTpEdW1wQmxvY2soYiwgRCkKCQkJaWYgRC5zdGF0dXMgPT0gMCB0aGVuCgkJCQlELnN0YXR1cyA9IEQud3JpdGUoYiwgRC5kYXRhKQoJCQllbmQKCQllbmQKCgkJZnVuY3Rpb24gbHVhVTpEdW1wQ2hhcih5LCBEKQoJCQlzZWxmOkR1bXBCbG9jayhzdHJpbmcuY2hhcih5KSwgRCkKCQllbmQKCgkJZnVuY3Rpb24gbHVhVTpEdW1wSW50KHgsIEQpCgkJCXNlbGY6RHVtcEJsb2NrKHNlbGY6ZnJvbV9pbnQoeCksIEQpCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVU6RHVtcFNpemVUKHgsIEQpCgkJCXNlbGY6RHVtcEJsb2NrKHNlbGY6ZnJvbV9pbnQoeCksIEQpCgkJCWlmIHNpemVfc2l6ZV90ID09IDggdGhlbgoJCQkJc2VsZjpEdW1wQmxvY2soc2VsZjpmcm9tX2ludCgwKSwgRCkKCQkJZW5kCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVU6RHVtcE51bWJlcih4LCBEKQoJCQlzZWxmOkR1bXBCbG9jayhzZWxmOmZyb21fZG91YmxlKHgpLCBEKQoJCWVuZAoKCQlmdW5jdGlvbiBsdWFVOkR1bXBTdHJpbmcocywgRCkKCQkJaWYgcyA9PSBuaWwgdGhlbgoJCQkJc2VsZjpEdW1wU2l6ZVQoMCwgRCkKCQkJZWxzZQoJCQkJcyA9IHMuLiJcMCIKCQkJCXNlbGY6RHVtcFNpemVUKCNzLCBEKQoJCQkJc2VsZjpEdW1wQmxvY2socywgRCkKCQkJZW5kCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVU6RHVtcENvZGUoZiwgRCkKCQkJbG9jYWwgbiA9IGYuc2l6ZWNvZGUKCQkJc2VsZjpEdW1wSW50KG4sIEQpCgkJCWZvciBpID0gMCwgbiAtIDEgZG8KCQkJCXNlbGY6RHVtcEJsb2NrKGx1YVA6SW5zdHJ1Y3Rpb24oZi5jb2RlW2ldKSwgRCkKCQkJZW5kCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVU6RHVtcENvbnN0YW50cyhmLCBEKQoJCQlsb2NhbCBuID0gZi5zaXplawoJCQlzZWxmOkR1bXBJbnQobiwgRCkKCQkJZm9yIGkgPSAwLCBuIC0gMSBkbwoJCQkJbG9jYWwgbyA9IGYua1tpXSAKCQkJCWxvY2FsIHR0ID0gc2VsZjp0dHlwZShvKQoJCQkJc2VsZjpEdW1wQ2hhcih0dCwgRCkKCQkJCWlmIHR0ID09IHNlbGYuTFVBX1ROSUwgdGhlbgoJCQkJZWxzZWlmIHR0ID09IHNlbGYuTFVBX1RCT09MRUFOIHRoZW4KCQkJCQlzZWxmOkR1bXBDaGFyKG8udmFsdWUgYW5kIDEgb3IgMCwgRCkKCQkJCWVsc2VpZiB0dCA9PSBzZWxmLkxVQV9UTlVNQkVSIHRoZW4KCQkJCQlzZWxmOkR1bXBOdW1iZXIoby52YWx1ZSwgRCkKCQkJCWVsc2VpZiB0dCA9PSBzZWxmLkxVQV9UU1RSSU5HIHRoZW4KCQkJCQlzZWxmOkR1bXBTdHJpbmcoby52YWx1ZSwgRCkKCQkJCWVsc2UKCgkJCQllbmQKCQkJZW5kCgkJCW4gPSBmLnNpemVwCgkJCXNlbGY6RHVtcEludChuLCBEKQoJCQlmb3IgaSA9IDAsIG4gLSAxIGRvCgkJCQlzZWxmOkR1bXBGdW5jdGlvbihmLnBbaV0sIGYuc291cmNlLCBEKQoJCQllbmQKCQllbmQKCgkJZnVuY3Rpb24gbHVhVTpEdW1wRGVidWcoZiwgRCkKCQkJbG9jYWwgbgoJCQluID0gRC5zdHJpcCBhbmQgMCBvciBmLnNpemVsaW5laW5mbyAgICAgICAgCgkJCS0td2FzIER1bXBWZWN0b3IKCQkJc2VsZjpEdW1wSW50KG4sIEQpCgkJCWZvciBpID0gMCwgbiAtIDEgZG8KCQkJCXNlbGY6RHVtcEludChmLmxpbmVpbmZvW2ldLCBEKQoJCQllbmQKCQkJbiA9IEQuc3RyaXAgYW5kIDAgb3IgZi5zaXplbG9jdmFycyAgICAgIAoJCQlzZWxmOkR1bXBJbnQobiwgRCkKCQkJZm9yIGkgPSAwLCBuIC0gMSBkbwoJCQkJc2VsZjpEdW1wU3RyaW5nKGYubG9jdmFyc1tpXS52YXJuYW1lLCBEKQoJCQkJc2VsZjpEdW1wSW50KGYubG9jdmFyc1tpXS5zdGFydHBjLCBEKQoJCQkJc2VsZjpEdW1wSW50KGYubG9jdmFyc1tpXS5lbmRwYywgRCkKCQkJZW5kCgkJCW4gPSBELnN0cmlwIGFuZCAwIG9yIGYuc2l6ZXVwdmFsdWVzICAgICAKCQkJc2VsZjpEdW1wSW50KG4sIEQpCgkJCWZvciBpID0gMCwgbiAtIDEgZG8KCQkJCXNlbGY6RHVtcFN0cmluZyhmLnVwdmFsdWVzW2ldLCBEKQoJCQllbmQKCQllbmQKCgkJZnVuY3Rpb24gbHVhVTpEdW1wRnVuY3Rpb24oZiwgcCwgRCkKCQkJbG9jYWwgc291cmNlID0gZi5zb3VyY2UKCQkJaWYgc291cmNlID09IHAgb3IgRC5zdHJpcCB0aGVuIHNvdXJjZSA9IG5pbCBlbmQKCQkJc2VsZjpEdW1wU3RyaW5nKHNvdXJjZSwgRCkKCQkJc2VsZjpEdW1wSW50KGYubGluZURlZmluZWQsIEQpCgkJCXNlbGY6RHVtcEludChmLmxhc3RsaW5lZGVmaW5lZCwgRCkKCQkJc2VsZjpEdW1wQ2hhcihmLm51cHMsIEQpCgkJCXNlbGY6RHVtcENoYXIoZi5udW1wYXJhbXMsIEQpCgkJCXNlbGY6RHVtcENoYXIoZi5pc192YXJhcmcsIEQpCgkJCXNlbGY6RHVtcENoYXIoZi5tYXhzdGFja3NpemUsIEQpCgkJCXNlbGY6RHVtcENvZGUoZiwgRCkKCQkJc2VsZjpEdW1wQ29uc3RhbnRzKGYsIEQpCgkJCXNlbGY6RHVtcERlYnVnKGYsIEQpCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVU6RHVtcEhlYWRlcihEKQoJCQlsb2NhbCBoID0gc2VsZjpoZWFkZXIoKQoJCQlhc3NlcnQoI2ggPT0gc2VsZi5MVUFDX0hFQURFUlNJWkUpCgkJCXNlbGY6RHVtcEJsb2NrKGgsIEQpCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YVU6aGVhZGVyKCkKCQkJbG9jYWwgeCA9IDEKCQkJcmV0dXJuIHNlbGYuTFVBX1NJR05BVFVSRS4uCgkJCQlzdHJpbmcuY2hhcigKCQkJCQlzZWxmLkxVQUNfVkVSU0lPTiwKCQkJCQlzZWxmLkxVQUNfRk9STUFULAoJCQkJCXgsICAgICAgICAgICAgICAgICAgCgkJCQkJNCwgICAgICAgICAgICAgICAgICAgIAoJCQkJCXNpemVfc2l6ZV90LCAgICAgICAgICAgICAgICAKCQkJCQk0LCAgICAgICAgICAgICAgICAgIAoJCQkJCTgsICAgICAgICAgICAgICAgICAgCgkJCQkJMCkgICAgICAgICAgICAgICAgICAKCQllbmQKCgkJZnVuY3Rpb24gbHVhVTpkdW1wKEwsIGYsIHcsIGRhdGEsIHN0cmlwKQoJCQlsb2NhbCBEID0ge30gCgkJCUQuTCA9IEwKCQkJRC53cml0ZSA9IHcKCQkJRC5kYXRhID0gZGF0YQoJCQlELnN0cmlwID0gc3RyaXAKCQkJRC5zdGF0dXMgPSAwCgkJCXNlbGY6RHVtcEhlYWRlcihEKQoJCQlzZWxmOkR1bXBGdW5jdGlvbihmLCBuaWwsIEQpCgkJCUQud3JpdGUobmlsLCBELmRhdGEpCgkJCXJldHVybiBELnN0YXR1cwoJCWVuZAoJCWx1YUsuTUFYU1RBQ0sgPSAyNTAKCgkJZnVuY3Rpb24gbHVhSzp0dGlzbnVtYmVyKG8pCgkJCWlmIG8gdGhlbiByZXR1cm4gdHlwZShvLnZhbHVlKSA9PSAibnVtYmVyIiBlbHNlIHJldHVybiBmYWxzZSBlbmQKCQllbmQKCQlmdW5jdGlvbiBsdWFLOm52YWx1ZShvKSByZXR1cm4gby52YWx1ZSBlbmQKCQlmdW5jdGlvbiBsdWFLOnNldG5pbHZhbHVlKG8pIG8udmFsdWUgPSBuaWwgZW5kCgkJZnVuY3Rpb24gbHVhSzpzZXRzdmFsdWUobywgeCkgby52YWx1ZSA9IHggZW5kCgkJbHVhSy5zZXRudmFsdWUgPSBsdWFLLnNldHN2YWx1ZQoJCWx1YUsuc2V0aHZhbHVlID0gbHVhSy5zZXRzdmFsdWUKCQlsdWFLLnNldGJ2YWx1ZSA9IGx1YUsuc2V0c3ZhbHVlCgoJCWZ1bmN0aW9uIGx1YUs6bnVtYWRkKGEsIGIpIHJldHVybiBhICsgYiBlbmQKCQlmdW5jdGlvbiBsdWFLOm51bXN1YihhLCBiKSByZXR1cm4gYSAtIGIgZW5kCgkJZnVuY3Rpb24gbHVhSzpudW1tdWwoYSwgYikgcmV0dXJuIGEgKiBiIGVuZAoJCWZ1bmN0aW9uIGx1YUs6bnVtZGl2KGEsIGIpIHJldHVybiBhIC8gYiBlbmQKCQlmdW5jdGlvbiBsdWFLOm51bW1vZChhLCBiKSByZXR1cm4gYSAlIGIgZW5kCgkJZnVuY3Rpb24gbHVhSzpudW1wb3coYSwgYikgcmV0dXJuIGEgXiBiIGVuZAoJCWZ1bmN0aW9uIGx1YUs6bnVtdW5tKGEpIHJldHVybiAtYSBlbmQKCQlmdW5jdGlvbiBsdWFLOm51bWlzbmFuKGEpIHJldHVybiBub3QgYSA9PSBhIGVuZAoKCQlsdWFLLk5PX0pVTVAgPSAtMQoKCQlsdWFLLkJpbk9wciA9IHsKCQkJT1BSX0FERCA9IDAsIE9QUl9TVUIgPSAxLCBPUFJfTVVMID0gMiwgT1BSX0RJViA9IDMsIE9QUl9NT0QgPSA0LCBPUFJfUE9XID0gNSwKCQkJT1BSX0NPTkNBVCA9IDYsCgkJCU9QUl9ORSA9IDcsIE9QUl9FUSA9IDgsCgkJCU9QUl9MVCA9IDksIE9QUl9MRSA9IDEwLCBPUFJfR1QgPSAxMSwgT1BSX0dFID0gMTIsCgkJCU9QUl9BTkQgPSAxMywgT1BSX09SID0gMTQsCgkJCU9QUl9OT0JJTk9QUiA9IDE1LAoJCX0KCgkJbHVhSy5Vbk9wciA9IHsKCQkJT1BSX01JTlVTID0gMCwgT1BSX05PVCA9IDEsIE9QUl9MRU4gPSAyLCBPUFJfTk9VTk9QUiA9IDMKCQl9CgoJCWZ1bmN0aW9uIGx1YUs6Z2V0Y29kZShmcywgZSkKCQkJcmV0dXJuIGZzLmYuY29kZVtlLmluZm9dCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YUs6Y29kZUFzQngoZnMsIG8sIEEsIHNCeCkKCQkJcmV0dXJuIHNlbGY6Y29kZUFCeChmcywgbywgQSwgc0J4ICsgbHVhUC5NQVhBUkdfc0J4KQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBzZXQgdGhlIGV4cGRlc2MgZSBpbnN0cnVjdGlvbiBmb3IgbXVsdGlwbGUgcmV0dXJucywgd2FzIGEgbWFjcm8KCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOnNldG11bHRyZXQoZnMsIGUpCgkJCXNlbGY6c2V0cmV0dXJucyhmcywgZSwgbHVhWS5MVUFfTVVMVFJFVCkKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gdGhlcmUgaXMgYSBqdW1wIGlmIHBhdGNoIGxpc3RzIGFyZSBub3QgaWRlbnRpY2FsLCB3YXMgYSBtYWNybwoJCS0tICogdXNlZCBpbiBsdWFLOmV4cDJyZWcoKSwgbHVhSzpleHAyYW55cmVnKCksIGx1YUs6ZXhwMnZhbCgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhSzpoYXNqdW1wcyhlKQoJCQlyZXR1cm4gZS50IH49IGUuZgoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSB0cnVlIGlmIHRoZSBleHByZXNzaW9uIGlzIGEgY29uc3RhbnQgbnVtYmVyIChmb3IgY29uc3RhbnQgZm9sZGluZykKCQktLSAqIHVzZWQgaW4gY29uc3Rmb2xkaW5nKCksIGluZml4KCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmlzbnVtZXJhbChlKQoJCQlyZXR1cm4gZS5rID09ICJWS05VTSIgYW5kIGUudCA9PSBzZWxmLk5PX0pVTVAgYW5kIGUuZiA9PSBzZWxmLk5PX0pVTVAKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gY29kZXMgbG9hZGluZyBvZiBuaWwsIG9wdGltaXphdGlvbiBkb25lIGlmIGNvbnNlY3V0aXZlIGxvY2F0aW9ucwoJCS0tICogdXNlZCBpbiBsdWFLOmRpc2NoYXJnZTJyZWcoKSwgKGxwYXJzZXIpIGx1YVk6YWRqdXN0X2Fzc2lnbigpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhSzpfbmlsKGZzLCBmcm9tLCBuKQoJCQlpZiBmcy5wYyA+IGZzLmxhc3R0YXJnZXQgdGhlbiAgLS0gbm8ganVtcHMgdG8gY3VycmVudCBwb3NpdGlvbj8KCQkJCWlmIGZzLnBjID09IDAgdGhlbiAgLS0gZnVuY3Rpb24gc3RhcnQ/CgkJCQkJaWYgZnJvbSA+PSBmcy5uYWN0dmFyIHRoZW4KCQkJCQkJcmV0dXJuICAtLSBwb3NpdGlvbnMgYXJlIGFscmVhZHkgY2xlYW4KCQkJCQllbmQKCQkJCWVsc2UKCQkJCQlsb2NhbCBwcmV2aW91cyA9IGZzLmYuY29kZVtmcy5wYyAtIDFdCgkJCQkJaWYgbHVhUDpHRVRfT1BDT0RFKHByZXZpb3VzKSA9PSAiT1BfTE9BRE5JTCIgdGhlbgoJCQkJCQlsb2NhbCBwZnJvbSA9IGx1YVA6R0VUQVJHX0EocHJldmlvdXMpCgkJCQkJCWxvY2FsIHB0byA9IGx1YVA6R0VUQVJHX0IocHJldmlvdXMpCgkJCQkJCWlmIHBmcm9tIDw9IGZyb20gYW5kIGZyb20gPD0gcHRvICsgMSB0aGVuICAtLSBjYW4gY29ubmVjdCBib3RoPwoJCQkJCQkJaWYgZnJvbSArIG4gLSAxID4gcHRvIHRoZW4KCQkJCQkJCQlsdWFQOlNFVEFSR19CKHByZXZpb3VzLCBmcm9tICsgbiAtIDEpCgkJCQkJCQllbmQKCQkJCQkJCXJldHVybgoJCQkJCQllbmQKCQkJCQllbmQKCQkJCWVuZAoJCQllbmQKCQkJc2VsZjpjb2RlQUJDKGZzLCAiT1BfTE9BRE5JTCIsIGZyb20sIGZyb20gKyBuIC0gMSwgMCkgIC0tIGVsc2Ugbm8gb3B0aW1pemF0aW9uCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIGluIG11bHRpcGxlIGxvY2F0aW9ucwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6anVtcChmcykKCQkJbG9jYWwganBjID0gZnMuanBjICAtLSBzYXZlIGxpc3Qgb2YganVtcHMgdG8gaGVyZQoJCQlmcy5qcGMgPSBzZWxmLk5PX0pVTVAKCQkJbG9jYWwgaiA9IHNlbGY6Y29kZUFzQngoZnMsICJPUF9KTVAiLCAwLCBzZWxmLk5PX0pVTVApCgkJCWogPSBzZWxmOmNvbmNhdChmcywgaiwganBjKSAgLS0ga2VlcCB0aGVtIG9uIGhvbGQKCQkJcmV0dXJuIGoKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gY29kZXMgYSBSRVRVUk4gaW5zdHJ1Y3Rpb24KCQktLSAqIHVzZWQgaW4gbHVhWTpjbG9zZV9mdW5jKCksIGx1YVk6cmV0c3RhdCgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhSzpyZXQoZnMsIGZpcnN0LCBucmV0KQoJCQlzZWxmOmNvZGVBQkMoZnMsICJPUF9SRVRVUk4iLCBmaXJzdCwgbnJldCArIDEsIDApCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIGluIGx1YUs6anVtcG9uY29uZCgpLCBsdWFLOmNvZGVjb21wKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmNvbmRqdW1wKGZzLCBvcCwgQSwgQiwgQykKCQkJc2VsZjpjb2RlQUJDKGZzLCBvcCwgQSwgQiwgQykKCQkJcmV0dXJuIHNlbGY6anVtcChmcykKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0KCQktLSAqIHVzZWQgaW4gbHVhSzpwYXRjaGxpc3RhdXgoKSwgbHVhSzpjb25jYXQoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6Zml4anVtcChmcywgcGMsIGRlc3QpCgkJCWxvY2FsIGptcCA9IGZzLmYuY29kZVtwY10KCQkJbG9jYWwgb2Zmc2V0ID0gZGVzdCAtIChwYyArIDEpCgkJCWx1YV9hc3NlcnQoZGVzdCB+PSBzZWxmLk5PX0pVTVApCgkJCWlmIG1hdGguYWJzKG9mZnNldCkgPiBsdWFQLk1BWEFSR19zQnggdGhlbgoJCQkJbHVhWDpzeW50YXhlcnJvcihmcy5scywgImNvbnRyb2wgc3RydWN0dXJlIHRvbyBsb25nIikKCQkJZW5kCgkJCWx1YVA6U0VUQVJHX3NCeChqbXAsIG9mZnNldCkKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gcmV0dXJucyBjdXJyZW50ICdwYycgYW5kIG1hcmtzIGl0IGFzIGEganVtcCB0YXJnZXQgKHRvIGF2b2lkIHdyb25nCgkJLS0gb3B0aW1pemF0aW9ucyB3aXRoIGNvbnNlY3V0aXZlIGluc3RydWN0aW9ucyBub3QgaW4gdGhlIHNhbWUgYmFzaWMgYmxvY2spLgoJCS0tICogdXNlZCBpbiBtdWx0aXBsZSBsb2NhdGlvbnMKCQktLSAqIGZzLmxhc3R0YXJnZXQgdGVzdGVkIG9ubHkgYnkgbHVhSzpfbmlsKCkgd2hlbiBvcHRpbWl6aW5nIE9QX0xPQUROSUwKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmdldGxhYmVsKGZzKQoJCQlmcy5sYXN0dGFyZ2V0ID0gZnMucGMKCQkJcmV0dXJuIGZzLnBjCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIGluIGx1YUs6bmVlZF92YWx1ZSgpLCBsdWFLOnJlbW92ZXZhbHVlcygpLCBsdWFLOnBhdGNobGlzdGF1eCgpLAoJCS0tICAgbHVhSzpjb25jYXQoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6Z2V0anVtcChmcywgcGMpCgkJCWxvY2FsIG9mZnNldCA9IGx1YVA6R0VUQVJHX3NCeChmcy5mLmNvZGVbcGNdKQoJCQlpZiBvZmZzZXQgPT0gc2VsZi5OT19KVU1QIHRoZW4gIC0tIHBvaW50IHRvIGl0c2VsZiByZXByZXNlbnRzIGVuZCBvZiBsaXN0CgkJCQlyZXR1cm4gc2VsZi5OT19KVU1QICAtLSBlbmQgb2YgbGlzdAoJCQllbHNlCgkJCQlyZXR1cm4gKHBjICsgMSkgKyBvZmZzZXQgIC0tIHR1cm4gb2Zmc2V0IGludG8gYWJzb2x1dGUgcG9zaXRpb24KCQkJZW5kCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIGluIGx1YUs6bmVlZF92YWx1ZSgpLCBsdWFLOnBhdGNodGVzdHJlZygpLCBsdWFLOmludmVydGp1bXAoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6Z2V0anVtcGNvbnRyb2woZnMsIHBjKQoJCQlsb2NhbCBwaSA9IGZzLmYuY29kZVtwY10KCQkJbG9jYWwgcHBpID0gZnMuZi5jb2RlW3BjIC0gMV0KCQkJaWYgcGMgPj0gMSBhbmQgbHVhUDp0ZXN0VE1vZGUobHVhUDpHRVRfT1BDT0RFKHBwaSkpIH49IDAgdGhlbgoJCQkJcmV0dXJuIHBwaQoJCQllbHNlCgkJCQlyZXR1cm4gcGkKCQkJZW5kCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIGNoZWNrIHdoZXRoZXIgbGlzdCBoYXMgYW55IGp1bXAgdGhhdCBkbyBub3QgcHJvZHVjZSBhIHZhbHVlCgkJLS0gKG9yIHByb2R1Y2UgYW4gaW52ZXJ0ZWQgdmFsdWUpCgkJLS0gKiByZXR1cm4gdmFsdWUgY2hhbmdlZCB0byBib29sZWFuCgkJLS0gKiB1c2VkIG9ubHkgaW4gbHVhSzpleHAycmVnKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOm5lZWRfdmFsdWUoZnMsIGxpc3QpCgkJCXdoaWxlIGxpc3Qgfj0gc2VsZi5OT19KVU1QIGRvCgkJCQlsb2NhbCBpID0gc2VsZjpnZXRqdW1wY29udHJvbChmcywgbGlzdCkKCQkJCWlmIGx1YVA6R0VUX09QQ09ERShpKSB+PSAiT1BfVEVTVFNFVCIgdGhlbiByZXR1cm4gdHJ1ZSBlbmQKCQkJCWxpc3QgPSBzZWxmOmdldGp1bXAoZnMsIGxpc3QpCgkJCWVuZAoJCQlyZXR1cm4gZmFsc2UgIC0tIG5vdCBmb3VuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLQoJCS0tICogdXNlZCBpbiBsdWFLOnJlbW92ZXZhbHVlcygpLCBsdWFLOnBhdGNobGlzdGF1eCgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhSzpwYXRjaHRlc3RyZWcoZnMsIG5vZGUsIHJlZykKCQkJbG9jYWwgaSA9IHNlbGY6Z2V0anVtcGNvbnRyb2woZnMsIG5vZGUpCgkJCWlmIGx1YVA6R0VUX09QQ09ERShpKSB+PSAiT1BfVEVTVFNFVCIgdGhlbgoJCQkJcmV0dXJuIGZhbHNlICAtLSBjYW5ub3QgcGF0Y2ggb3RoZXIgaW5zdHJ1Y3Rpb25zCgkJCWVuZAoJCQlpZiByZWcgfj0gbHVhUC5OT19SRUcgYW5kIHJlZyB+PSBsdWFQOkdFVEFSR19CKGkpIHRoZW4KCQkJCWx1YVA6U0VUQVJHX0EoaSwgcmVnKQoJCQllbHNlICAtLSBubyByZWdpc3RlciB0byBwdXQgdmFsdWUgb3IgcmVnaXN0ZXIgYWxyZWFkeSBoYXMgdGhlIHZhbHVlCgkJCQktLSBkdWUgdG8gdXNlIG9mIGEgdGFibGUgYXMgaSwgaSBjYW5ub3QgYmUgcmVwbGFjZWQgYnkgYW5vdGhlciB0YWJsZQoJCQkJLS0gc28gdGhlIGZvbGxvd2luZyBpcyByZXF1aXJlZDsgdGhlcmUgaXMgbm8gY2hhbmdlIHRvIEFSR19DCgkJCQlsdWFQOlNFVF9PUENPREUoaSwgIk9QX1RFU1QiKQoJCQkJbG9jYWwgYiA9IGx1YVA6R0VUQVJHX0IoaSkKCQkJCWx1YVA6U0VUQVJHX0EoaSwgYikKCQkJCWx1YVA6U0VUQVJHX0IoaSwgMCkKCQkJCS0tICppID0gQ1JFQVRFX0FCQyhPUF9URVNULCBHRVRBUkdfQigqaSksIDAsIEdFVEFSR19DKCppKSk7IC8qIEMgKi8KCQkJZW5kCgkJCXJldHVybiB0cnVlCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIG9ubHkgaW4gbHVhSzpjb2Rlbm90KCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOnJlbW92ZXZhbHVlcyhmcywgbGlzdCkKCQkJd2hpbGUgbGlzdCB+PSBzZWxmLk5PX0pVTVAgZG8KCQkJCXNlbGY6cGF0Y2h0ZXN0cmVnKGZzLCBsaXN0LCBsdWFQLk5PX1JFRykKCQkJCWxpc3QgPSBzZWxmOmdldGp1bXAoZnMsIGxpc3QpCgkJCWVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLQoJCS0tICogdXNlZCBpbiBsdWFLOmRpc2NoYXJnZWpwYygpLCBsdWFLOnBhdGNobGlzdCgpLCBsdWFLOmV4cDJyZWcoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6cGF0Y2hsaXN0YXV4KGZzLCBsaXN0LCB2dGFyZ2V0LCByZWcsIGR0YXJnZXQpCgkJCXdoaWxlIGxpc3Qgfj0gc2VsZi5OT19KVU1QIGRvCgkJCQlsb2NhbCBfbmV4dCA9IHNlbGY6Z2V0anVtcChmcywgbGlzdCkKCQkJCWlmIHNlbGY6cGF0Y2h0ZXN0cmVnKGZzLCBsaXN0LCByZWcpIHRoZW4KCQkJCQlzZWxmOmZpeGp1bXAoZnMsIGxpc3QsIHZ0YXJnZXQpCgkJCQllbHNlCgkJCQkJc2VsZjpmaXhqdW1wKGZzLCBsaXN0LCBkdGFyZ2V0KSAgLS0ganVtcCB0byBkZWZhdWx0IHRhcmdldAoJCQkJZW5kCgkJCQlsaXN0ID0gX25leHQKCQkJZW5kCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIG9ubHkgaW4gbHVhSzpjb2RlKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmRpc2NoYXJnZWpwYyhmcykKCQkJc2VsZjpwYXRjaGxpc3RhdXgoZnMsIGZzLmpwYywgZnMucGMsIGx1YVAuTk9fUkVHLCBmcy5wYykKCQkJZnMuanBjID0gc2VsZi5OT19KVU1QCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIGluIChscGFyc2VyKSBsdWFZOndoaWxlc3RhdCgpLCBsdWFZOnJlcGVhdHN0YXQoKSwgbHVhWTpmb3Jib2R5KCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOnBhdGNobGlzdChmcywgbGlzdCwgdGFyZ2V0KQoJCQlpZiB0YXJnZXQgPT0gZnMucGMgdGhlbgoJCQkJc2VsZjpwYXRjaHRvaGVyZShmcywgbGlzdCkKCQkJZWxzZQoJCQkJbHVhX2Fzc2VydCh0YXJnZXQgPCBmcy5wYykKCQkJCXNlbGY6cGF0Y2hsaXN0YXV4KGZzLCBsaXN0LCB0YXJnZXQsIGx1YVAuTk9fUkVHLCB0YXJnZXQpCgkJCWVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLQoJCS0tICogdXNlZCBpbiBtdWx0aXBsZSBsb2NhdGlvbnMKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOnBhdGNodG9oZXJlKGZzLCBsaXN0KQoJCQlzZWxmOmdldGxhYmVsKGZzKQoJCQlmcy5qcGMgPSBzZWxmOmNvbmNhdChmcywgZnMuanBjLCBsaXN0KQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSAqIGwxIHdhcyBhIHBvaW50ZXIsIG5vdyBsMSBpcyByZXR1cm5lZCBhbmQgY2FsbGVlIGFzc2lnbnMgdGhlIHZhbHVlCgkJLS0gKiB1c2VkIGluIG11bHRpcGxlIGxvY2F0aW9ucwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6Y29uY2F0KGZzLCBsMSwgbDIpCgkJCWlmIGwyID09IHNlbGYuTk9fSlVNUCB0aGVuIHJldHVybiBsMQoJCQllbHNlaWYgbDEgPT0gc2VsZi5OT19KVU1QIHRoZW4KCQkJCXJldHVybiBsMgoJCQllbHNlCgkJCQlsb2NhbCBsaXN0ID0gbDEKCQkJCWxvY2FsIF9uZXh0ID0gc2VsZjpnZXRqdW1wKGZzLCBsaXN0KQoJCQkJd2hpbGUgX25leHQgfj0gc2VsZi5OT19KVU1QIGRvICAtLSBmaW5kIGxhc3QgZWxlbWVudAoJCQkJCWxpc3QgPSBfbmV4dAoJCQkJCV9uZXh0ID0gc2VsZjpnZXRqdW1wKGZzLCBsaXN0KQoJCQkJZW5kCgkJCQlzZWxmOmZpeGp1bXAoZnMsIGxpc3QsIGwyKQoJCQllbmQKCQkJcmV0dXJuIGwxCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIGluIGx1YUs6cmVzZXJ2ZXJlZ3MoKSwgKGxwYXJzZXIpIGx1YVk6Zm9ybGlzdCgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhSzpjaGVja3N0YWNrKGZzLCBuKQoJCQlsb2NhbCBuZXdzdGFjayA9IGZzLmZyZWVyZWcgKyBuCgkJCWlmIG5ld3N0YWNrID4gZnMuZi5tYXhzdGFja3NpemUgdGhlbgoJCQkJaWYgbmV3c3RhY2sgPj0gc2VsZi5NQVhTVEFDSyB0aGVuCgkJCQkJbHVhWDpzeW50YXhlcnJvcihmcy5scywgImZ1bmN0aW9uIG9yIGV4cHJlc3Npb24gdG9vIGNvbXBsZXgiKQoJCQkJZW5kCgkJCQlmcy5mLm1heHN0YWNrc2l6ZSA9IG5ld3N0YWNrCgkJCWVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLQoJCS0tICogdXNlZCBpbiBtdWx0aXBsZSBsb2NhdGlvbnMKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOnJlc2VydmVyZWdzKGZzLCBuKQoJCQlzZWxmOmNoZWNrc3RhY2soZnMsIG4pCgkJCWZzLmZyZWVyZWcgPSBmcy5mcmVlcmVnICsgbgoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLQoJCS0tICogdXNlZCBpbiBsdWFLOmZyZWVleHAoKSwgbHVhSzpkaXNjaGFyZ2V2YXJzKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmZyZWVyZWcoZnMsIHJlZykKCQkJaWYgbm90IGx1YVA6SVNLKHJlZykgYW5kIHJlZyA+PSBmcy5uYWN0dmFyIHRoZW4KCQkJCWZzLmZyZWVyZWcgPSBmcy5mcmVlcmVnIC0gMQoJCQkJbHVhX2Fzc2VydChyZWcgPT0gZnMuZnJlZXJlZykKCQkJZW5kCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIGluIG11bHRpcGxlIGxvY2F0aW9ucwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6ZnJlZWV4cChmcywgZSkKCQkJaWYgZS5rID09ICJWTk9OUkVMT0MiIHRoZW4KCQkJCXNlbGY6ZnJlZXJlZyhmcywgZS5pbmZvKQoJCQllbmQKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gKiBUT0RPIE5PVEUgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgY29ycmVjdCwgc2luY2UgdGhlIGFzc2VydCBmYWlscwoJCS0tICogbHVhSF9zZXQsIHNldG9iaiBkZWxldGVkOyBkaXJlY3QgdGFibGUgYWNjZXNzIHVzZWQgaW5zdGVhZAoJCS0tICogdXNlZCBpbiBsdWFLOnN0cmluZ0soKSwgbHVhSzpudW1iZXJLKCksIGx1YUs6Ym9vbEsoKSwgbHVhSzpuaWxLKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmFkZGsoZnMsIGssIHYpCgkJCWxvY2FsIEwgPSBmcy5MCgkJCWxvY2FsIGlkeCA9IGZzLmhbay52YWx1ZV0KCQkJLS1UVmFsdWUgKmlkeCA9IGx1YUhfc2V0KEwsIGZzLT5oLCBrKTsgLyogQyAqLwoJCQlsb2NhbCBmID0gZnMuZgoJCQlpZiBzZWxmOnR0aXNudW1iZXIoaWR4KSB0aGVuCgkJCQktLVRPRE8gdGhpcyBhc3NlcnQgY3VycmVudGx5IEZBSUxTIChsYXN0IHRlc3RlZCBmb3IgNS4wLjIpCgkJCQktLWx1YV9hc3NlcnQoZnMuZi5rW3NlbGY6bnZhbHVlKGlkeCldID09IHYpCgkJCQktLWx1YV9hc3NlcnQobHVhT19yYXdlcXVhbE9iaigmZnMtPmYtPmtbY2FzdF9pbnQobnZhbHVlKGlkeCkpXSwgdikpOyAvKiBDICovCgkJCQlyZXR1cm4gc2VsZjpudmFsdWUoaWR4KQoJCQllbHNlIC0tIGNvbnN0YW50IG5vdCBmb3VuZDsgY3JlYXRlIGEgbmV3IGVudHJ5CgkJCQlpZHggPSB7fQoJCQkJc2VsZjpzZXRudmFsdWUoaWR4LCBmcy5uaykKCQkJCWZzLmhbay52YWx1ZV0gPSBpZHgKCQkJCS0tIHNldG52YWx1ZShpZHgsIGNhc3RfbnVtKGZzLT5uaykpOyAvKiBDICovCgkJCQlsdWFZOmdyb3d2ZWN0b3IoTCwgZi5rLCBmcy5uaywgZi5zaXplaywgbmlsLAoJCQkJCWx1YVAuTUFYQVJHX0J4LCAiY29uc3RhbnQgdGFibGUgb3ZlcmZsb3ciKQoJCQkJLS0gbG9vcCB0byBpbml0aWFsaXplIGVtcHR5IGYuayBwb3NpdGlvbnMgbm90IHJlcXVpcmVkCgkJCQlmLmtbZnMubmtdID0gdgoJCQkJLS0gc2V0b2JqKEwsICZmLT5rW2ZzLT5ua10sIHYpOyAvKiBDICovCgkJCQktLSBsdWFDX2JhcnJpZXIoTCwgZiwgdik7IC8qIEdDICovCgkJCQlsb2NhbCBuayA9IGZzLm5rCgkJCQlmcy5uayA9IGZzLm5rICsgMQoJCQkJcmV0dXJuIG5rCgkJCWVuZAoKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gY3JlYXRlcyBhbmQgc2V0cyBhIHN0cmluZyBvYmplY3QKCQktLSAqIHVzZWQgaW4gKGxwYXJzZXIpIGx1YVk6Y29kZXN0cmluZygpLCBsdWFZOnNpbmdsZXZhcigpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhSzpzdHJpbmdLKGZzLCBzKQoJCQlsb2NhbCBvID0ge30gIC0tIFRWYWx1ZQoJCQlzZWxmOnNldHN2YWx1ZShvLCBzKQoJCQlyZXR1cm4gc2VsZjphZGRrKGZzLCBvLCBvKQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBjcmVhdGVzIGFuZCBzZXRzIGEgbnVtYmVyIG9iamVjdAoJCS0tICogdXNlZCBpbiBsdWFLOnByZWZpeCgpIGZvciBuZWdhdGl2ZSAob3IgbmVnYXRpb24gb2YpIG51bWJlcnMKCQktLSAqIHVzZWQgaW4gKGxwYXJzZXIpIGx1YVk6c2ltcGxlZXhwKCksIGx1YVk6Zm9ybnVtKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOm51bWJlcksoZnMsIHIpCgkJCWxvY2FsIG8gPSB7fSAgLS0gVFZhbHVlCgkJCXNlbGY6c2V0bnZhbHVlKG8sIHIpCgkJCXJldHVybiBzZWxmOmFkZGsoZnMsIG8sIG8pCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIGNyZWF0ZXMgYW5kIHNldHMgYSBib29sZWFuIG9iamVjdAoJCS0tICogdXNlZCBvbmx5IGluIGx1YUs6ZXhwMlJLKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmJvb2xLKGZzLCBiKQoJCQlsb2NhbCBvID0ge30gIC0tIFRWYWx1ZQoJCQlzZWxmOnNldGJ2YWx1ZShvLCBiKQoJCQlyZXR1cm4gc2VsZjphZGRrKGZzLCBvLCBvKQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBjcmVhdGVzIGFuZCBzZXRzIGEgbmlsIG9iamVjdAoJCS0tICogdXNlZCBvbmx5IGluIGx1YUs6ZXhwMlJLKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOm5pbEsoZnMpCgkJCWxvY2FsIGssIHYgPSB7fSwge30gIC0tIFRWYWx1ZQoJCQlzZWxmOnNldG5pbHZhbHVlKHYpCgkJCS0tIGNhbm5vdCB1c2UgbmlsIGFzIGtleTsgaW5zdGVhZCB1c2UgdGFibGUgaXRzZWxmIHRvIHJlcHJlc2VudCBuaWwKCQkJc2VsZjpzZXRodmFsdWUoaywgZnMuaCkKCQkJcmV0dXJuIHNlbGY6YWRkayhmcywgaywgdikKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0KCQktLSAqIHVzZWQgaW4gbHVhSzpzZXRtdWx0cmV0KCksIChscGFyc2VyKSBsdWFZOmFkanVzdF9hc3NpZ24oKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6c2V0cmV0dXJucyhmcywgZSwgbnJlc3VsdHMpCgkJCWlmIGUuayA9PSAiVkNBTEwiIHRoZW4gIC0tIGV4cHJlc3Npb24gaXMgYW4gb3BlbiBmdW5jdGlvbiBjYWxsPwoJCQkJbHVhUDpTRVRBUkdfQyhzZWxmOmdldGNvZGUoZnMsIGUpLCBucmVzdWx0cyArIDEpCgkJCWVsc2VpZiBlLmsgPT0gIlZWQVJBUkciIHRoZW4KCQkJCWx1YVA6U0VUQVJHX0Ioc2VsZjpnZXRjb2RlKGZzLCBlKSwgbnJlc3VsdHMgKyAxKTsKCQkJCWx1YVA6U0VUQVJHX0Eoc2VsZjpnZXRjb2RlKGZzLCBlKSwgZnMuZnJlZXJlZyk7CgkJCQlsdWFLOnJlc2VydmVyZWdzKGZzLCAxKQoJCQllbmQKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0KCQktLSAqIHVzZWQgaW4gbHVhSzpkaXNjaGFyZ2V2YXJzKCksIChscGFyc2VyKSBsdWFZOmFzc2lnbm1lbnQoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6c2V0b25lcmV0KGZzLCBlKQoJCQlpZiBlLmsgPT0gIlZDQUxMIiB0aGVuICAtLSBleHByZXNzaW9uIGlzIGFuIG9wZW4gZnVuY3Rpb24gY2FsbD8KCQkJCWUuayA9ICJWTk9OUkVMT0MiCgkJCQllLmluZm8gPSBsdWFQOkdFVEFSR19BKHNlbGY6Z2V0Y29kZShmcywgZSkpCgkJCWVsc2VpZiBlLmsgPT0gIlZWQVJBUkciIHRoZW4KCQkJCWx1YVA6U0VUQVJHX0Ioc2VsZjpnZXRjb2RlKGZzLCBlKSwgMikKCQkJCWUuayA9ICJWUkVMT0NBQkxFIiAgLS0gY2FuIHJlbG9jYXRlIGl0cyBzaW1wbGUgcmVzdWx0CgkJCWVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLQoJCS0tICogdXNlZCBpbiBtdWx0aXBsZSBsb2NhdGlvbnMKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmRpc2NoYXJnZXZhcnMoZnMsIGUpCgkJCWxvY2FsIGsgPSBlLmsKCQkJaWYgayA9PSAiVkxPQ0FMIiB0aGVuCgkJCQllLmsgPSAiVk5PTlJFTE9DIgoJCQllbHNlaWYgayA9PSAiVlVQVkFMIiB0aGVuCgkJCQllLmluZm8gPSBzZWxmOmNvZGVBQkMoZnMsICJPUF9HRVRVUFZBTCIsIDAsIGUuaW5mbywgMCkKCQkJCWUuayA9ICJWUkVMT0NBQkxFIgoJCQllbHNlaWYgayA9PSAiVkdMT0JBTCIgdGhlbgoJCQkJZS5pbmZvID0gc2VsZjpjb2RlQUJ4KGZzLCAiT1BfR0VUR0xPQkFMIiwgMCwgZS5pbmZvKQoJCQkJZS5rID0gIlZSRUxPQ0FCTEUiCgkJCWVsc2VpZiBrID09ICJWSU5ERVhFRCIgdGhlbgoJCQkJc2VsZjpmcmVlcmVnKGZzLCBlLmF1eCkKCQkJCXNlbGY6ZnJlZXJlZyhmcywgZS5pbmZvKQoJCQkJZS5pbmZvID0gc2VsZjpjb2RlQUJDKGZzLCAiT1BfR0VUVEFCTEUiLCAwLCBlLmluZm8sIGUuYXV4KQoJCQkJZS5rID0gIlZSRUxPQ0FCTEUiCgkJCWVsc2VpZiBrID09ICJWVkFSQVJHIiBvciBrID09ICJWQ0FMTCIgdGhlbgoJCQkJc2VsZjpzZXRvbmVyZXQoZnMsIGUpCgkJCWVsc2UKCQkJCS0tIHRoZXJlIGlzIG9uZSB2YWx1ZSBhdmFpbGFibGUgKHNvbWV3aGVyZSkKCQkJZW5kCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIG9ubHkgaW4gbHVhSzpleHAycmVnKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmNvZGVfbGFiZWwoZnMsIEEsIGIsIGp1bXApCgkJCXNlbGY6Z2V0bGFiZWwoZnMpICAtLSB0aG9zZSBpbnN0cnVjdGlvbnMgbWF5IGJlIGp1bXAgdGFyZ2V0cwoJCQlyZXR1cm4gc2VsZjpjb2RlQUJDKGZzLCAiT1BfTE9BREJPT0wiLCBBLCBiLCBqdW1wKQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLQoJCS0tICogdXNlZCBpbiBsdWFLOmRpc2NoYXJnZTJhbnlyZWcoKSwgbHVhSzpleHAycmVnKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmRpc2NoYXJnZTJyZWcoZnMsIGUsIHJlZykKCQkJc2VsZjpkaXNjaGFyZ2V2YXJzKGZzLCBlKQoJCQlsb2NhbCBrID0gZS5rCgkJCWlmIGsgPT0gIlZOSUwiIHRoZW4KCQkJCXNlbGY6X25pbChmcywgcmVnLCAxKQoJCQllbHNlaWYgayA9PSAiVkZBTFNFIiBvciBrID09ICJWVFJVRSIgdGhlbgoJCQkJc2VsZjpjb2RlQUJDKGZzLCAiT1BfTE9BREJPT0wiLCByZWcsIChlLmsgPT0gIlZUUlVFIikgYW5kIDEgb3IgMCwgMCkKCQkJZWxzZWlmIGsgPT0gIlZLIiB0aGVuCgkJCQlzZWxmOmNvZGVBQngoZnMsICJPUF9MT0FESyIsIHJlZywgZS5pbmZvKQoJCQllbHNlaWYgayA9PSAiVktOVU0iIHRoZW4KCQkJCXNlbGY6Y29kZUFCeChmcywgIk9QX0xPQURLIiwgcmVnLCBzZWxmOm51bWJlcksoZnMsIGUubnZhbCkpCgkJCWVsc2VpZiBrID09ICJWUkVMT0NBQkxFIiB0aGVuCgkJCQlsb2NhbCBwYyA9IHNlbGY6Z2V0Y29kZShmcywgZSkKCQkJCWx1YVA6U0VUQVJHX0EocGMsIHJlZykKCQkJZWxzZWlmIGsgPT0gIlZOT05SRUxPQyIgdGhlbgoJCQkJaWYgcmVnIH49IGUuaW5mbyB0aGVuCgkJCQkJc2VsZjpjb2RlQUJDKGZzLCAiT1BfTU9WRSIsIHJlZywgZS5pbmZvLCAwKQoJCQkJZW5kCgkJCWVsc2UKCQkJCWx1YV9hc3NlcnQoZS5rID09ICJWVk9JRCIgb3IgZS5rID09ICJWSk1QIikKCQkJCXJldHVybiAgLS0gbm90aGluZyB0byBkby4uLgoJCQllbmQKCQkJZS5pbmZvID0gcmVnCgkJCWUuayA9ICJWTk9OUkVMT0MiCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIGluIGx1YUs6anVtcG9uY29uZCgpLCBsdWFLOmNvZGVub3QoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6ZGlzY2hhcmdlMmFueXJlZyhmcywgZSkKCQkJaWYgZS5rIH49ICJWTk9OUkVMT0MiIHRoZW4KCQkJCXNlbGY6cmVzZXJ2ZXJlZ3MoZnMsIDEpCgkJCQlzZWxmOmRpc2NoYXJnZTJyZWcoZnMsIGUsIGZzLmZyZWVyZWcgLSAxKQoJCQllbmQKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0KCQktLSAqIHVzZWQgaW4gbHVhSzpleHAybmV4dHJlZygpLCBsdWFLOmV4cDJhbnlyZWcoKSwgbHVhSzpzdG9yZXZhcigpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhSzpleHAycmVnKGZzLCBlLCByZWcpCgkJCXNlbGY6ZGlzY2hhcmdlMnJlZyhmcywgZSwgcmVnKQoJCQlpZiBlLmsgPT0gIlZKTVAiIHRoZW4KCQkJCWUudCA9IHNlbGY6Y29uY2F0KGZzLCBlLnQsIGUuaW5mbykgIC0tIHB1dCB0aGlzIGp1bXAgaW4gJ3QnIGxpc3QKCQkJZW5kCgkJCWlmIHNlbGY6aGFzanVtcHMoZSkgdGhlbgoJCQkJbG9jYWwgZmluYWwgIC0tIHBvc2l0aW9uIGFmdGVyIHdob2xlIGV4cHJlc3Npb24KCQkJCWxvY2FsIHBfZiA9IHNlbGYuTk9fSlVNUCAgLS0gcG9zaXRpb24gb2YgYW4gZXZlbnR1YWwgTE9BRCBmYWxzZQoJCQkJbG9jYWwgcF90ID0gc2VsZi5OT19KVU1QICAtLSBwb3NpdGlvbiBvZiBhbiBldmVudHVhbCBMT0FEIHRydWUKCQkJCWlmIHNlbGY6bmVlZF92YWx1ZShmcywgZS50KSBvciBzZWxmOm5lZWRfdmFsdWUoZnMsIGUuZikgdGhlbgoJCQkJCWxvY2FsIGZqID0gKGUuayA9PSAiVkpNUCIpIGFuZCBzZWxmLk5PX0pVTVAgb3Igc2VsZjpqdW1wKGZzKQoJCQkJCXBfZiA9IHNlbGY6Y29kZV9sYWJlbChmcywgcmVnLCAwLCAxKQoJCQkJCXBfdCA9IHNlbGY6Y29kZV9sYWJlbChmcywgcmVnLCAxLCAwKQoJCQkJCXNlbGY6cGF0Y2h0b2hlcmUoZnMsIGZqKQoJCQkJZW5kCgkJCQlmaW5hbCA9IHNlbGY6Z2V0bGFiZWwoZnMpCgkJCQlzZWxmOnBhdGNobGlzdGF1eChmcywgZS5mLCBmaW5hbCwgcmVnLCBwX2YpCgkJCQlzZWxmOnBhdGNobGlzdGF1eChmcywgZS50LCBmaW5hbCwgcmVnLCBwX3QpCgkJCWVuZAoJCQllLmYsIGUudCA9IHNlbGYuTk9fSlVNUCwgc2VsZi5OT19KVU1QCgkJCWUuaW5mbyA9IHJlZwoJCQllLmsgPSAiVk5PTlJFTE9DIgoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLQoJCS0tICogdXNlZCBpbiBtdWx0aXBsZSBsb2NhdGlvbnMKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmV4cDJuZXh0cmVnKGZzLCBlKQoJCQlzZWxmOmRpc2NoYXJnZXZhcnMoZnMsIGUpCgkJCXNlbGY6ZnJlZWV4cChmcywgZSkKCQkJc2VsZjpyZXNlcnZlcmVncyhmcywgMSkKCQkJc2VsZjpleHAycmVnKGZzLCBlLCBmcy5mcmVlcmVnIC0gMSkKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0KCQktLSAqIHVzZWQgaW4gbXVsdGlwbGUgbG9jYXRpb25zCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhSzpleHAyYW55cmVnKGZzLCBlKQoJCQlzZWxmOmRpc2NoYXJnZXZhcnMoZnMsIGUpCgkJCWlmIGUuayA9PSAiVk5PTlJFTE9DIiB0aGVuCgkJCQlpZiBub3Qgc2VsZjpoYXNqdW1wcyhlKSB0aGVuICAtLSBleHAgaXMgYWxyZWFkeSBpbiBhIHJlZ2lzdGVyCgkJCQkJcmV0dXJuIGUuaW5mbwoJCQkJZW5kCgkJCQlpZiBlLmluZm8gPj0gZnMubmFjdHZhciB0aGVuICAtLSByZWcuIGlzIG5vdCBhIGxvY2FsPwoJCQkJCXNlbGY6ZXhwMnJlZyhmcywgZSwgZS5pbmZvKSAgLS0gcHV0IHZhbHVlIG9uIGl0CgkJCQkJcmV0dXJuIGUuaW5mbwoJCQkJZW5kCgkJCWVuZAoJCQlzZWxmOmV4cDJuZXh0cmVnKGZzLCBlKSAgLS0gZGVmYXVsdAoJCQlyZXR1cm4gZS5pbmZvCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIGluIGx1YUs6ZXhwMlJLKCksIGx1YUs6cHJlZml4KCksIGx1YUs6cG9zZml4KCkKCQktLSAqIHVzZWQgaW4gKGxwYXJzZXIpIGx1YVk6eWluZGV4KCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmV4cDJ2YWwoZnMsIGUpCgkJCWlmIHNlbGY6aGFzanVtcHMoZSkgdGhlbgoJCQkJc2VsZjpleHAyYW55cmVnKGZzLCBlKQoJCQllbHNlCgkJCQlzZWxmOmRpc2NoYXJnZXZhcnMoZnMsIGUpCgkJCWVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLQoJCS0tICogdXNlZCBpbiBtdWx0aXBsZSBsb2NhdGlvbnMKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmV4cDJSSyhmcywgZSkKCQkJc2VsZjpleHAydmFsKGZzLCBlKQoJCQlsb2NhbCBrID0gZS5rCgkJCWlmIGsgPT0gIlZLTlVNIiBvciBrID09ICJWVFJVRSIgb3IgayA9PSAiVkZBTFNFIiBvciBrID09ICJWTklMIiB0aGVuCgkJCQlpZiBmcy5uayA8PSBsdWFQLk1BWElOREVYUksgdGhlbiAgLS0gY29uc3RhbnQgZml0IGluIFJLIG9wZXJhbmQ/CgkJCQkJLS0gY29udmVydGVkIGZyb20gYSAyLWRlZXAgdGVybmFyeSBvcGVyYXRvciBleHByZXNzaW9uCgkJCQkJaWYgZS5rID09ICJWTklMIiB0aGVuCgkJCQkJCWUuaW5mbyA9IHNlbGY6bmlsSyhmcykKCQkJCQllbHNlCgkJCQkJCWUuaW5mbyA9IChlLmsgPT0gIlZLTlVNIikgYW5kIHNlbGY6bnVtYmVySyhmcywgZS5udmFsKQoJCQkJCQkJb3Igc2VsZjpib29sSyhmcywgZS5rID09ICJWVFJVRSIpCgkJCQkJZW5kCgkJCQkJZS5rID0gIlZLIgoJCQkJCXJldHVybiBsdWFQOlJLQVNLKGUuaW5mbykKCQkJCWVuZAoJCQllbHNlaWYgayA9PSAiVksiIHRoZW4KCQkJCWlmIGUuaW5mbyA8PSBsdWFQLk1BWElOREVYUksgdGhlbiAgLS0gY29uc3RhbnQgZml0IGluIGFyZ0M/CgkJCQkJcmV0dXJuIGx1YVA6UktBU0soZS5pbmZvKQoJCQkJZW5kCgkJCWVsc2UKCQkJCS0tIGRlZmF1bHQKCQkJZW5kCgkJCS0tIG5vdCBhIGNvbnN0YW50IGluIHRoZSByaWdodCByYW5nZTogcHV0IGl0IGluIGEgcmVnaXN0ZXIKCQkJcmV0dXJuIHNlbGY6ZXhwMmFueXJlZyhmcywgZSkKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0KCQktLSAqIHVzZWQgaW4gKGxwYXJzZXIpIGx1YVk6YXNzaWdubWVudCgpLCBsdWFZOmxvY2FsZnVuYygpLCBsdWFZOmZ1bmNzdGF0KCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOnN0b3JldmFyKGZzLCB2YXIsIGV4KQoJCQlsb2NhbCBrID0gdmFyLmsKCQkJaWYgayA9PSAiVkxPQ0FMIiB0aGVuCgkJCQlzZWxmOmZyZWVleHAoZnMsIGV4KQoJCQkJc2VsZjpleHAycmVnKGZzLCBleCwgdmFyLmluZm8pCgkJCQlyZXR1cm4KCQkJZWxzZWlmIGsgPT0gIlZVUFZBTCIgdGhlbgoJCQkJbG9jYWwgZSA9IHNlbGY6ZXhwMmFueXJlZyhmcywgZXgpCgkJCQlzZWxmOmNvZGVBQkMoZnMsICJPUF9TRVRVUFZBTCIsIGUsIHZhci5pbmZvLCAwKQoJCQllbHNlaWYgayA9PSAiVkdMT0JBTCIgdGhlbgoJCQkJbG9jYWwgZSA9IHNlbGY6ZXhwMmFueXJlZyhmcywgZXgpCgkJCQlzZWxmOmNvZGVBQngoZnMsICJPUF9TRVRHTE9CQUwiLCBlLCB2YXIuaW5mbykKCQkJZWxzZWlmIGsgPT0gIlZJTkRFWEVEIiB0aGVuCgkJCQlsb2NhbCBlID0gc2VsZjpleHAyUksoZnMsIGV4KQoJCQkJc2VsZjpjb2RlQUJDKGZzLCAiT1BfU0VUVEFCTEUiLCB2YXIuaW5mbywgdmFyLmF1eCwgZSkKCQkJZWxzZQoJCQkJbHVhX2Fzc2VydCgwKSAgLS0gaW52YWxpZCB2YXIga2luZCB0byBzdG9yZQoJCQllbmQKCQkJc2VsZjpmcmVlZXhwKGZzLCBleCkKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0KCQktLSAqIHVzZWQgb25seSBpbiAobHBhcnNlcikgbHVhWTpwcmltYXJ5ZXhwKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOl9zZWxmKGZzLCBlLCBrZXkpCgkJCXNlbGY6ZXhwMmFueXJlZyhmcywgZSkKCQkJc2VsZjpmcmVlZXhwKGZzLCBlKQoJCQlsb2NhbCBmdW5jID0gZnMuZnJlZXJlZwoJCQlzZWxmOnJlc2VydmVyZWdzKGZzLCAyKQoJCQlzZWxmOmNvZGVBQkMoZnMsICJPUF9TRUxGIiwgZnVuYywgZS5pbmZvLCBzZWxmOmV4cDJSSyhmcywga2V5KSkKCQkJc2VsZjpmcmVlZXhwKGZzLCBrZXkpCgkJCWUuaW5mbyA9IGZ1bmMKCQkJZS5rID0gIlZOT05SRUxPQyIKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0KCQktLSAqIHVzZWQgaW4gbHVhSzpnb2lmdHJ1ZSgpLCBsdWFLOmNvZGVub3QoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6aW52ZXJ0anVtcChmcywgZSkKCQkJbG9jYWwgcGMgPSBzZWxmOmdldGp1bXBjb250cm9sKGZzLCBlLmluZm8pCgkJCWx1YV9hc3NlcnQobHVhUDp0ZXN0VE1vZGUobHVhUDpHRVRfT1BDT0RFKHBjKSkgfj0gMCBhbmQKCQkJCWx1YVA6R0VUX09QQ09ERShwYykgfj0gIk9QX1RFU1RTRVQiIGFuZAoJCQkJbHVhUDpHRVRfT1BDT0RFKHBjKSB+PSAiT1BfVEVTVCIpCgkJCWx1YVA6U0VUQVJHX0EocGMsIChsdWFQOkdFVEFSR19BKHBjKSA9PSAwKSBhbmQgMSBvciAwKQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLQoJCS0tICogdXNlZCBpbiBsdWFLOmdvaWZ0cnVlKCksIGx1YUs6Z29pZmZhbHNlKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmp1bXBvbmNvbmQoZnMsIGUsIGNvbmQpCgkJCWlmIGUuayA9PSAiVlJFTE9DQUJMRSIgdGhlbgoJCQkJbG9jYWwgaWUgPSBzZWxmOmdldGNvZGUoZnMsIGUpCgkJCQlpZiBsdWFQOkdFVF9PUENPREUoaWUpID09ICJPUF9OT1QiIHRoZW4KCQkJCQlmcy5wYyA9IGZzLnBjIC0gMSAgLS0gcmVtb3ZlIHByZXZpb3VzIE9QX05PVAoJCQkJCXJldHVybiBzZWxmOmNvbmRqdW1wKGZzLCAiT1BfVEVTVCIsIGx1YVA6R0VUQVJHX0IoaWUpLCAwLCBjb25kIGFuZCAwIG9yIDEpCgkJCQllbmQKCQkJCS0tIGVsc2UgZ28gdGhyb3VnaAoJCQllbmQKCQkJc2VsZjpkaXNjaGFyZ2UyYW55cmVnKGZzLCBlKQoJCQlzZWxmOmZyZWVleHAoZnMsIGUpCgkJCXJldHVybiBzZWxmOmNvbmRqdW1wKGZzLCAiT1BfVEVTVFNFVCIsIGx1YVAuTk9fUkVHLCBlLmluZm8sIGNvbmQgYW5kIDEgb3IgMCkKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0KCQktLSAqIHVzZWQgaW4gbHVhSzppbmZpeCgpLCAobHBhcnNlcikgbHVhWTpjb25kKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmdvaWZ0cnVlKGZzLCBlKQoJCQlsb2NhbCBwYyAgLS0gcGMgb2YgbGFzdCBqdW1wCgkJCXNlbGY6ZGlzY2hhcmdldmFycyhmcywgZSkKCQkJbG9jYWwgayA9IGUuawoJCQlpZiBrID09ICJWSyIgb3IgayA9PSAiVktOVU0iIG9yIGsgPT0gIlZUUlVFIiB0aGVuCgkJCQlwYyA9IHNlbGYuTk9fSlVNUCAgLS0gYWx3YXlzIHRydWU7IGRvIG5vdGhpbmcKCQkJZWxzZWlmIGsgPT0gIlZGQUxTRSIgdGhlbgoJCQkJcGMgPSBzZWxmOmp1bXAoZnMpICAtLSBhbHdheXMganVtcAoJCQllbHNlaWYgayA9PSAiVkpNUCIgdGhlbgoJCQkJc2VsZjppbnZlcnRqdW1wKGZzLCBlKQoJCQkJcGMgPSBlLmluZm8KCQkJZWxzZQoJCQkJcGMgPSBzZWxmOmp1bXBvbmNvbmQoZnMsIGUsIGZhbHNlKQoJCQllbmQKCQkJZS5mID0gc2VsZjpjb25jYXQoZnMsIGUuZiwgcGMpICAtLSBpbnNlcnQgbGFzdCBqdW1wIGluIGBmJyBsaXN0CgkJCXNlbGY6cGF0Y2h0b2hlcmUoZnMsIGUudCkKCQkJZS50ID0gc2VsZi5OT19KVU1QCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIGluIGx1YUs6aW5maXgoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6Z29pZmZhbHNlKGZzLCBlKQoJCQlsb2NhbCBwYyAgLS0gcGMgb2YgbGFzdCBqdW1wCgkJCXNlbGY6ZGlzY2hhcmdldmFycyhmcywgZSkKCQkJbG9jYWwgayA9IGUuawoJCQlpZiBrID09ICJWTklMIiBvciBrID09ICJWRkFMU0UidGhlbgoJCQkJcGMgPSBzZWxmLk5PX0pVTVAgIC0tIGFsd2F5cyBmYWxzZTsgZG8gbm90aGluZwoJCQllbHNlaWYgayA9PSAiVlRSVUUiIHRoZW4KCQkJCXBjID0gc2VsZjpqdW1wKGZzKSAgLS0gYWx3YXlzIGp1bXAKCQkJZWxzZWlmIGsgPT0gIlZKTVAiIHRoZW4KCQkJCXBjID0gZS5pbmZvCgkJCWVsc2UKCQkJCXBjID0gc2VsZjpqdW1wb25jb25kKGZzLCBlLCB0cnVlKQoJCQllbmQKCQkJZS50ID0gc2VsZjpjb25jYXQoZnMsIGUudCwgcGMpICAtLSBpbnNlcnQgbGFzdCBqdW1wIGluIGB0JyBsaXN0CgkJCXNlbGY6cGF0Y2h0b2hlcmUoZnMsIGUuZikKCQkJZS5mID0gc2VsZi5OT19KVU1QCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIG9ubHkgaW4gbHVhSzpwcmVmaXgoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6Y29kZW5vdChmcywgZSkKCQkJc2VsZjpkaXNjaGFyZ2V2YXJzKGZzLCBlKQoJCQlsb2NhbCBrID0gZS5rCgkJCWlmIGsgPT0gIlZOSUwiIG9yIGsgPT0gIlZGQUxTRSIgdGhlbgoJCQkJZS5rID0gIlZUUlVFIgoJCQllbHNlaWYgayA9PSAiVksiIG9yIGsgPT0gIlZLTlVNIiBvciBrID09ICJWVFJVRSIgdGhlbgoJCQkJZS5rID0gIlZGQUxTRSIKCQkJZWxzZWlmIGsgPT0gIlZKTVAiIHRoZW4KCQkJCXNlbGY6aW52ZXJ0anVtcChmcywgZSkKCQkJZWxzZWlmIGsgPT0gIlZSRUxPQ0FCTEUiIG9yIGsgPT0gIlZOT05SRUxPQyIgdGhlbgoJCQkJc2VsZjpkaXNjaGFyZ2UyYW55cmVnKGZzLCBlKQoJCQkJc2VsZjpmcmVlZXhwKGZzLCBlKQoJCQkJZS5pbmZvID0gc2VsZjpjb2RlQUJDKGZzLCAiT1BfTk9UIiwgMCwgZS5pbmZvLCAwKQoJCQkJZS5rID0gIlZSRUxPQ0FCTEUiCgkJCWVsc2UKCQkJCWx1YV9hc3NlcnQoMCkgIC0tIGNhbm5vdCBoYXBwZW4KCQkJZW5kCgkJCS0tIGludGVyY2hhbmdlIHRydWUgYW5kIGZhbHNlIGxpc3RzCgkJCWUuZiwgZS50ID0gZS50LCBlLmYKCQkJc2VsZjpyZW1vdmV2YWx1ZXMoZnMsIGUuZikKCQkJc2VsZjpyZW1vdmV2YWx1ZXMoZnMsIGUudCkKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0KCQktLSAqIHVzZWQgaW4gKGxwYXJzZXIpIGx1YVk6ZmllbGQoKSwgbHVhWTpwcmltYXJ5ZXhwKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmluZGV4ZWQoZnMsIHQsIGspCgkJCXQuYXV4ID0gc2VsZjpleHAyUksoZnMsIGspCgkJCXQuayA9ICJWSU5ERVhFRCIKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0KCQktLSAqIHVzZWQgb25seSBpbiBsdWFLOmNvZGVhcml0aCgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhSzpjb25zdGZvbGRpbmcob3AsIGUxLCBlMikKCQkJbG9jYWwgcgoJCQlpZiBub3Qgc2VsZjppc251bWVyYWwoZTEpIG9yIG5vdCBzZWxmOmlzbnVtZXJhbChlMikgdGhlbiByZXR1cm4gZmFsc2UgZW5kCgkJCWxvY2FsIHYxID0gZTEubnZhbAoJCQlsb2NhbCB2MiA9IGUyLm52YWwKCQkJaWYgb3AgPT0gIk9QX0FERCIgdGhlbgoJCQkJciA9IHNlbGY6bnVtYWRkKHYxLCB2MikKCQkJZWxzZWlmIG9wID09ICJPUF9TVUIiIHRoZW4KCQkJCXIgPSBzZWxmOm51bXN1Yih2MSwgdjIpCgkJCWVsc2VpZiBvcCA9PSAiT1BfTVVMIiB0aGVuCgkJCQlyID0gc2VsZjpudW1tdWwodjEsIHYyKQoJCQllbHNlaWYgb3AgPT0gIk9QX0RJViIgdGhlbgoJCQkJaWYgdjIgPT0gMCB0aGVuIHJldHVybiBmYWxzZSBlbmQgIC0tIGRvIG5vdCBhdHRlbXB0IHRvIGRpdmlkZSBieSAwCgkJCQlyID0gc2VsZjpudW1kaXYodjEsIHYyKQoJCQllbHNlaWYgb3AgPT0gIk9QX01PRCIgdGhlbgoJCQkJaWYgdjIgPT0gMCB0aGVuIHJldHVybiBmYWxzZSBlbmQgIC0tIGRvIG5vdCBhdHRlbXB0IHRvIGRpdmlkZSBieSAwCgkJCQlyID0gc2VsZjpudW1tb2QodjEsIHYyKQoJCQllbHNlaWYgb3AgPT0gIk9QX1BPVyIgdGhlbgoJCQkJciA9IHNlbGY6bnVtcG93KHYxLCB2MikKCQkJZWxzZWlmIG9wID09ICJPUF9VTk0iIHRoZW4KCQkJCXIgPSBzZWxmOm51bXVubSh2MSkKCQkJZWxzZWlmIG9wID09ICJPUF9MRU4iIHRoZW4KCQkJCXJldHVybiBmYWxzZSAgLS0gbm8gY29uc3RhbnQgZm9sZGluZyBmb3IgJ2xlbicKCQkJZWxzZQoJCQkJbHVhX2Fzc2VydCgwKQoJCQkJciA9IDAKCQkJZW5kCgkJCWlmIHNlbGY6bnVtaXNuYW4ocikgdGhlbiByZXR1cm4gZmFsc2UgZW5kICAtLSBkbyBub3QgYXR0ZW1wdCB0byBwcm9kdWNlIE5hTgoJCQllMS5udmFsID0gcgoJCQlyZXR1cm4gdHJ1ZQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLQoJCS0tICogdXNlZCBpbiBsdWFLOnByZWZpeCgpLCBsdWFLOnBvc2ZpeCgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhSzpjb2RlYXJpdGgoZnMsIG9wLCBlMSwgZTIpCgkJCWlmIHNlbGY6Y29uc3Rmb2xkaW5nKG9wLCBlMSwgZTIpIHRoZW4KCQkJCXJldHVybgoJCQllbHNlCgkJCQlsb2NhbCBvMiA9IChvcCB+PSAiT1BfVU5NIiBhbmQgb3Agfj0gIk9QX0xFTiIpIGFuZCBzZWxmOmV4cDJSSyhmcywgZTIpIG9yIDAKCQkJCWxvY2FsIG8xID0gc2VsZjpleHAyUksoZnMsIGUxKQoJCQkJaWYgbzEgPiBvMiB0aGVuCgkJCQkJc2VsZjpmcmVlZXhwKGZzLCBlMSkKCQkJCQlzZWxmOmZyZWVleHAoZnMsIGUyKQoJCQkJZWxzZQoJCQkJCXNlbGY6ZnJlZWV4cChmcywgZTIpCgkJCQkJc2VsZjpmcmVlZXhwKGZzLCBlMSkKCQkJCWVuZAoJCQkJZTEuaW5mbyA9IHNlbGY6Y29kZUFCQyhmcywgb3AsIDAsIG8xLCBvMikKCQkJCWUxLmsgPSAiVlJFTE9DQUJMRSIKCQkJZW5kCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIG9ubHkgaW4gbHVhSzpwb3NmaXgoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6Y29kZWNvbXAoZnMsIG9wLCBjb25kLCBlMSwgZTIpCgkJCWxvY2FsIG8xID0gc2VsZjpleHAyUksoZnMsIGUxKQoJCQlsb2NhbCBvMiA9IHNlbGY6ZXhwMlJLKGZzLCBlMikKCQkJc2VsZjpmcmVlZXhwKGZzLCBlMikKCQkJc2VsZjpmcmVlZXhwKGZzLCBlMSkKCQkJaWYgY29uZCA9PSAwIGFuZCBvcCB+PSAiT1BfRVEiIHRoZW4KCQkJCS0tIGV4Y2hhbmdlIGFyZ3MgdG8gcmVwbGFjZSBieSBgPCcgb3IgYDw9JwoJCQkJbzEsIG8yID0gbzIsIG8xICAtLSBvMSA8PT0+IG8yCgkJCQljb25kID0gMQoJCQllbmQKCQkJZTEuaW5mbyA9IHNlbGY6Y29uZGp1bXAoZnMsIG9wLCBjb25kLCBvMSwgbzIpCgkJCWUxLmsgPSAiVkpNUCIKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0KCQktLSAqIHVzZWQgb25seSBpbiAobHBhcnNlcikgbHVhWTpzdWJleHByKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOnByZWZpeChmcywgb3AsIGUpCgkJCWxvY2FsIGUyID0ge30gIC0tIGV4cGRlc2MKCQkJZTIudCwgZTIuZiA9IHNlbGYuTk9fSlVNUCwgc2VsZi5OT19KVU1QCgkJCWUyLmsgPSAiVktOVU0iCgkJCWUyLm52YWwgPSAwCgkJCWlmIG9wID09ICJPUFJfTUlOVVMiIHRoZW4KCQkJCWlmIG5vdCBzZWxmOmlzbnVtZXJhbChlKSB0aGVuCgkJCQkJc2VsZjpleHAyYW55cmVnKGZzLCBlKSAgLS0gY2Fubm90IG9wZXJhdGUgb24gbm9uLW51bWVyaWMgY29uc3RhbnRzCgkJCQllbmQKCQkJCXNlbGY6Y29kZWFyaXRoKGZzLCAiT1BfVU5NIiwgZSwgZTIpCgkJCWVsc2VpZiBvcCA9PSAiT1BSX05PVCIgdGhlbgoJCQkJc2VsZjpjb2Rlbm90KGZzLCBlKQoJCQllbHNlaWYgb3AgPT0gIk9QUl9MRU4iIHRoZW4KCQkJCXNlbGY6ZXhwMmFueXJlZyhmcywgZSkgIC0tIGNhbm5vdCBvcGVyYXRlIG9uIGNvbnN0YW50cwoJCQkJc2VsZjpjb2RlYXJpdGgoZnMsICJPUF9MRU4iLCBlLCBlMikKCQkJZWxzZQoJCQkJbHVhX2Fzc2VydCgwKQoJCQllbmQKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0KCQktLSAqIHVzZWQgb25seSBpbiAobHBhcnNlcikgbHVhWTpzdWJleHByKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmluZml4KGZzLCBvcCwgdikKCQkJaWYgb3AgPT0gIk9QUl9BTkQiIHRoZW4KCQkJCXNlbGY6Z29pZnRydWUoZnMsIHYpCgkJCWVsc2VpZiBvcCA9PSAiT1BSX09SIiB0aGVuCgkJCQlzZWxmOmdvaWZmYWxzZShmcywgdikKCQkJZWxzZWlmIG9wID09ICJPUFJfQ09OQ0FUIiB0aGVuCgkJCQlzZWxmOmV4cDJuZXh0cmVnKGZzLCB2KSAgLS0gb3BlcmFuZCBtdXN0IGJlIG9uIHRoZSAnc3RhY2snCgkJCWVsc2VpZiBvcCA9PSAiT1BSX0FERCIgb3Igb3AgPT0gIk9QUl9TVUIiIG9yCgkJCQlvcCA9PSAiT1BSX01VTCIgb3Igb3AgPT0gIk9QUl9ESVYiIG9yCgkJCQlvcCA9PSAiT1BSX01PRCIgb3Igb3AgPT0gIk9QUl9QT1ciIHRoZW4KCQkJCWlmIG5vdCBzZWxmOmlzbnVtZXJhbCh2KSB0aGVuIHNlbGY6ZXhwMlJLKGZzLCB2KSBlbmQKCQkJZWxzZQoJCQkJc2VsZjpleHAyUksoZnMsIHYpCgkJCWVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLQoJCS0tICogdXNlZCBvbmx5IGluIChscGFyc2VyKSBsdWFZOnN1YmV4cHIoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHRhYmxlIGxvb2t1cHMgdG8gc2ltcGxpZnkgdGVzdGluZwoJCWx1YUsuYXJpdGhfb3AgPSB7CgkJCU9QUl9BREQgPSAiT1BfQUREIiwgT1BSX1NVQiA9ICJPUF9TVUIiLCBPUFJfTVVMID0gIk9QX01VTCIsCgkJCU9QUl9ESVYgPSAiT1BfRElWIiwgT1BSX01PRCA9ICJPUF9NT0QiLCBPUFJfUE9XID0gIk9QX1BPVyIsCgkJfQoJCWx1YUsuY29tcF9vcCA9IHsKCQkJT1BSX0VRID0gIk9QX0VRIiwgT1BSX05FID0gIk9QX0VRIiwgT1BSX0xUID0gIk9QX0xUIiwKCQkJT1BSX0xFID0gIk9QX0xFIiwgT1BSX0dUID0gIk9QX0xUIiwgT1BSX0dFID0gIk9QX0xFIiwKCQl9CgkJbHVhSy5jb21wX2NvbmQgPSB7CgkJCU9QUl9FUSA9IDEsIE9QUl9ORSA9IDAsIE9QUl9MVCA9IDEsCgkJCU9QUl9MRSA9IDEsIE9QUl9HVCA9IDAsIE9QUl9HRSA9IDAsCgkJfQoJCWZ1bmN0aW9uIGx1YUs6cG9zZml4KGZzLCBvcCwgZTEsIGUyKQoJCQktLSBuZWVkZWQgYmVjYXVzZSBlMSA9IGUyIGRvZXNuJ3QgY29weSB2YWx1ZXMuLi4KCQkJLS0gKiBpbiA1LjAueCwgb25seSBrL2luZm8vYXV4L3QvZiBjb3BpZWQsIHQgZm9yIEFORCwgZiBmb3IgT1IKCQkJLS0gICBidXQgaGVyZSwgYWxsIGVsZW1lbnRzIGFyZSBjb3BpZWQgZm9yIGNvbXBsZXRlbmVzcycgc2FrZQoJCQlsb2NhbCBmdW5jdGlvbiBjb3B5ZXhwKGUxLCBlMikKCQkJCWUxLmsgPSBlMi5rCgkJCQllMS5pbmZvID0gZTIuaW5mbzsgZTEuYXV4ID0gZTIuYXV4CgkJCQllMS5udmFsID0gZTIubnZhbAoJCQkJZTEudCA9IGUyLnQ7IGUxLmYgPSBlMi5mCgkJCWVuZAoJCQlpZiBvcCA9PSAiT1BSX0FORCIgdGhlbgoJCQkJbHVhX2Fzc2VydChlMS50ID09IHNlbGYuTk9fSlVNUCkgIC0tIGxpc3QgbXVzdCBiZSBjbG9zZWQKCQkJCXNlbGY6ZGlzY2hhcmdldmFycyhmcywgZTIpCgkJCQllMi5mID0gc2VsZjpjb25jYXQoZnMsIGUyLmYsIGUxLmYpCgkJCQljb3B5ZXhwKGUxLCBlMikKCQkJZWxzZWlmIG9wID09ICJPUFJfT1IiIHRoZW4KCQkJCWx1YV9hc3NlcnQoZTEuZiA9PSBzZWxmLk5PX0pVTVApICAtLSBsaXN0IG11c3QgYmUgY2xvc2VkCgkJCQlzZWxmOmRpc2NoYXJnZXZhcnMoZnMsIGUyKQoJCQkJZTIudCA9IHNlbGY6Y29uY2F0KGZzLCBlMi50LCBlMS50KQoJCQkJY29weWV4cChlMSwgZTIpCgkJCWVsc2VpZiBvcCA9PSAiT1BSX0NPTkNBVCIgdGhlbgoJCQkJc2VsZjpleHAydmFsKGZzLCBlMikKCQkJCWlmIGUyLmsgPT0gIlZSRUxPQ0FCTEUiIGFuZCBsdWFQOkdFVF9PUENPREUoc2VsZjpnZXRjb2RlKGZzLCBlMikpID09ICJPUF9DT05DQVQiIHRoZW4KCQkJCQlsdWFfYXNzZXJ0KGUxLmluZm8gPT0gbHVhUDpHRVRBUkdfQihzZWxmOmdldGNvZGUoZnMsIGUyKSkgLSAxKQoJCQkJCXNlbGY6ZnJlZWV4cChmcywgZTEpCgkJCQkJbHVhUDpTRVRBUkdfQihzZWxmOmdldGNvZGUoZnMsIGUyKSwgZTEuaW5mbykKCQkJCQllMS5rID0gIlZSRUxPQ0FCTEUiCgkJCQkJZTEuaW5mbyA9IGUyLmluZm8KCQkJCWVsc2UKCQkJCQlzZWxmOmV4cDJuZXh0cmVnKGZzLCBlMikgIC0tIG9wZXJhbmQgbXVzdCBiZSBvbiB0aGUgJ3N0YWNrJwoJCQkJCXNlbGY6Y29kZWFyaXRoKGZzLCAiT1BfQ09OQ0FUIiwgZTEsIGUyKQoJCQkJZW5kCgkJCWVsc2UKCQkJCS0tIHRoZSBmb2xsb3dpbmcgdXNlcyBhIHRhYmxlIGxvb2t1cCBpbiBwbGFjZSBvZiBjb25kaXRpb25hbHMKCQkJCWxvY2FsIGFyaXRoID0gc2VsZi5hcml0aF9vcFtvcF0KCQkJCWlmIGFyaXRoIHRoZW4KCQkJCQlzZWxmOmNvZGVhcml0aChmcywgYXJpdGgsIGUxLCBlMikKCQkJCWVsc2UKCQkJCQlsb2NhbCBjb21wID0gc2VsZi5jb21wX29wW29wXQoJCQkJCWlmIGNvbXAgdGhlbgoJCQkJCQlzZWxmOmNvZGVjb21wKGZzLCBjb21wLCBzZWxmLmNvbXBfY29uZFtvcF0sIGUxLCBlMikKCQkJCQllbHNlCgkJCQkJCWx1YV9hc3NlcnQoMCkKCQkJCQllbmQKCQkJCWVuZC0taWYgYXJpdGgKCQkJZW5kLS1pZiBvcAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBhZGp1c3RzIGRlYnVnIGluZm9ybWF0aW9uIGZvciBsYXN0IGluc3RydWN0aW9uIHdyaXR0ZW4sIGluIG9yZGVyIHRvCgkJLS0gY2hhbmdlIHRoZSBsaW5lIHdoZXJlIGl0ZW0gY29tZXMgaW50byBleGlzdGVuY2UKCQktLSAqIHVzZWQgaW4gKGxwYXJzZXIpIGx1YVk6ZnVuY2FyZ3MoKSwgbHVhWTpmb3Jib2R5KCksIGx1YVk6ZnVuY3N0YXQoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6Zml4bGluZShmcywgbGluZSkKCQkJZnMuZi5saW5laW5mb1tmcy5wYyAtIDFdID0gbGluZQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBnZW5lcmFsIGZ1bmN0aW9uIHRvIHdyaXRlIGFuIGluc3RydWN0aW9uIGludG8gdGhlIGluc3RydWN0aW9uIGJ1ZmZlciwKCQktLSBzZXRzIGRlYnVnIGluZm9ybWF0aW9uIHRvbwoJCS0tICogdXNlZCBpbiBsdWFLOmNvZGVBQkMoKSwgbHVhSzpjb2RlQUJ4KCkKCQktLSAqIGNhbGxlZCBkaXJlY3RseSBieSAobHBhcnNlcikgbHVhWTp3aGlsZXN0YXQoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YUs6Y29kZShmcywgaSwgbGluZSkKCQkJbG9jYWwgZiA9IGZzLmYKCQkJc2VsZjpkaXNjaGFyZ2VqcGMoZnMpICAtLSAncGMnIHdpbGwgY2hhbmdlCgkJCS0tIHB1dCBuZXcgaW5zdHJ1Y3Rpb24gaW4gY29kZSBhcnJheQoJCQlsdWFZOmdyb3d2ZWN0b3IoZnMuTCwgZi5jb2RlLCBmcy5wYywgZi5zaXplY29kZSwgbmlsLAoJCQkJbHVhWS5NQVhfSU5ULCAiY29kZSBzaXplIG92ZXJmbG93IikKCQkJZi5jb2RlW2ZzLnBjXSA9IGkKCQkJLS0gc2F2ZSBjb3JyZXNwb25kaW5nIGxpbmUgaW5mb3JtYXRpb24KCQkJbHVhWTpncm93dmVjdG9yKGZzLkwsIGYubGluZWluZm8sIGZzLnBjLCBmLnNpemVsaW5laW5mbywgbmlsLAoJCQkJbHVhWS5NQVhfSU5ULCAiY29kZSBzaXplIG92ZXJmbG93IikKCQkJZi5saW5laW5mb1tmcy5wY10gPSBsaW5lCgkJCWxvY2FsIHBjID0gZnMucGMKCQkJZnMucGMgPSBmcy5wYyArIDEKCQkJcmV0dXJuIHBjCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHdyaXRlcyBhbiBpbnN0cnVjdGlvbiBvZiB0eXBlIEFCQwoJCS0tICogY2FsbHMgbHVhSzpjb2RlKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFLOmNvZGVBQkMoZnMsIG8sIGEsIGIsIGMpCgkJCWx1YV9hc3NlcnQobHVhUDpnZXRPcE1vZGUobykgPT0gbHVhUC5PcE1vZGUuaUFCQykKCQkJbHVhX2Fzc2VydChsdWFQOmdldEJNb2RlKG8pIH49IGx1YVAuT3BBcmdNYXNrLk9wQXJnTiBvciBiID09IDApCgkJCWx1YV9hc3NlcnQobHVhUDpnZXRDTW9kZShvKSB+PSBsdWFQLk9wQXJnTWFzay5PcEFyZ04gb3IgYyA9PSAwKQoJCQlyZXR1cm4gc2VsZjpjb2RlKGZzLCBsdWFQOkNSRUFURV9BQkMobywgYSwgYiwgYyksIGZzLmxzLmxhc3RsaW5lKQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSB3cml0ZXMgYW4gaW5zdHJ1Y3Rpb24gb2YgdHlwZSBBQngKCQktLSAqIGNhbGxzIGx1YUs6Y29kZSgpLCBjYWxsZWQgYnkgbHVhSzpjb2RlQXNCeCgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhSzpjb2RlQUJ4KGZzLCBvLCBhLCBiYykKCQkJbHVhX2Fzc2VydChsdWFQOmdldE9wTW9kZShvKSA9PSBsdWFQLk9wTW9kZS5pQUJ4IG9yCgkJCQlsdWFQOmdldE9wTW9kZShvKSA9PSBsdWFQLk9wTW9kZS5pQXNCeCkKCQkJbHVhX2Fzc2VydChsdWFQOmdldENNb2RlKG8pID09IGx1YVAuT3BBcmdNYXNrLk9wQXJnTikKCQkJcmV0dXJuIHNlbGY6Y29kZShmcywgbHVhUDpDUkVBVEVfQUJ4KG8sIGEsIGJjKSwgZnMubHMubGFzdGxpbmUpCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tCgkJLS0gKiB1c2VkIGluIChscGFyc2VyKSBsdWFZOmNsb3NlbGlzdGZpZWxkKCksIGx1YVk6bGFzdGxpc3RmaWVsZCgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhSzpzZXRsaXN0KGZzLCBiYXNlLCBuZWxlbXMsIHRvc3RvcmUpCgkJCWxvY2FsIGMgPSBtYXRoLmZsb29yKChuZWxlbXMgLSAxKS9sdWFQLkxGSUVMRFNfUEVSX0ZMVVNIKSArIDEKCQkJbG9jYWwgYiA9ICh0b3N0b3JlID09IGx1YVkuTFVBX01VTFRSRVQpIGFuZCAwIG9yIHRvc3RvcmUKCQkJbHVhX2Fzc2VydCh0b3N0b3JlIH49IDApCgkJCWlmIGMgPD0gbHVhUC5NQVhBUkdfQyB0aGVuCgkJCQlzZWxmOmNvZGVBQkMoZnMsICJPUF9TRVRMSVNUIiwgYmFzZSwgYiwgYykKCQkJZWxzZQoJCQkJc2VsZjpjb2RlQUJDKGZzLCAiT1BfU0VUTElTVCIsIGJhc2UsIGIsIDApCgkJCQlzZWxmOmNvZGUoZnMsIGx1YVA6Q1JFQVRFX0luc3QoYyksIGZzLmxzLmxhc3RsaW5lKQoJCQllbmQKCQkJZnMuZnJlZXJlZyA9IGJhc2UgKyAxICAtLSBmcmVlIHJlZ2lzdGVycyB3aXRoIGxpc3QgdmFsdWVzCgkJZW5kCgoKCgoJCS0tZG9maWxlKCJscGFyc2VyLmx1YSIpCgotLVtbLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLS0gRXhwcmVzc2lvbiBkZXNjcmlwdG9yCi0tICogZXhwa2luZCBjaGFuZ2VkIHRvIHN0cmluZyBjb25zdGFudHM7IGx1YVk6YXNzaWdubWVudCB3YXMgdGhlIG9ubHkKLS0gICBmdW5jdGlvbiB0byB1c2UgYSByZWxhdGlvbmFsIG9wZXJhdG9yIHdpdGggdGhpcyBlbnVtZXJhdGlvbgotLSBWVk9JRCAgICAgICAtLSBubyB2YWx1ZQotLSBWTklMICAgICAgICAtLSBubyB2YWx1ZQotLSBWVFJVRSAgICAgICAtLSBubyB2YWx1ZQotLSBWRkFMU0UgICAgICAtLSBubyB2YWx1ZQotLSBWSyAgICAgICAgICAtLSBpbmZvID0gaW5kZXggb2YgY29uc3RhbnQgaW4gJ2snCi0tIFZLTlVNICAgICAgIC0tIG52YWwgPSBudW1lcmljYWwgdmFsdWUKLS0gVkxPQ0FMICAgICAgLS0gaW5mbyA9IGxvY2FsIHJlZ2lzdGVyCi0tIFZVUFZBTCwgICAgIC0tIGluZm8gPSBpbmRleCBvZiB1cHZhbHVlIGluICd1cHZhbHVlcycKLS0gVkdMT0JBTCAgICAgLS0gaW5mbyA9IGluZGV4IG9mIHRhYmxlOyBhdXggPSBpbmRleCBvZiBnbG9iYWwgbmFtZSBpbiAnaycKLS0gVklOREVYRUQgICAgLS0gaW5mbyA9IHRhYmxlIHJlZ2lzdGVyOyBhdXggPSBpbmRleCByZWdpc3RlciAob3IgJ2snKQotLSBWSk1QICAgICAgICAtLSBpbmZvID0gaW5zdHJ1Y3Rpb24gcGMKLS0gVlJFTE9DQUJMRSAgLS0gaW5mbyA9IGluc3RydWN0aW9uIHBjCi0tIFZOT05SRUxPQyAgIC0tIGluZm8gPSByZXN1bHQgcmVnaXN0ZXIKLS0gVkNBTEwgICAgICAgLS0gaW5mbyA9IGluc3RydWN0aW9uIHBjCi0tIFZWQVJBUkcgICAgIC0tIGluZm8gPSBpbnN0cnVjdGlvbiBwYwp9IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1dXQoKLS1bWy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tICogZXhwZGVzYyBpbiBMdWEgNS4xLnggaGFzIGEgdW5pb24gdSBhbmQgYW5vdGhlciBzdHJ1Y3QgczsgdGhpcyBMdWEKLS0gICBpbXBsZW1lbnRhdGlvbiBpZ25vcmVzIGFsbCBpbnN0YW5jZXMgb2YgdSBhbmQgcyB1c2FnZQotLSBzdHJ1Y3QgZXhwZGVzYzoKLS0gICBrICAtLSAoZW51bTogZXhwa2luZCkKLS0gICBpbmZvLCBhdXggLS0gKGludCwgaW50KQotLSAgIG52YWwgLS0gKGx1YV9OdW1iZXIpCi0tICAgdCAgLS0gcGF0Y2ggbGlzdCBvZiAnZXhpdCB3aGVuIHRydWUnCi0tICAgZiAgLS0gcGF0Y2ggbGlzdCBvZiAnZXhpdCB3aGVuIGZhbHNlJwotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXV0KCi0tW1stLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQotLSBzdHJ1Y3QgdXB2YWxkZXNjOgotLSAgIGsgIC0tIChsdV9ieXRlKQotLSAgIGluZm8gLS0gKGx1X2J5dGUpCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1dXQoKLS1bWy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tIHN0YXRlIG5lZWRlZCB0byBnZW5lcmF0ZSBjb2RlIGZvciBhIGdpdmVuIGZ1bmN0aW9uCi0tIHN0cnVjdCBGdW5jU3RhdGU6Ci0tICAgZiAgLS0gY3VycmVudCBmdW5jdGlvbiBoZWFkZXIgKHRhYmxlOiBQcm90bykKLS0gICBoICAtLSB0YWJsZSB0byBmaW5kIChhbmQgcmV1c2UpIGVsZW1lbnRzIGluICdrJyAodGFibGU6IFRhYmxlKQotLSAgIHByZXYgIC0tIGVuY2xvc2luZyBmdW5jdGlvbiAodGFibGU6IEZ1bmNTdGF0ZSkKLS0gICBscyAgLS0gbGV4aWNhbCBzdGF0ZSAodGFibGU6IExleFN0YXRlKQotLSAgIEwgIC0tIGNvcHkgb2YgdGhlIEx1YSBzdGF0ZSAodGFibGU6IGx1YV9TdGF0ZSkKLS0gICBibCAgLS0gY2hhaW4gb2YgY3VycmVudCBibG9ja3MgKHRhYmxlOiBCbG9ja0NudCkKLS0gICBwYyAgLS0gbmV4dCBwb3NpdGlvbiB0byBjb2RlIChlcXVpdmFsZW50IHRvICduY29kZScpCi0tICAgbGFzdHRhcmdldCAgIC0tICdwYycgb2YgbGFzdCAnanVtcCB0YXJnZXQnCi0tICAganBjICAtLSBsaXN0IG9mIHBlbmRpbmcganVtcHMgdG8gJ3BjJwotLSAgIGZyZWVyZWcgIC0tIGZpcnN0IGZyZWUgcmVnaXN0ZXIKLS0gICBuayAgLS0gbnVtYmVyIG9mIGVsZW1lbnRzIGluICdrJwotLSAgIG5wICAtLSBudW1iZXIgb2YgZWxlbWVudHMgaW4gJ3AnCi0tICAgbmxvY3ZhcnMgIC0tIG51bWJlciBvZiBlbGVtZW50cyBpbiAnbG9jdmFycycKLS0gICBuYWN0dmFyICAtLSBudW1iZXIgb2YgYWN0aXZlIGxvY2FsIHZhcmlhYmxlcwotLSAgIHVwdmFsdWVzW0xVQUlfTUFYVVBWQUxVRVNdICAtLSB1cHZhbHVlcyAodGFibGU6IHVwdmFsZGVzYykKLS0gICBhY3R2YXJbTFVBSV9NQVhWQVJTXSAgLS0gZGVjbGFyZWQtdmFyaWFibGUgc3RhY2sKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLV1dCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIGNvbnN0YW50cyB1c2VkIGJ5IHBhcnNlcgoJCS0tICogcGlja3MgdXAgZHVwbGljYXRlIHZhbHVlcyBmcm9tIGx1YVggaWYgcmVxdWlyZWQKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlsdWFZLkxVQV9RUyA9IGx1YVguTFVBX1FTIG9yICInJXMnIiAgLS0gKGZyb20gbHVhY29uZi5oKQoKCQlsdWFZLlNIUlRfTUFYID0gMzI3NjcgLS0gKGZyb20gPGxpbWl0cy5oPikKCQlsdWFZLkxVQUlfTUFYVkFSUyA9IDIwMCAgLS0gKGx1YWNvbmYuaCkKCQlsdWFZLkxVQUlfTUFYVVBWQUxVRVMgPSA2MCAgLS0gKGx1YWNvbmYuaCkKCQlsdWFZLk1BWF9JTlQgPSBsdWFYLk1BWF9JTlQgb3IgMjE0NzQ4MzY0NSAgLS0gKGZyb20gbGxpbWl0cy5oKQoJCS0tICogSU5UX01BWC0yIGZvciAzMi1iaXQgc3lzdGVtcwoJCWx1YVkuTFVBSV9NQVhDQ0FMTFMgPSAyMDAgIC0tIChmcm9tIGx1YWNvbmYuaCkKCgkJbHVhWS5WQVJBUkdfSEFTQVJHID0gMSAgLS0gKGZyb20gbG9iamVjdC5oKQoJCS0tIE5PVEU6IEhBU0FSR19NQVNLIGlzIHZhbHVlLXNwZWNpZmljCgkJbHVhWS5IQVNBUkdfTUFTSyA9IDIgLS0gdGhpcyB3YXMgYWRkZWQgZm9yIGEgYml0b3AgaW4gcGFybGlzdCgpCgkJbHVhWS5WQVJBUkdfSVNWQVJBUkcgPSAyCgkJLS0gTk9URTogdGhlcmUgaXMgc29tZSB2YWx1ZS1zcGVjaWZpYyBjb2RlIHRoYXQgaW52b2x2ZXMgVkFSQVJHX05FRURTQVJHCgkJbHVhWS5WQVJBUkdfTkVFRFNBUkcgPSA0CgoJCWx1YVkuTFVBX01VTFRSRVQgPSAtMSAgLS0gKGx1YS5oKQoKLS1bWy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tIG90aGVyIGZ1bmN0aW9ucwotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXV0KCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gTFVBX1FMIGRlc2NyaWJlcyBob3cgZXJyb3IgbWVzc2FnZXMgcXVvdGUgcHJvZ3JhbSBlbGVtZW50cy4KCQktLSBDSEFOR0UgaXQgaWYgeW91IHdhbnQgYSBkaWZmZXJlbnQgYXBwZWFyYW5jZS4gKGZyb20gbHVhY29uZi5oKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6TFVBX1FMKHgpCgkJCXJldHVybiAiJyIuLnguLiInIgoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSB0aGlzIGlzIGEgc3RyaXBwZWQtZG93biBsdWFNX2dyb3d2ZWN0b3IgKGZyb20gbG1lbS5oKSB3aGljaCBpcyBhCgkJLS0gbWFjcm8gYmFzZWQgb24gbHVhTV9ncm93YXV4IChpbiBsbWVtLmMpOyBhbGwgdGhlIGZvbGxvd2luZyBkb2VzIGlzCgkJLS0gcmVwcm9kdWNlIHRoZSBzaXplIGxpbWl0IGNoZWNraW5nIGxvZ2ljIG9mIHRoZSBvcmlnaW5hbCBmdW5jdGlvbgoJCS0tIHNvIHRoYXQgZXJyb3IgYmVoYXZpb3VyIGlzIGlkZW50aWNhbDsgYWxsIGFyZ3VtZW50cyBwcmVzZXJ2ZWQgZm9yCgkJLS0gY29udmVuaWVuY2UsIGV2ZW4gdGhvc2Ugd2hpY2ggYXJlIHVudXNlZAoJCS0tICogc2V0IHRoZSB0IGZpZWxkIHRvIG5pbCwgc2luY2UgdGhpcyBvcmlnaW5hbGx5IGRvZXMgYSBzaXplb2YodCkKCQktLSAqIHNpemUgKG9yaWdpbmFsbHkgYSBwb2ludGVyKSBpcyBuZXZlciB1cGRhdGVkLCB0aGVpciBmaW5hbCB2YWx1ZXMKCQktLSAgIGFyZSBzZXQgYnkgbHVhWTpjbG9zZV9mdW5jKCksIHNvIG92ZXJhbGwgdGhpbmdzIHNob3VsZCBzdGlsbCB3b3JrCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpncm93dmVjdG9yKEwsIHYsIG5lbGVtcywgc2l6ZSwgdCwgbGltaXQsIGUpCgkJCWlmIG5lbGVtcyA+PSBsaW1pdCB0aGVuCgkJCQllcnJvcihlKSAgLS0gd2FzIGx1YUdfcnVuZXJyb3IKCQkJZW5kCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIGluaXRpYWxpemUgYSBuZXcgZnVuY3Rpb24gcHJvdG90eXBlIHN0cnVjdHVyZSAoZnJvbSBsZnVuYy5jKQoJCS0tICogdXNlZCBvbmx5IGluIG9wZW5fZnVuYygpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpuZXdwcm90byhMKQoJCQlsb2NhbCBmID0ge30gLS0gUHJvdG8KCQkJLS0gbHVhQ19saW5rKEwsIG9iajJnY28oZiksIExVQV9UUFJPVE8pOyAvKiBHQyAqLwoJCQlmLmsgPSB7fQoJCQlmLnNpemVrID0gMAoJCQlmLnAgPSB7fQoJCQlmLnNpemVwID0gMAoJCQlmLmNvZGUgPSB7fQoJCQlmLnNpemVjb2RlID0gMAoJCQlmLnNpemVsaW5laW5mbyA9IDAKCQkJZi5zaXpldXB2YWx1ZXMgPSAwCgkJCWYubnVwcyA9IDAKCQkJZi51cHZhbHVlcyA9IHt9CgkJCWYubnVtcGFyYW1zID0gMAoJCQlmLmlzX3ZhcmFyZyA9IDAKCQkJZi5tYXhzdGFja3NpemUgPSAwCgkJCWYubGluZWluZm8gPSB7fQoJCQlmLnNpemVsb2N2YXJzID0gMAoJCQlmLmxvY3ZhcnMgPSB7fQoJCQlmLmxpbmVEZWZpbmVkID0gMAoJCQlmLmxhc3RsaW5lZGVmaW5lZCA9IDAKCQkJZi5zb3VyY2UgPSBuaWwKCQkJcmV0dXJuIGYKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gY29udmVydHMgYW4gaW50ZWdlciB0byBhICJmbG9hdGluZyBwb2ludCBieXRlIiwgcmVwcmVzZW50ZWQgYXMKCQktLSAoZWVlZWV4eHgpLCB3aGVyZSB0aGUgcmVhbCB2YWx1ZSBpcyAoMXh4eCkgKiAyXihlZWVlZSAtIDEpIGlmCgkJLS0gZWVlZWUgIT0gMCBhbmQgKHh4eCkgb3RoZXJ3aXNlLgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6aW50MmZiKHgpCgkJCWxvY2FsIGUgPSAwICAtLSBleHBvbmVudAoJCQl3aGlsZSB4ID49IDE2IGRvCgkJCQl4ID0gbWF0aC5mbG9vcigoeCArIDEpIC8gMikKCQkJCWUgPSBlICsgMQoJCQllbmQKCQkJaWYgeCA8IDggdGhlbgoJCQkJcmV0dXJuIHgKCQkJZWxzZQoJCQkJcmV0dXJuICgoZSArIDEpICogOCkgKyAoeCAtIDgpCgkJCWVuZAoJCWVuZAoKLS1bWy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tIHBhcnNlciBmdW5jdGlvbnMKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLV1dCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHRydWUgb2YgdGhlIGtpbmQgb2YgZXhwcmVzc2lvbiBwcm9kdWNlcyBtdWx0aXBsZSByZXR1cm4gdmFsdWVzCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpoYXNtdWx0cmV0KGspCgkJCXJldHVybiBrID09ICJWQ0FMTCIgb3IgayA9PSAiVlZBUkFSRyIKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gY29udmVuaWVuY2UgZnVuY3Rpb24gdG8gYWNjZXNzIGFjdGl2ZSBsb2NhbCBpLCByZXR1cm5zIGVudHJ5CgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpnZXRsb2N2YXIoZnMsIGkpCgkJCXJldHVybiBmcy5mLmxvY3ZhcnNbIGZzLmFjdHZhcltpXSBdCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIGNoZWNrIGEgbGltaXQsIHN0cmluZyBtIHByb3ZpZGVkIGFzIGFuIGVycm9yIG1lc3NhZ2UKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOmNoZWNrbGltaXQoZnMsIHYsIGwsIG0pCgkJCWlmIHYgPiBsIHRoZW4gc2VsZjplcnJvcmxpbWl0KGZzLCBsLCBtKSBlbmQKCQllbmQKCi0tW1stLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQotLSBub2RlcyBmb3IgYmxvY2sgbGlzdCAobGlzdCBvZiBhY3RpdmUgYmxvY2tzKQotLSBzdHJ1Y3QgQmxvY2tDbnQ6Ci0tICAgcHJldmlvdXMgIC0tIGNoYWluICh0YWJsZTogQmxvY2tDbnQpCi0tICAgYnJlYWtsaXN0ICAtLSBsaXN0IG9mIGp1bXBzIG91dCBvZiB0aGlzIGxvb3AKLS0gICBuYWN0dmFyICAtLSAjIGFjdGl2ZSBsb2NhbCB2YXJpYWJsZXMgb3V0c2lkZSB0aGUgYnJlYWthYmxlIHN0cnVjdHVyZQotLSAgIHVwdmFsICAtLSB0cnVlIGlmIHNvbWUgdmFyaWFibGUgaW4gdGhlIGJsb2NrIGlzIGFuIHVwdmFsdWUgKGJvb2xlYW4pCi0tICAgaXNicmVha2FibGUgIC0tIHRydWUgaWYgJ2Jsb2NrJyBpcyBhIGxvb3AgKGJvb2xlYW4pCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1dXQoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwcm90b3R5cGVzIGZvciByZWN1cnNpdmUgbm9uLXRlcm1pbmFsIGZ1bmN0aW9ucwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHByb3RvdHlwZXMgZGVsZXRlZDsgbm90IHJlcXVpcmVkIGluIEx1YQoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSByZWFuY2hvciBpZiBsYXN0IHRva2VuIGlzIGhhcyBhIGNvbnN0YW50IHN0cmluZywgc2VlIGNsb3NlX2Z1bmMoKQoJCS0tICogdXNlZCBvbmx5IGluIGNsb3NlX2Z1bmMoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6YW5jaG9yX3Rva2VuKGxzKQoJCQlpZiBscy50LnRva2VuID09ICJUS19OQU1FIiBvciBscy50LnRva2VuID09ICJUS19TVFJJTkciIHRoZW4KCQkJCS0tIG5vdCByZWxldmFudCB0byBMdWEgaW1wbGVtZW50YXRpb24gb2YgcGFyc2VyCgkJCQktLSBsb2NhbCB0cyA9IGxzLnQuc2VtaW5mbwoJCQkJLS0gbHVhWF9uZXdzdHJpbmcobHMsIGdldHN0cih0cyksIHRzLT50c3YubGVuKTsgLyogQyAqLwoJCQllbmQKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gdGhyb3dzIGEgc3ludGF4IGVycm9yIGlmIHRva2VuIGV4cGVjdGVkIGlzIG5vdCB0aGVyZQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6ZXJyb3JfZXhwZWN0ZWQobHMsIHRva2VuKQoJCQlsdWFYOnN5bnRheGVycm9yKGxzLAoJCQkJc3RyaW5nLmZvcm1hdChzZWxmLkxVQV9RUy4uIiBleHBlY3RlZCIsIGx1YVg6dG9rZW4yc3RyKGxzLCB0b2tlbikpKQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwcmVwYXJlcyBlcnJvciBtZXNzYWdlIGZvciBkaXNwbGF5LCBmb3IgbGltaXRzIGV4Y2VlZGVkCgkJLS0gKiB1c2VkIG9ubHkgaW4gY2hlY2tsaW1pdCgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTplcnJvcmxpbWl0KGZzLCBsaW1pdCwgd2hhdCkKCQkJbG9jYWwgbXNnID0gKGZzLmYubGluZWRlZmluZWQgPT0gMCkgYW5kCgkJCQlzdHJpbmcuZm9ybWF0KCJtYWluIGZ1bmN0aW9uIGhhcyBtb3JlIHRoYW4gJWQgJXMiLCBsaW1pdCwgd2hhdCkgb3IKCQkJCXN0cmluZy5mb3JtYXQoImZ1bmN0aW9uIGF0IGxpbmUgJWQgaGFzIG1vcmUgdGhhbiAlZCAlcyIsCgkJCQkJZnMuZi5saW5lZGVmaW5lZCwgbGltaXQsIHdoYXQpCgkJCWx1YVg6bGV4ZXJyb3IoZnMubHMsIG1zZywgMCkKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gdGVzdHMgZm9yIGEgdG9rZW4sIHJldHVybnMgb3V0Y29tZQoJCS0tICogcmV0dXJuIHZhbHVlIGNoYW5nZWQgdG8gYm9vbGVhbgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6dGVzdG5leHQobHMsIGMpCgkJCWlmIGxzLnQudG9rZW4gPT0gYyB0aGVuCgkJCQlsdWFYOm5leHQobHMpCgkJCQlyZXR1cm4gdHJ1ZQoJCQllbHNlCgkJCQlyZXR1cm4gZmFsc2UKCQkJZW5kCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIGNoZWNrIGZvciBleGlzdGVuY2Ugb2YgYSB0b2tlbiwgdGhyb3dzIGVycm9yIGlmIG5vdCBmb3VuZAoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6Y2hlY2sobHMsIGMpCgkJCWlmIGxzLnQudG9rZW4gfj0gYyB0aGVuCgkJCQlzZWxmOmVycm9yX2V4cGVjdGVkKGxzLCBjKQoJCQllbmQKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gdmVyaWZ5IGV4aXN0ZW5jZSBvZiBhIHRva2VuLCB0aGVuIHNraXAgaXQKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOmNoZWNrbmV4dChscywgYykKCQkJc2VsZjpjaGVjayhscywgYykKCQkJbHVhWDpuZXh0KGxzKQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSB0aHJvd3MgZXJyb3IgaWYgY29uZGl0aW9uIG5vdCBtYXRjaGVkCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpjaGVja19jb25kaXRpb24obHMsIGMsIG1zZykKCQkJaWYgbm90IGMgdGhlbiBsdWFYOnN5bnRheGVycm9yKGxzLCBtc2cpIGVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSB2ZXJpZmllcyB0b2tlbiBjb25kaXRpb25zIGFyZSBtZXQgb3IgZWxzZSB0aHJvdyBlcnJvcgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6Y2hlY2tfbWF0Y2gobHMsIHdoYXQsIHdobywgd2hlcmUpCgkJCWlmIG5vdCBzZWxmOnRlc3RuZXh0KGxzLCB3aGF0KSB0aGVuCgkJCQlpZiB3aGVyZSA9PSBscy5saW5lbnVtYmVyIHRoZW4KCQkJCQlzZWxmOmVycm9yX2V4cGVjdGVkKGxzLCB3aGF0KQoJCQkJZWxzZQoJCQkJCWx1YVg6c3ludGF4ZXJyb3IobHMsIHN0cmluZy5mb3JtYXQoCgkJCQkJCXNlbGYuTFVBX1FTLi4iIGV4cGVjdGVkICh0byBjbG9zZSAiLi5zZWxmLkxVQV9RUy4uIiBhdCBsaW5lICVkKSIsCgkJCQkJCWx1YVg6dG9rZW4yc3RyKGxzLCB3aGF0KSwgbHVhWDp0b2tlbjJzdHIobHMsIHdobyksIHdoZXJlKSkKCQkJCWVuZAoJCQllbmQKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gZXhwZWN0IHRoYXQgdG9rZW4gaXMgYSBuYW1lLCByZXR1cm4gdGhlIG5hbWUKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOnN0cl9jaGVja25hbWUobHMpCgkJCXNlbGY6Y2hlY2sobHMsICJUS19OQU1FIikKCQkJbG9jYWwgdHMgPSBscy50LnNlbWluZm8KCQkJbHVhWDpuZXh0KGxzKQoJCQlyZXR1cm4gdHMKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gaW5pdGlhbGl6ZSBhIHN0cnVjdCBleHBkZXNjLCBleHByZXNzaW9uIGRlc2NyaXB0aW9uIGRhdGEgc3RydWN0dXJlCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTppbml0X2V4cChlLCBrLCBpKQoJCQllLmYsIGUudCA9IGx1YUsuTk9fSlVNUCwgbHVhSy5OT19KVU1QCgkJCWUuayA9IGsKCQkJZS5pbmZvID0gaQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBhZGRzIGdpdmVuIHN0cmluZyBzIGluIHN0cmluZyBwb29sLCBzZXRzIGUgYXMgVksKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOmNvZGVzdHJpbmcobHMsIGUsIHMpCgkJCXNlbGY6aW5pdF9leHAoZSwgIlZLIiwgbHVhSzpzdHJpbmdLKGxzLmZzLCBzKSkKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gY29uc3VtZSBhIG5hbWUgdG9rZW4sIGFkZHMgaXQgdG8gc3RyaW5nIHBvb2wsIHNldHMgZSBhcyBWSwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6Y2hlY2tuYW1lKGxzLCBlKQoJCQlzZWxmOmNvZGVzdHJpbmcobHMsIGUsIHNlbGY6c3RyX2NoZWNrbmFtZShscykpCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIGNyZWF0ZXMgc3RydWN0IGVudHJ5IGZvciBhIGxvY2FsIHZhcmlhYmxlCgkJLS0gKiB1c2VkIG9ubHkgaW4gbmV3X2xvY2FsdmFyKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOnJlZ2lzdGVybG9jYWx2YXIobHMsIHZhcm5hbWUpCgkJCWxvY2FsIGZzID0gbHMuZnMKCQkJbG9jYWwgZiA9IGZzLmYKCQkJc2VsZjpncm93dmVjdG9yKGxzLkwsIGYubG9jdmFycywgZnMubmxvY3ZhcnMsIGYuc2l6ZWxvY3ZhcnMsCgkJCQluaWwsIHNlbGYuU0hSVF9NQVgsICJ0b28gbWFueSBsb2NhbCB2YXJpYWJsZXMiKQoJCQktLSBsb29wIHRvIGluaXRpYWxpemUgZW1wdHkgZi5sb2N2YXIgcG9zaXRpb25zIG5vdCByZXF1aXJlZAoJCQlmLmxvY3ZhcnNbZnMubmxvY3ZhcnNdID0ge30gLS0gTG9jVmFyCgkJCWYubG9jdmFyc1tmcy5ubG9jdmFyc10udmFybmFtZSA9IHZhcm5hbWUKCQkJLS0gbHVhQ19vYmpiYXJyaWVyKGxzLkwsIGYsIHZhcm5hbWUpIC8qIEdDICovCgkJCWxvY2FsIG5sb2N2YXJzID0gZnMubmxvY3ZhcnMKCQkJZnMubmxvY3ZhcnMgPSBmcy5ubG9jdmFycyArIDEKCQkJcmV0dXJuIG5sb2N2YXJzCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIGNyZWF0ZXMgYSBuZXcgbG9jYWwgdmFyaWFibGUgZ2l2ZW4gYSBuYW1lIGFuZCBhbiBvZmZzZXQgZnJvbSBuYWN0dmFyCgkJLS0gKiB1c2VkIGluIGZvcm51bSgpLCBmb3JsaXN0KCksIHBhcmxpc3QoKSwgYm9keSgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpuZXdfbG9jYWx2YXJsaXRlcmFsKGxzLCB2LCBuKQoJCQlzZWxmOm5ld19sb2NhbHZhcihscywgdiwgbikKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gcmVnaXN0ZXIgYSBsb2NhbCB2YXJpYWJsZSwgc2V0IGluIGFjdGl2ZSB2YXJpYWJsZSBsaXN0CgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpuZXdfbG9jYWx2YXIobHMsIG5hbWUsIG4pCgkJCWxvY2FsIGZzID0gbHMuZnMKCQkJc2VsZjpjaGVja2xpbWl0KGZzLCBmcy5uYWN0dmFyICsgbiArIDEsIHNlbGYuTFVBSV9NQVhWQVJTLCAibG9jYWwgdmFyaWFibGVzIikKCQkJZnMuYWN0dmFyW2ZzLm5hY3R2YXIgKyBuXSA9IHNlbGY6cmVnaXN0ZXJsb2NhbHZhcihscywgbmFtZSkKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gYWRkcyBudmFycyBudW1iZXIgb2YgbmV3IGxvY2FsIHZhcmlhYmxlcywgc2V0IGRlYnVnIGluZm9ybWF0aW9uCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTphZGp1c3Rsb2NhbHZhcnMobHMsIG52YXJzKQoJCQlsb2NhbCBmcyA9IGxzLmZzCgkJCWZzLm5hY3R2YXIgPSBmcy5uYWN0dmFyICsgbnZhcnMKCQkJZm9yIGkgPSBudmFycywgMSwgLTEgZG8KCQkJCXNlbGY6Z2V0bG9jdmFyKGZzLCBmcy5uYWN0dmFyIC0gaSkuc3RhcnRwYyA9IGZzLnBjCgkJCWVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSByZW1vdmVzIGEgbnVtYmVyIG9mIGxvY2Fscywgc2V0IGRlYnVnIGluZm9ybWF0aW9uCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpyZW1vdmV2YXJzKGxzLCB0b2xldmVsKQoJCQlsb2NhbCBmcyA9IGxzLmZzCgkJCXdoaWxlIGZzLm5hY3R2YXIgPiB0b2xldmVsIGRvCgkJCQlmcy5uYWN0dmFyID0gZnMubmFjdHZhciAtIDEKCQkJCXNlbGY6Z2V0bG9jdmFyKGZzLCBmcy5uYWN0dmFyKS5lbmRwYyA9IGZzLnBjCgkJCWVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSByZXR1cm5zIGFuIGV4aXN0aW5nIHVwdmFsdWUgaW5kZXggYmFzZWQgb24gdGhlIGdpdmVuIG5hbWUsIG9yCgkJLS0gY3JlYXRlcyBhIG5ldyB1cHZhbHVlIHN0cnVjdCBlbnRyeSBhbmQgcmV0dXJucyB0aGUgbmV3IGluZGV4CgkJLS0gKiB1c2VkIG9ubHkgaW4gc2luZ2xldmFyYXV4KCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOmluZGV4dXB2YWx1ZShmcywgbmFtZSwgdikKCQkJbG9jYWwgZiA9IGZzLmYKCQkJZm9yIGkgPSAwLCBmLm51cHMgLSAxIGRvCgkJCQlpZiBmcy51cHZhbHVlc1tpXS5rID09IHYuayBhbmQgZnMudXB2YWx1ZXNbaV0uaW5mbyA9PSB2LmluZm8gdGhlbgoJCQkJCWx1YV9hc3NlcnQoZi51cHZhbHVlc1tpXSA9PSBuYW1lKQoJCQkJCXJldHVybiBpCgkJCQllbmQKCQkJZW5kCgkJCS0tIG5ldyBvbmUKCQkJc2VsZjpjaGVja2xpbWl0KGZzLCBmLm51cHMgKyAxLCBzZWxmLkxVQUlfTUFYVVBWQUxVRVMsICJ1cHZhbHVlcyIpCgkJCXNlbGY6Z3Jvd3ZlY3Rvcihmcy5MLCBmLnVwdmFsdWVzLCBmLm51cHMsIGYuc2l6ZXVwdmFsdWVzLAoJCQkJbmlsLCBzZWxmLk1BWF9JTlQsICIiKQoJCQktLSBsb29wIHRvIGluaXRpYWxpemUgZW1wdHkgZi51cHZhbHVlcyBwb3NpdGlvbnMgbm90IHJlcXVpcmVkCgkJCWYudXB2YWx1ZXNbZi5udXBzXSA9IG5hbWUKCQkJLS0gbHVhQ19vYmpiYXJyaWVyKGZzLT5MLCBmLCBuYW1lKTsgLyogR0MgKi8KCQkJbHVhX2Fzc2VydCh2LmsgPT0gIlZMT0NBTCIgb3Igdi5rID09ICJWVVBWQUwiKQoJCQktLSB0aGlzIGlzIGEgcGFydGlhbCBjb3B5OyBvbmx5IGsgJiBpbmZvIGZpZWxkcyB1c2VkCgkJCWZzLnVwdmFsdWVzW2YubnVwc10gPSB7IGsgPSB2LmssIGluZm8gPSB2LmluZm8gfQoJCQlsb2NhbCBudXBzID0gZi5udXBzCgkJCWYubnVwcyA9IGYubnVwcyArIDEKCQkJcmV0dXJuIG51cHMKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gc2VhcmNoIHRoZSBsb2NhbCB2YXJpYWJsZSBuYW1lc3BhY2Ugb2YgdGhlIGdpdmVuIGZzIGZvciBhIG1hdGNoCgkJLS0gKiB1c2VkIG9ubHkgaW4gc2luZ2xldmFyYXV4KCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOnNlYXJjaHZhcihmcywgbikKCQkJZm9yIGkgPSBmcy5uYWN0dmFyIC0gMSwgMCwgLTEgZG8KCQkJCWlmIG4gPT0gc2VsZjpnZXRsb2N2YXIoZnMsIGkpLnZhcm5hbWUgdGhlbgoJCQkJCXJldHVybiBpCgkJCQllbmQKCQkJZW5kCgkJCXJldHVybiAtMSAgLS0gbm90IGZvdW5kCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tICogbWFyayB1cHZhbHVlIGZsYWdzIGluIGZ1bmN0aW9uIHN0YXRlcyB1cCB0byBhIGdpdmVuIGxldmVsCgkJLS0gKiB1c2VkIG9ubHkgaW4gc2luZ2xldmFyYXV4KCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOm1hcmt1cHZhbChmcywgbGV2ZWwpCgkJCWxvY2FsIGJsID0gZnMuYmwKCQkJd2hpbGUgYmwgYW5kIGJsLm5hY3R2YXIgPiBsZXZlbCBkbyBibCA9IGJsLnByZXZpb3VzIGVuZAoJCQlpZiBibCB0aGVuIGJsLnVwdmFsID0gdHJ1ZSBlbmQKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gaGFuZGxlIGxvY2FscywgZ2xvYmFscyBhbmQgdXB2YWx1ZXMgYW5kIHJlbGF0ZWQgcHJvY2Vzc2luZwoJCS0tICogc2VhcmNoIG1lY2hhbmlzbSBpcyByZWN1cnNpdmUsIGNhbGxzIGl0c2VsZiB0byBzZWFyY2ggcGFyZW50cwoJCS0tICogdXNlZCBvbmx5IGluIHNpbmdsZXZhcigpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpzaW5nbGV2YXJhdXgoZnMsIG4sIHZhciwgYmFzZSkKCQkJaWYgZnMgPT0gbmlsIHRoZW4gIC0tIG5vIG1vcmUgbGV2ZWxzPwoJCQkJc2VsZjppbml0X2V4cCh2YXIsICJWR0xPQkFMIiwgbHVhUC5OT19SRUcpICAtLSBkZWZhdWx0IGlzIGdsb2JhbCB2YXJpYWJsZQoJCQkJcmV0dXJuICJWR0xPQkFMIgoJCQllbHNlCgkJCQlsb2NhbCB2ID0gc2VsZjpzZWFyY2h2YXIoZnMsIG4pICAtLSBsb29rIHVwIGF0IGN1cnJlbnQgbGV2ZWwKCQkJCWlmIHYgPj0gMCB0aGVuCgkJCQkJc2VsZjppbml0X2V4cCh2YXIsICJWTE9DQUwiLCB2KQoJCQkJCWlmIGJhc2UgPT0gMCB0aGVuCgkJCQkJCXNlbGY6bWFya3VwdmFsKGZzLCB2KSAgLS0gbG9jYWwgd2lsbCBiZSB1c2VkIGFzIGFuIHVwdmFsCgkJCQkJZW5kCgkJCQkJcmV0dXJuICJWTE9DQUwiCgkJCQllbHNlICAtLSBub3QgZm91bmQgYXQgY3VycmVudCBsZXZlbDsgdHJ5IHVwcGVyIG9uZQoJCQkJCWlmIHNlbGY6c2luZ2xldmFyYXV4KGZzLnByZXYsIG4sIHZhciwgMCkgPT0gIlZHTE9CQUwiIHRoZW4KCQkJCQkJcmV0dXJuICJWR0xPQkFMIgoJCQkJCWVuZAoJCQkJCXZhci5pbmZvID0gc2VsZjppbmRleHVwdmFsdWUoZnMsIG4sIHZhcikgIC0tIGVsc2Ugd2FzIExPQ0FMIG9yIFVQVkFMCgkJCQkJdmFyLmsgPSAiVlVQVkFMIiAgLS0gdXB2YWx1ZSBpbiB0aGlzIGxldmVsCgkJCQkJcmV0dXJuICJWVVBWQUwiCgkJCQllbmQtLWlmIHYKCQkJZW5kLS1pZiBmcwoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBjb25zdW1lIGEgbmFtZSB0b2tlbiwgY3JlYXRlcyBhIHZhcmlhYmxlIChnbG9iYWx8bG9jYWx8dXB2YWx1ZSkKCQktLSAqIHVzZWQgaW4gcHJlZml4ZXhwKCksIGZ1bmNuYW1lKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOnNpbmdsZXZhcihscywgdmFyKQoJCQlsb2NhbCB2YXJuYW1lID0gc2VsZjpzdHJfY2hlY2tuYW1lKGxzKQoJCQlsb2NhbCBmcyA9IGxzLmZzCgkJCWlmIHNlbGY6c2luZ2xldmFyYXV4KGZzLCB2YXJuYW1lLCB2YXIsIDEpID09ICJWR0xPQkFMIiB0aGVuCgkJCQl2YXIuaW5mbyA9IGx1YUs6c3RyaW5nSyhmcywgdmFybmFtZSkgIC0tIGluZm8gcG9pbnRzIHRvIGdsb2JhbCBuYW1lCgkJCWVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBhZGp1c3QgUkhTIHRvIG1hdGNoIExIUyBpbiBhbiBhc3NpZ25tZW50CgkJLS0gKiB1c2VkIGluIGFzc2lnbm1lbnQoKSwgZm9ybGlzdCgpLCBsb2NhbHN0YXQoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6YWRqdXN0X2Fzc2lnbihscywgbnZhcnMsIG5leHBzLCBlKQoJCQlsb2NhbCBmcyA9IGxzLmZzCgkJCWxvY2FsIGV4dHJhID0gbnZhcnMgLSBuZXhwcwoJCQlpZiBzZWxmOmhhc211bHRyZXQoZS5rKSB0aGVuCgkJCQlleHRyYSA9IGV4dHJhICsgMSAgLS0gaW5jbHVkZXMgY2FsbCBpdHNlbGYKCQkJCWlmIGV4dHJhIDw9IDAgdGhlbiBleHRyYSA9IDAgZW5kCgkJCQlsdWFLOnNldHJldHVybnMoZnMsIGUsIGV4dHJhKSAgLS0gbGFzdCBleHAuIHByb3ZpZGVzIHRoZSBkaWZmZXJlbmNlCgkJCQlpZiBleHRyYSA+IDEgdGhlbiBsdWFLOnJlc2VydmVyZWdzKGZzLCBleHRyYSAtIDEpIGVuZAoJCQllbHNlCgkJCQlpZiBlLmsgfj0gIlZWT0lEIiB0aGVuIGx1YUs6ZXhwMm5leHRyZWcoZnMsIGUpIGVuZCAgLS0gY2xvc2UgbGFzdCBleHByZXNzaW9uCgkJCQlpZiBleHRyYSA+IDAgdGhlbgoJCQkJCWxvY2FsIHJlZyA9IGZzLmZyZWVyZWcKCQkJCQlsdWFLOnJlc2VydmVyZWdzKGZzLCBleHRyYSkKCQkJCQlsdWFLOl9uaWwoZnMsIHJlZywgZXh0cmEpCgkJCQllbmQKCQkJZW5kCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHRyYWNrcyBhbmQgbGltaXRzIHBhcnNpbmcgZGVwdGgsIGFzc2VydCBjaGVjayBhdCBlbmQgb2YgcGFyc2luZwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6ZW50ZXJsZXZlbChscykKCQkJbHMuTC5uQ2NhbGxzID0gbHMuTC5uQ2NhbGxzICsgMQoJCQlpZiBscy5MLm5DY2FsbHMgPiBzZWxmLkxVQUlfTUFYQ0NBTExTIHRoZW4KCQkJCWx1YVg6bGV4ZXJyb3IobHMsICJjaHVuayBoYXMgdG9vIG1hbnkgc3ludGF4IGxldmVscyIsIDApCgkJCWVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSB0cmFja3MgcGFyc2luZyBkZXB0aCwgYSBwYWlyIHdpdGggbHVhWTplbnRlcmxldmVsKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOmxlYXZlbGV2ZWwobHMpCgkJCWxzLkwubkNjYWxscyA9IGxzLkwubkNjYWxscyAtIDEKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gZW50ZXJzIGEgY29kZSB1bml0LCBpbml0aWFsaXplcyBlbGVtZW50cwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6ZW50ZXJibG9jayhmcywgYmwsIGlzYnJlYWthYmxlKQoJCQlibC5icmVha2xpc3QgPSBsdWFLLk5PX0pVTVAKCQkJYmwuaXNicmVha2FibGUgPSBpc2JyZWFrYWJsZQoJCQlibC5uYWN0dmFyID0gZnMubmFjdHZhcgoJCQlibC51cHZhbCA9IGZhbHNlCgkJCWJsLnByZXZpb3VzID0gZnMuYmwKCQkJZnMuYmwgPSBibAoJCQlsdWFfYXNzZXJ0KGZzLmZyZWVyZWcgPT0gZnMubmFjdHZhcikKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gbGVhdmVzIGEgY29kZSB1bml0LCBjbG9zZSBhbnkgdXB2YWx1ZXMKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOmxlYXZlYmxvY2soZnMpCgkJCWxvY2FsIGJsID0gZnMuYmwKCQkJZnMuYmwgPSBibC5wcmV2aW91cwoJCQlzZWxmOnJlbW92ZXZhcnMoZnMubHMsIGJsLm5hY3R2YXIpCgkJCWlmIGJsLnVwdmFsIHRoZW4KCQkJCWx1YUs6Y29kZUFCQyhmcywgIk9QX0NMT1NFIiwgYmwubmFjdHZhciwgMCwgMCkKCQkJZW5kCgkJCS0tIGEgYmxvY2sgZWl0aGVyIGNvbnRyb2xzIHNjb3BlIG9yIGJyZWFrcyAobmV2ZXIgYm90aCkKCQkJbHVhX2Fzc2VydChub3QgYmwuaXNicmVha2FibGUgb3Igbm90IGJsLnVwdmFsKQoJCQlsdWFfYXNzZXJ0KGJsLm5hY3R2YXIgPT0gZnMubmFjdHZhcikKCQkJZnMuZnJlZXJlZyA9IGZzLm5hY3R2YXIgIC0tIGZyZWUgcmVnaXN0ZXJzCgkJCWx1YUs6cGF0Y2h0b2hlcmUoZnMsIGJsLmJyZWFrbGlzdCkKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gaW1wbGVtZW50IHRoZSBpbnN0YW50aWF0aW9uIG9mIGEgZnVuY3Rpb24gcHJvdG90eXBlLCBhcHBlbmQgbGlzdCBvZgoJCS0tIHVwdmFsdWVzIGFmdGVyIHRoZSBpbnN0YW50aWF0aW9uIGluc3RydWN0aW9uCgkJLS0gKiB1c2VkIG9ubHkgaW4gYm9keSgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpwdXNoY2xvc3VyZShscywgZnVuYywgdikKCQkJbG9jYWwgZnMgPSBscy5mcwoJCQlsb2NhbCBmID0gZnMuZgoJCQlzZWxmOmdyb3d2ZWN0b3IobHMuTCwgZi5wLCBmcy5ucCwgZi5zaXplcCwgbmlsLAoJCQkJbHVhUC5NQVhBUkdfQngsICJjb25zdGFudCB0YWJsZSBvdmVyZmxvdyIpCgkJCS0tIGxvb3AgdG8gaW5pdGlhbGl6ZSBlbXB0eSBmLnAgcG9zaXRpb25zIG5vdCByZXF1aXJlZAoJCQlmLnBbZnMubnBdID0gZnVuYy5mCgkJCWZzLm5wID0gZnMubnAgKyAxCgkJCS0tIGx1YUNfb2JqYmFycmllcihscy0+TCwgZiwgZnVuYy0+Zik7IC8qIEMgKi8KCQkJc2VsZjppbml0X2V4cCh2LCAiVlJFTE9DQUJMRSIsIGx1YUs6Y29kZUFCeChmcywgIk9QX0NMT1NVUkUiLCAwLCBmcy5ucCAtIDEpKQoJCQlmb3IgaSA9IDAsIGZ1bmMuZi5udXBzIC0gMSBkbwoJCQkJbG9jYWwgbyA9IChmdW5jLnVwdmFsdWVzW2ldLmsgPT0gIlZMT0NBTCIpIGFuZCAiT1BfTU9WRSIgb3IgIk9QX0dFVFVQVkFMIgoJCQkJbHVhSzpjb2RlQUJDKGZzLCBvLCAwLCBmdW5jLnVwdmFsdWVzW2ldLmluZm8sIDApCgkJCWVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBvcGVuaW5nIG9mIGEgZnVuY3Rpb24KCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOm9wZW5fZnVuYyhscywgZnMpCgkJCWxvY2FsIEwgPSBscy5MCgkJCWxvY2FsIGYgPSBzZWxmOm5ld3Byb3RvKGxzLkwpCgkJCWZzLmYgPSBmCgkJCWZzLnByZXYgPSBscy5mcyAgLS0gbGlua2VkIGxpc3Qgb2YgZnVuY3N0YXRlcwoJCQlmcy5scyA9IGxzCgkJCWZzLkwgPSBMCgkJCWxzLmZzID0gZnMKCQkJZnMucGMgPSAwCgkJCWZzLmxhc3R0YXJnZXQgPSAtMQoJCQlmcy5qcGMgPSBsdWFLLk5PX0pVTVAKCQkJZnMuZnJlZXJlZyA9IDAKCQkJZnMubmsgPSAwCgkJCWZzLm5wID0gMAoJCQlmcy5ubG9jdmFycyA9IDAKCQkJZnMubmFjdHZhciA9IDAKCQkJZnMuYmwgPSBuaWwKCQkJZi5zb3VyY2UgPSBscy5zb3VyY2UKCQkJZi5tYXhzdGFja3NpemUgPSAyICAtLSByZWdpc3RlcnMgMC8xIGFyZSBhbHdheXMgdmFsaWQKCQkJZnMuaCA9IHt9ICAtLSBjb25zdGFudCB0YWJsZTsgd2FzIGx1YUhfbmV3IGNhbGwKCQkJLS0gYW5jaG9yIHRhYmxlIG9mIGNvbnN0YW50cyBhbmQgcHJvdG90eXBlICh0byBhdm9pZCBiZWluZyBjb2xsZWN0ZWQpCgkJCS0tIHNldGh2YWx1ZTJzKEwsIEwtPnRvcCwgZnMtPmgpOyBpbmNyX3RvcChMKTsgLyogQyAqLwoJCQktLSBzZXRwdHZhbHVlMnMoTCwgTC0+dG9wLCBmKTsgaW5jcl90b3AoTCk7CgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIGNsb3Npbmcgb2YgYSBmdW5jdGlvbgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6Y2xvc2VfZnVuYyhscykKCQkJbG9jYWwgTCA9IGxzLkwKCQkJbG9jYWwgZnMgPSBscy5mcwoJCQlsb2NhbCBmID0gZnMuZgoJCQlzZWxmOnJlbW92ZXZhcnMobHMsIDApCgkJCWx1YUs6cmV0KGZzLCAwLCAwKSAgLS0gZmluYWwgcmV0dXJuCgkJCS0tIGx1YU1fcmVhbGxvY3ZlY3RvciBkZWxldGVkIGZvciBmLT5jb2RlLCBmLT5saW5laW5mbywgZi0+aywgZi0+cCwKCQkJLS0gZi0+bG9jdmFycywgZi0+dXB2YWx1ZXM7IG5vdCByZXF1aXJlZCBmb3IgTHVhIHRhYmxlIGFycmF5cwoJCQlmLnNpemVjb2RlID0gZnMucGMKCQkJZi5zaXplbGluZWluZm8gPSBmcy5wYwoJCQlmLnNpemVrID0gZnMubmsKCQkJZi5zaXplcCA9IGZzLm5wCgkJCWYuc2l6ZWxvY3ZhcnMgPSBmcy5ubG9jdmFycwoJCQlmLnNpemV1cHZhbHVlcyA9IGYubnVwcwoJCQktLWx1YV9hc3NlcnQobHVhR19jaGVja2NvZGUoZikpICAtLSBjdXJyZW50bHkgbm90IGltcGxlbWVudGVkCgkJCWx1YV9hc3NlcnQoZnMuYmwgPT0gbmlsKQoJCQlscy5mcyA9IGZzLnByZXYKCQkJLS0gdGhlIGZvbGxvd2luZyBpcyBub3QgcmVxdWlyZWQgZm9yIHRoaXMgaW1wbGVtZW50YXRpb247IGtlcHQgaGVyZQoJCQktLSBmb3IgY29tcGxldGVuZXNzCgkJCS0tIEwtPnRvcCAtPSAyOyAgLyogcmVtb3ZlIHRhYmxlIGFuZCBwcm90b3R5cGUgZnJvbSB0aGUgc3RhY2sgKi8KCQkJLS0gbGFzdCB0b2tlbiByZWFkIHdhcyBhbmNob3JlZCBpbiBkZWZ1bmN0IGZ1bmN0aW9uOyBtdXN0IHJlYW5jaG9yIGl0CgkJCWlmIGZzIHRoZW4gc2VsZjphbmNob3JfdG9rZW4obHMpIGVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwYXJzZXIgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24KCQktLSAqIG5vdGUgYWRkaXRpb25hbCBzdWItdGFibGVzIG5lZWRlZCBmb3IgTGV4U3RhdGUsIEZ1bmNTdGF0ZQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6cGFyc2VyKEwsIHosIGJ1ZmYsIG5hbWUpCgkJCWxvY2FsIGxleHN0YXRlID0ge30gIC0tIExleFN0YXRlCgkJCWxleHN0YXRlLnQgPSB7fQoJCQlsZXhzdGF0ZS5sb29rYWhlYWQgPSB7fQoJCQlsb2NhbCBmdW5jc3RhdGUgPSB7fSAgLS0gRnVuY1N0YXRlCgkJCWZ1bmNzdGF0ZS51cHZhbHVlcyA9IHt9CgkJCWZ1bmNzdGF0ZS5hY3R2YXIgPSB7fQoJCQktLSB0aGUgZm9sbG93aW5nIG5DY2FsbHMgaW5pdGlhbGl6YXRpb24gYWRkZWQgZm9yIGNvbnZlbmllbmNlCgkJCUwubkNjYWxscyA9IDAKCQkJbGV4c3RhdGUuYnVmZiA9IGJ1ZmYKCQkJbHVhWDpzZXRpbnB1dChMLCBsZXhzdGF0ZSwgeiwgbmFtZSkKCQkJc2VsZjpvcGVuX2Z1bmMobGV4c3RhdGUsIGZ1bmNzdGF0ZSkKCQkJZnVuY3N0YXRlLmYuaXNfdmFyYXJnID0gc2VsZi5WQVJBUkdfSVNWQVJBUkcgIC0tIG1haW4gZnVuYy4gaXMgYWx3YXlzIHZhcmFyZwoJCQlsdWFYOm5leHQobGV4c3RhdGUpICAtLSByZWFkIGZpcnN0IHRva2VuCgkJCXNlbGY6Y2h1bmsobGV4c3RhdGUpCgkJCXNlbGY6Y2hlY2sobGV4c3RhdGUsICJUS19FT1MiKQoJCQlzZWxmOmNsb3NlX2Z1bmMobGV4c3RhdGUpCgkJCWx1YV9hc3NlcnQoZnVuY3N0YXRlLnByZXYgPT0gbmlsKQoJCQlsdWFfYXNzZXJ0KGZ1bmNzdGF0ZS5mLm51cHMgPT0gMCkKCQkJbHVhX2Fzc2VydChsZXhzdGF0ZS5mcyA9PSBuaWwpCgkJCXJldHVybiBmdW5jc3RhdGUuZgoJCWVuZAoKLS1bWy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tIEdSQU1NQVIgUlVMRVMKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLV1dCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIGEgZnVuY3Rpb24gbmFtZSBzdWZmaXgsIGZvciBmdW5jdGlvbiBjYWxsIHNwZWNpZmljYXRpb25zCgkJLS0gKiB1c2VkIGluIHByaW1hcnlleHAoKSwgZnVuY25hbWUoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6ZmllbGQobHMsIHYpCgkJCS0tIGZpZWxkIC0+IFsnLicgfCAnOiddIE5BTUUKCQkJbG9jYWwgZnMgPSBscy5mcwoJCQlsb2NhbCBrZXkgPSB7fSAgLS0gZXhwZGVzYwoJCQlsdWFLOmV4cDJhbnlyZWcoZnMsIHYpCgkJCWx1YVg6bmV4dChscykgIC0tIHNraXAgdGhlIGRvdCBvciBjb2xvbgoJCQlzZWxmOmNoZWNrbmFtZShscywga2V5KQoJCQlsdWFLOmluZGV4ZWQoZnMsIHYsIGtleSkKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gcGFyc2UgYSB0YWJsZSBpbmRleGluZyBzdWZmaXgsIGZvciBjb25zdHJ1Y3RvcnMsIGV4cHJlc3Npb25zCgkJLS0gKiB1c2VkIGluIHJlY2ZpZWxkKCksIHByaW1hcnlleHAoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6eWluZGV4KGxzLCB2KQoJCQktLSBpbmRleCAtPiAnWycgZXhwciAnXScKCQkJbHVhWDpuZXh0KGxzKSAgLS0gc2tpcCB0aGUgJ1snCgkJCXNlbGY6ZXhwcihscywgdikKCQkJbHVhSzpleHAydmFsKGxzLmZzLCB2KQoJCQlzZWxmOmNoZWNrbmV4dChscywgIl0iKQoJCWVuZAoKLS1bWy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCi0tIFJ1bGVzIGZvciBDb25zdHJ1Y3RvcnMKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLV1dCgotLVtbLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLS0gc3RydWN0IENvbnNDb250cm9sOgotLSAgIHYgIC0tIGxhc3QgbGlzdCBpdGVtIHJlYWQgKHRhYmxlOiBzdHJ1Y3QgZXhwZGVzYykKLS0gICB0ICAtLSB0YWJsZSBkZXNjcmlwdG9yICh0YWJsZTogc3RydWN0IGV4cGRlc2MpCi0tICAgbmggIC0tIHRvdGFsIG51bWJlciBvZiAncmVjb3JkJyBlbGVtZW50cwotLSAgIG5hICAtLSB0b3RhbCBudW1iZXIgb2YgYXJyYXkgZWxlbWVudHMKLS0gICB0b3N0b3JlICAtLSBudW1iZXIgb2YgYXJyYXkgZWxlbWVudHMgcGVuZGluZyB0byBiZSBzdG9yZWQKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLV1dCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIGEgdGFibGUgcmVjb3JkIChoYXNoKSBmaWVsZAoJCS0tICogdXNlZCBpbiBjb25zdHJ1Y3RvcigpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpyZWNmaWVsZChscywgY2MpCgkJCS0tIHJlY2ZpZWxkIC0+IChOQU1FIHwgJ1snZXhwMSddJykgPSBleHAxCgkJCWxvY2FsIGZzID0gbHMuZnMKCQkJbG9jYWwgcmVnID0gbHMuZnMuZnJlZXJlZwoJCQlsb2NhbCBrZXksIHZhbCA9IHt9LCB7fSAgLS0gZXhwZGVzYwoJCQlpZiBscy50LnRva2VuID09ICJUS19OQU1FIiB0aGVuCgkJCQlzZWxmOmNoZWNrbGltaXQoZnMsIGNjLm5oLCBzZWxmLk1BWF9JTlQsICJpdGVtcyBpbiBhIGNvbnN0cnVjdG9yIikKCQkJCXNlbGY6Y2hlY2tuYW1lKGxzLCBrZXkpCgkJCWVsc2UgIC0tIGxzLT50LnRva2VuID09ICdbJwoJCQkJc2VsZjp5aW5kZXgobHMsIGtleSkKCQkJZW5kCgkJCWNjLm5oID0gY2MubmggKyAxCgkJCXNlbGY6Y2hlY2tuZXh0KGxzLCAiPSIpCgkJCWxvY2FsIHJra2V5ID0gbHVhSzpleHAyUksoZnMsIGtleSkKCQkJc2VsZjpleHByKGxzLCB2YWwpCgkJCWx1YUs6Y29kZUFCQyhmcywgIk9QX1NFVFRBQkxFIiwgY2MudC5pbmZvLCBya2tleSwgbHVhSzpleHAyUksoZnMsIHZhbCkpCgkJCWZzLmZyZWVyZWcgPSByZWcgIC0tIGZyZWUgcmVnaXN0ZXJzCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIGVtaXQgYSBzZXQgbGlzdCBpbnN0cnVjdGlvbiBpZiBlbm91Z2ggZWxlbWVudHMgKExGSUVMRFNfUEVSX0ZMVVNIKQoJCS0tICogdXNlZCBpbiBjb25zdHJ1Y3RvcigpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpjbG9zZWxpc3RmaWVsZChmcywgY2MpCgkJCWlmIGNjLnYuayA9PSAiVlZPSUQiIHRoZW4gcmV0dXJuIGVuZCAgLS0gdGhlcmUgaXMgbm8gbGlzdCBpdGVtCgkJCWx1YUs6ZXhwMm5leHRyZWcoZnMsIGNjLnYpCgkJCWNjLnYuayA9ICJWVk9JRCIKCQkJaWYgY2MudG9zdG9yZSA9PSBsdWFQLkxGSUVMRFNfUEVSX0ZMVVNIIHRoZW4KCQkJCWx1YUs6c2V0bGlzdChmcywgY2MudC5pbmZvLCBjYy5uYSwgY2MudG9zdG9yZSkgIC0tIGZsdXNoCgkJCQljYy50b3N0b3JlID0gMCAgLS0gbm8gbW9yZSBpdGVtcyBwZW5kaW5nCgkJCWVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBlbWl0IGEgc2V0IGxpc3QgaW5zdHJ1Y3Rpb24gYXQgdGhlIGVuZCBvZiBwYXJzaW5nIGxpc3QgY29uc3RydWN0b3IKCQktLSAqIHVzZWQgaW4gY29uc3RydWN0b3IoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6bGFzdGxpc3RmaWVsZChmcywgY2MpCgkJCWlmIGNjLnRvc3RvcmUgPT0gMCB0aGVuIHJldHVybiBlbmQKCQkJaWYgc2VsZjpoYXNtdWx0cmV0KGNjLnYuaykgdGhlbgoJCQkJbHVhSzpzZXRtdWx0cmV0KGZzLCBjYy52KQoJCQkJbHVhSzpzZXRsaXN0KGZzLCBjYy50LmluZm8sIGNjLm5hLCBzZWxmLkxVQV9NVUxUUkVUKQoJCQkJY2MubmEgPSBjYy5uYSAtIDEgIC0tIGRvIG5vdCBjb3VudCBsYXN0IGV4cHJlc3Npb24gKHVua25vd24gbnVtYmVyIG9mIGVsZW1lbnRzKQoJCQllbHNlCgkJCQlpZiBjYy52Lmsgfj0gIlZWT0lEIiB0aGVuCgkJCQkJbHVhSzpleHAybmV4dHJlZyhmcywgY2MudikKCQkJCWVuZAoJCQkJbHVhSzpzZXRsaXN0KGZzLCBjYy50LmluZm8sIGNjLm5hLCBjYy50b3N0b3JlKQoJCQllbmQKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gcGFyc2UgYSB0YWJsZSBsaXN0IChhcnJheSkgZmllbGQKCQktLSAqIHVzZWQgaW4gY29uc3RydWN0b3IoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6bGlzdGZpZWxkKGxzLCBjYykKCQkJc2VsZjpleHByKGxzLCBjYy52KQoJCQlzZWxmOmNoZWNrbGltaXQobHMuZnMsIGNjLm5hLCBzZWxmLk1BWF9JTlQsICJpdGVtcyBpbiBhIGNvbnN0cnVjdG9yIikKCQkJY2MubmEgPSBjYy5uYSArIDEKCQkJY2MudG9zdG9yZSA9IGNjLnRvc3RvcmUgKyAxCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIGEgdGFibGUgY29uc3RydWN0b3IKCQktLSAqIHVzZWQgaW4gZnVuY2FyZ3MoKSwgc2ltcGxlZXhwKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOmNvbnN0cnVjdG9yKGxzLCB0KQoJCQktLSBjb25zdHJ1Y3RvciAtPiAneycgWyBmaWVsZCB7IGZpZWxkc2VwIGZpZWxkIH0gWyBmaWVsZHNlcCBdIF0gJ30nCgkJCS0tIGZpZWxkIC0+IHJlY2ZpZWxkIHwgbGlzdGZpZWxkCgkJCS0tIGZpZWxkc2VwIC0+ICcsJyB8ICc7JwoJCQlsb2NhbCBmcyA9IGxzLmZzCgkJCWxvY2FsIGxpbmUgPSBscy5saW5lbnVtYmVyCgkJCWxvY2FsIHBjID0gbHVhSzpjb2RlQUJDKGZzLCAiT1BfTkVXVEFCTEUiLCAwLCAwLCAwKQoJCQlsb2NhbCBjYyA9IHt9ICAtLSBDb25zQ29udHJvbAoJCQljYy52ID0ge30KCQkJY2MubmEsIGNjLm5oLCBjYy50b3N0b3JlID0gMCwgMCwgMAoJCQljYy50ID0gdAoJCQlzZWxmOmluaXRfZXhwKHQsICJWUkVMT0NBQkxFIiwgcGMpCgkJCXNlbGY6aW5pdF9leHAoY2MudiwgIlZWT0lEIiwgMCkgIC0tIG5vIHZhbHVlICh5ZXQpCgkJCWx1YUs6ZXhwMm5leHRyZWcobHMuZnMsIHQpICAtLSBmaXggaXQgYXQgc3RhY2sgdG9wIChmb3IgZ2MpCgkJCXNlbGY6Y2hlY2tuZXh0KGxzLCAieyIpCgkJCXJlcGVhdAoJCQkJbHVhX2Fzc2VydChjYy52LmsgPT0gIlZWT0lEIiBvciBjYy50b3N0b3JlID4gMCkKCQkJCWlmIGxzLnQudG9rZW4gPT0gIn0iIHRoZW4gYnJlYWsgZW5kCgkJCQlzZWxmOmNsb3NlbGlzdGZpZWxkKGZzLCBjYykKCQkJCWxvY2FsIGMgPSBscy50LnRva2VuCgoJCQkJaWYgYyA9PSAiVEtfTkFNRSIgdGhlbiAgLS0gbWF5IGJlIGxpc3RmaWVsZHMgb3IgcmVjZmllbGRzCgkJCQkJbHVhWDpsb29rYWhlYWQobHMpCgkJCQkJaWYgbHMubG9va2FoZWFkLnRva2VuIH49ICI9IiB0aGVuICAtLSBleHByZXNzaW9uPwoJCQkJCQlzZWxmOmxpc3RmaWVsZChscywgY2MpCgkJCQkJZWxzZQoJCQkJCQlzZWxmOnJlY2ZpZWxkKGxzLCBjYykKCQkJCQllbmQKCQkJCWVsc2VpZiBjID09ICJbIiB0aGVuICAtLSBjb25zdHJ1Y3Rvcl9pdGVtIC0+IHJlY2ZpZWxkCgkJCQkJc2VsZjpyZWNmaWVsZChscywgY2MpCgkJCQllbHNlICAtLSBjb25zdHJ1Y3Rvcl9wYXJ0IC0+IGxpc3RmaWVsZAoJCQkJCXNlbGY6bGlzdGZpZWxkKGxzLCBjYykKCQkJCWVuZAoJCQl1bnRpbCBub3Qgc2VsZjp0ZXN0bmV4dChscywgIiwiKSBhbmQgbm90IHNlbGY6dGVzdG5leHQobHMsICI7IikKCQkJc2VsZjpjaGVja19tYXRjaChscywgIn0iLCAieyIsIGxpbmUpCgkJCXNlbGY6bGFzdGxpc3RmaWVsZChmcywgY2MpCgkJCWx1YVA6U0VUQVJHX0IoZnMuZi5jb2RlW3BjXSwgc2VsZjppbnQyZmIoY2MubmEpKSAtLSBzZXQgaW5pdGlhbCBhcnJheSBzaXplCgkJCWx1YVA6U0VUQVJHX0MoZnMuZi5jb2RlW3BjXSwgc2VsZjppbnQyZmIoY2MubmgpKSAtLSBzZXQgaW5pdGlhbCB0YWJsZSBzaXplCgkJZW5kCgoJCS0tIH09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIHRoZSBhcmd1bWVudHMgKHBhcmFtZXRlcnMpIG9mIGEgZnVuY3Rpb24gZGVjbGFyYXRpb24KCQktLSAqIHVzZWQgaW4gYm9keSgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpwYXJsaXN0KGxzKQoJCQktLSBwYXJsaXN0IC0+IFsgcGFyYW0geyAnLCcgcGFyYW0gfSBdCgkJCWxvY2FsIGZzID0gbHMuZnMKCQkJbG9jYWwgZiA9IGZzLmYKCQkJbG9jYWwgbnBhcmFtcyA9IDAKCQkJZi5pc192YXJhcmcgPSAwCgkJCWlmIGxzLnQudG9rZW4gfj0gIikiIHRoZW4gIC0tIGlzICdwYXJsaXN0JyBub3QgZW1wdHk/CgkJCQlyZXBlYXQKCQkJCQlsb2NhbCBjID0gbHMudC50b2tlbgoJCQkJCWlmIGMgPT0gIlRLX05BTUUiIHRoZW4gIC0tIHBhcmFtIC0+IE5BTUUKCQkJCQkJc2VsZjpuZXdfbG9jYWx2YXIobHMsIHNlbGY6c3RyX2NoZWNrbmFtZShscyksIG5wYXJhbXMpCgkJCQkJCW5wYXJhbXMgPSBucGFyYW1zICsgMQoJCQkJCWVsc2VpZiBjID09ICJUS19ET1RTIiB0aGVuICAtLSBwYXJhbSAtPiBgLi4uJwoJCQkJCQlsdWFYOm5leHQobHMpCgkJCQkJCS0tIFtbCgkJCQkJCS0tICNpZiBkZWZpbmVkKExVQV9DT01QQVRfVkFSQVJHKQoJCQkJCQktLSB1c2UgYGFyZycgYXMgZGVmYXVsdCBuYW1lCgkJCQkJCXNlbGY6bmV3X2xvY2FsdmFybGl0ZXJhbChscywgImFyZyIsIG5wYXJhbXMpCgkJCQkJCW5wYXJhbXMgPSBucGFyYW1zICsgMQoJCQkJCQlmLmlzX3ZhcmFyZyA9IHNlbGYuVkFSQVJHX0hBU0FSRyArIHNlbGYuVkFSQVJHX05FRURTQVJHCgkJCQkJCS0tICNlbmRpZgoJCQkJCQktLV1dCgkJCQkJCWYuaXNfdmFyYXJnID0gZi5pc192YXJhcmcgKyBzZWxmLlZBUkFSR19JU1ZBUkFSRwoJCQkJCWVsc2UKCQkJCQkJbHVhWDpzeW50YXhlcnJvcihscywgIjxuYW1lPiBvciAiLi5zZWxmOkxVQV9RTCgiLi4uIikuLiIgZXhwZWN0ZWQiKQoJCQkJCWVuZAoJCQkJdW50aWwgZi5pc192YXJhcmcgfj0gMCBvciBub3Qgc2VsZjp0ZXN0bmV4dChscywgIiwiKQoJCQllbmQtLWlmCgkJCXNlbGY6YWRqdXN0bG9jYWx2YXJzKGxzLCBucGFyYW1zKQoJCQktLSBOT1RFOiB0aGUgZm9sbG93aW5nIHdvcmtzIG9ubHkgd2hlbiBIQVNBUkdfTUFTSyBpcyAyIQoJCQlmLm51bXBhcmFtcyA9IGZzLm5hY3R2YXIgLSAoZi5pc192YXJhcmcgJSBzZWxmLkhBU0FSR19NQVNLKQoJCQlsdWFLOnJlc2VydmVyZWdzKGZzLCBmcy5uYWN0dmFyKSAgLS0gcmVzZXJ2ZSByZWdpc3RlciBmb3IgcGFyYW1ldGVycwoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwYXJzZSBmdW5jdGlvbiBkZWNsYXJhdGlvbiBib2R5CgkJLS0gKiB1c2VkIGluIHNpbXBsZWV4cCgpLCBsb2NhbGZ1bmMoKSwgZnVuY3N0YXQoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6Ym9keShscywgZSwgbmVlZHNlbGYsIGxpbmUpCgkJCS0tIGJvZHkgLT4gICcoJyBwYXJsaXN0ICcpJyBjaHVuayBFTkQKCQkJbG9jYWwgbmV3X2ZzID0ge30gIC0tIEZ1bmNTdGF0ZQoJCQluZXdfZnMudXB2YWx1ZXMgPSB7fQoJCQluZXdfZnMuYWN0dmFyID0ge30KCQkJc2VsZjpvcGVuX2Z1bmMobHMsIG5ld19mcykKCQkJbmV3X2ZzLmYubGluZURlZmluZWQgPSBsaW5lCgkJCXNlbGY6Y2hlY2tuZXh0KGxzLCAiKCIpCgkJCWlmIG5lZWRzZWxmIHRoZW4KCQkJCXNlbGY6bmV3X2xvY2FsdmFybGl0ZXJhbChscywgInNlbGYiLCAwKQoJCQkJc2VsZjphZGp1c3Rsb2NhbHZhcnMobHMsIDEpCgkJCWVuZAoJCQlzZWxmOnBhcmxpc3QobHMpCgkJCXNlbGY6Y2hlY2tuZXh0KGxzLCAiKSIpCgkJCXNlbGY6Y2h1bmsobHMpCgkJCW5ld19mcy5mLmxhc3RsaW5lZGVmaW5lZCA9IGxzLmxpbmVudW1iZXIKCQkJc2VsZjpjaGVja19tYXRjaChscywgIlRLX0VORCIsICJUS19GVU5DVElPTiIsIGxpbmUpCgkJCXNlbGY6Y2xvc2VfZnVuYyhscykKCQkJc2VsZjpwdXNoY2xvc3VyZShscywgbmV3X2ZzLCBlKQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwYXJzZSBhIGxpc3Qgb2YgY29tbWEtc2VwYXJhdGVkIGV4cHJlc3Npb25zCgkJLS0gKiB1c2VkIGlzIG11bHRpcGxlIGxvY2F0aW9ucwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6ZXhwbGlzdDEobHMsIHYpCgkJCS0tIGV4cGxpc3QxIC0+IGV4cHIgeyAnLCcgZXhwciB9CgkJCWxvY2FsIG4gPSAxICAtLSBhdCBsZWFzdCBvbmUgZXhwcmVzc2lvbgoJCQlzZWxmOmV4cHIobHMsIHYpCgkJCXdoaWxlIHNlbGY6dGVzdG5leHQobHMsICIsIikgZG8KCQkJCWx1YUs6ZXhwMm5leHRyZWcobHMuZnMsIHYpCgkJCQlzZWxmOmV4cHIobHMsIHYpCgkJCQluID0gbiArIDEKCQkJZW5kCgkJCXJldHVybiBuCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIHRoZSBwYXJhbWV0ZXJzIG9mIGEgZnVuY3Rpb24gY2FsbAoJCS0tICogY29udHJhc3Qgd2l0aCBwYXJsaXN0KCksIHVzZWQgaW4gZnVuY3Rpb24gZGVjbGFyYXRpb25zCgkJLS0gKiB1c2VkIGluIHByaW1hcnlleHAoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6ZnVuY2FyZ3MobHMsIGYpCgkJCWxvY2FsIGZzID0gbHMuZnMKCQkJbG9jYWwgYXJncyA9IHt9ICAtLSBleHBkZXNjCgkJCWxvY2FsIG5wYXJhbXMKCQkJbG9jYWwgbGluZSA9IGxzLmxpbmVudW1iZXIKCQkJbG9jYWwgYyA9IGxzLnQudG9rZW4KCQkJaWYgYyA9PSAiKCIgdGhlbiAgLS0gZnVuY2FyZ3MgLT4gJygnIFsgZXhwbGlzdDEgXSAnKScKCQkJCWlmIGxpbmUgfj0gbHMubGFzdGxpbmUgdGhlbgoJCQkJCWx1YVg6c3ludGF4ZXJyb3IobHMsICJhbWJpZ3VvdXMgc3ludGF4IChmdW5jdGlvbiBjYWxsIHggbmV3IHN0YXRlbWVudCkiKQoJCQkJZW5kCgkJCQlsdWFYOm5leHQobHMpCgkJCQlpZiBscy50LnRva2VuID09ICIpIiB0aGVuICAtLSBhcmcgbGlzdCBpcyBlbXB0eT8KCQkJCQlhcmdzLmsgPSAiVlZPSUQiCgkJCQllbHNlCgkJCQkJc2VsZjpleHBsaXN0MShscywgYXJncykKCQkJCQlsdWFLOnNldG11bHRyZXQoZnMsIGFyZ3MpCgkJCQllbmQKCQkJCXNlbGY6Y2hlY2tfbWF0Y2gobHMsICIpIiwgIigiLCBsaW5lKQoJCQllbHNlaWYgYyA9PSAieyIgdGhlbiAgLS0gZnVuY2FyZ3MgLT4gY29uc3RydWN0b3IKCQkJCXNlbGY6Y29uc3RydWN0b3IobHMsIGFyZ3MpCgkJCWVsc2VpZiBjID09ICJUS19TVFJJTkciIHRoZW4gIC0tIGZ1bmNhcmdzIC0+IFNUUklORwoJCQkJc2VsZjpjb2Rlc3RyaW5nKGxzLCBhcmdzLCBscy50LnNlbWluZm8pCgkJCQlsdWFYOm5leHQobHMpICAtLSBtdXN0IHVzZSAnc2VtaW5mbycgYmVmb3JlICduZXh0JwoJCQllbHNlCgkJCQlsdWFYOnN5bnRheGVycm9yKGxzLCAiZnVuY3Rpb24gYXJndW1lbnRzIGV4cGVjdGVkIikKCQkJCXJldHVybgoJCQllbmQKCQkJbHVhX2Fzc2VydChmLmsgPT0gIlZOT05SRUxPQyIpCgkJCWxvY2FsIGJhc2UgPSBmLmluZm8gIC0tIGJhc2UgcmVnaXN0ZXIgZm9yIGNhbGwKCQkJaWYgc2VsZjpoYXNtdWx0cmV0KGFyZ3MuaykgdGhlbgoJCQkJbnBhcmFtcyA9IHNlbGYuTFVBX01VTFRSRVQgIC0tIG9wZW4gY2FsbAoJCQllbHNlCgkJCQlpZiBhcmdzLmsgfj0gIlZWT0lEIiB0aGVuCgkJCQkJbHVhSzpleHAybmV4dHJlZyhmcywgYXJncykgIC0tIGNsb3NlIGxhc3QgYXJndW1lbnQKCQkJCWVuZAoJCQkJbnBhcmFtcyA9IGZzLmZyZWVyZWcgLSAoYmFzZSArIDEpCgkJCWVuZAoJCQlzZWxmOmluaXRfZXhwKGYsICJWQ0FMTCIsIGx1YUs6Y29kZUFCQyhmcywgIk9QX0NBTEwiLCBiYXNlLCBucGFyYW1zICsgMSwgMikpCgkJCWx1YUs6Zml4bGluZShmcywgbGluZSkKCQkJZnMuZnJlZXJlZyA9IGJhc2UgKyAxICAtLSBjYWxsIHJlbW92ZSBmdW5jdGlvbiBhbmQgYXJndW1lbnRzIGFuZCBsZWF2ZXMKCQkJLS0gKHVubGVzcyBjaGFuZ2VkKSBvbmUgcmVzdWx0CgkJZW5kCgotLVtbLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KLS0gRXhwcmVzc2lvbiBwYXJzaW5nCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1dXQoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwYXJzZXMgYW4gZXhwcmVzc2lvbiBpbiBwYXJlbnRoZXNlcyBvciBhIHNpbmdsZSB2YXJpYWJsZQoJCS0tICogdXNlZCBpbiBwcmltYXJ5ZXhwKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOnByZWZpeGV4cChscywgdikKCQkJLS0gcHJlZml4ZXhwIC0+IE5BTUUgfCAnKCcgZXhwciAnKScKCQkJbG9jYWwgYyA9IGxzLnQudG9rZW4KCQkJaWYgYyA9PSAiKCIgdGhlbgoJCQkJbG9jYWwgbGluZSA9IGxzLmxpbmVudW1iZXIKCQkJCWx1YVg6bmV4dChscykKCQkJCXNlbGY6ZXhwcihscywgdikKCQkJCXNlbGY6Y2hlY2tfbWF0Y2gobHMsICIpIiwgIigiLCBsaW5lKQoJCQkJbHVhSzpkaXNjaGFyZ2V2YXJzKGxzLmZzLCB2KQoJCQllbHNlaWYgYyA9PSAiVEtfTkFNRSIgdGhlbgoJCQkJc2VsZjpzaW5nbGV2YXIobHMsIHYpCgkJCWVsc2UKCQkJCWx1YVg6c3ludGF4ZXJyb3IobHMsICJ1bmV4cGVjdGVkIHN5bWJvbCIpCgkJCWVuZC0taWYgYwoJCQlyZXR1cm4KCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gcGFyc2VzIGEgcHJlZml4ZXhwIChhbiBleHByZXNzaW9uIGluIHBhcmVudGhlc2VzIG9yIGEgc2luZ2xlIHZhcmlhYmxlKQoJCS0tIG9yIGEgZnVuY3Rpb24gY2FsbCBzcGVjaWZpY2F0aW9uCgkJLS0gKiB1c2VkIGluIHNpbXBsZWV4cCgpLCBhc3NpZ25tZW50KCksIGV4cHJzdGF0KCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOnByaW1hcnlleHAobHMsIHYpCgkJCS0tIHByaW1hcnlleHAgLT4KCQkJLS0gICAgcHJlZml4ZXhwIHsgJy4nIE5BTUUgfCAnWycgZXhwICddJyB8ICc6JyBOQU1FIGZ1bmNhcmdzIHwgZnVuY2FyZ3MgfQoJCQlsb2NhbCBmcyA9IGxzLmZzCgkJCXNlbGY6cHJlZml4ZXhwKGxzLCB2KQoJCQl3aGlsZSB0cnVlIGRvCgkJCQlsb2NhbCBjID0gbHMudC50b2tlbgoJCQkJaWYgYyA9PSAiLiIgdGhlbiAgLS0gZmllbGQKCQkJCQlzZWxmOmZpZWxkKGxzLCB2KQoJCQkJZWxzZWlmIGMgPT0gIlsiIHRoZW4gIC0tICdbJyBleHAxICddJwoJCQkJCWxvY2FsIGtleSA9IHt9ICAtLSBleHBkZXNjCgkJCQkJbHVhSzpleHAyYW55cmVnKGZzLCB2KQoJCQkJCXNlbGY6eWluZGV4KGxzLCBrZXkpCgkJCQkJbHVhSzppbmRleGVkKGZzLCB2LCBrZXkpCgkJCQllbHNlaWYgYyA9PSAiOiIgdGhlbiAgLS0gJzonIE5BTUUgZnVuY2FyZ3MKCQkJCQlsb2NhbCBrZXkgPSB7fSAgLS0gZXhwZGVzYwoJCQkJCWx1YVg6bmV4dChscykKCQkJCQlzZWxmOmNoZWNrbmFtZShscywga2V5KQoJCQkJCWx1YUs6X3NlbGYoZnMsIHYsIGtleSkKCQkJCQlzZWxmOmZ1bmNhcmdzKGxzLCB2KQoJCQkJZWxzZWlmIGMgPT0gIigiIG9yIGMgPT0gIlRLX1NUUklORyIgb3IgYyA9PSAieyIgdGhlbiAgLS0gZnVuY2FyZ3MKCQkJCQlsdWFLOmV4cDJuZXh0cmVnKGZzLCB2KQoJCQkJCXNlbGY6ZnVuY2FyZ3MobHMsIHYpCgkJCQllbHNlCgkJCQkJcmV0dXJuCgkJCQllbmQtLWlmIGMKCQkJZW5kLS13aGlsZQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwYXJzZXMgZ2VuZXJhbCBleHByZXNzaW9uIHR5cGVzLCBjb25zdGFudHMgaGFuZGxlZCBoZXJlCgkJLS0gKiB1c2VkIGluIHN1YmV4cHIoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6c2ltcGxlZXhwKGxzLCB2KQoJCQktLSBzaW1wbGVleHAgLT4gTlVNQkVSIHwgU1RSSU5HIHwgTklMIHwgVFJVRSB8IEZBTFNFIHwgLi4uIHwKCQkJLS0gICAgICAgICAgICAgIGNvbnN0cnVjdG9yIHwgRlVOQ1RJT04gYm9keSB8IHByaW1hcnlleHAKCQkJbG9jYWwgYyA9IGxzLnQudG9rZW4KCQkJaWYgYyA9PSAiVEtfTlVNQkVSIiB0aGVuCgkJCQlzZWxmOmluaXRfZXhwKHYsICJWS05VTSIsIDApCgkJCQl2Lm52YWwgPSBscy50LnNlbWluZm8KCQkJZWxzZWlmIGMgPT0gIlRLX1NUUklORyIgdGhlbgoJCQkJc2VsZjpjb2Rlc3RyaW5nKGxzLCB2LCBscy50LnNlbWluZm8pCgkJCWVsc2VpZiBjID09ICJUS19OSUwiIHRoZW4KCQkJCXNlbGY6aW5pdF9leHAodiwgIlZOSUwiLCAwKQoJCQllbHNlaWYgYyA9PSAiVEtfVFJVRSIgdGhlbgoJCQkJc2VsZjppbml0X2V4cCh2LCAiVlRSVUUiLCAwKQoJCQllbHNlaWYgYyA9PSAiVEtfRkFMU0UiIHRoZW4KCQkJCXNlbGY6aW5pdF9leHAodiwgIlZGQUxTRSIsIDApCgkJCWVsc2VpZiBjID09ICJUS19ET1RTIiB0aGVuICAtLSB2YXJhcmcKCQkJCWxvY2FsIGZzID0gbHMuZnMKCQkJCXNlbGY6Y2hlY2tfY29uZGl0aW9uKGxzLCBmcy5mLmlzX3ZhcmFyZyB+PSAwLAoJCQkJCSJjYW5ub3QgdXNlICIuLnNlbGY6TFVBX1FMKCIuLi4iKS4uIiBvdXRzaWRlIGEgdmFyYXJnIGZ1bmN0aW9uIik7CgkJCQktLSBOT1RFOiB0aGUgZm9sbG93aW5nIHN1YnN0aXR1dGVzIGZvciBhIGJpdG9wLCBidXQgaXMgdmFsdWUtc3BlY2lmaWMKCQkJCWxvY2FsIGlzX3ZhcmFyZyA9IGZzLmYuaXNfdmFyYXJnCgkJCQlpZiBpc192YXJhcmcgPj0gc2VsZi5WQVJBUkdfTkVFRFNBUkcgdGhlbgoJCQkJCWZzLmYuaXNfdmFyYXJnID0gaXNfdmFyYXJnIC0gc2VsZi5WQVJBUkdfTkVFRFNBUkcgIC0tIGRvbid0IG5lZWQgJ2FyZycKCQkJCWVuZAoJCQkJc2VsZjppbml0X2V4cCh2LCAiVlZBUkFSRyIsIGx1YUs6Y29kZUFCQyhmcywgIk9QX1ZBUkFSRyIsIDAsIDEsIDApKQoJCQllbHNlaWYgYyA9PSAieyIgdGhlbiAgLS0gY29uc3RydWN0b3IKCQkJCXNlbGY6Y29uc3RydWN0b3IobHMsIHYpCgkJCQlyZXR1cm4KCQkJZWxzZWlmIGMgPT0gIlRLX0ZVTkNUSU9OIiB0aGVuCgkJCQlsdWFYOm5leHQobHMpCgkJCQlzZWxmOmJvZHkobHMsIHYsIGZhbHNlLCBscy5saW5lbnVtYmVyKQoJCQkJcmV0dXJuCgkJCWVsc2UKCQkJCXNlbGY6cHJpbWFyeWV4cChscywgdikKCQkJCXJldHVybgoJCQllbmQtLWlmIGMKCQkJbHVhWDpuZXh0KGxzKQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBUcmFuc2xhdGVzIHVuYXJ5IG9wZXJhdG9ycyB0b2tlbnMgaWYgZm91bmQsIG90aGVyd2lzZSByZXR1cm5zCgkJLS0gT1BSX05PVU5PUFIuIGdldHVub3ByKCkgYW5kIGdldGJpbm9wcigpIGFyZSB1c2VkIGluIHN1YmV4cHIoKS4KCQktLSAqIHVzZWQgaW4gc3ViZXhwcigpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpnZXR1bm9wcihvcCkKCQkJaWYgb3AgPT0gIlRLX05PVCIgdGhlbgoJCQkJcmV0dXJuICJPUFJfTk9UIgoJCQllbHNlaWYgb3AgPT0gIi0iIHRoZW4KCQkJCXJldHVybiAiT1BSX01JTlVTIgoJCQllbHNlaWYgb3AgPT0gIiMiIHRoZW4KCQkJCXJldHVybiAiT1BSX0xFTiIKCQkJZWxzZQoJCQkJcmV0dXJuICJPUFJfTk9VTk9QUiIKCQkJZW5kCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIFRyYW5zbGF0ZXMgYmluYXJ5IG9wZXJhdG9yIHRva2VucyBpZiBmb3VuZCwgb3RoZXJ3aXNlIHJldHVybnMKCQktLSBPUFJfTk9CSU5PUFIuIENvZGUgZ2VuZXJhdGlvbiB1c2VzIE9QUl8qIHN0eWxlIHRva2Vucy4KCQktLSAqIHVzZWQgaW4gc3ViZXhwcigpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJbHVhWS5nZXRiaW5vcHJfdGFibGUgPSB7CgkJCVsiKyJdID0gIk9QUl9BREQiLAoJCQlbIi0iXSA9ICJPUFJfU1VCIiwKCQkJWyIqIl0gPSAiT1BSX01VTCIsCgkJCVsiLyJdID0gIk9QUl9ESVYiLAoJCQlbIiUiXSA9ICJPUFJfTU9EIiwKCQkJWyJeIl0gPSAiT1BSX1BPVyIsCgkJCVsiVEtfQ09OQ0FUIl0gPSAiT1BSX0NPTkNBVCIsCgkJCVsiVEtfTkUiXSA9ICJPUFJfTkUiLAoJCQlbIlRLX0VRIl0gPSAiT1BSX0VRIiwKCQkJWyI8Il0gPSAiT1BSX0xUIiwKCQkJWyJUS19MRSJdID0gIk9QUl9MRSIsCgkJCVsiPiJdID0gIk9QUl9HVCIsCgkJCVsiVEtfR0UiXSA9ICJPUFJfR0UiLAoJCQlbIlRLX0FORCJdID0gIk9QUl9BTkQiLAoJCQlbIlRLX09SIl0gPSAiT1BSX09SIiwKCQl9CgkJZnVuY3Rpb24gbHVhWTpnZXRiaW5vcHIob3ApCgkJCWxvY2FsIG9wciA9IHNlbGYuZ2V0Ymlub3ByX3RhYmxlW29wXQoJCQlpZiBvcHIgdGhlbiByZXR1cm4gb3ByIGVsc2UgcmV0dXJuICJPUFJfTk9CSU5PUFIiIGVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSB0aGUgZm9sbG93aW5nIHByaW9yaXR5IHRhYmxlIGNvbnNpc3RzIG9mIHBhaXJzIG9mIGxlZnQvcmlnaHQgdmFsdWVzCgkJLS0gZm9yIGJpbmFyeSBvcGVyYXRvcnMgKHdhcyBhIHN0YXRpYyBjb25zdCBzdHJ1Y3QpOyBncmVwIGZvciBPUkRFUiBPUFIKCQktLSAqIHRoZSBmb2xsb3dpbmcgc3RydWN0IGlzIHJlcGxhY2VkOgoJCS0tICAgc3RhdGljIGNvbnN0IHN0cnVjdCB7CgkJLS0gICAgIGx1X2J5dGUgbGVmdDsgIC8qIGxlZnQgcHJpb3JpdHkgZm9yIGVhY2ggYmluYXJ5IG9wZXJhdG9yICovCgkJLS0gICAgIGx1X2J5dGUgcmlnaHQ7IC8qIHJpZ2h0IHByaW9yaXR5ICovCgkJLS0gICB9IHByaW9yaXR5W10gPSB7ICAvKiBPUkRFUiBPUFIgKi8KCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlsdWFZLnByaW9yaXR5ID0gewoJCQl7NiwgNn0sIHs2LCA2fSwgezcsIDd9LCB7NywgN30sIHs3LCA3fSwgLS0gYCsnIGAtJyBgLycgYCUnCgkJCXsxMCwgOX0sIHs1LCA0fSwgICAgICAgICAgICAgICAgIC0tIHBvd2VyIGFuZCBjb25jYXQgKHJpZ2h0IGFzc29jaWF0aXZlKQoJCQl7MywgM30sIHszLCAzfSwgICAgICAgICAgICAgICAgICAtLSBlcXVhbGl0eQoJCQl7MywgM30sIHszLCAzfSwgezMsIDN9LCB7MywgM30sICAtLSBvcmRlcgoJCQl7MiwgMn0sIHsxLCAxfSAgICAgICAgICAgICAgICAgICAtLSBsb2dpY2FsIChhbmQvb3IpCgkJfQoKCQlsdWFZLlVOQVJZX1BSSU9SSVRZID0gOCAgLS0gcHJpb3JpdHkgZm9yIHVuYXJ5IG9wZXJhdG9ycwoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBQYXJzZSBzdWJleHByZXNzaW9ucy4gSW5jbHVkZXMgaGFuZGxpbmcgb2YgdW5hcnkgb3BlcmF0b3JzIGFuZCBiaW5hcnkKCQktLSBvcGVyYXRvcnMuIEEgc3ViZXhwciBpcyBnaXZlbiB0aGUgcmhzIHByaW9yaXR5IGxldmVsIG9mIHRoZSBvcGVyYXRvcgoJCS0tIGltbWVkaWF0ZWx5IGxlZnQgb2YgaXQsIGlmIGFueSAobGltaXQgaXMgLTEgaWYgbm9uZSwpIGFuZCBpZiBhIGJpbm9wCgkJLS0gaXMgZm91bmQsIGxpbWl0IGlzIGNvbXBhcmVkIHdpdGggdGhlIGxocyBwcmlvcml0eSBsZXZlbCBvZiB0aGUgYmlub3AKCQktLSBpbiBvcmRlciB0byBkZXRlcm1pbmUgd2hpY2ggZXhlY3V0ZXMgZmlyc3QuCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHN1YmV4cHIgLT4gKHNpbXBsZWV4cCB8IHVub3Agc3ViZXhwcikgeyBiaW5vcCBzdWJleHByIH0KCQktLSB3aGVyZSAnYmlub3AnIGlzIGFueSBiaW5hcnkgb3BlcmF0b3Igd2l0aCBhIHByaW9yaXR5IGhpZ2hlciB0aGFuICdsaW1pdCcKCQktLSAqIGZvciBwcmlvcml0eSBsb29rdXBzIHdpdGggc2VsZi5wcmlvcml0eVtdLCAxPWxlZnQgYW5kIDI9cmlnaHQKCQktLSAqIHJlY3Vyc2l2ZWx5IGNhbGxlZAoJCS0tICogdXNlZCBpbiBleHByKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOnN1YmV4cHIobHMsIHYsIGxpbWl0KQoJCQlzZWxmOmVudGVybGV2ZWwobHMpCgkJCWxvY2FsIHVvcCA9IHNlbGY6Z2V0dW5vcHIobHMudC50b2tlbikKCQkJaWYgdW9wIH49ICJPUFJfTk9VTk9QUiIgdGhlbgoJCQkJbHVhWDpuZXh0KGxzKQoJCQkJc2VsZjpzdWJleHByKGxzLCB2LCBzZWxmLlVOQVJZX1BSSU9SSVRZKQoJCQkJbHVhSzpwcmVmaXgobHMuZnMsIHVvcCwgdikKCQkJZWxzZQoJCQkJc2VsZjpzaW1wbGVleHAobHMsIHYpCgkJCWVuZAoJCQktLSBleHBhbmQgd2hpbGUgb3BlcmF0b3JzIGhhdmUgcHJpb3JpdGllcyBoaWdoZXIgdGhhbiAnbGltaXQnCgkJCWxvY2FsIG9wID0gc2VsZjpnZXRiaW5vcHIobHMudC50b2tlbikKCQkJd2hpbGUgb3Agfj0gIk9QUl9OT0JJTk9QUiIgYW5kIHNlbGYucHJpb3JpdHlbbHVhSy5CaW5PcHJbb3BdICsgMV1bMV0gPiBsaW1pdCBkbwoJCQkJbG9jYWwgdjIgPSB7fSAgLS0gZXhwZGVzYwoJCQkJbHVhWDpuZXh0KGxzKQoJCQkJbHVhSzppbmZpeChscy5mcywgb3AsIHYpCgkJCQktLSByZWFkIHN1Yi1leHByZXNzaW9uIHdpdGggaGlnaGVyIHByaW9yaXR5CgkJCQlsb2NhbCBuZXh0b3AgPSBzZWxmOnN1YmV4cHIobHMsIHYyLCBzZWxmLnByaW9yaXR5W2x1YUsuQmluT3ByW29wXSArIDFdWzJdKQoJCQkJbHVhSzpwb3NmaXgobHMuZnMsIG9wLCB2LCB2MikKCQkJCW9wID0gbmV4dG9wCgkJCWVuZAoJCQlzZWxmOmxlYXZlbGV2ZWwobHMpCgkJCXJldHVybiBvcCAgLS0gcmV0dXJuIGZpcnN0IHVudHJlYXRlZCBvcGVyYXRvcgoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBFeHByZXNzaW9uIHBhcnNpbmcgc3RhcnRzIGhlcmUuIEZ1bmN0aW9uIHN1YmV4cHIgaXMgZW50ZXJlZCB3aXRoIHRoZQoJCS0tIGxlZnQgb3BlcmF0b3IgKHdoaWNoIGlzIG5vbi1leGlzdGVudCkgcHJpb3JpdHkgb2YgLTEsIHdoaWNoIGlzIGxvd2VyCgkJLS0gdGhhbiBhbGwgYWN0dWFsIG9wZXJhdG9ycy4gRXhwciBpbmZvcm1hdGlvbiBpcyByZXR1cm5lZCBpbiBwYXJtIHYuCgkJLS0gKiB1c2VkIGluIG11bHRpcGxlIGxvY2F0aW9ucwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6ZXhwcihscywgdikKCQkJc2VsZjpzdWJleHByKGxzLCB2LCAwKQoJCWVuZAoKCQktLSB9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KCi0tW1stLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQotLSBSdWxlcyBmb3IgU3RhdGVtZW50cwotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXV0KCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gY2hlY2tzIG5leHQgdG9rZW4sIHVzZWQgYXMgYSBsb29rLWFoZWFkCgkJLS0gKiByZXR1cm5zIGJvb2xlYW4gaW5zdGVhZCBvZiAwfDEKCQktLSAqIHVzZWQgaW4gcmV0c3RhdCgpLCBjaHVuaygpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpibG9ja19mb2xsb3codG9rZW4pCgkJCWlmIHRva2VuID09ICJUS19FTFNFIiBvciB0b2tlbiA9PSAiVEtfRUxTRUlGIiBvciB0b2tlbiA9PSAiVEtfRU5EIgoJCQkJb3IgdG9rZW4gPT0gIlRLX1VOVElMIiBvciB0b2tlbiA9PSAiVEtfRU9TIiB0aGVuCgkJCQlyZXR1cm4gdHJ1ZQoJCQllbHNlCgkJCQlyZXR1cm4gZmFsc2UKCQkJZW5kCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIGEgY29kZSBibG9jayBvciB1bml0CgkJLS0gKiB1c2VkIGluIG11bHRpcGxlIGZ1bmN0aW9ucwoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6YmxvY2sobHMpCgkJCS0tIGJsb2NrIC0+IGNodW5rCgkJCWxvY2FsIGZzID0gbHMuZnMKCQkJbG9jYWwgYmwgPSB7fSAgLS0gQmxvY2tDbnQKCQkJc2VsZjplbnRlcmJsb2NrKGZzLCBibCwgZmFsc2UpCgkJCXNlbGY6Y2h1bmsobHMpCgkJCWx1YV9hc3NlcnQoYmwuYnJlYWtsaXN0ID09IGx1YUsuTk9fSlVNUCkKCQkJc2VsZjpsZWF2ZWJsb2NrKGZzKQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBzdHJ1Y3R1cmUgdG8gY2hhaW4gYWxsIHZhcmlhYmxlcyBpbiB0aGUgbGVmdC1oYW5kIHNpZGUgb2YgYW4KCQktLSBhc3NpZ25tZW50CgkJLS0gc3RydWN0IExIU19hc3NpZ246CgkJLS0gICBwcmV2ICAtLSAodGFibGU6IHN0cnVjdCBMSFNfYXNzaWduKQoJCS0tICAgdiAgLS0gdmFyaWFibGUgKGdsb2JhbCwgbG9jYWwsIHVwdmFsdWUsIG9yIGluZGV4ZWQpICh0YWJsZTogZXhwZGVzYykKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gY2hlY2sgd2hldGhlciwgaW4gYW4gYXNzaWdubWVudCB0byBhIGxvY2FsIHZhcmlhYmxlLCB0aGUgbG9jYWwgdmFyaWFibGUKCQktLSBpcyBuZWVkZWQgaW4gYSBwcmV2aW91cyBhc3NpZ25tZW50ICh0byBhIHRhYmxlKS4gSWYgc28sIHNhdmUgb3JpZ2luYWwKCQktLSBsb2NhbCB2YWx1ZSBpbiBhIHNhZmUgcGxhY2UgYW5kIHVzZSB0aGlzIHNhZmUgY29weSBpbiB0aGUgcHJldmlvdXMKCQktLSBhc3NpZ25tZW50LgoJCS0tICogdXNlZCBpbiBhc3NpZ25tZW50KCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOmNoZWNrX2NvbmZsaWN0KGxzLCBsaCwgdikKCQkJbG9jYWwgZnMgPSBscy5mcwoJCQlsb2NhbCBleHRyYSA9IGZzLmZyZWVyZWcgIC0tIGV2ZW50dWFsIHBvc2l0aW9uIHRvIHNhdmUgbG9jYWwgdmFyaWFibGUKCQkJbG9jYWwgY29uZmxpY3QgPSBmYWxzZQoJCQl3aGlsZSBsaCBkbwoJCQkJaWYgbGgudi5rID09ICJWSU5ERVhFRCIgdGhlbgoJCQkJCWlmIGxoLnYuaW5mbyA9PSB2LmluZm8gdGhlbiAgLS0gY29uZmxpY3Q/CgkJCQkJCWNvbmZsaWN0ID0gdHJ1ZQoJCQkJCQlsaC52LmluZm8gPSBleHRyYSAgLS0gcHJldmlvdXMgYXNzaWdubWVudCB3aWxsIHVzZSBzYWZlIGNvcHkKCQkJCQllbmQKCQkJCQlpZiBsaC52LmF1eCA9PSB2LmluZm8gdGhlbiAgLS0gY29uZmxpY3Q/CgkJCQkJCWNvbmZsaWN0ID0gdHJ1ZQoJCQkJCQlsaC52LmF1eCA9IGV4dHJhICAtLSBwcmV2aW91cyBhc3NpZ25tZW50IHdpbGwgdXNlIHNhZmUgY29weQoJCQkJCWVuZAoJCQkJZW5kCgkJCQlsaCA9IGxoLnByZXYKCQkJZW5kCgkJCWlmIGNvbmZsaWN0IHRoZW4KCQkJCWx1YUs6Y29kZUFCQyhmcywgIk9QX01PVkUiLCBmcy5mcmVlcmVnLCB2LmluZm8sIDApICAtLSBtYWtlIGNvcHkKCQkJCWx1YUs6cmVzZXJ2ZXJlZ3MoZnMsIDEpCgkJCWVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwYXJzZSBhIHZhcmlhYmxlIGFzc2lnbm1lbnQgc2VxdWVuY2UKCQktLSAqIHJlY3Vyc2l2ZWx5IGNhbGxlZAoJCS0tICogdXNlZCBpbiBleHByc3RhdCgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTphc3NpZ25tZW50KGxzLCBsaCwgbnZhcnMpCgkJCWxvY2FsIGUgPSB7fSAgLS0gZXhwZGVzYwoJCQktLSB0ZXN0IHdhczogVkxPQ0FMIDw9IGxoLT52LmsgJiYgbGgtPnYuayA8PSBWSU5ERVhFRAoJCQlsb2NhbCBjID0gbGgudi5rCgkJCXNlbGY6Y2hlY2tfY29uZGl0aW9uKGxzLCBjID09ICJWTE9DQUwiIG9yIGMgPT0gIlZVUFZBTCIgb3IgYyA9PSAiVkdMT0JBTCIKCQkJCW9yIGMgPT0gIlZJTkRFWEVEIiwgInN5bnRheCBlcnJvciIpCgkJCWlmIHNlbGY6dGVzdG5leHQobHMsICIsIikgdGhlbiAgLS0gYXNzaWdubWVudCAtPiAnLCcgcHJpbWFyeWV4cCBhc3NpZ25tZW50CgkJCQlsb2NhbCBudiA9IHt9ICAtLSBMSFNfYXNzaWduCgkJCQludi52ID0ge30KCQkJCW52LnByZXYgPSBsaAoJCQkJc2VsZjpwcmltYXJ5ZXhwKGxzLCBudi52KQoJCQkJaWYgbnYudi5rID09ICJWTE9DQUwiIHRoZW4KCQkJCQlzZWxmOmNoZWNrX2NvbmZsaWN0KGxzLCBsaCwgbnYudikKCQkJCWVuZAoJCQkJc2VsZjpjaGVja2xpbWl0KGxzLmZzLCBudmFycywgc2VsZi5MVUFJX01BWENDQUxMUyAtIGxzLkwubkNjYWxscywKCQkJCQkidmFyaWFibGVzIGluIGFzc2lnbm1lbnQiKQoJCQkJc2VsZjphc3NpZ25tZW50KGxzLCBudiwgbnZhcnMgKyAxKQoJCQllbHNlICAtLSBhc3NpZ25tZW50IC0+ICc9JyBleHBsaXN0MQoJCQkJc2VsZjpjaGVja25leHQobHMsICI9IikKCQkJCWxvY2FsIG5leHBzID0gc2VsZjpleHBsaXN0MShscywgZSkKCQkJCWlmIG5leHBzIH49IG52YXJzIHRoZW4KCQkJCQlzZWxmOmFkanVzdF9hc3NpZ24obHMsIG52YXJzLCBuZXhwcywgZSkKCQkJCQlpZiBuZXhwcyA+IG52YXJzIHRoZW4KCQkJCQkJbHMuZnMuZnJlZXJlZyA9IGxzLmZzLmZyZWVyZWcgLSAobmV4cHMgLSBudmFycykgIC0tIHJlbW92ZSBleHRyYSB2YWx1ZXMKCQkJCQllbmQKCQkJCWVsc2UKCQkJCQlsdWFLOnNldG9uZXJldChscy5mcywgZSkgIC0tIGNsb3NlIGxhc3QgZXhwcmVzc2lvbgoJCQkJCWx1YUs6c3RvcmV2YXIobHMuZnMsIGxoLnYsIGUpCgkJCQkJcmV0dXJuICAtLSBhdm9pZCBkZWZhdWx0CgkJCQllbmQKCQkJZW5kCgkJCXNlbGY6aW5pdF9leHAoZSwgIlZOT05SRUxPQyIsIGxzLmZzLmZyZWVyZWcgLSAxKSAgLS0gZGVmYXVsdCBhc3NpZ25tZW50CgkJCWx1YUs6c3RvcmV2YXIobHMuZnMsIGxoLnYsIGUpCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIGNvbmRpdGlvbiBpbiBhIHJlcGVhdCBzdGF0ZW1lbnQgb3IgYW4gaWYgY29udHJvbCBzdHJ1Y3R1cmUKCQktLSAqIHVzZWQgaW4gcmVwZWF0c3RhdCgpLCB0ZXN0X3RoZW5fYmxvY2soKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6Y29uZChscykKCQkJLS0gY29uZCAtPiBleHAKCQkJbG9jYWwgdiA9IHt9ICAtLSBleHBkZXNjCgkJCXNlbGY6ZXhwcihscywgdikgIC0tIHJlYWQgY29uZGl0aW9uCgkJCWlmIHYuayA9PSAiVk5JTCIgdGhlbiB2LmsgPSAiVkZBTFNFIiBlbmQgIC0tICdmYWxzZXMnIGFyZSBhbGwgZXF1YWwgaGVyZQoJCQlsdWFLOmdvaWZ0cnVlKGxzLmZzLCB2KQoJCQlyZXR1cm4gdi5mCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIGEgYnJlYWsgc3RhdGVtZW50CgkJLS0gKiB1c2VkIGluIHN0YXRlbWVudHMoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6YnJlYWtzdGF0KGxzKQoJCQktLSBzdGF0IC0+IEJSRUFLCgkJCWxvY2FsIGZzID0gbHMuZnMKCQkJbG9jYWwgYmwgPSBmcy5ibAoJCQlsb2NhbCB1cHZhbCA9IGZhbHNlCgkJCXdoaWxlIGJsIGFuZCBub3QgYmwuaXNicmVha2FibGUgZG8KCQkJCWlmIGJsLnVwdmFsIHRoZW4gdXB2YWwgPSB0cnVlIGVuZAoJCQkJYmwgPSBibC5wcmV2aW91cwoJCQllbmQKCQkJaWYgbm90IGJsIHRoZW4KCQkJCWx1YVg6c3ludGF4ZXJyb3IobHMsICJubyBsb29wIHRvIGJyZWFrIikKCQkJZW5kCgkJCWlmIHVwdmFsIHRoZW4KCQkJCWx1YUs6Y29kZUFCQyhmcywgIk9QX0NMT1NFIiwgYmwubmFjdHZhciwgMCwgMCkKCQkJZW5kCgkJCWJsLmJyZWFrbGlzdCA9IGx1YUs6Y29uY2F0KGZzLCBibC5icmVha2xpc3QsIGx1YUs6anVtcChmcykpCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIGEgd2hpbGUtZG8gY29udHJvbCBzdHJ1Y3R1cmUsIGJvZHkgcHJvY2Vzc2VkIGJ5IGJsb2NrKCkKCQktLSAqIHdpdGggZHluYW1pYyBhcnJheSBzaXplcywgTUFYRVhQV0hJTEUgKyBFWFRSQUVYUCBsaW1pdHMgaW1wb3NlZCBieQoJCS0tICAgdGhlIGZ1bmN0aW9uJ3MgaW1wbGVtZW50YXRpb24gY2FuIGJlIHJlbW92ZWQKCQktLSAqIHVzZWQgaW4gc3RhdGVtZW50cygpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTp3aGlsZXN0YXQobHMsIGxpbmUpCgkJCS0tIHdoaWxlc3RhdCAtPiBXSElMRSBjb25kIERPIGJsb2NrIEVORAoJCQlsb2NhbCBmcyA9IGxzLmZzCgkJCWxvY2FsIGJsID0ge30gIC0tIEJsb2NrQ250CgkJCWx1YVg6bmV4dChscykgIC0tIHNraXAgV0hJTEUKCQkJbG9jYWwgd2hpbGVpbml0ID0gbHVhSzpnZXRsYWJlbChmcykKCQkJbG9jYWwgY29uZGV4aXQgPSBzZWxmOmNvbmQobHMpCgkJCXNlbGY6ZW50ZXJibG9jayhmcywgYmwsIHRydWUpCgkJCXNlbGY6Y2hlY2tuZXh0KGxzLCAiVEtfRE8iKQoJCQlzZWxmOmJsb2NrKGxzKQoJCQlsdWFLOnBhdGNobGlzdChmcywgbHVhSzpqdW1wKGZzKSwgd2hpbGVpbml0KQoJCQlzZWxmOmNoZWNrX21hdGNoKGxzLCAiVEtfRU5EIiwgIlRLX1dISUxFIiwgbGluZSkKCQkJc2VsZjpsZWF2ZWJsb2NrKGZzKQoJCQlsdWFLOnBhdGNodG9oZXJlKGZzLCBjb25kZXhpdCkgIC0tIGZhbHNlIGNvbmRpdGlvbnMgZmluaXNoIHRoZSBsb29wCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIGEgcmVwZWF0LXVudGlsIGNvbnRyb2wgc3RydWN0dXJlLCBib2R5IHBhcnNlZCBieSBjaHVuaygpCgkJLS0gKiB1c2VkIGluIHN0YXRlbWVudHMoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6cmVwZWF0c3RhdChscywgbGluZSkKCQkJLS0gcmVwZWF0c3RhdCAtPiBSRVBFQVQgYmxvY2sgVU5USUwgY29uZAoJCQlsb2NhbCBmcyA9IGxzLmZzCgkJCWxvY2FsIHJlcGVhdF9pbml0ID0gbHVhSzpnZXRsYWJlbChmcykKCQkJbG9jYWwgYmwxLCBibDIgPSB7fSwge30gIC0tIEJsb2NrQ250CgkJCXNlbGY6ZW50ZXJibG9jayhmcywgYmwxLCB0cnVlKSAgLS0gbG9vcCBibG9jawoJCQlzZWxmOmVudGVyYmxvY2soZnMsIGJsMiwgZmFsc2UpICAtLSBzY29wZSBibG9jawoJCQlsdWFYOm5leHQobHMpICAtLSBza2lwIFJFUEVBVAoJCQlzZWxmOmNodW5rKGxzKQoJCQlzZWxmOmNoZWNrX21hdGNoKGxzLCAiVEtfVU5USUwiLCAiVEtfUkVQRUFUIiwgbGluZSkKCQkJbG9jYWwgY29uZGV4aXQgPSBzZWxmOmNvbmQobHMpICAtLSByZWFkIGNvbmRpdGlvbiAoaW5zaWRlIHNjb3BlIGJsb2NrKQoJCQlpZiBub3QgYmwyLnVwdmFsIHRoZW4gIC0tIG5vIHVwdmFsdWVzPwoJCQkJc2VsZjpsZWF2ZWJsb2NrKGZzKSAgLS0gZmluaXNoIHNjb3BlCgkJCQlsdWFLOnBhdGNobGlzdChscy5mcywgY29uZGV4aXQsIHJlcGVhdF9pbml0KSAgLS0gY2xvc2UgdGhlIGxvb3AKCQkJZWxzZSAgLS0gY29tcGxldGUgc2VtYW50aWNzIHdoZW4gdGhlcmUgYXJlIHVwdmFsdWVzCgkJCQlzZWxmOmJyZWFrc3RhdChscykgIC0tIGlmIGNvbmRpdGlvbiB0aGVuIGJyZWFrCgkJCQlsdWFLOnBhdGNodG9oZXJlKGxzLmZzLCBjb25kZXhpdCkgIC0tIGVsc2UuLi4KCQkJCXNlbGY6bGVhdmVibG9jayhmcykgIC0tIGZpbmlzaCBzY29wZS4uLgoJCQkJbHVhSzpwYXRjaGxpc3QobHMuZnMsIGx1YUs6anVtcChmcyksIHJlcGVhdF9pbml0KSAgLS0gYW5kIHJlcGVhdAoJCQllbmQKCQkJc2VsZjpsZWF2ZWJsb2NrKGZzKSAgLS0gZmluaXNoIGxvb3AKCQllbmQKCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJLS0gcGFyc2UgdGhlIHNpbmdsZSBleHByZXNzaW9ucyBuZWVkZWQgaW4gbnVtZXJpY2FsIGZvciBsb29wcwoJCS0tICogdXNlZCBpbiBmb3JudW0oKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6ZXhwMShscykKCQkJbG9jYWwgZSA9IHt9ICAtLSBleHBkZXNjCgkJCXNlbGY6ZXhwcihscywgZSkKCQkJbG9jYWwgayA9IGUuawoJCQlsdWFLOmV4cDJuZXh0cmVnKGxzLmZzLCBlKQoJCQlyZXR1cm4gawoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwYXJzZSBhIGZvciBsb29wIGJvZHkgZm9yIGJvdGggdmVyc2lvbnMgb2YgdGhlIGZvciBsb29wCgkJLS0gKiB1c2VkIGluIGZvcm51bSgpLCBmb3JsaXN0KCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOmZvcmJvZHkobHMsIGJhc2UsIGxpbmUsIG52YXJzLCBpc251bSkKCQkJLS0gZm9yYm9keSAtPiBETyBibG9jawoJCQlsb2NhbCBibCA9IHt9ICAtLSBCbG9ja0NudAoJCQlsb2NhbCBmcyA9IGxzLmZzCgkJCXNlbGY6YWRqdXN0bG9jYWx2YXJzKGxzLCAzKSAgLS0gY29udHJvbCB2YXJpYWJsZXMKCQkJc2VsZjpjaGVja25leHQobHMsICJUS19ETyIpCgkJCWxvY2FsIHByZXAgPSBpc251bSBhbmQgbHVhSzpjb2RlQXNCeChmcywgIk9QX0ZPUlBSRVAiLCBiYXNlLCBsdWFLLk5PX0pVTVApCgkJCQlvciBsdWFLOmp1bXAoZnMpCgkJCXNlbGY6ZW50ZXJibG9jayhmcywgYmwsIGZhbHNlKSAgLS0gc2NvcGUgZm9yIGRlY2xhcmVkIHZhcmlhYmxlcwoJCQlzZWxmOmFkanVzdGxvY2FsdmFycyhscywgbnZhcnMpCgkJCWx1YUs6cmVzZXJ2ZXJlZ3MoZnMsIG52YXJzKQoJCQlzZWxmOmJsb2NrKGxzKQoJCQlzZWxmOmxlYXZlYmxvY2soZnMpICAtLSBlbmQgb2Ygc2NvcGUgZm9yIGRlY2xhcmVkIHZhcmlhYmxlcwoJCQlsdWFLOnBhdGNodG9oZXJlKGZzLCBwcmVwKQoJCQlsb2NhbCBlbmRmb3IgPSBpc251bSBhbmQgbHVhSzpjb2RlQXNCeChmcywgIk9QX0ZPUkxPT1AiLCBiYXNlLCBsdWFLLk5PX0pVTVApCgkJCQlvciBsdWFLOmNvZGVBQkMoZnMsICJPUF9URk9STE9PUCIsIGJhc2UsIDAsIG52YXJzKQoJCQlsdWFLOmZpeGxpbmUoZnMsIGxpbmUpICAtLSBwcmV0ZW5kIHRoYXQgYE9QX0ZPUicgc3RhcnRzIHRoZSBsb29wCgkJCWx1YUs6cGF0Y2hsaXN0KGZzLCBpc251bSBhbmQgZW5kZm9yIG9yIGx1YUs6anVtcChmcyksIHByZXAgKyAxKQoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwYXJzZSBhIG51bWVyaWNhbCBmb3IgbG9vcCwgY2FsbHMgZm9yYm9keSgpCgkJLS0gKiB1c2VkIGluIGZvcnN0YXQoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6Zm9ybnVtKGxzLCB2YXJuYW1lLCBsaW5lKQoJCQktLSBmb3JudW0gLT4gTkFNRSA9IGV4cDEsZXhwMVssZXhwMV0gZm9yYm9keQoJCQlsb2NhbCBmcyA9IGxzLmZzCgkJCWxvY2FsIGJhc2UgPSBmcy5mcmVlcmVnCgkJCXNlbGY6bmV3X2xvY2FsdmFybGl0ZXJhbChscywgIihmb3IgaW5kZXgpIiwgMCkKCQkJc2VsZjpuZXdfbG9jYWx2YXJsaXRlcmFsKGxzLCAiKGZvciBsaW1pdCkiLCAxKQoJCQlzZWxmOm5ld19sb2NhbHZhcmxpdGVyYWwobHMsICIoZm9yIHN0ZXApIiwgMikKCQkJc2VsZjpuZXdfbG9jYWx2YXIobHMsIHZhcm5hbWUsIDMpCgkJCXNlbGY6Y2hlY2tuZXh0KGxzLCAnPScpCgkJCXNlbGY6ZXhwMShscykgIC0tIGluaXRpYWwgdmFsdWUKCQkJc2VsZjpjaGVja25leHQobHMsICIsIikKCQkJc2VsZjpleHAxKGxzKSAgLS0gbGltaXQKCQkJaWYgc2VsZjp0ZXN0bmV4dChscywgIiwiKSB0aGVuCgkJCQlzZWxmOmV4cDEobHMpICAtLSBvcHRpb25hbCBzdGVwCgkJCWVsc2UgIC0tIGRlZmF1bHQgc3RlcCA9IDEKCQkJCWx1YUs6Y29kZUFCeChmcywgIk9QX0xPQURLIiwgZnMuZnJlZXJlZywgbHVhSzpudW1iZXJLKGZzLCAxKSkKCQkJCWx1YUs6cmVzZXJ2ZXJlZ3MoZnMsIDEpCgkJCWVuZAoJCQlzZWxmOmZvcmJvZHkobHMsIGJhc2UsIGxpbmUsIDEsIHRydWUpCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIGEgZ2VuZXJpYyBmb3IgbG9vcCwgY2FsbHMgZm9yYm9keSgpCgkJLS0gKiB1c2VkIGluIGZvcnN0YXQoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6Zm9ybGlzdChscywgaW5kZXhuYW1lKQoJCQktLSBmb3JsaXN0IC0+IE5BTUUgeyxOQU1FfSBJTiBleHBsaXN0MSBmb3Jib2R5CgkJCWxvY2FsIGZzID0gbHMuZnMKCQkJbG9jYWwgZSA9IHt9ICAtLSBleHBkZXNjCgkJCWxvY2FsIG52YXJzID0gMAoJCQlsb2NhbCBiYXNlID0gZnMuZnJlZXJlZwoJCQktLSBjcmVhdGUgY29udHJvbCB2YXJpYWJsZXMKCQkJc2VsZjpuZXdfbG9jYWx2YXJsaXRlcmFsKGxzLCAiKGZvciBnZW5lcmF0b3IpIiwgbnZhcnMpCgkJCW52YXJzID0gbnZhcnMgKyAxCgkJCXNlbGY6bmV3X2xvY2FsdmFybGl0ZXJhbChscywgIihmb3Igc3RhdGUpIiwgbnZhcnMpCgkJCW52YXJzID0gbnZhcnMgKyAxCgkJCXNlbGY6bmV3X2xvY2FsdmFybGl0ZXJhbChscywgIihmb3IgY29udHJvbCkiLCBudmFycykKCQkJbnZhcnMgPSBudmFycyArIDEKCQkJLS0gY3JlYXRlIGRlY2xhcmVkIHZhcmlhYmxlcwoJCQlzZWxmOm5ld19sb2NhbHZhcihscywgaW5kZXhuYW1lLCBudmFycykKCQkJbnZhcnMgPSBudmFycyArIDEKCQkJd2hpbGUgc2VsZjp0ZXN0bmV4dChscywgIiwiKSBkbwoJCQkJc2VsZjpuZXdfbG9jYWx2YXIobHMsIHNlbGY6c3RyX2NoZWNrbmFtZShscyksIG52YXJzKQoJCQkJbnZhcnMgPSBudmFycyArIDEKCQkJZW5kCgkJCXNlbGY6Y2hlY2tuZXh0KGxzLCAiVEtfSU4iKQoJCQlsb2NhbCBsaW5lID0gbHMubGluZW51bWJlcgoJCQlzZWxmOmFkanVzdF9hc3NpZ24obHMsIDMsIHNlbGY6ZXhwbGlzdDEobHMsIGUpLCBlKQoJCQlsdWFLOmNoZWNrc3RhY2soZnMsIDMpICAtLSBleHRyYSBzcGFjZSB0byBjYWxsIGdlbmVyYXRvcgoJCQlzZWxmOmZvcmJvZHkobHMsIGJhc2UsIGxpbmUsIG52YXJzIC0gMywgZmFsc2UpCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIGluaXRpYWwgcGFyc2luZyBmb3IgYSBmb3IgbG9vcCwgY2FsbHMgZm9ybnVtKCkgb3IgZm9ybGlzdCgpCgkJLS0gKiB1c2VkIGluIHN0YXRlbWVudHMoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6Zm9yc3RhdChscywgbGluZSkKCQkJLS0gZm9yc3RhdCAtPiBGT1IgKGZvcm51bSB8IGZvcmxpc3QpIEVORAoJCQlsb2NhbCBmcyA9IGxzLmZzCgkJCWxvY2FsIGJsID0ge30gIC0tIEJsb2NrQ250CgkJCXNlbGY6ZW50ZXJibG9jayhmcywgYmwsIHRydWUpICAtLSBzY29wZSBmb3IgbG9vcCBhbmQgY29udHJvbCB2YXJpYWJsZXMKCQkJbHVhWDpuZXh0KGxzKSAgLS0gc2tpcCBgZm9yJwoJCQlsb2NhbCB2YXJuYW1lID0gc2VsZjpzdHJfY2hlY2tuYW1lKGxzKSAgLS0gZmlyc3QgdmFyaWFibGUgbmFtZQoJCQlsb2NhbCBjID0gbHMudC50b2tlbgoJCQlpZiBjID09ICI9IiB0aGVuCgkJCQlzZWxmOmZvcm51bShscywgdmFybmFtZSwgbGluZSkKCQkJZWxzZWlmIGMgPT0gIiwiIG9yIGMgPT0gIlRLX0lOIiB0aGVuCgkJCQlzZWxmOmZvcmxpc3QobHMsIHZhcm5hbWUpCgkJCWVsc2UKCQkJCWx1YVg6c3ludGF4ZXJyb3IobHMsIHNlbGY6TFVBX1FMKCI9IikuLiIgb3IgIi4uc2VsZjpMVUFfUUwoImluIikuLiIgZXhwZWN0ZWQiKQoJCQllbmQKCQkJc2VsZjpjaGVja19tYXRjaChscywgIlRLX0VORCIsICJUS19GT1IiLCBsaW5lKQoJCQlzZWxmOmxlYXZlYmxvY2soZnMpICAtLSBsb29wIHNjb3BlIChgYnJlYWsnIGp1bXBzIHRvIHRoaXMgcG9pbnQpCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIHBhcnQgb2YgYW4gaWYgY29udHJvbCBzdHJ1Y3R1cmUsIGluY2x1ZGluZyB0aGUgY29uZGl0aW9uCgkJLS0gKiB1c2VkIGluIGlmc3RhdCgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTp0ZXN0X3RoZW5fYmxvY2sobHMpCgkJCS0tIHRlc3RfdGhlbl9ibG9jayAtPiBbSUYgfCBFTFNFSUZdIGNvbmQgVEhFTiBibG9jawoJCQlsdWFYOm5leHQobHMpICAtLSBza2lwIElGIG9yIEVMU0VJRgoJCQlsb2NhbCBjb25kZXhpdCA9IHNlbGY6Y29uZChscykKCQkJc2VsZjpjaGVja25leHQobHMsICJUS19USEVOIikKCQkJc2VsZjpibG9jayhscykgIC0tIGB0aGVuJyBwYXJ0CgkJCXJldHVybiBjb25kZXhpdAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwYXJzZSBhbiBpZiBjb250cm9sIHN0cnVjdHVyZQoJCS0tICogdXNlZCBpbiBzdGF0ZW1lbnRzKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOmlmc3RhdChscywgbGluZSkKCQkJLS0gaWZzdGF0IC0+IElGIGNvbmQgVEhFTiBibG9jayB7RUxTRUlGIGNvbmQgVEhFTiBibG9ja30gW0VMU0UgYmxvY2tdIEVORAoJCQlsb2NhbCBmcyA9IGxzLmZzCgkJCWxvY2FsIGVzY2FwZWxpc3QgPSBsdWFLLk5PX0pVTVAKCQkJbG9jYWwgZmxpc3QgPSBzZWxmOnRlc3RfdGhlbl9ibG9jayhscykgIC0tIElGIGNvbmQgVEhFTiBibG9jawoJCQl3aGlsZSBscy50LnRva2VuID09ICJUS19FTFNFSUYiIGRvCgkJCQllc2NhcGVsaXN0ID0gbHVhSzpjb25jYXQoZnMsIGVzY2FwZWxpc3QsIGx1YUs6anVtcChmcykpCgkJCQlsdWFLOnBhdGNodG9oZXJlKGZzLCBmbGlzdCkKCQkJCWZsaXN0ID0gc2VsZjp0ZXN0X3RoZW5fYmxvY2sobHMpICAtLSBFTFNFSUYgY29uZCBUSEVOIGJsb2NrCgkJCWVuZAoJCQlpZiBscy50LnRva2VuID09ICJUS19FTFNFIiB0aGVuCgkJCQllc2NhcGVsaXN0ID0gbHVhSzpjb25jYXQoZnMsIGVzY2FwZWxpc3QsIGx1YUs6anVtcChmcykpCgkJCQlsdWFLOnBhdGNodG9oZXJlKGZzLCBmbGlzdCkKCQkJCWx1YVg6bmV4dChscykgIC0tIHNraXAgRUxTRSAoYWZ0ZXIgcGF0Y2gsIGZvciBjb3JyZWN0IGxpbmUgaW5mbykKCQkJCXNlbGY6YmxvY2sobHMpICAtLSAnZWxzZScgcGFydAoJCQllbHNlCgkJCQllc2NhcGVsaXN0ID0gbHVhSzpjb25jYXQoZnMsIGVzY2FwZWxpc3QsIGZsaXN0KQoJCQllbmQKCQkJbHVhSzpwYXRjaHRvaGVyZShmcywgZXNjYXBlbGlzdCkKCQkJc2VsZjpjaGVja19tYXRjaChscywgIlRLX0VORCIsICJUS19JRiIsIGxpbmUpCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIGEgbG9jYWwgZnVuY3Rpb24gc3RhdGVtZW50CgkJLS0gKiB1c2VkIGluIHN0YXRlbWVudHMoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6bG9jYWxmdW5jKGxzKQoJCQlsb2NhbCB2LCBiID0ge30sIHt9ICAtLSBleHBkZXNjCgkJCWxvY2FsIGZzID0gbHMuZnMKCQkJc2VsZjpuZXdfbG9jYWx2YXIobHMsIHNlbGY6c3RyX2NoZWNrbmFtZShscyksIDApCgkJCXNlbGY6aW5pdF9leHAodiwgIlZMT0NBTCIsIGZzLmZyZWVyZWcpCgkJCWx1YUs6cmVzZXJ2ZXJlZ3MoZnMsIDEpCgkJCXNlbGY6YWRqdXN0bG9jYWx2YXJzKGxzLCAxKQoJCQlzZWxmOmJvZHkobHMsIGIsIGZhbHNlLCBscy5saW5lbnVtYmVyKQoJCQlsdWFLOnN0b3JldmFyKGZzLCB2LCBiKQoJCQktLSBkZWJ1ZyBpbmZvcm1hdGlvbiB3aWxsIG9ubHkgc2VlIHRoZSB2YXJpYWJsZSBhZnRlciB0aGlzIHBvaW50IQoJCQlzZWxmOmdldGxvY3ZhcihmcywgZnMubmFjdHZhciAtIDEpLnN0YXJ0cGMgPSBmcy5wYwoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwYXJzZSBhIGxvY2FsIHZhcmlhYmxlIGRlY2xhcmF0aW9uIHN0YXRlbWVudAoJCS0tICogdXNlZCBpbiBzdGF0ZW1lbnRzKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOmxvY2Fsc3RhdChscykKCQkJLS0gc3RhdCAtPiBMT0NBTCBOQU1FIHsnLCcgTkFNRX0gWyc9JyBleHBsaXN0MV0KCQkJbG9jYWwgbnZhcnMgPSAwCgkJCWxvY2FsIG5leHBzCgkJCWxvY2FsIGUgPSB7fSAgLS0gZXhwZGVzYwoJCQlyZXBlYXQKCQkJCXNlbGY6bmV3X2xvY2FsdmFyKGxzLCBzZWxmOnN0cl9jaGVja25hbWUobHMpLCBudmFycykKCQkJCW52YXJzID0gbnZhcnMgKyAxCgkJCXVudGlsIG5vdCBzZWxmOnRlc3RuZXh0KGxzLCAiLCIpCgkJCWlmIHNlbGY6dGVzdG5leHQobHMsICI9IikgdGhlbgoJCQkJbmV4cHMgPSBzZWxmOmV4cGxpc3QxKGxzLCBlKQoJCQllbHNlCgkJCQllLmsgPSAiVlZPSUQiCgkJCQluZXhwcyA9IDAKCQkJZW5kCgkJCXNlbGY6YWRqdXN0X2Fzc2lnbihscywgbnZhcnMsIG5leHBzLCBlKQoJCQlzZWxmOmFkanVzdGxvY2FsdmFycyhscywgbnZhcnMpCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIGEgZnVuY3Rpb24gbmFtZSBzcGVjaWZpY2F0aW9uCgkJLS0gKiB1c2VkIGluIGZ1bmNzdGF0KCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOmZ1bmNuYW1lKGxzLCB2KQoJCQktLSBmdW5jbmFtZSAtPiBOQU1FIHtmaWVsZH0gWyc6JyBOQU1FXQoJCQlsb2NhbCBuZWVkc2VsZiA9IGZhbHNlCgkJCXNlbGY6c2luZ2xldmFyKGxzLCB2KQoJCQl3aGlsZSBscy50LnRva2VuID09ICIuIiBkbwoJCQkJc2VsZjpmaWVsZChscywgdikKCQkJZW5kCgkJCWlmIGxzLnQudG9rZW4gPT0gIjoiIHRoZW4KCQkJCW5lZWRzZWxmID0gdHJ1ZQoJCQkJc2VsZjpmaWVsZChscywgdikKCQkJZW5kCgkJCXJldHVybiBuZWVkc2VsZgoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwYXJzZSBhIGZ1bmN0aW9uIHN0YXRlbWVudAoJCS0tICogdXNlZCBpbiBzdGF0ZW1lbnRzKCkKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQlmdW5jdGlvbiBsdWFZOmZ1bmNzdGF0KGxzLCBsaW5lKQoJCQktLSBmdW5jc3RhdCAtPiBGVU5DVElPTiBmdW5jbmFtZSBib2R5CgkJCWxvY2FsIHYsIGIgPSB7fSwge30gIC0tIGV4cGRlc2MKCQkJbHVhWDpuZXh0KGxzKSAgLS0gc2tpcCBGVU5DVElPTgoJCQlsb2NhbCBuZWVkc2VsZiA9IHNlbGY6ZnVuY25hbWUobHMsIHYpCgkJCXNlbGY6Ym9keShscywgYiwgbmVlZHNlbGYsIGxpbmUpCgkJCWx1YUs6c3RvcmV2YXIobHMuZnMsIHYsIGIpCgkJCWx1YUs6Zml4bGluZShscy5mcywgbGluZSkgIC0tIGRlZmluaXRpb24gJ2hhcHBlbnMnIGluIHRoZSBmaXJzdCBsaW5lCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIHBhcnNlIGEgZnVuY3Rpb24gY2FsbCB3aXRoIG5vIHJldHVybnMgb3IgYW4gYXNzaWdubWVudCBzdGF0ZW1lbnQKCQktLSAqIHVzZWQgaW4gc3RhdGVtZW50cygpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpleHByc3RhdChscykKCQkJLS0gc3RhdCAtPiBmdW5jIHwgYXNzaWdubWVudAoJCQlsb2NhbCBmcyA9IGxzLmZzCgkJCWxvY2FsIHYgPSB7fSAgLS0gTEhTX2Fzc2lnbgoJCQl2LnYgPSB7fQoJCQlzZWxmOnByaW1hcnlleHAobHMsIHYudikKCQkJaWYgdi52LmsgPT0gIlZDQUxMIiB0aGVuICAtLSBzdGF0IC0+IGZ1bmMKCQkJCWx1YVA6U0VUQVJHX0MobHVhSzpnZXRjb2RlKGZzLCB2LnYpLCAxKSAgLS0gY2FsbCBzdGF0ZW1lbnQgdXNlcyBubyByZXN1bHRzCgkJCWVsc2UgIC0tIHN0YXQgLT4gYXNzaWdubWVudAoJCQkJdi5wcmV2ID0gbmlsCgkJCQlzZWxmOmFzc2lnbm1lbnQobHMsIHYsIDEpCgkJCWVuZAoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwYXJzZSBhIHJldHVybiBzdGF0ZW1lbnQKCQktLSAqIHVzZWQgaW4gc3RhdGVtZW50cygpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpyZXRzdGF0KGxzKQoJCQktLSBzdGF0IC0+IFJFVFVSTiBleHBsaXN0CgkJCWxvY2FsIGZzID0gbHMuZnMKCQkJbG9jYWwgZSA9IHt9ICAtLSBleHBkZXNjCgkJCWxvY2FsIGZpcnN0LCBucmV0ICAtLSByZWdpc3RlcnMgd2l0aCByZXR1cm5lZCB2YWx1ZXMKCQkJbHVhWDpuZXh0KGxzKSAgLS0gc2tpcCBSRVRVUk4KCQkJaWYgc2VsZjpibG9ja19mb2xsb3cobHMudC50b2tlbikgb3IgbHMudC50b2tlbiA9PSAiOyIgdGhlbgoJCQkJZmlyc3QsIG5yZXQgPSAwLCAwICAtLSByZXR1cm4gbm8gdmFsdWVzCgkJCWVsc2UKCQkJCW5yZXQgPSBzZWxmOmV4cGxpc3QxKGxzLCBlKSAgLS0gb3B0aW9uYWwgcmV0dXJuIHZhbHVlcwoJCQkJaWYgc2VsZjpoYXNtdWx0cmV0KGUuaykgdGhlbgoJCQkJCWx1YUs6c2V0bXVsdHJldChmcywgZSkKCQkJCQlpZiBlLmsgPT0gIlZDQUxMIiBhbmQgbnJldCA9PSAxIHRoZW4gIC0tIHRhaWwgY2FsbD8KCQkJCQkJbHVhUDpTRVRfT1BDT0RFKGx1YUs6Z2V0Y29kZShmcywgZSksICJPUF9UQUlMQ0FMTCIpCgkJCQkJCWx1YV9hc3NlcnQobHVhUDpHRVRBUkdfQShsdWFLOmdldGNvZGUoZnMsIGUpKSA9PSBmcy5uYWN0dmFyKQoJCQkJCWVuZAoJCQkJCWZpcnN0ID0gZnMubmFjdHZhcgoJCQkJCW5yZXQgPSBzZWxmLkxVQV9NVUxUUkVUICAtLSByZXR1cm4gYWxsIHZhbHVlcwoJCQkJZWxzZQoJCQkJCWlmIG5yZXQgPT0gMSB0aGVuICAtLSBvbmx5IG9uZSBzaW5nbGUgdmFsdWU/CgkJCQkJCWZpcnN0ID0gbHVhSzpleHAyYW55cmVnKGZzLCBlKQoJCQkJCWVsc2UKCQkJCQkJbHVhSzpleHAybmV4dHJlZyhmcywgZSkgIC0tIHZhbHVlcyBtdXN0IGdvIHRvIHRoZSAnc3RhY2snCgkJCQkJCWZpcnN0ID0gZnMubmFjdHZhciAgLS0gcmV0dXJuIGFsbCAnYWN0aXZlJyB2YWx1ZXMKCQkJCQkJbHVhX2Fzc2VydChucmV0ID09IGZzLmZyZWVyZWcgLSBmaXJzdCkKCQkJCQllbmQKCQkJCWVuZC0taWYKCQkJZW5kLS1pZgoJCQlsdWFLOnJldChmcywgZmlyc3QsIG5yZXQpCgkJZW5kCgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIGluaXRpYWwgcGFyc2luZyBmb3Igc3RhdGVtZW50cywgY2FsbHMgYSBsb3Qgb2YgZnVuY3Rpb25zCgkJLS0gKiByZXR1cm5zIGJvb2xlYW4gaW5zdGVhZCBvZiAwfDEKCQktLSAqIHVzZWQgaW4gY2h1bmsoKQoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCWZ1bmN0aW9uIGx1YVk6c3RhdGVtZW50KGxzKQoJCQlsb2NhbCBsaW5lID0gbHMubGluZW51bWJlciAgLS0gbWF5IGJlIG5lZWRlZCBmb3IgZXJyb3IgbWVzc2FnZXMKCQkJbG9jYWwgYyA9IGxzLnQudG9rZW4KCQkJaWYgYyA9PSAiVEtfSUYiIHRoZW4gIC0tIHN0YXQgLT4gaWZzdGF0CgkJCQlzZWxmOmlmc3RhdChscywgbGluZSkKCQkJCXJldHVybiBmYWxzZQoJCQllbHNlaWYgYyA9PSAiVEtfV0hJTEUiIHRoZW4gIC0tIHN0YXQgLT4gd2hpbGVzdGF0CgkJCQlzZWxmOndoaWxlc3RhdChscywgbGluZSkKCQkJCXJldHVybiBmYWxzZQoJCQllbHNlaWYgYyA9PSAiVEtfRE8iIHRoZW4gIC0tIHN0YXQgLT4gRE8gYmxvY2sgRU5ECgkJCQlsdWFYOm5leHQobHMpICAtLSBza2lwIERPCgkJCQlzZWxmOmJsb2NrKGxzKQoJCQkJc2VsZjpjaGVja19tYXRjaChscywgIlRLX0VORCIsICJUS19ETyIsIGxpbmUpCgkJCQlyZXR1cm4gZmFsc2UKCQkJZWxzZWlmIGMgPT0gIlRLX0ZPUiIgdGhlbiAgLS0gc3RhdCAtPiBmb3JzdGF0CgkJCQlzZWxmOmZvcnN0YXQobHMsIGxpbmUpCgkJCQlyZXR1cm4gZmFsc2UKCQkJZWxzZWlmIGMgPT0gIlRLX1JFUEVBVCIgdGhlbiAgLS0gc3RhdCAtPiByZXBlYXRzdGF0CgkJCQlzZWxmOnJlcGVhdHN0YXQobHMsIGxpbmUpCgkJCQlyZXR1cm4gZmFsc2UKCQkJZWxzZWlmIGMgPT0gIlRLX0ZVTkNUSU9OIiB0aGVuICAtLSBzdGF0IC0+IGZ1bmNzdGF0CgkJCQlzZWxmOmZ1bmNzdGF0KGxzLCBsaW5lKQoJCQkJcmV0dXJuIGZhbHNlCgkJCWVsc2VpZiBjID09ICJUS19MT0NBTCIgdGhlbiAgLS0gc3RhdCAtPiBsb2NhbHN0YXQKCQkJCWx1YVg6bmV4dChscykgIC0tIHNraXAgTE9DQUwKCQkJCWlmIHNlbGY6dGVzdG5leHQobHMsICJUS19GVU5DVElPTiIpIHRoZW4gIC0tIGxvY2FsIGZ1bmN0aW9uPwoJCQkJCXNlbGY6bG9jYWxmdW5jKGxzKQoJCQkJZWxzZQoJCQkJCXNlbGY6bG9jYWxzdGF0KGxzKQoJCQkJZW5kCgkJCQlyZXR1cm4gZmFsc2UKCQkJZWxzZWlmIGMgPT0gIlRLX1JFVFVSTiIgdGhlbiAgLS0gc3RhdCAtPiByZXRzdGF0CgkJCQlzZWxmOnJldHN0YXQobHMpCgkJCQlyZXR1cm4gdHJ1ZSAgLS0gbXVzdCBiZSBsYXN0IHN0YXRlbWVudAoJCQllbHNlaWYgYyA9PSAiVEtfQlJFQUsiIHRoZW4gIC0tIHN0YXQgLT4gYnJlYWtzdGF0CgkJCQlsdWFYOm5leHQobHMpICAtLSBza2lwIEJSRUFLCgkJCQlzZWxmOmJyZWFrc3RhdChscykKCQkJCXJldHVybiB0cnVlICAtLSBtdXN0IGJlIGxhc3Qgc3RhdGVtZW50CgkJCWVsc2UKCQkJCXNlbGY6ZXhwcnN0YXQobHMpCgkJCQlyZXR1cm4gZmFsc2UgIC0tIHRvIGF2b2lkIHdhcm5pbmdzCgkJCWVuZC0taWYgYwoJCWVuZAoKCQktLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCQktLSBwYXJzZSBhIGNodW5rLCB3aGljaCBjb25zaXN0cyBvZiBhIGJ1bmNoIG9mIHN0YXRlbWVudHMKCQktLSAqIHVzZWQgaW4gcGFyc2VyKCksIGJvZHkoKSwgYmxvY2soKSwgcmVwZWF0c3RhdCgpCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgkJZnVuY3Rpb24gbHVhWTpjaHVuayhscykKCQkJLS0gY2h1bmsgLT4geyBzdGF0IFsnOyddIH0KCQkJbG9jYWwgaXNsYXN0ID0gZmFsc2UKCQkJc2VsZjplbnRlcmxldmVsKGxzKQoJCQl3aGlsZSBub3QgaXNsYXN0IGFuZCBub3Qgc2VsZjpibG9ja19mb2xsb3cobHMudC50b2tlbikgZG8KCQkJCWlzbGFzdCA9IHNlbGY6c3RhdGVtZW50KGxzKQoJCQkJc2VsZjp0ZXN0bmV4dChscywgIjsiKQoJCQkJbHVhX2Fzc2VydChscy5mcy5mLm1heHN0YWNrc2l6ZSA+PSBscy5mcy5mcmVlcmVnIGFuZAoJCQkJCWxzLmZzLmZyZWVyZWcgPj0gbHMuZnMubmFjdHZhcikKCQkJCWxzLmZzLmZyZWVyZWcgPSBscy5mcy5uYWN0dmFyICAtLSBmcmVlIHJlZ2lzdGVycwoJCQllbmQKCQkJc2VsZjpsZWF2ZWxldmVsKGxzKQoJCWVuZAoKCQktLSB9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKCgoKCgkJbHVhWDppbml0KCkgIC0tIHJlcXVpcmVkIGJ5IGxsZXgKCQlsb2NhbCBMdWFTdGF0ZSA9IHt9ICAtLSBkdW1teSwgbm90IGFjdHVhbGx5IHVzZWQsIGJ1dCByZXRhaW5lZCBzaW5jZQoJCS0tIHRoZSBpbnRlbnRpb24gaXMgdG8gY29tcGxldGUgYSBzdHJhaWdodCBwb3J0CgoJCS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoJCS0tIGludGVyZmFjaW5nIHRvIHl1ZWxpYW5nCgkJLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKCQlyZXR1cm4gZnVuY3Rpb24gKHNvdXJjZSwgbmFtZSkKCQkJbmFtZSA9IG5hbWUgb3IgJ2NvbXBpbGVkLWx1YScKCQkJLS0gbHVhWjptYWtlX2dldEYgcmV0dXJucyBhIGZpbGUgY2h1bmsgcmVhZGVyCgkJCS0tIGx1YVo6aW5pdCByZXR1cm5zIGEgemlvIGlucHV0IHN0cmVhbQoJCQlsb2NhbCB6aW8gPSBsdWFaOmluaXQobHVhWjptYWtlX2dldEYoc291cmNlKSwgbmlsKQoJCQlpZiBub3QgemlvIHRoZW4gcmV0dXJuIGVuZAoJCQktLSBsdWFZOnBhcnNlciBwYXJzZXMgdGhlIGlucHV0IHN0cmVhbQoJCQktLSBmdW5jIGlzIHRoZSBmdW5jdGlvbiBwcm90b3R5cGUgaW4gdGFidWxhciBmb3JtOyBpbiBDLCBmdW5jIGNhbgoJCQktLSBub3cgYmUgdXNlZCBkaXJlY3RseSBieSB0aGUgVk0sIHRoaXMgY2FuJ3QgYmUgZG9uZSBpbiBMdWEKCgkJCWxvY2FsIGZ1bmMgPSBsdWFZOnBhcnNlcihMdWFTdGF0ZSwgemlvLCBuaWwsICJAIi4ubmFtZSkKCQkJLS0gbHVhVTptYWtlX3NldFMgcmV0dXJucyBhIHN0cmluZyBjaHVuayB3cml0ZXIKCQkJbG9jYWwgd3JpdGVyLCBidWZmID0gbHVhVTptYWtlX3NldFMoKQoJCQktLSBsdWFVOmR1bXAgYnVpbGRzIGEgYmluYXJ5IGNodW5rCgkJCWx1YVU6ZHVtcChMdWFTdGF0ZSwgZnVuYywgd3JpdGVyLCBidWZmKQoJCQktLSBhIHN0cmluZy5kdW1wIGVxdWl2YWxlbnQgaW4gcmV0dXJuZWQKCgkJCXJldHVybiBidWZmLmRhdGEKCQllbmQKCWVuZCkoKQoKCWxvY2FsIGNyZWF0ZUV4ZWN1dGFibGUgPSBjb3JvdXRpbmUud3JhcChmdW5jdGlvbigpCiAgICAtLVtbCkZpT25lCkNvcHlyaWdodCAoQykgMjAyMSAgUmVydW11CgpUaGlzIHByb2dyYW0gaXMgZnJlZSBzb2Z0d2FyZTogeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yIG1vZGlmeQppdCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieQp0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgooYXQgeW91ciBvcHRpb24pIGFueSBsYXRlciB2ZXJzaW9uLgoKVGhpcyBwcm9ncmFtIGlzIGRpc3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCmJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCk1FUkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0aGUKR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KCllvdSBzaG91bGQgaGF2ZSByZWNlaXZlZCBhIGNvcHkgb2YgdGhlIEdOVSBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlCmFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LgpdXSAtLQoJCWxvY2FsIGJpdCA9IGJpdCBvciBiaXQzMiBvciByZXF1aXJlKCdiaXQnKQoKCQlpZiBub3QgdGFibGUuY3JlYXRlIHRoZW4gZnVuY3Rpb24gdGFibGUuY3JlYXRlKF8pIHJldHVybiB7fSBlbmQgZW5kCgoJCWlmIG5vdCB0YWJsZS51bnBhY2sgdGhlbiB0YWJsZS51bnBhY2sgPSB1bnBhY2sgZW5kCgoJCWlmIG5vdCB0YWJsZS5wYWNrIHRoZW4gZnVuY3Rpb24gdGFibGUucGFjayguLi4pIHJldHVybiB7biA9IHNlbGVjdCgnIycsIC4uLiksIC4uLn0gZW5kIGVuZAoKCQlpZiBub3QgdGFibGUubW92ZSB0aGVuCgkJCWZ1bmN0aW9uIHRhYmxlLm1vdmUoc3JjLCBmaXJzdCwgbGFzdCwgb2Zmc2V0LCBkc3QpCgkJCQlmb3IgaSA9IDAsIGxhc3QgLSBmaXJzdCBkbyBkc3Rbb2Zmc2V0ICsgaV0gPSBzcmNbZmlyc3QgKyBpXSBlbmQKCQkJZW5kCgkJZW5kCgoJCWxvY2FsIGx1YV9iY190b19zdGF0ZQoJCWxvY2FsIGx1YV93cmFwX3N0YXRlCgkJbG9jYWwgc3RtX2x1YV9mdW5jCgoJCS0tIFNFVExJU1QgY29uZmlnCgkJbG9jYWwgRklFTERTX1BFUl9GTFVTSCA9IDUwCgoJCS0tIHJlbWFwIGZvciBiZXR0ZXIgbG9va3VwCgkJbG9jYWwgT1BDT0RFX1JNID0gewoJCQktLSBsZXZlbCAxCgkJCVsyMl0gPSAxOCwgLS0gSk1QCgkJCVszMV0gPSA4LCAtLSBGT1JMT09QCgkJCVszM10gPSAyOCwgLS0gVEZPUkxPT1AKCQkJLS0gbGV2ZWwgMgoJCQlbMF0gPSAzLCAtLSBNT1ZFCgkJCVsxXSA9IDEzLCAtLSBMT0FESwoJCQlbMl0gPSAyMywgLS0gTE9BREJPT0wKCQkJWzI2XSA9IDMzLCAtLSBURVNUCgkJCS0tIGxldmVsIDMKCQkJWzEyXSA9IDEsIC0tIEFERAoJCQlbMTNdID0gNiwgLS0gU1VCCgkJCVsxNF0gPSAxMCwgLS0gTVVMCgkJCVsxNV0gPSAxNiwgLS0gRElWCgkJCVsxNl0gPSAyMCwgLS0gTU9ECgkJCVsxN10gPSAyNiwgLS0gUE9XCgkJCVsxOF0gPSAzMCwgLS0gVU5NCgkJCVsxOV0gPSAzNiwgLS0gTk9UCgkJCS0tIGxldmVsIDQKCQkJWzNdID0gMCwgLS0gTE9BRE5JTAoJCQlbNF0gPSAyLCAtLSBHRVRVUFZBTAoJCQlbNV0gPSA0LCAtLSBHRVRHTE9CQUwKCQkJWzZdID0gNywgLS0gR0VUVEFCTEUKCQkJWzddID0gOSwgLS0gU0VUR0xPQkFMCgkJCVs4XSA9IDEyLCAtLSBTRVRVUFZBTAoJCQlbOV0gPSAxNCwgLS0gU0VUVEFCTEUKCQkJWzEwXSA9IDE3LCAtLSBORVdUQUJMRQoJCQlbMjBdID0gMTksIC0tIExFTgoJCQlbMjFdID0gMjIsIC0tIENPTkNBVAoJCQlbMjNdID0gMjQsIC0tIEVRCgkJCVsyNF0gPSAyNywgLS0gTFQKCQkJWzI1XSA9IDI5LCAtLSBMRQoJCQlbMjddID0gMzIsIC0tIFRFU1RTRVQKCQkJWzMyXSA9IDM0LCAtLSBGT1JQUkVQCgkJCVszNF0gPSAzNywgLS0gU0VUTElTVAoJCQktLSBsZXZlbCA1CgkJCVsxMV0gPSA1LCAtLSBTRUxGCgkJCVsyOF0gPSAxMSwgLS0gQ0FMTAoJCQlbMjldID0gMTUsIC0tIFRBSUxDQUxMCgkJCVszMF0gPSAyMSwgLS0gUkVUVVJOCgkJCVszNV0gPSAyNSwgLS0gQ0xPU0UKCQkJWzM2XSA9IDMxLCAtLSBDTE9TVVJFCgkJCVszN10gPSAzNSwgLS0gVkFSQVJHCgkJfQoKCQktLSBvcGNvZGUgdHlwZXMgZm9yIGdldHRpbmcgdmFsdWVzCgkJbG9jYWwgT1BDT0RFX1QgPSB7CgkJCVswXSA9ICdBQkMnLAoJCQknQUJ4JywKCQkJJ0FCQycsCgkJCSdBQkMnLAoJCQknQUJDJywKCQkJJ0FCeCcsCgkJCSdBQkMnLAoJCQknQUJ4JywKCQkJJ0FCQycsCgkJCSdBQkMnLAoJCQknQUJDJywKCQkJJ0FCQycsCgkJCSdBQkMnLAoJCQknQUJDJywKCQkJJ0FCQycsCgkJCSdBQkMnLAoJCQknQUJDJywKCQkJJ0FCQycsCgkJCSdBQkMnLAoJCQknQUJDJywKCQkJJ0FCQycsCgkJCSdBQkMnLAoJCQknQXNCeCcsCgkJCSdBQkMnLAoJCQknQUJDJywKCQkJJ0FCQycsCgkJCSdBQkMnLAoJCQknQUJDJywKCQkJJ0FCQycsCgkJCSdBQkMnLAoJCQknQUJDJywKCQkJJ0FzQngnLAoJCQknQXNCeCcsCgkJCSdBQkMnLAoJCQknQUJDJywKCQkJJ0FCQycsCgkJCSdBQngnLAoJCQknQUJDJywKCQl9CgoJCWxvY2FsIE9QQ09ERV9NID0gewoJCQlbMF0gPSB7YiA9ICdPcEFyZ1InLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ0snLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ1UnLCBjID0gJ09wQXJnVSd9LAoJCQl7YiA9ICdPcEFyZ1InLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ1UnLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ0snLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ1InLCBjID0gJ09wQXJnSyd9LAoJCQl7YiA9ICdPcEFyZ0snLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ1UnLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ0snLCBjID0gJ09wQXJnSyd9LAoJCQl7YiA9ICdPcEFyZ1UnLCBjID0gJ09wQXJnVSd9LAoJCQl7YiA9ICdPcEFyZ1InLCBjID0gJ09wQXJnSyd9LAoJCQl7YiA9ICdPcEFyZ0snLCBjID0gJ09wQXJnSyd9LAoJCQl7YiA9ICdPcEFyZ0snLCBjID0gJ09wQXJnSyd9LAoJCQl7YiA9ICdPcEFyZ0snLCBjID0gJ09wQXJnSyd9LAoJCQl7YiA9ICdPcEFyZ0snLCBjID0gJ09wQXJnSyd9LAoJCQl7YiA9ICdPcEFyZ0snLCBjID0gJ09wQXJnSyd9LAoJCQl7YiA9ICdPcEFyZ0snLCBjID0gJ09wQXJnSyd9LAoJCQl7YiA9ICdPcEFyZ1InLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ1InLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ1InLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ1InLCBjID0gJ09wQXJnUid9LAoJCQl7YiA9ICdPcEFyZ1InLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ0snLCBjID0gJ09wQXJnSyd9LAoJCQl7YiA9ICdPcEFyZ0snLCBjID0gJ09wQXJnSyd9LAoJCQl7YiA9ICdPcEFyZ0snLCBjID0gJ09wQXJnSyd9LAoJCQl7YiA9ICdPcEFyZ1InLCBjID0gJ09wQXJnVSd9LAoJCQl7YiA9ICdPcEFyZ1InLCBjID0gJ09wQXJnVSd9LAoJCQl7YiA9ICdPcEFyZ1UnLCBjID0gJ09wQXJnVSd9LAoJCQl7YiA9ICdPcEFyZ1UnLCBjID0gJ09wQXJnVSd9LAoJCQl7YiA9ICdPcEFyZ1UnLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ1InLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ1InLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ04nLCBjID0gJ09wQXJnVSd9LAoJCQl7YiA9ICdPcEFyZ1UnLCBjID0gJ09wQXJnVSd9LAoJCQl7YiA9ICdPcEFyZ04nLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ1UnLCBjID0gJ09wQXJnTid9LAoJCQl7YiA9ICdPcEFyZ1UnLCBjID0gJ09wQXJnTid9LAoJCX0KCgkJLS0gaW50IHJkX2ludF9iYXNpYyhzdHJpbmcgc3JjLCBpbnQgcywgaW50IGUsIGludCBkKQoJCS0tIEBzcmMgLSBTb3VyY2UgYmluYXJ5IHN0cmluZwoJCS0tIEBzIC0gU3RhcnQgaW5kZXggb2YgYSBsaXR0bGUgZW5kaWFuIGludGVnZXIKCQktLSBAZSAtIEVuZCBpbmRleCBvZiB0aGUgaW50ZWdlcgoJCS0tIEBkIC0gRGlyZWN0aW9uIG9mIHRoZSBsb29wCgkJbG9jYWwgZnVuY3Rpb24gcmRfaW50X2Jhc2ljKHNyYywgcywgZSwgZCkKCQkJbG9jYWwgbnVtID0gMAoKCQkJLS0gaWYgYmJbbF0gPiAxMjcgdGhlbiAtLSBzaWduZWQgbmVnYXRpdmUKCQkJLS0gCW51bSA9IG51bSAtIDI1NiBeIGwKCQkJLS0gCWJiW2xdID0gYmJbbF0gLSAxMjgKCQkJLS0gZW5kCgoJCQlmb3IgaSA9IHMsIGUsIGQgZG8KCQkJCWxvY2FsIG11bCA9IDI1NiBeIG1hdGguYWJzKGkgLSBzKQoKCQkJCW51bSA9IG51bSArIG11bCAqIHN0cmluZy5ieXRlKHNyYywgaSwgaSkKCQkJZW5kCgoJCQlyZXR1cm4gbnVtCgkJZW5kCgoJCS0tIGZsb2F0IHJkX2ZsdF9iYXNpYyhieXRlIGYxLi44KQoJCS0tIEBmMS4uNCAtIFRoZSA0IGJ5dGVzIGNvbXBvc2luZyBhIGxpdHRsZSBlbmRpYW4gZmxvYXQKCQlsb2NhbCBmdW5jdGlvbiByZF9mbHRfYmFzaWMoZjEsIGYyLCBmMywgZjQpCgkJCWxvY2FsIHNpZ24gPSAoLTEpIF4gYml0LnJzaGlmdChmNCwgNykKCQkJbG9jYWwgZXhwID0gYml0LnJzaGlmdChmMywgNykgKyBiaXQubHNoaWZ0KGJpdC5iYW5kKGY0LCAweDdGKSwgMSkKCQkJbG9jYWwgZnJhYyA9IGYxICsgYml0LmxzaGlmdChmMiwgOCkgKyBiaXQubHNoaWZ0KGJpdC5iYW5kKGYzLCAweDdGKSwgMTYpCgkJCWxvY2FsIG5vcm1hbCA9IDEKCgkJCWlmIGV4cCA9PSAwIHRoZW4KCQkJCWlmIGZyYWMgPT0gMCB0aGVuCgkJCQkJcmV0dXJuIHNpZ24gKiAwCgkJCQllbHNlCgkJCQkJbm9ybWFsID0gMAoJCQkJCWV4cCA9IDEKCQkJCWVuZAoJCQllbHNlaWYgZXhwID09IDB4N0YgdGhlbgoJCQkJaWYgZnJhYyA9PSAwIHRoZW4KCQkJCQlyZXR1cm4gc2lnbiAqICgxIC8gMCkKCQkJCWVsc2UKCQkJCQlyZXR1cm4gc2lnbiAqICgwIC8gMCkKCQkJCWVuZAoJCQllbmQKCgkJCXJldHVybiBzaWduICogMiBeIChleHAgLSAxMjcpICogKDEgKyBub3JtYWwgLyAyIF4gMjMpCgkJZW5kCgoJCS0tIGRvdWJsZSByZF9kYmxfYmFzaWMoYnl0ZSBmMS4uOCkKCQktLSBAZjEuLjggLSBUaGUgOCBieXRlcyBjb21wb3NpbmcgYSBsaXR0bGUgZW5kaWFuIGRvdWJsZQoJCWxvY2FsIGZ1bmN0aW9uIHJkX2RibF9iYXNpYyhmMSwgZjIsIGYzLCBmNCwgZjUsIGY2LCBmNywgZjgpCgkJCWxvY2FsIHNpZ24gPSAoLTEpIF4gYml0LnJzaGlmdChmOCwgNykKCQkJbG9jYWwgZXhwID0gYml0LmxzaGlmdChiaXQuYmFuZChmOCwgMHg3RiksIDQpICsgYml0LnJzaGlmdChmNywgNCkKCQkJbG9jYWwgZnJhYyA9IGJpdC5iYW5kKGY3LCAweDBGKSAqIDIgXiA0OAoJCQlsb2NhbCBub3JtYWwgPSAxCgoJCQlmcmFjID0gZnJhYyArIChmNiAqIDIgXiA0MCkgKyAoZjUgKiAyIF4gMzIpICsgKGY0ICogMiBeIDI0KSArIChmMyAqIDIgXiAxNikgKyAoZjIgKiAyIF4gOCkgKyBmMSAtLSBoZWxwCgoJCQlpZiBleHAgPT0gMCB0aGVuCgkJCQlpZiBmcmFjID09IDAgdGhlbgoJCQkJCXJldHVybiBzaWduICogMAoJCQkJZWxzZQoJCQkJCW5vcm1hbCA9IDAKCQkJCQlleHAgPSAxCgkJCQllbmQKCQkJZWxzZWlmIGV4cCA9PSAweDdGRiB0aGVuCgkJCQlpZiBmcmFjID09IDAgdGhlbgoJCQkJCXJldHVybiBzaWduICogKDEgLyAwKQoJCQkJZWxzZQoJCQkJCXJldHVybiBzaWduICogKDAgLyAwKQoJCQkJZW5kCgkJCWVuZAoKCQkJcmV0dXJuIHNpZ24gKiAyIF4gKGV4cCAtIDEwMjMpICogKG5vcm1hbCArIGZyYWMgLyAyIF4gNTIpCgkJZW5kCgoJCS0tIGludCByZF9pbnRfbGUoc3RyaW5nIHNyYywgaW50IHMsIGludCBlKQoJCS0tIEBzcmMgLSBTb3VyY2UgYmluYXJ5IHN0cmluZwoJCS0tIEBzIC0gU3RhcnQgaW5kZXggb2YgYSBsaXR0bGUgZW5kaWFuIGludGVnZXIKCQktLSBAZSAtIEVuZCBpbmRleCBvZiB0aGUgaW50ZWdlcgoJCWxvY2FsIGZ1bmN0aW9uIHJkX2ludF9sZShzcmMsIHMsIGUpIHJldHVybiByZF9pbnRfYmFzaWMoc3JjLCBzLCBlIC0gMSwgMSkgZW5kCgoJCS0tIGludCByZF9pbnRfYmUoc3RyaW5nIHNyYywgaW50IHMsIGludCBlKQoJCS0tIEBzcmMgLSBTb3VyY2UgYmluYXJ5IHN0cmluZwoJCS0tIEBzIC0gU3RhcnQgaW5kZXggb2YgYSBiaWcgZW5kaWFuIGludGVnZXIKCQktLSBAZSAtIEVuZCBpbmRleCBvZiB0aGUgaW50ZWdlcgoJCWxvY2FsIGZ1bmN0aW9uIHJkX2ludF9iZShzcmMsIHMsIGUpIHJldHVybiByZF9pbnRfYmFzaWMoc3JjLCBlIC0gMSwgcywgLTEpIGVuZAoKCQktLSBmbG9hdCByZF9mbHRfbGUoc3RyaW5nIHNyYywgaW50IHMpCgkJLS0gQHNyYyAtIFNvdXJjZSBiaW5hcnkgc3RyaW5nCgkJLS0gQHMgLSBTdGFydCBpbmRleCBvZiBsaXR0bGUgZW5kaWFuIGZsb2F0CgkJbG9jYWwgZnVuY3Rpb24gcmRfZmx0X2xlKHNyYywgcykgcmV0dXJuIHJkX2ZsdF9iYXNpYyhzdHJpbmcuYnl0ZShzcmMsIHMsIHMgKyAzKSkgZW5kCgoJCS0tIGZsb2F0IHJkX2ZsdF9iZShzdHJpbmcgc3JjLCBpbnQgcykKCQktLSBAc3JjIC0gU291cmNlIGJpbmFyeSBzdHJpbmcKCQktLSBAcyAtIFN0YXJ0IGluZGV4IG9mIGJpZyBlbmRpYW4gZmxvYXQKCQlsb2NhbCBmdW5jdGlvbiByZF9mbHRfYmUoc3JjLCBzKQoJCQlsb2NhbCBmMSwgZjIsIGYzLCBmNCA9IHN0cmluZy5ieXRlKHNyYywgcywgcyArIDMpCgkJCXJldHVybiByZF9mbHRfYmFzaWMoZjQsIGYzLCBmMiwgZjEpCgkJZW5kCgoJCS0tIGRvdWJsZSByZF9kYmxfbGUoc3RyaW5nIHNyYywgaW50IHMpCgkJLS0gQHNyYyAtIFNvdXJjZSBiaW5hcnkgc3RyaW5nCgkJLS0gQHMgLSBTdGFydCBpbmRleCBvZiBsaXR0bGUgZW5kaWFuIGRvdWJsZQoJCWxvY2FsIGZ1bmN0aW9uIHJkX2RibF9sZShzcmMsIHMpIHJldHVybiByZF9kYmxfYmFzaWMoc3RyaW5nLmJ5dGUoc3JjLCBzLCBzICsgNykpIGVuZAoKCQktLSBkb3VibGUgcmRfZGJsX2JlKHN0cmluZyBzcmMsIGludCBzKQoJCS0tIEBzcmMgLSBTb3VyY2UgYmluYXJ5IHN0cmluZwoJCS0tIEBzIC0gU3RhcnQgaW5kZXggb2YgYmlnIGVuZGlhbiBkb3VibGUKCQlsb2NhbCBmdW5jdGlvbiByZF9kYmxfYmUoc3JjLCBzKQoJCQlsb2NhbCBmMSwgZjIsIGYzLCBmNCwgZjUsIGY2LCBmNywgZjggPSBzdHJpbmcuYnl0ZShzcmMsIHMsIHMgKyA3KSAtLSBzYW1lCgkJCXJldHVybiByZF9kYmxfYmFzaWMoZjgsIGY3LCBmNiwgZjUsIGY0LCBmMywgZjIsIGYxKQoJCWVuZAoKCQktLSB0byBhdm9pZCBuZXN0ZWQgaWZzIGluIGRlc2VyaWFsaXppbmcKCQlsb2NhbCBmbG9hdF90eXBlcyA9IHsKCQkJWzRdID0ge2xpdHRsZSA9IHJkX2ZsdF9sZSwgYmlnID0gcmRfZmx0X2JlfSwKCQkJWzhdID0ge2xpdHRsZSA9IHJkX2RibF9sZSwgYmlnID0gcmRfZGJsX2JlfSwKCQl9CgoJCS0tIGJ5dGUgc3RtX2J5dGUoU3RyZWFtIFMpCgkJLS0gQFMgLSBTdHJlYW0gb2JqZWN0IHRvIHJlYWQgZnJvbQoJCWxvY2FsIGZ1bmN0aW9uIHN0bV9ieXRlKFMpCgkJCWxvY2FsIGlkeCA9IFMuaW5kZXgKCQkJbG9jYWwgYnQgPSBzdHJpbmcuYnl0ZShTLnNvdXJjZSwgaWR4LCBpZHgpCgoJCQlTLmluZGV4ID0gaWR4ICsgMQoJCQlyZXR1cm4gYnQKCQllbmQKCgkJLS0gc3RyaW5nIHN0bV9zdHJpbmcoU3RyZWFtIFMsIGludCBsZW4pCgkJLS0gQFMgLSBTdHJlYW0gb2JqZWN0IHRvIHJlYWQgZnJvbQoJCS0tIEBsZW4gLSBMZW5ndGggb2Ygc3RyaW5nIGJlaW5nIHJlYWQKCQlsb2NhbCBmdW5jdGlvbiBzdG1fc3RyaW5nKFMsIGxlbikKCQkJbG9jYWwgcG9zID0gUy5pbmRleCArIGxlbgoJCQlsb2NhbCBzdHIgPSBzdHJpbmcuc3ViKFMuc291cmNlLCBTLmluZGV4LCBwb3MgLSAxKQoKCQkJUy5pbmRleCA9IHBvcwoJCQlyZXR1cm4gc3RyCgkJZW5kCgoJCS0tIHN0cmluZyBzdG1fbHN0cmluZyhTdHJlYW0gUykKCQktLSBAUyAtIFN0cmVhbSBvYmplY3QgdG8gcmVhZCBmcm9tCgkJbG9jYWwgZnVuY3Rpb24gc3RtX2xzdHJpbmcoUykKCQkJbG9jYWwgbGVuID0gUzpzX3N6dCgpCgkJCWxvY2FsIHN0cgoKCQkJaWYgbGVuIH49IDAgdGhlbiBzdHIgPSBzdHJpbmcuc3ViKHN0bV9zdHJpbmcoUywgbGVuKSwgMSwgLTIpIGVuZAoKCQkJcmV0dXJuIHN0cgoJCWVuZAoKCQktLSBmbiBjc3RfaW50X3JkcihzdHJpbmcgc3JjLCBpbnQgbGVuLCBmbiBmdW5jKQoJCS0tIEBsZW4gLSBMZW5ndGggb2YgdHlwZSBmb3IgcmVhZGVyCgkJLS0gQGZ1bmMgLSBSZWFkZXIgY2FsbGJhY2sKCQlsb2NhbCBmdW5jdGlvbiBjc3RfaW50X3JkcihsZW4sIGZ1bmMpCgkJCXJldHVybiBmdW5jdGlvbihTKQoJCQkJbG9jYWwgcG9zID0gUy5pbmRleCArIGxlbgoJCQkJbG9jYWwgaW50ID0gZnVuYyhTLnNvdXJjZSwgUy5pbmRleCwgcG9zKQoJCQkJUy5pbmRleCA9IHBvcwoKCQkJCXJldHVybiBpbnQKCQkJZW5kCgkJZW5kCgoJCS0tIGZuIGNzdF9mbHRfcmRyKHN0cmluZyBzcmMsIGludCBsZW4sIGZuIGZ1bmMpCgkJLS0gQGxlbiAtIExlbmd0aCBvZiB0eXBlIGZvciByZWFkZXIKCQktLSBAZnVuYyAtIFJlYWRlciBjYWxsYmFjawoJCWxvY2FsIGZ1bmN0aW9uIGNzdF9mbHRfcmRyKGxlbiwgZnVuYykKCQkJcmV0dXJuIGZ1bmN0aW9uKFMpCgkJCQlsb2NhbCBmbHQgPSBmdW5jKFMuc291cmNlLCBTLmluZGV4KQoJCQkJUy5pbmRleCA9IFMuaW5kZXggKyBsZW4KCgkJCQlyZXR1cm4gZmx0CgkJCWVuZAoJCWVuZAoKCQlsb2NhbCBmdW5jdGlvbiBzdG1faW5zdF9saXN0KFMpCgkJCWxvY2FsIGxlbiA9IFM6c19pbnQoKQoJCQlsb2NhbCBsaXN0ID0gdGFibGUuY3JlYXRlKGxlbikKCgkJCWZvciBpID0gMSwgbGVuIGRvCgkJCQlsb2NhbCBpbnMgPSBTOnNfaW5zKCkKCQkJCWxvY2FsIG9wID0gYml0LmJhbmQoaW5zLCAweDNGKQoJCQkJbG9jYWwgYXJncyA9IE9QQ09ERV9UW29wXQoJCQkJbG9jYWwgbW9kZSA9IE9QQ09ERV9NW29wXQoJCQkJbG9jYWwgZGF0YSA9IHt2YWx1ZSA9IGlucywgb3AgPSBPUENPREVfUk1bb3BdLCBBID0gYml0LmJhbmQoYml0LnJzaGlmdChpbnMsIDYpLCAweEZGKX0KCgkJCQlpZiBhcmdzID09ICdBQkMnIHRoZW4KCQkJCQlkYXRhLkIgPSBiaXQuYmFuZChiaXQucnNoaWZ0KGlucywgMjMpLCAweDFGRikKCQkJCQlkYXRhLkMgPSBiaXQuYmFuZChiaXQucnNoaWZ0KGlucywgMTQpLCAweDFGRikKCQkJCQlkYXRhLmlzX0tCID0gbW9kZS5iID09ICdPcEFyZ0snIGFuZCBkYXRhLkIgPiAweEZGIC0tIHBvc3QgcHJvY2VzcyBvcHRpbWl6YXRpb24KCQkJCQlkYXRhLmlzX0tDID0gbW9kZS5jID09ICdPcEFyZ0snIGFuZCBkYXRhLkMgPiAweEZGCgkJCQllbHNlaWYgYXJncyA9PSAnQUJ4JyB0aGVuCgkJCQkJZGF0YS5CeCA9IGJpdC5iYW5kKGJpdC5yc2hpZnQoaW5zLCAxNCksIDB4M0ZGRkYpCgkJCQkJZGF0YS5pc19LID0gbW9kZS5iID09ICdPcEFyZ0snCgkJCQllbHNlaWYgYXJncyA9PSAnQXNCeCcgdGhlbgoJCQkJCWRhdGEuc0J4ID0gYml0LmJhbmQoYml0LnJzaGlmdChpbnMsIDE0KSwgMHgzRkZGRikgLSAxMzEwNzEKCQkJCWVuZAoKCQkJCWxpc3RbaV0gPSBkYXRhCgkJCWVuZAoKCQkJcmV0dXJuIGxpc3QKCQllbmQKCgkJbG9jYWwgZnVuY3Rpb24gc3RtX2NvbnN0X2xpc3QoUykKCQkJbG9jYWwgbGVuID0gUzpzX2ludCgpCgkJCWxvY2FsIGxpc3QgPSB0YWJsZS5jcmVhdGUobGVuKQoKCQkJZm9yIGkgPSAxLCBsZW4gZG8KCQkJCWxvY2FsIHR0ID0gc3RtX2J5dGUoUykKCQkJCWxvY2FsIGsKCgkJCQlpZiB0dCA9PSAxIHRoZW4KCQkJCQlrID0gc3RtX2J5dGUoUykgfj0gMAoJCQkJZWxzZWlmIHR0ID09IDMgdGhlbgoJCQkJCWsgPSBTOnNfbnVtKCkKCQkJCWVsc2VpZiB0dCA9PSA0IHRoZW4KCQkJCQlrID0gc3RtX2xzdHJpbmcoUykKCQkJCWVuZAoKCQkJCWxpc3RbaV0gPSBrIC0tIG9mZnNldCArMSBkdXJpbmcgaW5zdHJ1Y3Rpb24gZGVjb2RlCgkJCWVuZAoKCQkJcmV0dXJuIGxpc3QKCQllbmQKCgkJbG9jYWwgZnVuY3Rpb24gc3RtX3N1Yl9saXN0KFMsIHNyYykKCQkJbG9jYWwgbGVuID0gUzpzX2ludCgpCgkJCWxvY2FsIGxpc3QgPSB0YWJsZS5jcmVhdGUobGVuKQoKCQkJZm9yIGkgPSAxLCBsZW4gZG8KCQkJCWxpc3RbaV0gPSBzdG1fbHVhX2Z1bmMoUywgc3JjKSAtLSBvZmZzZXQgKzEgaW4gQ0xPU1VSRQoJCQllbmQKCgkJCXJldHVybiBsaXN0CgkJZW5kCgoJCWxvY2FsIGZ1bmN0aW9uIHN0bV9saW5lX2xpc3QoUykKCQkJbG9jYWwgbGVuID0gUzpzX2ludCgpCgkJCWxvY2FsIGxpc3QgPSB0YWJsZS5jcmVhdGUobGVuKQoKCQkJZm9yIGkgPSAxLCBsZW4gZG8gbGlzdFtpXSA9IFM6c19pbnQoKSBlbmQKCgkJCXJldHVybiBsaXN0CgkJZW5kCgoJCWxvY2FsIGZ1bmN0aW9uIHN0bV9sb2NfbGlzdChTKQoJCQlsb2NhbCBsZW4gPSBTOnNfaW50KCkKCQkJbG9jYWwgbGlzdCA9IHRhYmxlLmNyZWF0ZShsZW4pCgoJCQlmb3IgaSA9IDEsIGxlbiBkbyBsaXN0W2ldID0ge3Zhcm5hbWUgPSBzdG1fbHN0cmluZyhTKSwgc3RhcnRwYyA9IFM6c19pbnQoKSwgZW5kcGMgPSBTOnNfaW50KCl9IGVuZAoKCQkJcmV0dXJuIGxpc3QKCQllbmQKCgkJbG9jYWwgZnVuY3Rpb24gc3RtX3VwdmFsX2xpc3QoUykKCQkJbG9jYWwgbGVuID0gUzpzX2ludCgpCgkJCWxvY2FsIGxpc3QgPSB0YWJsZS5jcmVhdGUobGVuKQoKCQkJZm9yIGkgPSAxLCBsZW4gZG8gbGlzdFtpXSA9IHN0bV9sc3RyaW5nKFMpIGVuZAoKCQkJcmV0dXJuIGxpc3QKCQllbmQKCgkJZnVuY3Rpb24gc3RtX2x1YV9mdW5jKFMsIHBzcmMpCgkJCWxvY2FsIHByb3RvID0ge30KCQkJbG9jYWwgc3JjID0gc3RtX2xzdHJpbmcoUykgb3IgcHNyYyAtLSBzb3VyY2UgaXMgcHJvcGFnYXRlZAoKCQkJcHJvdG8uc291cmNlID0gc3JjIC0tIHNvdXJjZSBuYW1lCgoJCQlTOnNfaW50KCkgLS0gbGluZSBkZWZpbmVkCgkJCVM6c19pbnQoKSAtLSBsYXN0IGxpbmUgZGVmaW5lZAoKCQkJcHJvdG8ubnVtX3VwdmFsID0gc3RtX2J5dGUoUykgLS0gbnVtIHVwdmFsdWVzCgkJCXByb3RvLm51bV9wYXJhbSA9IHN0bV9ieXRlKFMpIC0tIG51bSBwYXJhbXMKCgkJCXN0bV9ieXRlKFMpIC0tIHZhcmFyZyBmbGFnCgkJCXByb3RvLm1heF9zdGFjayA9IHN0bV9ieXRlKFMpIC0tIG1heCBzdGFjayBzaXplCgoJCQlwcm90by5jb2RlID0gc3RtX2luc3RfbGlzdChTKQoJCQlwcm90by5jb25zdCA9IHN0bV9jb25zdF9saXN0KFMpCgkJCXByb3RvLnN1YnMgPSBzdG1fc3ViX2xpc3QoUywgc3JjKQoJCQlwcm90by5saW5lcyA9IHN0bV9saW5lX2xpc3QoUykKCgkJCXN0bV9sb2NfbGlzdChTKQoJCQlzdG1fdXB2YWxfbGlzdChTKQoKCQkJLS0gcG9zdCBwcm9jZXNzIG9wdGltaXphdGlvbgoJCQlmb3IgXywgdiBpbiBpcGFpcnMocHJvdG8uY29kZSkgZG8KCQkJCWlmIHYuaXNfSyB0aGVuCgkJCQkJdi5jb25zdCA9IHByb3RvLmNvbnN0W3YuQnggKyAxXSAtLSBvZmZzZXQgZm9yIDEgYmFzZWQgaW5kZXgKCQkJCWVsc2UKCQkJCQlpZiB2LmlzX0tCIHRoZW4gdi5jb25zdF9CID0gcHJvdG8uY29uc3Rbdi5CIC0gMHhGRl0gZW5kCgoJCQkJCWlmIHYuaXNfS0MgdGhlbiB2LmNvbnN0X0MgPSBwcm90by5jb25zdFt2LkMgLSAweEZGXSBlbmQKCQkJCWVuZAoJCQllbmQKCgkJCXJldHVybiBwcm90bwoJCWVuZAoKCQlmdW5jdGlvbiBsdWFfYmNfdG9fc3RhdGUoc3JjKQoJCQktLSBmdW5jIHJlYWRlcgoJCQlsb2NhbCByZHJfZnVuYwoKCQkJLS0gaGVhZGVyIGZsYWdzCgkJCWxvY2FsIGxpdHRsZQoJCQlsb2NhbCBzaXplX2ludAoJCQlsb2NhbCBzaXplX3N6dAoJCQlsb2NhbCBzaXplX2lucwoJCQlsb2NhbCBzaXplX251bQoJCQlsb2NhbCBmbGFnX2ludAoKCQkJLS0gc3RyZWFtIG9iamVjdAoJCQlsb2NhbCBzdHJlYW0gPSB7CgkJCQktLSBkYXRhCgkJCQlpbmRleCA9IDEsCgkJCQlzb3VyY2UgPSBzcmMsCgkJCX0KCgkJCWFzc2VydChzdG1fc3RyaW5nKHN0cmVhbSwgNCkgPT0gJ1wyN0x1YScsICdpbnZhbGlkIEx1YSBzaWduYXR1cmUnKQoJCQlhc3NlcnQoc3RtX2J5dGUoc3RyZWFtKSA9PSAweDUxLCAnaW52YWxpZCBMdWEgdmVyc2lvbicpCgkJCWFzc2VydChzdG1fYnl0ZShzdHJlYW0pID09IDAsICdpbnZhbGlkIEx1YSBmb3JtYXQnKQoKCQkJbGl0dGxlID0gc3RtX2J5dGUoc3RyZWFtKSB+PSAwCgkJCXNpemVfaW50ID0gc3RtX2J5dGUoc3RyZWFtKQoJCQlzaXplX3N6dCA9IHN0bV9ieXRlKHN0cmVhbSkKCQkJc2l6ZV9pbnMgPSBzdG1fYnl0ZShzdHJlYW0pCgkJCXNpemVfbnVtID0gc3RtX2J5dGUoc3RyZWFtKQoJCQlmbGFnX2ludCA9IHN0bV9ieXRlKHN0cmVhbSkgfj0gMAoKCQkJcmRyX2Z1bmMgPSBsaXR0bGUgYW5kIHJkX2ludF9sZSBvciByZF9pbnRfYmUKCQkJc3RyZWFtLnNfaW50ID0gY3N0X2ludF9yZHIoc2l6ZV9pbnQsIHJkcl9mdW5jKQoJCQlzdHJlYW0uc19zenQgPSBjc3RfaW50X3JkcihzaXplX3N6dCwgcmRyX2Z1bmMpCgkJCXN0cmVhbS5zX2lucyA9IGNzdF9pbnRfcmRyKHNpemVfaW5zLCByZHJfZnVuYykKCgkJCWlmIGZsYWdfaW50IHRoZW4KCQkJCXN0cmVhbS5zX251bSA9IGNzdF9pbnRfcmRyKHNpemVfbnVtLCByZHJfZnVuYykKCQkJZWxzZWlmIGZsb2F0X3R5cGVzW3NpemVfbnVtXSB0aGVuCgkJCQlzdHJlYW0uc19udW0gPSBjc3RfZmx0X3JkcihzaXplX251bSwgZmxvYXRfdHlwZXNbc2l6ZV9udW1dW2xpdHRsZSBhbmQgJ2xpdHRsZScgb3IgJ2JpZyddKQoJCQllbHNlCgkJCQllcnJvcigndW5zdXBwb3J0ZWQgZmxvYXQgc2l6ZScpCgkJCWVuZAoKCQkJcmV0dXJuIHN0bV9sdWFfZnVuYyhzdHJlYW0sICdAdmlydHVhbCcpCgkJZW5kCgoJCWxvY2FsIGZ1bmN0aW9uIGNsb3NlX2x1YV91cHZhbHVlcyhsaXN0LCBpbmRleCkKCQkJZm9yIGksIHV2IGluIHBhaXJzKGxpc3QpIGRvCgkJCQlpZiB1di5pbmRleCA+PSBpbmRleCB0aGVuCgkJCQkJdXYudmFsdWUgPSB1di5zdG9yZVt1di5pbmRleF0gLS0gc3RvcmUgdmFsdWUKCQkJCQl1di5zdG9yZSA9IHV2CgkJCQkJdXYuaW5kZXggPSAndmFsdWUnIC0tIHNlbGYgcmVmZXJlbmNlCgkJCQkJbGlzdFtpXSA9IG5pbAoJCQkJZW5kCgkJCWVuZAoJCWVuZAoKCQlsb2NhbCBmdW5jdGlvbiBvcGVuX2x1YV91cHZhbHVlKGxpc3QsIGluZGV4LCBtZW1vcnkpCgkJCWxvY2FsIHByZXYgPSBsaXN0W2luZGV4XQoKCQkJaWYgbm90IHByZXYgdGhlbgoJCQkJcHJldiA9IHtpbmRleCA9IGluZGV4LCBzdG9yZSA9IG1lbW9yeX0KCQkJCWxpc3RbaW5kZXhdID0gcHJldgoJCQllbmQKCgkJCXJldHVybiBwcmV2CgkJZW5kCgoJCWxvY2FsIGZ1bmN0aW9uIG9uX2x1YV9lcnJvcihmYWlsZWQsIGVycikKCQkJbG9jYWwgbGluZSA9IGZhaWxlZC5saW5lc1tmYWlsZWQucGMgLSAxXQoKCQkJZXJyb3IoJ0xpbmUgOicuLiBsaW5lLi4gIjogIi4uIGVyciwgMCkKCQllbmQKCgkJbG9jYWwgZnVuY3Rpb24gcnVuX2x1YV9mdW5jKHN0YXRlLCBlbnYsIHVwdmFscykKCQkJbG9jYWwgY29kZSA9IHN0YXRlLmNvZGUKCQkJbG9jYWwgc3VicyA9IHN0YXRlLnN1YnMKCQkJbG9jYWwgdmFyYXJnID0gc3RhdGUudmFyYXJnCgoJCQlsb2NhbCB0b3BfaW5kZXggPSAtMQoJCQlsb2NhbCBvcGVuX2xpc3QgPSB7fQoJCQlsb2NhbCBtZW1vcnkgPSBzdGF0ZS5tZW1vcnkKCQkJbG9jYWwgcGMgPSBzdGF0ZS5wYwoKCQkJd2hpbGUgdHJ1ZSBkbwoJCQkJbG9jYWwgaW5zdCA9IGNvZGVbcGNdCgkJCQlsb2NhbCBvcCA9IGluc3Qub3AKCQkJCXBjID0gcGMgKyAxCgoJCQkJaWYgb3AgPCAxOCB0aGVuCgkJCQkJaWYgb3AgPCA4IHRoZW4KCQkJCQkJaWYgb3AgPCAzIHRoZW4KCQkJCQkJCWlmIG9wIDwgMSB0aGVuCgkJCQkJCQkJLS1bW0xPQUROSUxdXQoJCQkJCQkJCWZvciBpID0gaW5zdC5BLCBpbnN0LkIgZG8gbWVtb3J5W2ldID0gbmlsIGVuZAoJCQkJCQkJZWxzZWlmIG9wID4gMSB0aGVuCgkJCQkJCQkJLS1bW0dFVFVQVkFMXV0KCQkJCQkJCQlsb2NhbCB1diA9IHVwdmFsc1tpbnN0LkJdCgoJCQkJCQkJCW1lbW9yeVtpbnN0LkFdID0gdXYuc3RvcmVbdXYuaW5kZXhdCgkJCQkJCQllbHNlCgkJCQkJCQkJLS1bW0FERF1dCgkJCQkJCQkJbG9jYWwgbGhzLCByaHMKCgkJCQkJCQkJaWYgaW5zdC5pc19LQiB0aGVuCgkJCQkJCQkJCWxocyA9IGluc3QuY29uc3RfQgoJCQkJCQkJCWVsc2UKCQkJCQkJCQkJbGhzID0gbWVtb3J5W2luc3QuQl0KCQkJCQkJCQllbmQKCgkJCQkJCQkJaWYgaW5zdC5pc19LQyB0aGVuCgkJCQkJCQkJCXJocyA9IGluc3QuY29uc3RfQwoJCQkJCQkJCWVsc2UKCQkJCQkJCQkJcmhzID0gbWVtb3J5W2luc3QuQ10KCQkJCQkJCQllbmQKCgkJCQkJCQkJbWVtb3J5W2luc3QuQV0gPSBsaHMgKyByaHMKCQkJCQkJCWVuZAoJCQkJCQllbHNlaWYgb3AgPiAzIHRoZW4KCQkJCQkJCWlmIG9wIDwgNiB0aGVuCgkJCQkJCQkJaWYgb3AgPiA0IHRoZW4KCQkJCQkJCQkJLS1bW1NFTEZdXQoJCQkJCQkJCQlsb2NhbCBBID0gaW5zdC5BCgkJCQkJCQkJCWxvY2FsIEIgPSBpbnN0LkIKCQkJCQkJCQkJbG9jYWwgaW5kZXgKCgkJCQkJCQkJCWlmIGluc3QuaXNfS0MgdGhlbgoJCQkJCQkJCQkJaW5kZXggPSBpbnN0LmNvbnN0X0MKCQkJCQkJCQkJZWxzZQoJCQkJCQkJCQkJaW5kZXggPSBtZW1vcnlbaW5zdC5DXQoJCQkJCQkJCQllbmQKCgkJCQkJCQkJCW1lbW9yeVtBICsgMV0gPSBtZW1vcnlbQl0KCQkJCQkJCQkJbWVtb3J5W0FdID0gbWVtb3J5W0JdW2luZGV4XQoJCQkJCQkJCWVsc2UKCQkJCQkJCQkJLS1bW0dFVEdMT0JBTF1dCgkJCQkJCQkJCW1lbW9yeVtpbnN0LkFdID0gZW52W2luc3QuY29uc3RdCgkJCQkJCQkJZW5kCgkJCQkJCQllbHNlaWYgb3AgPiA2IHRoZW4KCQkJCQkJCQktLVtbR0VUVEFCTEVdXQoJCQkJCQkJCWxvY2FsIGluZGV4CgoJCQkJCQkJCWlmIGluc3QuaXNfS0MgdGhlbgoJCQkJCQkJCQlpbmRleCA9IGluc3QuY29uc3RfQwoJCQkJCQkJCWVsc2UKCQkJCQkJCQkJaW5kZXggPSBtZW1vcnlbaW5zdC5DXQoJCQkJCQkJCWVuZAoKCQkJCQkJCQltZW1vcnlbaW5zdC5BXSA9IG1lbW9yeVtpbnN0LkJdW2luZGV4XQoJCQkJCQkJZWxzZQoJCQkJCQkJCS0tW1tTVUJdXQoJCQkJCQkJCWxvY2FsIGxocywgcmhzCgoJCQkJCQkJCWlmIGluc3QuaXNfS0IgdGhlbgoJCQkJCQkJCQlsaHMgPSBpbnN0LmNvbnN0X0IKCQkJCQkJCQllbHNlCgkJCQkJCQkJCWxocyA9IG1lbW9yeVtpbnN0LkJdCgkJCQkJCQkJZW5kCgoJCQkJCQkJCWlmIGluc3QuaXNfS0MgdGhlbgoJCQkJCQkJCQlyaHMgPSBpbnN0LmNvbnN0X0MKCQkJCQkJCQllbHNlCgkJCQkJCQkJCXJocyA9IG1lbW9yeVtpbnN0LkNdCgkJCQkJCQkJZW5kCgoJCQkJCQkJCW1lbW9yeVtpbnN0LkFdID0gbGhzIC0gcmhzCgkJCQkJCQllbmQKCQkJCQkJZWxzZSAtLVtbTU9WRV1dCgkJCQkJCQltZW1vcnlbaW5zdC5BXSA9IG1lbW9yeVtpbnN0LkJdCgkJCQkJCWVuZAoJCQkJCWVsc2VpZiBvcCA+IDggdGhlbgoJCQkJCQlpZiBvcCA8IDEzIHRoZW4KCQkJCQkJCWlmIG9wIDwgMTAgdGhlbgoJCQkJCQkJCS0tW1tTRVRHTE9CQUxdXQoJCQkJCQkJCWVudltpbnN0LmNvbnN0XSA9IG1lbW9yeVtpbnN0LkFdCgkJCQkJCQllbHNlaWYgb3AgPiAxMCB0aGVuCgkJCQkJCQkJaWYgb3AgPCAxMiB0aGVuCgkJCQkJCQkJCS0tW1tDQUxMXV0KCQkJCQkJCQkJbG9jYWwgQSA9IGluc3QuQQoJCQkJCQkJCQlsb2NhbCBCID0gaW5zdC5CCgkJCQkJCQkJCWxvY2FsIEMgPSBpbnN0LkMKCQkJCQkJCQkJbG9jYWwgcGFyYW1zCgoJCQkJCQkJCQlpZiBCID09IDAgdGhlbgoJCQkJCQkJCQkJcGFyYW1zID0gdG9wX2luZGV4IC0gQQoJCQkJCQkJCQllbHNlCgkJCQkJCQkJCQlwYXJhbXMgPSBCIC0gMQoJCQkJCQkJCQllbmQKCgkJCQkJCQkJCWxvY2FsIHJldF9saXN0ID0gdGFibGUucGFjayhtZW1vcnlbQV0odGFibGUudW5wYWNrKG1lbW9yeSwgQSArIDEsIEEgKyBwYXJhbXMpKSkKCQkJCQkJCQkJbG9jYWwgcmV0X251bSA9IHJldF9saXN0Lm4KCgkJCQkJCQkJCWlmIEMgPT0gMCB0aGVuCgkJCQkJCQkJCQl0b3BfaW5kZXggPSBBICsgcmV0X251bSAtIDEKCQkJCQkJCQkJZWxzZQoJCQkJCQkJCQkJcmV0X251bSA9IEMgLSAxCgkJCQkJCQkJCWVuZAoKCQkJCQkJCQkJdGFibGUubW92ZShyZXRfbGlzdCwgMSwgcmV0X251bSwgQSwgbWVtb3J5KQoJCQkJCQkJCWVsc2UKCQkJCQkJCQkJLS1bW1NFVFVQVkFMXV0KCQkJCQkJCQkJbG9jYWwgdXYgPSB1cHZhbHNbaW5zdC5CXQoKCQkJCQkJCQkJdXYuc3RvcmVbdXYuaW5kZXhdID0gbWVtb3J5W2luc3QuQV0KCQkJCQkJCQllbmQKCQkJCQkJCWVsc2UKCQkJCQkJCQktLVtbTVVMXV0KCQkJCQkJCQlsb2NhbCBsaHMsIHJocwoKCQkJCQkJCQlpZiBpbnN0LmlzX0tCIHRoZW4KCQkJCQkJCQkJbGhzID0gaW5zdC5jb25zdF9CCgkJCQkJCQkJZWxzZQoJCQkJCQkJCQlsaHMgPSBtZW1vcnlbaW5zdC5CXQoJCQkJCQkJCWVuZAoKCQkJCQkJCQlpZiBpbnN0LmlzX0tDIHRoZW4KCQkJCQkJCQkJcmhzID0gaW5zdC5jb25zdF9DCgkJCQkJCQkJZWxzZQoJCQkJCQkJCQlyaHMgPSBtZW1vcnlbaW5zdC5DXQoJCQkJCQkJCWVuZAoKCQkJCQkJCQltZW1vcnlbaW5zdC5BXSA9IGxocyAqIHJocwoJCQkJCQkJZW5kCgkJCQkJCWVsc2VpZiBvcCA+IDEzIHRoZW4KCQkJCQkJCWlmIG9wIDwgMTYgdGhlbgoJCQkJCQkJCWlmIG9wID4gMTQgdGhlbgoJCQkJCQkJCQktLVtbVEFJTENBTExdXQoJCQkJCQkJCQlsb2NhbCBBID0gaW5zdC5BCgkJCQkJCQkJCWxvY2FsIEIgPSBpbnN0LkIKCQkJCQkJCQkJbG9jYWwgcGFyYW1zCgoJCQkJCQkJCQlpZiBCID09IDAgdGhlbgoJCQkJCQkJCQkJcGFyYW1zID0gdG9wX2luZGV4IC0gQQoJCQkJCQkJCQllbHNlCgkJCQkJCQkJCQlwYXJhbXMgPSBCIC0gMQoJCQkJCQkJCQllbmQKCgkJCQkJCQkJCWNsb3NlX2x1YV91cHZhbHVlcyhvcGVuX2xpc3QsIDApCgoJCQkJCQkJCQlyZXR1cm4gbWVtb3J5W0FdKHRhYmxlLnVucGFjayhtZW1vcnksIEEgKyAxLCBBICsgcGFyYW1zKSkKCQkJCQkJCQllbHNlCgkJCQkJCQkJCS0tW1tTRVRUQUJMRV1dCgkJCQkJCQkJCWxvY2FsIGluZGV4LCB2YWx1ZQoKCQkJCQkJCQkJaWYgaW5zdC5pc19LQiB0aGVuCgkJCQkJCQkJCQlpbmRleCA9IGluc3QuY29uc3RfQgoJCQkJCQkJCQllbHNlCgkJCQkJCQkJCQlpbmRleCA9IG1lbW9yeVtpbnN0LkJdCgkJCQkJCQkJCWVuZAoKCQkJCQkJCQkJaWYgaW5zdC5pc19LQyB0aGVuCgkJCQkJCQkJCQl2YWx1ZSA9IGluc3QuY29uc3RfQwoJCQkJCQkJCQllbHNlCgkJCQkJCQkJCQl2YWx1ZSA9IG1lbW9yeVtpbnN0LkNdCgkJCQkJCQkJCWVuZAoKCQkJCQkJCQkJbWVtb3J5W2luc3QuQV1baW5kZXhdID0gdmFsdWUKCQkJCQkJCQllbmQKCQkJCQkJCWVsc2VpZiBvcCA+IDE2IHRoZW4KCQkJCQkJCQktLVtbTkVXVEFCTEVdXQoJCQkJCQkJCW1lbW9yeVtpbnN0LkFdID0ge30KCQkJCQkJCWVsc2UKCQkJCQkJCQktLVtbRElWXV0KCQkJCQkJCQlsb2NhbCBsaHMsIHJocwoKCQkJCQkJCQlpZiBpbnN0LmlzX0tCIHRoZW4KCQkJCQkJCQkJbGhzID0gaW5zdC5jb25zdF9CCgkJCQkJCQkJZWxzZQoJCQkJCQkJCQlsaHMgPSBtZW1vcnlbaW5zdC5CXQoJCQkJCQkJCWVuZAoKCQkJCQkJCQlpZiBpbnN0LmlzX0tDIHRoZW4KCQkJCQkJCQkJcmhzID0gaW5zdC5jb25zdF9DCgkJCQkJCQkJZWxzZQoJCQkJCQkJCQlyaHMgPSBtZW1vcnlbaW5zdC5DXQoJCQkJCQkJCWVuZAoKCQkJCQkJCQltZW1vcnlbaW5zdC5BXSA9IGxocyAvIHJocwoJCQkJCQkJZW5kCgkJCQkJCWVsc2UKCQkJCQkJCS0tW1tMT0FES11dCgkJCQkJCQltZW1vcnlbaW5zdC5BXSA9IGluc3QuY29uc3QKCQkJCQkJZW5kCgkJCQkJZWxzZQoJCQkJCQktLVtbRk9STE9PUF1dCgkJCQkJCWxvY2FsIEEgPSBpbnN0LkEKCQkJCQkJbG9jYWwgc3RlcCA9IG1lbW9yeVtBICsgMl0KCQkJCQkJbG9jYWwgaW5kZXggPSBtZW1vcnlbQV0gKyBzdGVwCgkJCQkJCWxvY2FsIGxpbWl0ID0gbWVtb3J5W0EgKyAxXQoJCQkJCQlsb2NhbCBsb29wcwoKCQkJCQkJaWYgc3RlcCA9PSBtYXRoLmFicyhzdGVwKSB0aGVuCgkJCQkJCQlsb29wcyA9IGluZGV4IDw9IGxpbWl0CgkJCQkJCWVsc2UKCQkJCQkJCWxvb3BzID0gaW5kZXggPj0gbGltaXQKCQkJCQkJZW5kCgoJCQkJCQlpZiBsb29wcyB0aGVuCgkJCQkJCQltZW1vcnlbQV0gPSBpbmRleAoJCQkJCQkJbWVtb3J5W0EgKyAzXSA9IGluZGV4CgkJCQkJCQlwYyA9IHBjICsgaW5zdC5zQngKCQkJCQkJZW5kCgkJCQkJZW5kCgkJCQllbHNlaWYgb3AgPiAxOCB0aGVuCgkJCQkJaWYgb3AgPCAyOCB0aGVuCgkJCQkJCWlmIG9wIDwgMjMgdGhlbgoJCQkJCQkJaWYgb3AgPCAyMCB0aGVuCgkJCQkJCQkJLS1bW0xFTl1dCgkJCQkJCQkJbWVtb3J5W2luc3QuQV0gPSAjbWVtb3J5W2luc3QuQl0KCQkJCQkJCWVsc2VpZiBvcCA+IDIwIHRoZW4KCQkJCQkJCQlpZiBvcCA8IDIyIHRoZW4KCQkJCQkJCQkJLS1bW1JFVFVSTl1dCgkJCQkJCQkJCWxvY2FsIEEgPSBpbnN0LkEKCQkJCQkJCQkJbG9jYWwgQiA9IGluc3QuQgoJCQkJCQkJCQlsb2NhbCBsZW4KCgkJCQkJCQkJCWlmIEIgPT0gMCB0aGVuCgkJCQkJCQkJCQlsZW4gPSB0b3BfaW5kZXggLSBBICsgMQoJCQkJCQkJCQllbHNlCgkJCQkJCQkJCQlsZW4gPSBCIC0gMQoJCQkJCQkJCQllbmQKCgkJCQkJCQkJCWNsb3NlX2x1YV91cHZhbHVlcyhvcGVuX2xpc3QsIDApCgoJCQkJCQkJCQlyZXR1cm4gdGFibGUudW5wYWNrKG1lbW9yeSwgQSwgQSArIGxlbiAtIDEpCgkJCQkJCQkJZWxzZQoJCQkJCQkJCQktLVtbQ09OQ0FUXV0KCQkJCQkJCQkJbG9jYWwgQiA9IGluc3QuQgoJCQkJCQkJCQlsb2NhbCBzdHIgPSBtZW1vcnlbQl0KCgkJCQkJCQkJCWZvciBpID0gQiArIDEsIGluc3QuQyBkbyBzdHIgPSBzdHIgLi4gbWVtb3J5W2ldIGVuZAoKCQkJCQkJCQkJbWVtb3J5W2luc3QuQV0gPSBzdHIKCQkJCQkJCQllbmQKCQkJCQkJCWVsc2UKCQkJCQkJCQktLVtbTU9EXV0KCQkJCQkJCQlsb2NhbCBsaHMsIHJocwoKCQkJCQkJCQlpZiBpbnN0LmlzX0tCIHRoZW4KCQkJCQkJCQkJbGhzID0gaW5zdC5jb25zdF9CCgkJCQkJCQkJZWxzZQoJCQkJCQkJCQlsaHMgPSBtZW1vcnlbaW5zdC5CXQoJCQkJCQkJCWVuZAoKCQkJCQkJCQlpZiBpbnN0LmlzX0tDIHRoZW4KCQkJCQkJCQkJcmhzID0gaW5zdC5jb25zdF9DCgkJCQkJCQkJZWxzZQoJCQkJCQkJCQlyaHMgPSBtZW1vcnlbaW5zdC5DXQoJCQkJCQkJCWVuZAoKCQkJCQkJCQltZW1vcnlbaW5zdC5BXSA9IGxocyAlIHJocwoJCQkJCQkJZW5kCgkJCQkJCWVsc2VpZiBvcCA+IDIzIHRoZW4KCQkJCQkJCWlmIG9wIDwgMjYgdGhlbgoJCQkJCQkJCWlmIG9wID4gMjQgdGhlbgoJCQkJCQkJCQktLVtbQ0xPU0VdXQoJCQkJCQkJCQljbG9zZV9sdWFfdXB2YWx1ZXMob3Blbl9saXN0LCBpbnN0LkEpCgkJCQkJCQkJZWxzZQoJCQkJCQkJCQktLVtbRVFdXQoJCQkJCQkJCQlsb2NhbCBsaHMsIHJocwoKCQkJCQkJCQkJaWYgaW5zdC5pc19LQiB0aGVuCgkJCQkJCQkJCQlsaHMgPSBpbnN0LmNvbnN0X0IKCQkJCQkJCQkJZWxzZQoJCQkJCQkJCQkJbGhzID0gbWVtb3J5W2luc3QuQl0KCQkJCQkJCQkJZW5kCgoJCQkJCQkJCQlpZiBpbnN0LmlzX0tDIHRoZW4KCQkJCQkJCQkJCXJocyA9IGluc3QuY29uc3RfQwoJCQkJCQkJCQllbHNlCgkJCQkJCQkJCQlyaHMgPSBtZW1vcnlbaW5zdC5DXQoJCQkJCQkJCQllbmQKCgkJCQkJCQkJCWlmIChsaHMgPT0gcmhzKSA9PSAoaW5zdC5BIH49IDApIHRoZW4gcGMgPSBwYyArIGNvZGVbcGNdLnNCeCBlbmQKCgkJCQkJCQkJCXBjID0gcGMgKyAxCgkJCQkJCQkJZW5kCgkJCQkJCQllbHNlaWYgb3AgPiAyNiB0aGVuCgkJCQkJCQkJLS1bW0xUXV0KCQkJCQkJCQlsb2NhbCBsaHMsIHJocwoKCQkJCQkJCQlpZiBpbnN0LmlzX0tCIHRoZW4KCQkJCQkJCQkJbGhzID0gaW5zdC5jb25zdF9CCgkJCQkJCQkJZWxzZQoJCQkJCQkJCQlsaHMgPSBtZW1vcnlbaW5zdC5CXQoJCQkJCQkJCWVuZAoKCQkJCQkJCQlpZiBpbnN0LmlzX0tDIHRoZW4KCQkJCQkJCQkJcmhzID0gaW5zdC5jb25zdF9DCgkJCQkJCQkJZWxzZQoJCQkJCQkJCQlyaHMgPSBtZW1vcnlbaW5zdC5DXQoJCQkJCQkJCWVuZAoKCQkJCQkJCQlpZiAobGhzIDwgcmhzKSA9PSAoaW5zdC5BIH49IDApIHRoZW4gcGMgPSBwYyArIGNvZGVbcGNdLnNCeCBlbmQKCgkJCQkJCQkJcGMgPSBwYyArIDEKCQkJCQkJCWVsc2UKCQkJCQkJCQktLVtbUE9XXV0KCQkJCQkJCQlsb2NhbCBsaHMsIHJocwoKCQkJCQkJCQlpZiBpbnN0LmlzX0tCIHRoZW4KCQkJCQkJCQkJbGhzID0gaW5zdC5jb25zdF9CCgkJCQkJCQkJZWxzZQoJCQkJCQkJCQlsaHMgPSBtZW1vcnlbaW5zdC5CXQoJCQkJCQkJCWVuZAoKCQkJCQkJCQlpZiBpbnN0LmlzX0tDIHRoZW4KCQkJCQkJCQkJcmhzID0gaW5zdC5jb25zdF9DCgkJCQkJCQkJZWxzZQoJCQkJCQkJCQlyaHMgPSBtZW1vcnlbaW5zdC5DXQoJCQkJCQkJCWVuZAoKCQkJCQkJCQltZW1vcnlbaW5zdC5BXSA9IGxocyBeIHJocwoJCQkJCQkJZW5kCgkJCQkJCWVsc2UKCQkJCQkJCS0tW1tMT0FEQk9PTF1dCgkJCQkJCQltZW1vcnlbaW5zdC5BXSA9IGluc3QuQiB+PSAwCgoJCQkJCQkJaWYgaW5zdC5DIH49IDAgdGhlbiBwYyA9IHBjICsgMSBlbmQKCQkJCQkJZW5kCgkJCQkJZWxzZWlmIG9wID4gMjggdGhlbgoJCQkJCQlpZiBvcCA8IDMzIHRoZW4KCQkJCQkJCWlmIG9wIDwgMzAgdGhlbgoJCQkJCQkJCS0tW1tMRV1dCgkJCQkJCQkJbG9jYWwgbGhzLCByaHMKCgkJCQkJCQkJaWYgaW5zdC5pc19LQiB0aGVuCgkJCQkJCQkJCWxocyA9IGluc3QuY29uc3RfQgoJCQkJCQkJCWVsc2UKCQkJCQkJCQkJbGhzID0gbWVtb3J5W2luc3QuQl0KCQkJCQkJCQllbmQKCgkJCQkJCQkJaWYgaW5zdC5pc19LQyB0aGVuCgkJCQkJCQkJCXJocyA9IGluc3QuY29uc3RfQwoJCQkJCQkJCWVsc2UKCQkJCQkJCQkJcmhzID0gbWVtb3J5W2luc3QuQ10KCQkJCQkJCQllbmQKCgkJCQkJCQkJaWYgKGxocyA8PSByaHMpID09IChpbnN0LkEgfj0gMCkgdGhlbiBwYyA9IHBjICsgY29kZVtwY10uc0J4IGVuZAoKCQkJCQkJCQlwYyA9IHBjICsgMQoJCQkJCQkJZWxzZWlmIG9wID4gMzAgdGhlbgoJCQkJCQkJCWlmIG9wIDwgMzIgdGhlbgoJCQkJCQkJCQktLVtbQ0xPU1VSRV1dCgkJCQkJCQkJCWxvY2FsIHN1YiA9IHN1YnNbaW5zdC5CeCArIDFdIC0tIG9mZnNldCBmb3IgMSBiYXNlZCBpbmRleAoJCQkJCQkJCQlsb2NhbCBudXBzID0gc3ViLm51bV91cHZhbAoJCQkJCQkJCQlsb2NhbCB1dmxpc3QKCgkJCQkJCQkJCWlmIG51cHMgfj0gMCB0aGVuCgkJCQkJCQkJCQl1dmxpc3QgPSB7fQoKCQkJCQkJCQkJCWZvciBpID0gMSwgbnVwcyBkbwoJCQkJCQkJCQkJCWxvY2FsIHBzZXVkbyA9IGNvZGVbcGMgKyBpIC0gMV0KCgkJCQkJCQkJCQkJaWYgcHNldWRvLm9wID09IE9QQ09ERV9STVswXSB0aGVuIC0tIEBNT1ZFCgkJCQkJCQkJCQkJCXV2bGlzdFtpIC0gMV0gPSBvcGVuX2x1YV91cHZhbHVlKG9wZW5fbGlzdCwgcHNldWRvLkIsIG1lbW9yeSkKCQkJCQkJCQkJCQllbHNlaWYgcHNldWRvLm9wID09IE9QQ09ERV9STVs0XSB0aGVuIC0tIEBHRVRVUFZBTAoJCQkJCQkJCQkJCQl1dmxpc3RbaSAtIDFdID0gdXB2YWxzW3BzZXVkby5CXQoJCQkJCQkJCQkJCWVuZAoJCQkJCQkJCQkJZW5kCgoJCQkJCQkJCQkJcGMgPSBwYyArIG51cHMKCQkJCQkJCQkJZW5kCgoJCQkJCQkJCQltZW1vcnlbaW5zdC5BXSA9IGx1YV93cmFwX3N0YXRlKHN1YiwgZW52LCB1dmxpc3QpCgkJCQkJCQkJZWxzZQoJCQkJCQkJCQktLVtbVEVTVFNFVF1dCgkJCQkJCQkJCWxvY2FsIEEgPSBpbnN0LkEKCQkJCQkJCQkJbG9jYWwgQiA9IGluc3QuQgoKCQkJCQkJCQkJaWYgKG5vdCBtZW1vcnlbQl0pIH49IChpbnN0LkMgfj0gMCkgdGhlbgoJCQkJCQkJCQkJbWVtb3J5W0FdID0gbWVtb3J5W0JdCgkJCQkJCQkJCQlwYyA9IHBjICsgY29kZVtwY10uc0J4CgkJCQkJCQkJCWVuZAoJCQkJCQkJCQlwYyA9IHBjICsgMQoJCQkJCQkJCWVuZAoJCQkJCQkJZWxzZQoJCQkJCQkJCS0tW1tVTk1dXQoJCQkJCQkJCW1lbW9yeVtpbnN0LkFdID0gLW1lbW9yeVtpbnN0LkJdCgkJCQkJCQllbmQKCQkJCQkJZWxzZWlmIG9wID4gMzMgdGhlbgoJCQkJCQkJaWYgb3AgPCAzNiB0aGVuCgkJCQkJCQkJaWYgb3AgPiAzNCB0aGVuCgkJCQkJCQkJCS0tW1tWQVJBUkddXQoJCQkJCQkJCQlsb2NhbCBBID0gaW5zdC5BCgkJCQkJCQkJCWxvY2FsIGxlbiA9IGluc3QuQgoKCQkJCQkJCQkJaWYgbGVuID09IDAgdGhlbgoJCQkJCQkJCQkJbGVuID0gdmFyYXJnLmxlbgoJCQkJCQkJCQkJdG9wX2luZGV4ID0gQSArIGxlbiAtIDEKCQkJCQkJCQkJZW5kCgoJCQkJCQkJCQl0YWJsZS5tb3ZlKHZhcmFyZy5saXN0LCAxLCBsZW4sIEEsIG1lbW9yeSkKCQkJCQkJCQllbHNlCgkJCQkJCQkJCS0tW1tGT1JQUkVQXV0KCQkJCQkJCQkJbG9jYWwgQSA9IGluc3QuQQoJCQkJCQkJCQlsb2NhbCBpbml0LCBsaW1pdCwgc3RlcAoKCQkJCQkJCQkJaW5pdCA9IGFzc2VydCh0b251bWJlcihtZW1vcnlbQV0pLCAnYGZvcmAgaW5pdGlhbCB2YWx1ZSBtdXN0IGJlIGEgbnVtYmVyJykKCQkJCQkJCQkJbGltaXQgPSBhc3NlcnQodG9udW1iZXIobWVtb3J5W0EgKyAxXSksICdgZm9yYCBsaW1pdCBtdXN0IGJlIGEgbnVtYmVyJykKCQkJCQkJCQkJc3RlcCA9IGFzc2VydCh0b251bWJlcihtZW1vcnlbQSArIDJdKSwgJ2Bmb3JgIHN0ZXAgbXVzdCBiZSBhIG51bWJlcicpCgoJCQkJCQkJCQltZW1vcnlbQV0gPSBpbml0IC0gc3RlcAoJCQkJCQkJCQltZW1vcnlbQSArIDFdID0gbGltaXQKCQkJCQkJCQkJbWVtb3J5W0EgKyAyXSA9IHN0ZXAKCgkJCQkJCQkJCXBjID0gcGMgKyBpbnN0LnNCeAoJCQkJCQkJCWVuZAoJCQkJCQkJZWxzZWlmIG9wID4gMzYgdGhlbgoJCQkJCQkJCS0tW1tTRVRMSVNUXV0KCQkJCQkJCQlsb2NhbCBBID0gaW5zdC5BCgkJCQkJCQkJbG9jYWwgQyA9IGluc3QuQwoJCQkJCQkJCWxvY2FsIGxlbiA9IGluc3QuQgoJCQkJCQkJCWxvY2FsIHRhYiA9IG1lbW9yeVtBXQoJCQkJCQkJCWxvY2FsIG9mZnNldAoKCQkJCQkJCQlpZiBsZW4gPT0gMCB0aGVuIGxlbiA9IHRvcF9pbmRleCAtIEEgZW5kCgoJCQkJCQkJCWlmIEMgPT0gMCB0aGVuCgkJCQkJCQkJCUMgPSBpbnN0W3BjXS52YWx1ZQoJCQkJCQkJCQlwYyA9IHBjICsgMQoJCQkJCQkJCWVuZAoKCQkJCQkJCQlvZmZzZXQgPSAoQyAtIDEpICogRklFTERTX1BFUl9GTFVTSAoKCQkJCQkJCQl0YWJsZS5tb3ZlKG1lbW9yeSwgQSArIDEsIEEgKyBsZW4sIG9mZnNldCArIDEsIHRhYikKCQkJCQkJCWVsc2UKCQkJCQkJCQktLVtbTk9UXV0KCQkJCQkJCQltZW1vcnlbaW5zdC5BXSA9IG5vdCBtZW1vcnlbaW5zdC5CXQoJCQkJCQkJZW5kCgkJCQkJCWVsc2UKCQkJCQkJCS0tW1tURVNUXV0KCQkJCQkJCWlmIChub3QgbWVtb3J5W2luc3QuQV0pIH49IChpbnN0LkMgfj0gMCkgdGhlbiBwYyA9IHBjICsgY29kZVtwY10uc0J4IGVuZAoJCQkJCQkJcGMgPSBwYyArIDEKCQkJCQkJZW5kCgkJCQkJZWxzZQoJCQkJCQktLVtbVEZPUkxPT1BdXQoJCQkJCQlsb2NhbCBBID0gaW5zdC5BCgkJCQkJCWxvY2FsIGJhc2UgPSBBICsgMwoKCQkJCQkJbG9jYWwgdmFscyA9IHttZW1vcnlbQV0obWVtb3J5W0EgKyAxXSwgbWVtb3J5W0EgKyAyXSl9CgoJCQkJCQl0YWJsZS5tb3ZlKHZhbHMsIDEsIGluc3QuQywgYmFzZSwgbWVtb3J5KQoKCQkJCQkJaWYgbWVtb3J5W2Jhc2VdIH49IG5pbCB0aGVuCgkJCQkJCQltZW1vcnlbQSArIDJdID0gbWVtb3J5W2Jhc2VdCgkJCQkJCQlwYyA9IHBjICsgY29kZVtwY10uc0J4CgkJCQkJCWVuZAoKCQkJCQkJcGMgPSBwYyArIDEKCQkJCQllbmQKCQkJCWVsc2UKCQkJCQktLVtbSk1QXV0KCQkJCQlwYyA9IHBjICsgaW5zdC5zQngKCQkJCWVuZAoKCQkJCXN0YXRlLnBjID0gcGMKCQkJZW5kCgkJZW5kCgoJCWZ1bmN0aW9uIGx1YV93cmFwX3N0YXRlKHByb3RvLCBlbnYsIHVwdmFsKQoJCQlsb2NhbCBmdW5jdGlvbiB3cmFwcGVkKC4uLikKCQkJCWxvY2FsIHBhc3NlZCA9IHRhYmxlLnBhY2soLi4uKQoJCQkJbG9jYWwgbWVtb3J5ID0gdGFibGUuY3JlYXRlKHByb3RvLm1heF9zdGFjaykKCQkJCWxvY2FsIHZhcmFyZyA9IHtsZW4gPSAwLCBsaXN0ID0ge319CgoJCQkJdGFibGUubW92ZShwYXNzZWQsIDEsIHByb3RvLm51bV9wYXJhbSwgMCwgbWVtb3J5KQoKCQkJCWlmIHByb3RvLm51bV9wYXJhbSA8IHBhc3NlZC5uIHRoZW4KCQkJCQlsb2NhbCBzdGFydCA9IHByb3RvLm51bV9wYXJhbSArIDEKCQkJCQlsb2NhbCBsZW4gPSBwYXNzZWQubiAtIHByb3RvLm51bV9wYXJhbQoKCQkJCQl2YXJhcmcubGVuID0gbGVuCgkJCQkJdGFibGUubW92ZShwYXNzZWQsIHN0YXJ0LCBzdGFydCArIGxlbiAtIDEsIDEsIHZhcmFyZy5saXN0KQoJCQkJZW5kCgoJCQkJbG9jYWwgc3RhdGUgPSB7dmFyYXJnID0gdmFyYXJnLCBtZW1vcnkgPSBtZW1vcnksIGNvZGUgPSBwcm90by5jb2RlLCBzdWJzID0gcHJvdG8uc3VicywgcGMgPSAxfQoKCQkJCWxvY2FsIHJlc3VsdCA9IHRhYmxlLnBhY2socGNhbGwocnVuX2x1YV9mdW5jLCBzdGF0ZSwgZW52LCB1cHZhbCkpCgoJCQkJaWYgcmVzdWx0WzFdIHRoZW4KCQkJCQlyZXR1cm4gdGFibGUudW5wYWNrKHJlc3VsdCwgMiwgcmVzdWx0Lm4pCgkJCQllbHNlCgkJCQkJbG9jYWwgZmFpbGVkID0ge3BjID0gc3RhdGUucGMsIHNvdXJjZSA9IHByb3RvLnNvdXJjZSwgbGluZXMgPSBwcm90by5saW5lc30KCgkJCQkJb25fbHVhX2Vycm9yKGZhaWxlZCwgcmVzdWx0WzJdKQoKCQkJCQlyZXR1cm4KCQkJCWVuZAoJCQllbmQKCgkJCXJldHVybiB3cmFwcGVkCgkJZW5kCgoJCXJldHVybiBmdW5jdGlvbihiQ29kZSwgZW52KQoJCQlyZXR1cm4gbHVhX3dyYXBfc3RhdGUobHVhX2JjX3RvX3N0YXRlKGJDb2RlKSwgZW52IG9yIGdldGZlbnYoMCkpCgkJZW5kCgllbmQpKCkKCS0tZ2V0ZmVudigpLnNjcmlwdCA9IG5pbAoKCXJldHVybiBmdW5jdGlvbihzb3VyY2UsIGVudikKCQlsb2NhbCBleGVjdXRhYmxlCgkJbG9jYWwgZW52ID0gZW52IG9yIGdldGZlbnYoMikKCQlsb2NhbCByYW4sIGZhaWx1cmVSZWFzb24gPSBwY2FsbChmdW5jdGlvbigpCgkJCWxvY2FsIGNvbXBpbGVkQnl0ZWNvZGUgPSBjb21waWxlKHNvdXJjZSwgICJzaGczNDA5MzRxaCIpCgkJCWV4ZWN1dGFibGUgPSBjcmVhdGVFeGVjdXRhYmxlKGNvbXBpbGVkQnl0ZWNvZGUsIGVudikKCQllbmQpCgoJCWlmIHJhbiB0aGVuCgkJCXJldHVybiBzZXRmZW52KGV4ZWN1dGFibGUsIGVudikKCQllbmQKCQlyZXR1cm4gbmlsLCBmYWlsdXJlUmVhc29uCgllbmQKZW5kKSgpCgpsb2NhbCB1dGlscyA9IHt9Cgp1dGlscy5zdHJpbmdfdG9faGV4ID0gZnVuY3Rpb24odmFsdWUsIG9mZnNldCwgc2VwZXJhdG9yKQoJb2Zmc2V0ID0gb2Zmc2V0IG9yIDIyNwoJc2VwZXJhdG9yID0gc2VwZXJhdG9yIG9yICIiCgoJcmV0dXJuIHN0cmluZy5nc3ViKHZhbHVlLCAiLiIsIGZ1bmN0aW9uKGNoYXIpCgkJcmV0dXJuIHN0cmluZy5mb3JtYXQoIiUwMlgiLCBzdHJpbmcuYnl0ZShjaGFyKSAqIG9mZnNldCkgLi4gc2VwZXJhdG9yCgllbmQpCmVuZAoKdXRpbHMuaGV4X3RvX3N0cmluZyA9IGZ1bmN0aW9uKHZhbHVlLCBvZmZzZXQpCglvZmZzZXQgPSBvZmZzZXQgb3IgMQoKCXJldHVybiBzdHJpbmcuZ3N1Yih2YWx1ZSwgIi4uIiwgZnVuY3Rpb24oY2hhcikKCQlyZXR1cm4gdG9udW1iZXIoY2hhciwgMTYpOjogbnVtYmVyIC8gMQoJZW5kKQplbmQKCmxvY2FsIElOVGdldGxvYWRlZG1vZHVsZXMgPSBmdW5jdGlvbigpCglsb2NhbCB0YWIgPSB0YWJsZS5jcmVhdGUoMCkKCWZvciBpLCB2IGluIHBhaXJzKGdhbWU6R2V0RGVzY2VuZGFudHMoKSkgZG8KCQlpZiB2LkNsYXNzTmFtZSA9PSAiTW9kdWxlU2NyaXB0IiB0aGVuCgkJCXRhYmxlLmluc2VydCh0YWIsdikKCQllbmQKCWVuZAoJcmV0dXJuIHRhYgplbmQKCnV0aWxzLmZldGNoX21vZHVsZXMgPSBJTlRnZXRsb2FkZWRtb2R1bGVzCgp1dGlscy5iYXNlNjRfZW5jb2RlID0gZnVuY3Rpb24oZGF0YSkKCWxvY2FsIGxldHRlcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLycKCXJldHVybiAoKGRhdGE6Z3N1YignLicsIGZ1bmN0aW9uKHgpIAoJCWxvY2FsIHIsYj0nJyx4OmJ5dGUoKQoJCWZvciBpPTgsMSwtMSBkbyByPXIuLihiJTJeaS1iJTJeKGktMSk+MCBhbmQgJzEnIG9yICcwJykgZW5kCgkJcmV0dXJuIHI7CgllbmQpLi4nMDAwMCcpOmdzdWIoJyVkJWQlZD8lZD8lZD8lZD8nLCBmdW5jdGlvbih4KQoJCWlmICgjeCA8IDYpIHRoZW4gcmV0dXJuICcnIGVuZAoJCWxvY2FsIGM9MAoJCWZvciBpPTEsNiBkbyBjPWMrKHg6c3ViKGksaSk9PScxJyBhbmQgMl4oNi1pKSBvciAwKSBlbmQKCQlyZXR1cm4gbGV0dGVyczpzdWIoYysxLGMrMSkKCWVuZCkuLih7ICcnLCAnPT0nLCAnPScgfSlbI2RhdGElMysxXSkKZW5kCnV0aWxzLmJhc2U2NF9kZWNvZGUgPSBmdW5jdGlvbihkYXRhKQoJbG9jYWwgYiA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJwoJZGF0YSA9IHN0cmluZy5nc3ViKGRhdGEsICdbXicuLmIuLic9XScsICcnKQoJcmV0dXJuIChkYXRhOmdzdWIoJy4nLCBmdW5jdGlvbih4KQoJCWlmIHggPT0gJz0nIHRoZW4gcmV0dXJuICcnIGVuZAoJCWxvY2FsIHIsIGYgPSAnJywgKGI6ZmluZCh4KSAtIDEpCgkJZm9yIGkgPSA2LCAxLCAtMSBkbwoJCQlyID0gciAuLiAoZiAlIDJeaSAtIGYgJSAyXihpIC0gMSkgPiAwIGFuZCAnMScgb3IgJzAnKQoJCWVuZAoJCXJldHVybiByOwoJZW5kKTpnc3ViKCclZCVkJWQ/JWQ/JWQ/JWQ/JWQ/JWQ/JywgZnVuY3Rpb24oeCkKCQlpZiAjeCB+PSA4IHRoZW4gcmV0dXJuICcnIGVuZAoJCWxvY2FsIGMgPSAwCgkJZm9yIGkgPSAxLCA4IGRvCgkJCWMgPSBjICsgKHg6c3ViKGksIGkpID09ICcxJyBhbmQgMl4oOCAtIGkpIG9yIDApCgkJZW5kCgkJcmV0dXJuIHN0cmluZy5jaGFyKGMpCgllbmQpKQplbmQKCmxvY2FsIGx6NCA9IHt9Cgp0eXBlIFN0cmVhbWVyID0gewoJT2Zmc2V0OiBudW1iZXIsCglTb3VyY2U6IHN0cmluZywKCUxlbmd0aDogbnVtYmVyLAoJSXNGaW5pc2hlZDogYm9vbGVhbiwKCUxhc3RVbnJlYWRCeXRlczogbnVtYmVyLAoKCXJlYWQ6IChTdHJlYW1lciwgbGVuOiBudW1iZXI/LCBzaGlmdE9mZnNldDogYm9vbGVhbj8pIC0+IHN0cmluZywKCXNlZWs6IChTdHJlYW1lciwgbGVuOiBudW1iZXIpIC0+ICgpLAoJYXBwZW5kOiAoU3RyZWFtZXIsIG5ld0RhdGE6IHN0cmluZykgLT4gKCksCgl0b0VuZDogKFN0cmVhbWVyKSAtPiAoKQp9Cgp0eXBlIEJsb2NrRGF0YSA9IHsKCVtudW1iZXJdOiB7CgkJTGl0ZXJhbDogc3RyaW5nLAoJCUxpdGVyYWxMZW5ndGg6IG51bWJlciwKCQlNYXRjaE9mZnNldDogbnVtYmVyPywKCQlNYXRjaExlbmd0aDogbnVtYmVyPwoJfQp9Cgpsb2NhbCBmdW5jdGlvbiBwbGFpbkZpbmQoc3RyLCBwYXQpCglyZXR1cm4gc3RyaW5nLmZpbmQoc3RyLCBwYXQsIDAsIHRydWUpCmVuZAoKbG9jYWwgZnVuY3Rpb24gc3RyZWFtZXIoc3RyKTogU3RyZWFtZXIKCWxvY2FsIFN0cmVhbSA9IHt9CglTdHJlYW0uT2Zmc2V0ID0gMAoJU3RyZWFtLlNvdXJjZSA9IHN0cgoJU3RyZWFtLkxlbmd0aCA9IHN0cmluZy5sZW4oc3RyKQoJU3RyZWFtLklzRmluaXNoZWQgPSBmYWxzZQkKCVN0cmVhbS5MYXN0VW5yZWFkQnl0ZXMgPSAwCgoJZnVuY3Rpb24gU3RyZWFtLnJlYWQoc2VsZjogU3RyZWFtZXIsIGxlbjogbnVtYmVyPywgc2hpZnQ6IGJvb2xlYW4/KTogc3RyaW5nCgkJbG9jYWwgbGVuID0gbGVuIG9yIDEKCQlsb2NhbCBzaGlmdCA9IGlmIHNoaWZ0IH49IG5pbCB0aGVuIHNoaWZ0IGVsc2UgdHJ1ZQoJCWxvY2FsIGRhdCA9IHN0cmluZy5zdWIoc2VsZi5Tb3VyY2UsIHNlbGYuT2Zmc2V0ICsgMSwgc2VsZi5PZmZzZXQgKyBsZW4pCgoJCWxvY2FsIGRhdGFMZW5ndGggPSBzdHJpbmcubGVuKGRhdCkKCQlsb2NhbCB1bnJlYWRCeXRlcyA9IGxlbiAtIGRhdGFMZW5ndGgKCgkJaWYgc2hpZnQgdGhlbgoJCQlzZWxmOnNlZWsobGVuKQoJCWVuZAoKCQlzZWxmLkxhc3RVbnJlYWRCeXRlcyA9IHVucmVhZEJ5dGVzCgkJcmV0dXJuIGRhdAoJZW5kCgoJZnVuY3Rpb24gU3RyZWFtLnNlZWsoc2VsZjogU3RyZWFtZXIsIGxlbjogbnVtYmVyKQoJCWxvY2FsIGxlbiA9IGxlbiBvciAxCgoJCXNlbGYuT2Zmc2V0ID0gbWF0aC5jbGFtcChzZWxmLk9mZnNldCArIGxlbiwgMCwgc2VsZi5MZW5ndGgpCgkJc2VsZi5Jc0ZpbmlzaGVkID0gc2VsZi5PZmZzZXQgPj0gc2VsZi5MZW5ndGgKCWVuZAoKCWZ1bmN0aW9uIFN0cmVhbS5hcHBlbmQoc2VsZjogU3RyZWFtZXIsIG5ld0RhdGE6IHN0cmluZykKCQktLSBhZGRzIG5ldyBkYXRhIHRvIHRoZSBlbmQgb2YgYSBzdHJlYW0KCQlzZWxmLlNvdXJjZSAuLj0gbmV3RGF0YQoJCXNlbGYuTGVuZ3RoID0gc3RyaW5nLmxlbihzZWxmLlNvdXJjZSkKCQlzZWxmOnNlZWsoMCkgLS1oYWNreSBidXQgZm9yY2VzIGEgcmVjYWxjdWxhdGlvbiBvZiB0aGUgaXNGaW5pc2hlZCBmbGFnCgllbmQKCglmdW5jdGlvbiBTdHJlYW0udG9FbmQoc2VsZjogU3RyZWFtZXIpCgkJc2VsZjpzZWVrKHNlbGYuTGVuZ3RoKQoJZW5kCgoJcmV0dXJuIFN0cmVhbQplbmQKCmZ1bmN0aW9uIGx6NC5jb21wcmVzcyhzdHI6IHN0cmluZyk6IHN0cmluZwoJbG9jYWwgYmxvY2tzOiBCbG9ja0RhdGEgPSB7fQoJbG9jYWwgaW9zdHJlYW0gPSBzdHJlYW1lcihzdHIpCgoJaWYgaW9zdHJlYW0uTGVuZ3RoID4gMTIgdGhlbgoJCWxvY2FsIGZpcnN0Rm91ciA9IGlvc3RyZWFtOnJlYWQoNCkKCgkJbG9jYWwgcHJvY2Vzc2VkID0gZmlyc3RGb3VyCgkJbG9jYWwgbGl0ID0gZmlyc3RGb3VyCgkJbG9jYWwgbWF0Y2ggPSAiIgoJCWxvY2FsIExpdGVyYWxQdXNoVmFsdWUgPSAiIgoJCWxvY2FsIHB1c2hUb0xpdGVyYWwgPSB0cnVlCgoJCXJlcGVhdAoJCQlwdXNoVG9MaXRlcmFsID0gdHJ1ZQoJCQlsb2NhbCBuZXh0Qnl0ZSA9IGlvc3RyZWFtOnJlYWQoKQoKCQkJaWYgcGxhaW5GaW5kKHByb2Nlc3NlZCwgbmV4dEJ5dGUpIHRoZW4KCQkJCWxvY2FsIG5leHQzID0gaW9zdHJlYW06cmVhZCgzLCBmYWxzZSkKCgkJCQlpZiBzdHJpbmcubGVuKG5leHQzKSA8IDMgdGhlbgoJCQkJCS0tcHVzaCBieXRlcyB0byBsaXRlcmFsIGJsb2NrIHRoZW4gYnJlYWsKCQkJCQlMaXRlcmFsUHVzaFZhbHVlID0gbmV4dEJ5dGUgLi4gbmV4dDMKCQkJCQlpb3N0cmVhbTpzZWVrKDMpCgkJCQllbHNlCgkJCQkJbWF0Y2ggPSBuZXh0Qnl0ZSAuLiBuZXh0MwoKCQkJCQlsb2NhbCBtYXRjaFBvcyA9IHBsYWluRmluZChwcm9jZXNzZWQsIG1hdGNoKQoJCQkJCWlmIG1hdGNoUG9zIHRoZW4KCQkJCQkJaW9zdHJlYW06c2VlaygzKQoJCQkJCQlyZXBlYXQKCQkJCQkJCWxvY2FsIG5leHRNYXRjaEJ5dGUgPSBpb3N0cmVhbTpyZWFkKDEsIGZhbHNlKQoJCQkJCQkJbG9jYWwgbmV3UmVzdWx0ID0gbWF0Y2ggLi4gbmV4dE1hdGNoQnl0ZQoKCQkJCQkJCWxvY2FsIHJlcG9zID0gcGxhaW5GaW5kKHByb2Nlc3NlZCwgbmV3UmVzdWx0KSAKCQkJCQkJCWlmIHJlcG9zIHRoZW4KCQkJCQkJCQltYXRjaCA9IG5ld1Jlc3VsdAoJCQkJCQkJCW1hdGNoUG9zID0gcmVwb3MKCQkJCQkJCQlpb3N0cmVhbTpzZWVrKDEpCgkJCQkJCQllbmQKCQkJCQkJdW50aWwgbm90IHBsYWluRmluZChwcm9jZXNzZWQsIG5ld1Jlc3VsdCkgb3IgaW9zdHJlYW0uSXNGaW5pc2hlZAoKCQkJCQkJbG9jYWwgbWF0Y2hMZW4gPSBzdHJpbmcubGVuKG1hdGNoKQoJCQkJCQlsb2NhbCBwdXNoTWF0Y2ggPSB0cnVlCgoJCQkJCQlpZiBpb3N0cmVhbS5MZW5ndGggLSBpb3N0cmVhbS5PZmZzZXQgPD0gNSB0aGVuCgkJCQkJCQlMaXRlcmFsUHVzaFZhbHVlID0gbWF0Y2gKCQkJCQkJCXB1c2hNYXRjaCA9IGZhbHNlCgkJCQkJCQktLWJldHRlciBzYWZlIGhlcmUsIGRvbnQgYm90aGVyIHB1c2hpbmcgdG8gbWF0Y2ggZXZlcgoJCQkJCQllbmQKCgkJCQkJCWlmIHB1c2hNYXRjaCB0aGVuCgkJCQkJCQlwdXNoVG9MaXRlcmFsID0gZmFsc2UKCgkJCQkJCQktLSBnZXRzIHRoZSBwb3NpdGlvbiBmcm9tIHRoZSBlbmQgb2YgcHJvY2Vzc2VkLCB0aGVuIHNsYXBzIGl0IG9udG8gcHJvY2Vzc2VkCgkJCQkJCQlsb2NhbCByZWFsUG9zaXRpb24gPSBzdHJpbmcubGVuKHByb2Nlc3NlZCkgLSBtYXRjaFBvcwoJCQkJCQkJcHJvY2Vzc2VkID0gcHJvY2Vzc2VkIC4uIG1hdGNoCgoJCQkJCQkJdGFibGUuaW5zZXJ0KGJsb2NrcywgewoJCQkJCQkJCUxpdGVyYWwgPSBsaXQsCgkJCQkJCQkJTGl0ZXJhbExlbmd0aCA9IHN0cmluZy5sZW4obGl0KSwKCQkJCQkJCQlNYXRjaE9mZnNldCA9IHJlYWxQb3NpdGlvbiArIDEsCgkJCQkJCQkJTWF0Y2hMZW5ndGggPSBtYXRjaExlbiwKCQkJCQkJCX0pCgkJCQkJCQlsaXQgPSAiIgoJCQkJCQllbmQKCQkJCQllbHNlCgkJCQkJCUxpdGVyYWxQdXNoVmFsdWUgPSBuZXh0Qnl0ZQoJCQkJCWVuZAoJCQkJZW5kCgkJCWVsc2UKCQkJCUxpdGVyYWxQdXNoVmFsdWUgPSBuZXh0Qnl0ZQoJCQllbmQKCgkJCWlmIHB1c2hUb0xpdGVyYWwgdGhlbgoJCQkJbGl0ID0gbGl0IC4uIExpdGVyYWxQdXNoVmFsdWUKCQkJCXByb2Nlc3NlZCA9IHByb2Nlc3NlZCAuLiBuZXh0Qnl0ZQoJCQllbmQKCQl1bnRpbCBpb3N0cmVhbS5Jc0ZpbmlzaGVkCgkJdGFibGUuaW5zZXJ0KGJsb2NrcywgewoJCQlMaXRlcmFsID0gbGl0LAoJCQlMaXRlcmFsTGVuZ3RoID0gc3RyaW5nLmxlbihsaXQpCgkJfSkKCWVsc2UKCQlsb2NhbCBzdHIgPSBpb3N0cmVhbS5Tb3VyY2UKCQlibG9ja3NbMV0gPSB7CgkJCUxpdGVyYWwgPSBzdHIsCgkJCUxpdGVyYWxMZW5ndGggPSBzdHJpbmcubGVuKHN0cikKCQl9CgllbmQKCgktLSBnZW5lcmF0ZSB0aGUgb3V0cHV0IGNodW5rCgktLSAlcyBpcyBmb3IgYWRkaW5nIGhlYWRlcgoJbG9jYWwgb3V0cHV0ID0gc3RyaW5nLnJlcCgiXHgwMCIsIDQpCglsb2NhbCBmdW5jdGlvbiB3cml0ZShjaGFyKQoJCW91dHB1dCA9IG91dHB1dCAuLiBjaGFyCgllbmQKCS0tIGJlZ2luIHdvcmtpbmcgdGhyb3VnaCBjaHVua3MKCWZvciBjaHVua051bSwgY2h1bmsgaW4gYmxvY2tzIGRvCgkJbG9jYWwgbGl0TGVuID0gY2h1bmsuTGl0ZXJhbExlbmd0aAoJCWxvY2FsIG1hdExlbiA9IChjaHVuay5NYXRjaExlbmd0aCBvciA0KSAtIDQKCgkJLS0gY3JlYXRlIHRva2VuCgkJbG9jYWwgdG9rZW5MaXQgPSBtYXRoLmNsYW1wKGxpdExlbiwgMCwgMTUpCgkJbG9jYWwgdG9rZW5NYXQgPSBtYXRoLmNsYW1wKG1hdExlbiwgMCwgMTUpCgoJCWxvY2FsIHRva2VuID0gYml0MzIubHNoaWZ0KHRva2VuTGl0LCA0KSArIHRva2VuTWF0CgkJd3JpdGUoc3RyaW5nLnBhY2soIjxJMSIsIHRva2VuKSkKCgkJaWYgbGl0TGVuID49IDE1IHRoZW4KCQkJbGl0TGVuID0gbGl0TGVuIC0gMTUKCQkJLS1iZWdpbiBwYWNraW5nIGV4dHJhIGJ5dGVzCgkJCXJlcGVhdAoJCQkJbG9jYWwgbmV4dFRva2VuID0gbWF0aC5jbGFtcChsaXRMZW4sIDAsIDB4RkYpCgkJCQl3cml0ZShzdHJpbmcucGFjaygiPEkxIiwgbmV4dFRva2VuKSkKCQkJCWlmIG5leHRUb2tlbiA9PSAweEZGIHRoZW4KCQkJCQlsaXRMZW4gPSBsaXRMZW4gLSAyNTUKCQkJCWVuZAoJCQl1bnRpbCBuZXh0VG9rZW4gPCAweEZGCgkJZW5kCgoJCS0tIHB1c2ggcmF3IGxpdCBkYXRhCgkJd3JpdGUoY2h1bmsuTGl0ZXJhbCkKCgkJaWYgY2h1bmtOdW0gfj0gI2Jsb2NrcyB0aGVuCgkJCS0tIHB1c2ggb2Zmc2V0IGFzIHUxNgoJCQl3cml0ZShzdHJpbmcucGFjaygiPEkyIiwgY2h1bmsuTWF0Y2hPZmZzZXQpKQoKCQkJLS0gcGFjayBleHRyYSBtYXRjaCBieXRlcwoJCQlpZiBtYXRMZW4gPj0gMTUgdGhlbgoJCQkJbWF0TGVuID0gbWF0TGVuIC0gMTUKCgkJCQlyZXBlYXQKCQkJCQlsb2NhbCBuZXh0VG9rZW4gPSBtYXRoLmNsYW1wKG1hdExlbiwgMCwgMHhGRikKCQkJCQl3cml0ZShzdHJpbmcucGFjaygiPEkxIiwgbmV4dFRva2VuKSkKCQkJCQlpZiBuZXh0VG9rZW4gPT0gMHhGRiB0aGVuCgkJCQkJCW1hdExlbiA9IG1hdExlbiAtIDI1NQoJCQkJCWVuZAoJCQkJdW50aWwgbmV4dFRva2VuIDwgMHhGRgoJCQllbmQKCQllbmQKCWVuZAoJLS1hcHBlbmQgY2h1bmtzCglsb2NhbCBjb21wTGVuID0gc3RyaW5nLmxlbihvdXRwdXQpIC0gNAoJbG9jYWwgZGVjb21wTGVuID0gaW9zdHJlYW0uTGVuZ3RoCgoJcmV0dXJuIHN0cmluZy5wYWNrKCI8STQiLCBjb21wTGVuKSAuLiBzdHJpbmcucGFjaygiPEk0IiwgZGVjb21wTGVuKSAuLiBvdXRwdXQKZW5kCgpmdW5jdGlvbiBsejQuZGVjb21wcmVzcyhsejRkYXRhOiBzdHJpbmcpOiBzdHJpbmcKCWxvY2FsIGlucHV0U3RyZWFtID0gc3RyZWFtZXIobHo0ZGF0YSkKCglsb2NhbCBjb21wcmVzc2VkTGVuID0gc3RyaW5nLnVucGFjaygiPEk0IiwgaW5wdXRTdHJlYW06cmVhZCg0KSkKCWxvY2FsIGRlY29tcHJlc3NlZExlbiA9IHN0cmluZy51bnBhY2soIjxJNCIsIGlucHV0U3RyZWFtOnJlYWQoNCkpCglsb2NhbCByZXNlcnZlZCA9IHN0cmluZy51bnBhY2soIjxJNCIsIGlucHV0U3RyZWFtOnJlYWQoNCkpCgoJaWYgY29tcHJlc3NlZExlbiA9PSAwIHRoZW4KCQlyZXR1cm4gaW5wdXRTdHJlYW06cmVhZChkZWNvbXByZXNzZWRMZW4pCgllbmQKCglsb2NhbCBvdXRwdXRTdHJlYW0gPSBzdHJlYW1lcigiIikKCglyZXBlYXQKCQlsb2NhbCB0b2tlbiA9IHN0cmluZy5ieXRlKGlucHV0U3RyZWFtOnJlYWQoKSkKCQlsb2NhbCBsaXRMZW4gPSBiaXQzMi5yc2hpZnQodG9rZW4sIDQpCgkJbG9jYWwgbWF0TGVuID0gYml0MzIuYmFuZCh0b2tlbiwgMTUpICsgNAoKCQlpZiBsaXRMZW4gPj0gMTUgdGhlbgoJCQlyZXBlYXQKCQkJCWxvY2FsIG5leHRCeXRlID0gc3RyaW5nLmJ5dGUoaW5wdXRTdHJlYW06cmVhZCgpKQoJCQkJbGl0TGVuICs9IG5leHRCeXRlCgkJCXVudGlsIG5leHRCeXRlIH49IDB4RkYKCQllbmQKCgkJbG9jYWwgbGl0ZXJhbCA9IGlucHV0U3RyZWFtOnJlYWQobGl0TGVuKQoJCW91dHB1dFN0cmVhbTphcHBlbmQobGl0ZXJhbCkKCQlvdXRwdXRTdHJlYW06dG9FbmQoKQoJCWlmIG91dHB1dFN0cmVhbS5MZW5ndGggPCBkZWNvbXByZXNzZWRMZW4gdGhlbgoJCQktLW1hdGNoCgkJCWxvY2FsIG9mZnNldCA9IHN0cmluZy51bnBhY2soIjxJMiIsIGlucHV0U3RyZWFtOnJlYWQoMikpCgkJCWlmIG1hdExlbiA+PSAxOSB0aGVuCgkJCQlyZXBlYXQKCQkJCQlsb2NhbCBuZXh0Qnl0ZSA9IHN0cmluZy5ieXRlKGlucHV0U3RyZWFtOnJlYWQoKSkKCQkJCQltYXRMZW4gKz0gbmV4dEJ5dGUKCQkJCXVudGlsIG5leHRCeXRlIH49IDB4RkYKCQkJZW5kCgoJCQlvdXRwdXRTdHJlYW06c2Vlaygtb2Zmc2V0KQoJCQlsb2NhbCBwb3MgPSBvdXRwdXRTdHJlYW0uT2Zmc2V0CgkJCWxvY2FsIG1hdGNoID0gb3V0cHV0U3RyZWFtOnJlYWQobWF0TGVuKQoJCQlsb2NhbCB1bnJlYWRCeXRlcyA9IG91dHB1dFN0cmVhbS5MYXN0VW5yZWFkQnl0ZXMKCQkJbG9jYWwgZXh0cmEKCQkJaWYgdW5yZWFkQnl0ZXMgdGhlbgoJCQkJcmVwZWF0CgkJCQkJb3V0cHV0U3RyZWFtLk9mZnNldCA9IHBvcwoJCQkJCWV4dHJhID0gb3V0cHV0U3RyZWFtOnJlYWQodW5yZWFkQnl0ZXMpCgkJCQkJdW5yZWFkQnl0ZXMgPSBvdXRwdXRTdHJlYW0uTGFzdFVucmVhZEJ5dGVzCgkJCQkJbWF0Y2ggLi49IGV4dHJhCgkJCQl1bnRpbCB1bnJlYWRCeXRlcyA8PSAwCgkJCWVuZAoKCQkJb3V0cHV0U3RyZWFtOmFwcGVuZChtYXRjaCkKCQkJb3V0cHV0U3RyZWFtOnRvRW5kKCkKCQllbmQKCgl1bnRpbCBvdXRwdXRTdHJlYW0uTGVuZ3RoID49IGRlY29tcHJlc3NlZExlbgoKCXJldHVybiBvdXRwdXRTdHJlYW0uU291cmNlCmVuZAoKCi0tIEJSSURHRQoKbG9jYWwgYnJpZGdlID0ge30KCmJyaWRnZS52YWxpZEFjdGlvbnMgPSB7CgktLXNjcmlwdCBzdHVmZgoJWyJsb2FkX3NvdXJjZSJdID0geyJzdHJpbmciLCAic3RyaW5nIn0sCglbIkh0dHBHZXQiXSA9IHt9LAoJWyJnZXRfc2NyaXB0Il0gPSB7fSwKCS0tZmlsZSBzeXN0ZW0gbGliCglbIndyaXRlZmlsZSJdID0ge30sIAoJWyJpc2ZpbGUiXSA9IHt9LAoJWyJpc2ZpbGUiXSA9IHt9LAoJWyJkZWxmaWxlIl0gPSB7fSwKCVsicmVhZGZpbGUiXSA9IHt9LAoJWyJtYWtlZm9sZGVyIl0gPSB7fSwKCVsiZGVsZm9sZGVyIl0gPSB7fSwKCVsiaXNmb2xkZXIiXSA9IHt9LAoJLS1taXNjCglbImdldGh3aWQiXSA9IHt9LAoJWyJnZXRieXRlY29kZSJdID0ge30sCglbImlucHV0X2FjdGlvbiJdID0ge30sCglbIm1lc3NhZ2Vib3giXSA9IHt9LAoJWyJsb2FkYXV0b2V4ZWMiXSA9IHt9LAoJLS1jbGlwYm9hcmQKCVsiZ2V0Y2xpcGJvYXJkIl0gPSB7fSwKCVsic2V0Y2xpcGJvYXJkIl0gPSB7fSwKCS0tY29uc29sZSAKCVsicmNvbnNvbGVjcmVhdGUiXSA9IHt9LAkKfSAtLSBnbyB0byBsb2Fkc3RyaW5nIHRvIGNoYW5nZSBpdAoKCgpmdW5jdGlvbiBicmlkZ2U6c2VuZChhY3Rpb24sIC4uLikgCglsb2NhbCBhcmdzID0gey4uLn0KCWxvY2FsIHN1Y2Nlc3MsIHJlcyA9IHBjYWxsKGZ1bmN0aW9uKCkKCgkJaWYgbm90IHNlbGYudmFsaWRBY3Rpb25zW2FjdGlvbl0gdGhlbgoJCQl3YXJuKCJbIERFQlVHIF0gQnJpZGdlLnNlbmQgLT4gY2FuY2VsbGVkIikKCQkJcmV0dXJuCgkJZW5kCgoJCWxvY2FsIHVybCA9ICJodHRwOi8vbG9jYWxob3N0OjgwMDAvYnJpZGdlP2FjdGlvbj0iIC4uIGFjdGlvbgoJCWZvciBpLCBhcmcgaW4gaXBhaXJzKGFyZ3MpIGRvCgkJCXVybCA9IHVybCAuLiAiJmFyZyIgLi4gaSAuLiAiPSIgLi4gSHR0cFNlcnZpY2U6VXJsRW5jb2RlKHRvc3RyaW5nKGFyZykpCgkJZW5kCgkJbG9jYWwgcGFyYW1zID0gewoJCQlVcmwgPSB1cmwsCgkJCU1ldGhvZCA9ICJHRVQiLAoJCQlIZWFkZXJzID0gewoJCQkJWyJDb250ZW50LVR5cGUiXSA9ICJhcHBsaWNhdGlvbi9qc29uIgoJCQl9CgkJfQoJCWxvY2FsIHJlcXVlc3QgPSBIdHRwU2VydmljZTpSZXF1ZXN0SW50ZXJuYWwocGFyYW1zKQoJCWxvY2FsIHJlc3BvbnNlID0gbmlsCgkJbG9jYWwgcmVxdWVzdENvbXBsZXRlZEV2ZW50ID0gSW5zdGFuY2UubmV3KCJCaW5kYWJsZUV2ZW50IikKCQlyZXF1ZXN0OlN0YXJ0KGZ1bmN0aW9uKHN1Y2Nlc3MsIHJlc3VsdCkKCQkJcmVzcG9uc2UgPSByZXN1bHQKCQkJcmVxdWVzdENvbXBsZXRlZEV2ZW50OkZpcmUoKQoJCWVuZCkKCQlyZXF1ZXN0Q29tcGxldGVkRXZlbnQuRXZlbnQ6V2FpdCgpCgoJCWlmIHJlc3BvbnNlLlN0YXR1c01lc3NhZ2UgPT0gIk9LIiB0aGVuIAoJCQlyZXR1cm4gSHR0cFNlcnZpY2U6SlNPTkRlY29kZShyZXNwb25zZS5Cb2R5KSBvciBIdHRwU2VydmljZTpKU09ORGVjb2RlKHdlYl9yZXNwb25zZS5Cb2R5KQoJCWVuZAoJZW5kKQoJaWYgbm90IHN1Y2Nlc3MgdGhlbgoJCXdhcm4oIlsgRVJST1IgXSAtPiAiLi50b3N0cmluZyhyZXMpKQoJZWxzZQoJCXJldHVybiByZXMKCWVuZAplbmQKCmxvY2FsIG9sZCA9IGxvYWQKCmxvY2FsIHZhbF90aGVfc2lnbWEgPSBmdW5jdGlvbihjb2RlKQoJbG9jYWwgbW9kdWxlID0gdXRpbHMuZmV0Y2hfbW9kdWxlcygpWzFdOkNsb25lKCkKCW1vZHVsZS5Tb3VyY2UgPSAicmV0dXJuIGZ1bmN0aW9uKC4uLikgIiAuLiBjb2RlIC4uICIgZW5kIgoJbG9jYWwgZnVuYyA9IHJlcXVpcmUobW9kdWxlKQoJZnVuYyA9IHNldGZlbnYoZnVuYywgZ2V0ZmVudigpKQoJcmV0dXJuIGZ1bmMKZW5kCgotLSBFTlZJUk9NRU5UCgpsb2NhbCBmdW5jdGlvbiBnZXRfYnVpbGRpbnMoKQoJcmV0dXJuIHsKCQktLSBMdWF1IEZ1bmN0aW9ucwoJCVsiYXNzZXJ0Il0gPSAiZnVuY3Rpb24iLAoJCVsiZXJyb3IiXSA9ICJmdW5jdGlvbiIsCgkJWyJnZXRmZW52Il0gPSAiZnVuY3Rpb24iLAoJCVsiZ2V0bWV0YXRhYmxlIl0gPSAiZnVuY3Rpb24iLAoJCVsiaXBhaXJzIl0gPSAiZnVuY3Rpb24iLAoJCVsibG9hZHN0cmluZyJdID0gImZ1bmN0aW9uIiwKCQlbIm5ld3Byb3h5Il0gPSAiZnVuY3Rpb24iLAoJCVsibmV4dCJdID0gImZ1bmN0aW9uIiwKCQlbInBhaXJzIl0gPSAiZnVuY3Rpb24iLAoJCVsicGNhbGwiXSA9ICJmdW5jdGlvbiIsCgkJWyJwcmludCJdID0gImZ1bmN0aW9uIiwKCQlbInJhd2VxdWFsIl0gPSAiZnVuY3Rpb24iLAoJCVsicmF3Z2V0Il0gPSAiZnVuY3Rpb24iLAoJCVsicmF3bGVuIl0gPSAiZnVuY3Rpb24iLAoJCVsicmF3c2V0Il0gPSAiZnVuY3Rpb24iLAoJCVsic2VsZWN0Il0gPSAiZnVuY3Rpb24iLAoJCVsic2V0ZmVudiJdID0gImZ1bmN0aW9uIiwKCQlbInNldG1ldGF0YWJsZSJdID0gImZ1bmN0aW9uIiwKCQlbInRvbnVtYmVyIl0gPSAiZnVuY3Rpb24iLAoJCVsidG9zdHJpbmciXSA9ICJmdW5jdGlvbiIsCgkJWyJ1bnBhY2siXSA9ICJmdW5jdGlvbiIsCgkJWyJ4cGNhbGwiXSA9ICJmdW5jdGlvbiIsCgkJWyJ0eXBlIl0gPSAiZnVuY3Rpb24iLAoJCVsidHlwZW9mIl0gPSAiZnVuY3Rpb24iLAoKCQktLSBMdWF1IEZ1bmN0aW9ucyAoRGVwcmVjYXRlZCkKCQlbImNvbGxlY3RnYXJiYWdlIl0gPSAiZnVuY3Rpb24iLAoKCQktLSBMdWF1IFZhcmlhYmxlcwoJCVsiX0ciXSA9ICJ0YWJsZSIsCgkJWyJfVkVSU0lPTiJdID0gInN0cmluZyIsCgoJCS0tIEx1YXUgVGFibGVzCgkJWyJiaXQzMiJdID0gInRhYmxlIiwKCQlbImNvcm91dGluZSJdID0gInRhYmxlIiwKCQlbImRlYnVnIl0gPSAidGFibGUiLAoJCVsibWF0aCJdID0gInRhYmxlIiwKCQlbIm9zIl0gPSAidGFibGUiLAoJCVsic3RyaW5nIl0gPSAidGFibGUiLAoJCVsidGFibGUiXSA9ICJ0YWJsZSIsCgkJWyJ1dGY4Il0gPSAidGFibGUiLAoJCVsiYnVmZmVyIl0gPSAidGFibGUiLAoKCQktLSBSb2Jsb3ggRnVuY3Rpb25zCgkJWyJEZWJ1Z2dlck1hbmFnZXIiXSA9ICJmdW5jdGlvbiIsCgkJWyJkZWxheSJdID0gImZ1bmN0aW9uIiwKCQlbImdjaW5mbyJdID0gImZ1bmN0aW9uIiwKCQlbIlBsdWdpbk1hbmFnZXIiXSA9ICJmdW5jdGlvbiIsCgkJWyJyZXF1aXJlIl0gPSAiZnVuY3Rpb24iLAoJCVsic2V0dGluZ3MiXSA9ICJmdW5jdGlvbiIsCgkJWyJzcGF3biJdID0gImZ1bmN0aW9uIiwKCQlbInRpY2siXSA9ICJmdW5jdGlvbiIsCgkJWyJ0aW1lIl0gPSAiZnVuY3Rpb24iLAoJCVsiVXNlclNldHRpbmdzIl0gPSAiZnVuY3Rpb24iLAoJCVsid2FpdCJdID0gImZ1bmN0aW9uIiwKCQlbIndhcm4iXSA9ICJmdW5jdGlvbiIsCgoJCS0tIFJvYmxveCBGdW5jdGlvbnMgKERlcHJlY2F0ZWQpCgkJWyJEZWxheSJdID0gImZ1bmN0aW9uIiwKCQlbIkVsYXBzZWRUaW1lIl0gPSAiZnVuY3Rpb24iLAoJCVsiZWxhcHNlZFRpbWUiXSA9ICJmdW5jdGlvbiIsCgkJWyJwcmludGlkZW50aXR5Il0gPSAiZnVuY3Rpb24iLAoJCVsiU3Bhd24iXSA9ICJmdW5jdGlvbiIsCgkJWyJTdGF0cyJdID0gImZ1bmN0aW9uIiwKCQlbInN0YXRzIl0gPSAiZnVuY3Rpb24iLAoJCVsiVmVyc2lvbiJdID0gImZ1bmN0aW9uIiwKCQlbInZlcnNpb24iXSA9ICJmdW5jdGlvbiIsCgkJWyJXYWl0Il0gPSAiZnVuY3Rpb24iLAoJCVsieXBjYWxsIl0gPSAiZnVuY3Rpb24iLAoKCQktLSBSb2Jsb3ggVmFyaWFibGVzCgkJWyJnYW1lIl0gPSAiSW5zdGFuY2UiLAoJCVsicGx1Z2luIl0gPSAiSW5zdGFuY2UiLAoJCVsic2hhcmVkIl0gPSAidGFibGUiLAoJCVsid29ya3NwYWNlIl0gPSAiSW5zdGFuY2UiLAoKCQktLSBSb2Jsb3ggVmFyaWFibGVzIChEZXByZWNhdGVkKQoJCVsiR2FtZSJdID0gIkluc3RhbmNlIiwKCQlbIldvcmtzcGFjZSJdID0gIkluc3RhbmNlIiwKCgkJLS0gUm9ibG94IFRhYmxlcwoJCVsiQXhlcyJdID0gInRhYmxlIiwKCQlbIkJyaWNrQ29sb3IiXSA9ICJ0YWJsZSIsCgkJWyJDYXRhbG9nU2VhcmNoUGFyYW1zIl0gPSAidGFibGUiLAoJCVsiQ0ZyYW1lIl0gPSAidGFibGUiLAoJCVsiQ29sb3IzIl0gPSAidGFibGUiLAoJCVsiQ29sb3JTZXF1ZW5jZSJdID0gInRhYmxlIiwKCQlbIkNvbG9yU2VxdWVuY2VLZXlwb2ludCJdID0gInRhYmxlIiwKCQlbIkRhdGVUaW1lIl0gPSAidGFibGUiLAoJCVsiRG9ja1dpZGdldFBsdWdpbkd1aUluZm8iXSA9ICJ0YWJsZSIsCgkJWyJFbnVtIl0gPSAiRW51bXMiLAoJCVsiRmFjZXMiXSA9ICJ0YWJsZSIsCgkJWyJGbG9hdEN1cnZlS2V5Il0gPSAidGFibGUiLAoJCVsiRm9udCJdID0gInRhYmxlIiwKCQlbIkluc3RhbmNlIl0gPSAidGFibGUiLAoJCVsiTnVtYmVyUmFuZ2UiXSA9ICJ0YWJsZSIsCgkJWyJOdW1iZXJTZXF1ZW5jZSJdID0gInRhYmxlIiwKCQlbIk51bWJlclNlcXVlbmNlS2V5cG9pbnQiXSA9ICJ0YWJsZSIsCgkJWyJPdmVybGFwUGFyYW1zIl0gPSAidGFibGUiLAoJCVsiUGF0aFdheXBvaW50Il0gPSAidGFibGUiLAoJCVsiUGh5c2ljYWxQcm9wZXJ0aWVzIl0gPSAidGFibGUiLAoJCVsiUmFuZG9tIl0gPSAidGFibGUiLAoJCVsiUmF5Il0gPSAidGFibGUiLAoJCVsiUmF5Y2FzdFBhcmFtcyJdID0gInRhYmxlIiwKCQlbIlJlY3QiXSA9ICJ0YWJsZSIsCgkJWyJSZWdpb24zIl0gPSAidGFibGUiLAoJCVsiUmVnaW9uM2ludDE2Il0gPSAidGFibGUiLAoJCVsiUm90YXRpb25DdXJ2ZUtleSJdID0gInRhYmxlIiwKCQlbIlNoYXJlZFRhYmxlIl0gPSAidGFibGUiLAoJCVsidGFzayJdID0gInRhYmxlIiwKCQlbIlR3ZWVuSW5mbyJdID0gInRhYmxlIiwKCQlbIlVEaW0iXSA9ICJ0YWJsZSIsCgkJWyJVRGltMiJdID0gInRhYmxlIiwKCQlbIlZlY3RvcjIiXSA9ICJ0YWJsZSIsCgkJWyJWZWN0b3IyaW50MTYiXSA9ICJ0YWJsZSIsCgkJWyJWZWN0b3IzIl0gPSAidGFibGUiLAoJCVsiVmVjdG9yM2ludDE2Il0gPSAidGFibGUiLAoJfQplbmQKCmxvY2FsIGZ1bmN0aW9uIF9hcHBseV9lbnYoZnVuYywgZW52KQoJc2V0ZmVudigwLCBlbnYpCglzZXRmZW52KDEsIGVudikKCglyZXR1cm4gc2V0ZmVudihmdW5jLCBlbnYpCmVuZAoKbG9jYWwgc2FuZGJveCA9IHsKCWVudmlyb25tZW50ID0gbmlsLAoJaGlkZGVuX2VudiA9IG5pbCwKCWJsYWNrbGlzdGVkX2V4dGVuc2lvbnMgPSB7CgkJIi5leGUiLCAiLmJhdCIsICIuY29tIiwgIi5jbWQiLCAiLmluZiIsICIuaXBhIiwKCQkiLmFwayIsICIuYXBrbSIsICIub3N4IiwgIi5waWYiLCAiLnJ1biIsICIud3NoIiwKCQkiLmJpbiIsICIuYXBwIiwgIi52YiIsICIudmJzIiwgIi5zY3IiLCAiLmZhcCIsCgkJIi5jcGwiLCAiLmluZjEiLCAiLmlucyIsICIuaW54IiwgIi5pc3UiLCAiLmpvYiIsCgkJIi5sbmsiLCAiLm1zaSIsICIucHMxIiwgIi5yZWciLCAiLnZiZSIsICIuanMiLAoJCSIueDg2IiwgIi54bG0iLCAiLnNjcHQiLCAiLm91dCIsICIuYmFfIiwgIi5qYXIiLAoJCSIuYWhrIiwgIi54YmUiLCAiLjB4ZSIsICIudTNwIiwgIi5ibXMiLCAiLmpzZSIsCgkJIi5leCIsICIucmFyIiwgIi56aXAiLCAiLjd6IiwgIi5weSIsICIuY3BwIiwKCQkiLmNzIiwgIi5wcngiLCAiLnRhciIsICIuIiwgIi53aW0iLCAiLmh0bSIsCgkJIi5odG1sIiwgIi5jc3MiLCAiLmFwcGltYWdlIiwgIi5hcHBsZXNjcmlwdCIsCgkJIi54ODZfNjQiLCAiLng2NF82NCIsICIuYXV0b3J1biIsICIudG1wIiwgIi5zeXMiLAoJCSIuZGF0IiwgIi5pbmkiLCAiLnBvbCIsICIudmJzY3JpcHQiLCAiLmdhZGdldCIsCgkJIi53b3JrZmxvdyIsICIuc2NyaXB0IiwgIi5hY3Rpb24iLCAiLmNvbW1hbmQiLAoJCSIuYXJzY3JpcHQiLCAiLnBzYzEiLAoJfQp9Cgpsb2NhbCBtYWluX3NjcmlwdCA9IHNjcmlwdApsb2NhbCBzZXRmZW52ID0gc2V0ZmVudgoKZnVuY3Rpb24gc2FuZGJveDphcHBseTxUPihmdW5jOiBUKTogVAoJbG9jYWwgbmV3X2VudiA9IHNlbGY6bmV3X2Vudmlyb25tZW50KEluc3RhbmNlLm5ldygiTG9jYWxTY3JpcHQiKSkKCWxvY2FsIF9zdWNjZXNzLCByZXN1bHQgPSBjb3JvdXRpbmUucmVzdW1lKGNvcm91dGluZS5jcmVhdGUoX2FwcGx5X2VudiksIGZ1bmMsIG5ld19lbnYpCgoJcmV0dXJuIHJlc3VsdAplbmQKCmZ1bmN0aW9uIHNhbmRib3g6bmV3X2Vudmlyb25tZW50KHNjcmlwdDogTHVhU291cmNlQ29udGFpbmVyKTogeyBbYW55XTogYW55IH0KCWxvY2FsIHBsdWdpbl9lbnYgPSB7fQoJbG9jYWwgc2FuZGJveGVkX2VudiA9IHNldG1ldGF0YWJsZSh7CgkJc2NyaXB0ID0gc2NyaXB0LAoJfSwgewoJCV9faW5kZXggPSBmdW5jdGlvbihlbnYsIGluZGV4KQoJCQlyZXR1cm4gcGx1Z2luX2VudltpbmRleF0gb3Igc2VsZi5oaWRkZW5fZW52W2luZGV4XSBvciBzZWxmLmVudmlyb25tZW50Lmdsb2JhbFtpbmRleF0KCQllbmQsCgkJX19uZXdpbmRleCA9IGZ1bmN0aW9uKGVudiwgaW5kZXgsIHZhbHVlKQoJCQlpZiBpbmRleCB+PSAic2NyaXB0IiB0aGVuCgkJCQlyYXdzZXQoc2VsZi5lbnZpcm9ubWVudC5nbG9iYWwsIGluZGV4LCB2YWx1ZSkKCQkJZW5kCgkJCXJhd3NldChlbnYsIGluZGV4LCB2YWx1ZSkKCQllbmQsCgl9KQoKCXBsdWdpbl9lbnYuZ2V0ZmVudiA9IGZ1bmN0aW9uKHZhbHVlKQoJCWxvY2FsIHN1Y2Nlc3MsIHJlc3VsdCA9IHBjYWxsKGdldGZlbnYsIHZhbHVlKQoKCQlpZiBzdWNjZXNzIHRoZW4KCQkJaWYgcmF3Z2V0KHJlc3VsdCwgInNjcmlwdCIpID09IG1haW5fc2NyaXB0IHRoZW4KCQkJCXJlc3VsdCA9IHNhbmRib3hlZF9lbnYKCQkJZW5kCgkJCXJldHVybiByZXN1bHQKCQllbmQKCQlyZXR1cm4gZXJyb3IocmVzdWx0LCAyKQoJZW5kCgoJcmV0dXJuIHNhbmRib3hlZF9lbnYKZW5kCgpsb2NhbCBmdW5jdGlvbiBpbml0aWFsaXplX2Vudl9tb2R1bGVzKCkKCWxvY2FsIHJvYmxveF9lbnYgPSBnZXRfYnVpbGRpbnMoKSAtLSBkbyBub3Qgd3JpdGUgb24gdGhpcwoJbG9jYWwgbmV3X2VudiA9IHNldG1ldGF0YWJsZSh7fSwgewoJCV9faW5kZXggPSByb2Jsb3hfZW52LAoJfSkKCgktLSBpbml0Cglmb3IgaW5kZXgsIHZhbHVlIGluIG5ld19lbnYgZG8KCQlpZiB0eXBlKHZhbHVlKSB+PSAidGFibGUiIG9yIHRhYmxlLmlzZnJvemVuKHZhbHVlKSB0aGVuCgkJCWNvbnRpbnVlCgkJZW5kCgkJdGFibGUuZnJlZXplKHZhbHVlKQoJZW5kCgoJcmV0dXJuIHsKCQlnbG9iYWwgPSBuZXdfZW52LAoJCXJvYmxveCA9IHJvYmxveF9lbnYsCgl9CmVuZAoKZnVuY3Rpb24gc2FuZGJveDppbml0aWFsaXplKCkKCWxvY2FsIGhpZGRlbl9lbnYgPSB7CgkJZ2FtZSA9IG5ld3Byb3h5KHRydWUpLAoJfQoJbG9jYWwgZW52aXJvbm1lbnQgPSBpbml0aWFsaXplX2Vudl9tb2R1bGVzKCkKCglsb2NhbCBfZ2FtZV9tZXRhID0gZ2V0bWV0YXRhYmxlKGhpZGRlbl9lbnYuZ2FtZSkKCV9nYW1lX21ldGEuX19pbmRleCA9IGZ1bmN0aW9uKHNlbGYsIGluZGV4KQoJCWxvY2FsIF8sIGdhbWVfaW5kZXggPSBwY2FsbChmdW5jdGlvbigpCgkJCXJldHVybiBnYW1lW2luZGV4XQoJCWVuZCkKCgkJaWYgZ2FtZV9pbmRleCBhbmQgdHlwZShnYW1lX2luZGV4KSA9PSAiZnVuY3Rpb24iIHRoZW4KCQkJcmV0dXJuIGZ1bmN0aW9uKHNlbGYsIC4uLikKCQkJCXJldHVybiBnYW1lX2luZGV4KGdhbWUsIC4uLikKCQkJZW5kCgkJZWxzZQoJCQktLVRPRE8gQWRkIGF1dG9tYXRpYyAuR2V0U2VydmljZQoJCQlyZXR1cm4gZ2FtZVtpbmRleF0KCQllbmQKCWVuZAoJX2dhbWVfbWV0YS5fX21ldGF0YWJsZSA9IGdldG1ldGF0YWJsZShnYW1lKQoKCWxvY2FsIGNsb25lZF9lbnZpcm9ubWVudAoKCWVudmlyb25tZW50Lmdsb2JhbC5fRyA9IHt9CgllbnZpcm9ubWVudC5nbG9iYWwuc2hhcmVkID0ge30KCWVudmlyb25tZW50Lmdsb2JhbC5jcnlwdCA9IHsKCQliYXNlNjQgPSB7fSwKCQloZXggPSB7fSwgCgkJdXJsID0ge30sCgl9CgllbnZpcm9ubWVudC5nbG9iYWwuYmluY29ndmVyID0gZnVuY3Rpb24oKQoJCXJldHVybiAnMi4wLjAnCgllbmQKCWVudmlyb25tZW50Lmdsb2JhbC5jYWNoZSA9IHt9CgllbnZpcm9ubWVudC5nbG9iYWwuaHR0cCA9IHt9CgllbnZpcm9ubWVudC5nbG9iYWwuYmFzZTY0ID0ge30KCWVudmlyb25tZW50Lmdsb2JhbC5kZWJ1ZyA9IHRhYmxlLmNsb25lKGRlYnVnKQoJZW52aXJvbm1lbnQuZ2xvYmFsLnN5biA9IHsKCQljcnlwdCA9IHsKCQkJYmFzZTY0ID0ge30sCgkJfSwKCQljcnlwdG8gPSB7CgkJCWJhc2U2NCA9IHt9LAoJCX0sCgl9CgllbnZpcm9ubWVudC5nbG9iYWwuZmx1eHVzID0gewoJCWNyeXB0ID0ge30sCgl9CglmdW5jdGlvbiBycXN0KE9wdGlvbnMpCgkJYXNzZXJ0KHR5cGUoT3B0aW9ucykgPT0gJ3RhYmxlJywgJ0FyZ3VtZW50ICMxIHRvIFwncmVxdWVzdFwnIG11c3QgYmUgYSB0YWJsZSwgZ290ICcgLi4gdHlwZW9mKE9wdGlvbnMpKQoJCWlmIHR5cGVvZihzY3JpcHQpID09ICdJbnN0YW5jZScgYW5kIHNjcmlwdC5DbGFzc05hbWUgPT0gJ1NjcmlwdCcgdGhlbgoJCQlyZXR1cm4gSHR0cFNlcnZpY2U6UmVxdWVzdEFzeW5jKE9wdGlvbnMpCgkJZW5kCgkJbG9jYWwgVGltZW91dCwgRG9uZSwgVGltZSA9IDUsIGZhbHNlLCAwCgkJbG9jYWwgUmV0dXJuID0gewoJCQlTdWNjZXNzID0gZmFsc2UsCgkJCVN0YXR1c0NvZGUgPSA0MDgsCgkJCVN0YXR1c01lc3NhZ2UgPSAnUmVxdWVzdCBUaW1lb3V0JywKCQkJSGVhZGVycyA9IHt9LAoJCQlCb2R5ID0gJycKCQl9CgkJbG9jYWwgZnVuY3Rpb24gQ2FsbGJhY2soU3VjY2VzcywgUmVzcG9uc2UpCgkJCURvbmUgPSB0cnVlCgkJCVJldHVybi5TdWNjZXNzID0gU3VjY2VzcwoJCQlSZXR1cm4uU3RhdHVzQ29kZSA9IFJlc3BvbnNlLlN0YXR1c0NvZGUKCQkJUmV0dXJuLlN0YXR1c01lc3NhZ2UgPSBSZXNwb25zZS5TdGF0dXNNZXNzYWdlCgkJCVJldHVybi5IZWFkZXJzID0gUmVzcG9uc2UuSGVhZGVycwoJCQlSZXR1cm4uQm9keSA9IFJlc3BvbnNlLkJvZHkKCQllbmQKCQlIdHRwU2VydmljZTpSZXF1ZXN0SW50ZXJuYWwoT3B0aW9ucyk6U3RhcnQoQ2FsbGJhY2spCgkJd2hpbGUgbm90IERvbmUgYW5kIFRpbWUgPCBUaW1lb3V0IGRvIC0tIHByb2JhYmx5IGEgYmFkIGFwcHJvYWNoPwoJCQlUaW1lID0gVGltZSArIC4xCgkJCXRhc2sud2FpdCguMSkKCQllbmQKCQlyZXR1cm4gUmV0dXJuCgllbmQKCWxvY2FsIF9nYW1lID0gZ2FtZQoJbG9jYWwgUGxheWVycyA9IF9nYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQoJZW52aXJvbm1lbnQuZ2xvYmFsLmdhbWUgPSBzZXRtZXRhdGFibGUoe30sIHsKCQlfX2luZGV4ID0gZnVuY3Rpb24oc2VsZiwga2V5KQoJCQlpZiBrZXkgPT0gJ0h0dHBHZXQnIHRoZW4KCQkJcmV0dXJuIGZ1bmN0aW9uKF8sIFVybCkKCQkJCXJldHVybiBycXN0KHtVcmwgPSBVcmwsIE1ldGhvZCA9ICJHRVQifSkuQm9keQoJCQllbmQKCQkJZWxzZWlmIGtleSA9PSAnSHR0cEdldEFzeW5jJyB0aGVuCgkJCQlyZXR1cm4gZnVuY3Rpb24oXywgVXJsKQoJCQkJCXJldHVybiBycXN0KHtVcmwgPSBVcmwsIE1ldGhvZCA9ICJHRVQifSkuQm9keQoJCQkJZW5kCgkJCWVsc2VpZiBrZXkgPT0gJ0h0dHBQb3N0JyB0aGVuCgkJCQlyZXR1cm4gZnVuY3Rpb24oVXJsLCBEYXRhLCBjb250ZW50VHlwZSkKCQkJCQlsb2NhbCBBcmdzID0ge1VybCA9IFVybCwgTWV0aG9kID0gIlBPU1QiLCBCb2R5ID0gRGF0YX0KCQkJCQlpZiBjb250ZW50VHlwZSB0aGVuCgkJCQkJCUFyZ3MuSGVhZGVycyA9IHtbJ0NvbnRlbnQtVHlwZSddID0gY29udGVudFR5cGV9CgkJCQkJZW5kCgkJCQkJcmV0dXJuIHJxc3QoQXJncykuQm9keQoJCQkJZW5kCgkJCWVsc2VpZiBrZXkgPT0gJ0h0dHBQb3N0QXN5bmMnIHRoZW4KCQkJCXJldHVybiBmdW5jdGlvbihVcmwsIERhdGEsIGNvbnRlbnRUeXBlKQoJCQkJCWxvY2FsIEFyZ3MgPSB7VXJsID0gVXJsLCBNZXRob2QgPSAiUE9TVCIsIEJvZHkgPSBEYXRhfQoJCQkJCWlmIGNvbnRlbnRUeXBlIHRoZW4KCQkJCQkJQXJncy5IZWFkZXJzID0ge1snQ29udGVudC1UeXBlJ10gPSBjb250ZW50VHlwZX0KCQkJCQllbmQKCQkJCQlyZXR1cm4gcnFzdChBcmdzKS5Cb2R5CgkJCQllbmQKCQkJZWxzZWlmIGtleSA9PSAnR2V0U2VydmljZScgdGhlbgoJCQkJbG9jYWwgayA9IF9nYW1lW2tleV0KCQkJCWlmIHR5cGUoaykgPT0gJ2Z1bmN0aW9uJyB0aGVuCgkJCQkJcmV0dXJuIGZ1bmN0aW9uKF8sIC4uLikKCQkJCQkJbG9jYWwgYXJncyA9IHsuLi59CgkJCQkJCWFzc2VydChub3QgdGFibGUuZmluZChhcmdzLCAiSHR0cFJieEFwaVNlcnZpY2UiKSwgIkF0dGVtcHQgdG8gY2FsbCBibG9ja2VkIGZ1bmN0aW9uIikKCQkJCQkJYXNzZXJ0KG5vdCB0YWJsZS5maW5kKGFyZ3MsICJNZXNzYWdlQnVzU2VydmljZSIpLCAiQXR0ZW1wdCB0byBjYWxsIGJsb2NrZWQgZnVuY3Rpb24iKQoJCQkJCQlhc3NlcnQobm90IHRhYmxlLmZpbmQoYXJncywgIlNjcmlwdENvbnRleHQiKSwgIkF0dGVtcHQgdG8gY2FsbCBibG9ja2VkIGZ1bmN0aW9uIikKCQkJCQkJYXNzZXJ0KG5vdCB0YWJsZS5maW5kKGFyZ3MsICJCcm93c2VyU2VydmljZSIpLCAiQXR0ZW1wdCB0byBjYWxsIGJsb2NrZWQgZnVuY3Rpb24iKQoJCQkJCQlyZXR1cm4gayhfZ2FtZSwgLi4uKQoJCQkJCWVuZAoJCQkJZWxzZQoJCQkJCXJldHVybiBrCgkJCQllbmQKCQkJZWxzZQoJCQkJCWxvY2FsIGsgPSBfZ2FtZVtrZXldCgkJCQlpZiB0eXBlKGspID09ICdmdW5jdGlvbicgdGhlbgoJCQkJCXJldHVybiBmdW5jdGlvbihfLCAuLi4pCgkJCQkJCWxvY2FsIGFyZ3MgPSB7Li4ufQoJCQkJCQlyZXR1cm4gayhfZ2FtZSwgLi4uKQoJCQkJCWVuZAoJCQkJZWxzZQoJCQkJCXJldHVybiBrCgkJCQllbmQKCQkJZW5kCgkJZW5kLAoJCV9fdG9zdHJpbmcgPSBmdW5jdGlvbigpIHJldHVybiB0b3N0cmluZyhfZ2FtZSkgZW5kCgl9KQoJLS0gc2VydmljZXMKCWxvY2FsIGNvcmVHdWkgPSBnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKQoJLS0gb2JqZWN0cwoJbG9jYWwgY2FtZXJhID0gZ2FtZS5Xb3Jrc3BhY2UuQ3VycmVudENhbWVyYQoJbG9jYWwgZHJhd2luZ1VJID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQoJZHJhd2luZ1VJLk5hbWUgPSAiRHJhd2luZyIKCWRyYXdpbmdVSS5JZ25vcmVHdWlJbnNldCA9IHRydWUKCWRyYXdpbmdVSS5EaXNwbGF5T3JkZXIgPSAweDdmZmZmZmZmCglkcmF3aW5nVUkuUGFyZW50ID0gY29yZUd1aQoJLS0gdmFyaWFibGVzCglsb2NhbCBkcmF3aW5nSW5kZXggPSAwCglsb2NhbCB1aVN0cm9rZXMgPSB0YWJsZS5jcmVhdGUoMCkKCWxvY2FsIGJhc2VEcmF3aW5nT2JqID0gc2V0bWV0YXRhYmxlKHsKCQlWaXNpYmxlID0gdHJ1ZSwKCQlaSW5kZXggPSAwLAoJCVRyYW5zcGFyZW5jeSA9IDEsCgkJQ29sb3IgPSBDb2xvcjMubmV3KCksCgkJUmVtb3ZlID0gZnVuY3Rpb24oc2VsZikKCQkJc2V0bWV0YXRhYmxlKHNlbGYsIG5pbCkKCQllbmQKCX0sIHsKCQlfX2FkZCA9IGZ1bmN0aW9uKHQxLCB0MikKCQkJbG9jYWwgcmVzdWx0ID0gdGFibGUuY2xvbmUodDEpCgoJCQlmb3IgaW5kZXgsIHZhbHVlIGluIHQyIGRvCgkJCQlyZXN1bHRbaW5kZXhdID0gdmFsdWUKCQkJZW5kCgkJCXJldHVybiByZXN1bHQKCQllbmQKCX0pCglsb2NhbCBkcmF3aW5nRm9udHNFbnVtID0gewoJCVswXSA9IEZvbnQuZnJvbUVudW0oRW51bS5Gb250LlJvYm90byksCgkJWzFdID0gRm9udC5mcm9tRW51bShFbnVtLkZvbnQuTGVnYWN5KSwKCQlbMl0gPSBGb250LmZyb21FbnVtKEVudW0uRm9udC5Tb3VyY2VTYW5zKSwKCQlbM10gPSBGb250LmZyb21FbnVtKEVudW0uRm9udC5Sb2JvdG9Nb25vKSwKCX0KCS0tIGZ1bmN0aW9uCglsb2NhbCBmdW5jdGlvbiBnZXRGb250RnJvbUluZGV4KGZvbnRJbmRleDogbnVtYmVyKTogRm9udAoJCXJldHVybiBkcmF3aW5nRm9udHNFbnVtW2ZvbnRJbmRleF0KCWVuZAoKCWxvY2FsIGZ1bmN0aW9uIGNvbnZlcnRUcmFuc3BhcmVuY3kodHJhbnNwYXJlbmN5OiBudW1iZXIpOiBudW1iZXIKCQlyZXR1cm4gbWF0aC5jbGFtcCgxIC0gdHJhbnNwYXJlbmN5LCAwLCAxKQoJZW5kCgktLSBtYWluCglsb2NhbCBEcmF3aW5nTGliID0ge30KCURyYXdpbmdMaWIuRm9udHMgPSB7CgkJWyJVSSJdID0gMCwKCQlbIlN5c3RlbSJdID0gMSwKCQlbIlBsZXgiXSA9IDIsCgkJWyJNb25vc3BhY2UiXSA9IDMKCX0KCWxvY2FsIGRyYXdpbmdzID0ge30KCWZ1bmN0aW9uIERyYXdpbmdMaWIubmV3KGRyYXdpbmdUeXBlKQoJCWRyYXdpbmdJbmRleCArPSAxCgkJaWYgZHJhd2luZ1R5cGUgPT0gIkxpbmUiIHRoZW4KCQkJbG9jYWwgbGluZU9iaiA9ICh7CgkJCQlGcm9tID0gVmVjdG9yMi56ZXJvLAoJCQkJVG8gPSBWZWN0b3IyLnplcm8sCgkJCQlUaGlja25lc3MgPSAxCgkJCX0gKyBiYXNlRHJhd2luZ09iaikKCgkJCWxvY2FsIGxpbmVGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQoJCQlsaW5lRnJhbWUuTmFtZSA9IGRyYXdpbmdJbmRleAoJCQlsaW5lRnJhbWUuQW5jaG9yUG9pbnQgPSAoVmVjdG9yMi5vbmUgKiAuNSkKCQkJbGluZUZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDAKCgkJCWxpbmVGcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gbGluZU9iai5Db2xvcgoJCQlsaW5lRnJhbWUuVmlzaWJsZSA9IGxpbmVPYmouVmlzaWJsZQoJCQlsaW5lRnJhbWUuWkluZGV4ID0gbGluZU9iai5aSW5kZXgKCQkJbGluZUZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSBjb252ZXJ0VHJhbnNwYXJlbmN5KGxpbmVPYmouVHJhbnNwYXJlbmN5KQoKCQkJbGluZUZyYW1lLlNpemUgPSBVRGltMi5uZXcoKQoKCQkJbGluZUZyYW1lLlBhcmVudCA9IGRyYXdpbmdVSQoJCQlsb2NhbCBicyA9IHRhYmxlLmNyZWF0ZSgwKQoJCQl0YWJsZS5pbnNlcnQoZHJhd2luZ3MsYnMpCgkJCXJldHVybiBzZXRtZXRhdGFibGUoYnMsIHsKCQkJCV9fbmV3aW5kZXggPSBmdW5jdGlvbihfLCBpbmRleCwgdmFsdWUpCgkJCQkJaWYgdHlwZW9mKGxpbmVPYmpbaW5kZXhdKSA9PSAibmlsIiB0aGVuIHJldHVybiBlbmQKCgkJCQkJaWYgaW5kZXggPT0gIkZyb20iIHRoZW4KCQkJCQkJbG9jYWwgZGlyZWN0aW9uID0gKGxpbmVPYmouVG8gLSB2YWx1ZSkKCQkJCQkJbG9jYWwgY2VudGVyID0gKGxpbmVPYmouVG8gKyB2YWx1ZSkgLyAyCgkJCQkJCWxvY2FsIGRpc3RhbmNlID0gZGlyZWN0aW9uLk1hZ25pdHVkZQoJCQkJCQlsb2NhbCB0aGV0YSA9IG1hdGguZGVnKG1hdGguYXRhbjIoZGlyZWN0aW9uLlksIGRpcmVjdGlvbi5YKSkKCgkJCQkJCWxpbmVGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLmZyb21PZmZzZXQoY2VudGVyLlgsIGNlbnRlci5ZKQoJCQkJCQlsaW5lRnJhbWUuUm90YXRpb24gPSB0aGV0YQoJCQkJCQlsaW5lRnJhbWUuU2l6ZSA9IFVEaW0yLmZyb21PZmZzZXQoZGlzdGFuY2UsIGxpbmVPYmouVGhpY2tuZXNzKQoJCQkJCWVsc2VpZiBpbmRleCA9PSAiVG8iIHRoZW4KCQkJCQkJbG9jYWwgZGlyZWN0aW9uID0gKHZhbHVlIC0gbGluZU9iai5Gcm9tKQoJCQkJCQlsb2NhbCBjZW50ZXIgPSAodmFsdWUgKyBsaW5lT2JqLkZyb20pIC8gMgoJCQkJCQlsb2NhbCBkaXN0YW5jZSA9IGRpcmVjdGlvbi5NYWduaXR1ZGUKCQkJCQkJbG9jYWwgdGhldGEgPSBtYXRoLmRlZyhtYXRoLmF0YW4yKGRpcmVjdGlvbi5ZLCBkaXJlY3Rpb24uWCkpCgoJCQkJCQlsaW5lRnJhbWUuUG9zaXRpb24gPSBVRGltMi5mcm9tT2Zmc2V0KGNlbnRlci5YLCBjZW50ZXIuWSkKCQkJCQkJbGluZUZyYW1lLlJvdGF0aW9uID0gdGhldGEKCQkJCQkJbGluZUZyYW1lLlNpemUgPSBVRGltMi5mcm9tT2Zmc2V0KGRpc3RhbmNlLCBsaW5lT2JqLlRoaWNrbmVzcykKCQkJCQllbHNlaWYgaW5kZXggPT0gIlRoaWNrbmVzcyIgdGhlbgoJCQkJCQlsb2NhbCBkaXN0YW5jZSA9IChsaW5lT2JqLlRvIC0gbGluZU9iai5Gcm9tKS5NYWduaXR1ZGUKCgkJCQkJCWxpbmVGcmFtZS5TaXplID0gVURpbTIuZnJvbU9mZnNldChkaXN0YW5jZSwgdmFsdWUpCgkJCQkJZWxzZWlmIGluZGV4ID09ICJWaXNpYmxlIiB0aGVuCgkJCQkJCWxpbmVGcmFtZS5WaXNpYmxlID0gdmFsdWUKCQkJCQllbHNlaWYgaW5kZXggPT0gIlpJbmRleCIgdGhlbgoJCQkJCQlsaW5lRnJhbWUuWkluZGV4ID0gdmFsdWUKCQkJCQllbHNlaWYgaW5kZXggPT0gIlRyYW5zcGFyZW5jeSIgdGhlbgoJCQkJCQlsaW5lRnJhbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IGNvbnZlcnRUcmFuc3BhcmVuY3kodmFsdWUpCgkJCQkJZWxzZWlmIGluZGV4ID09ICJDb2xvciIgdGhlbgoJCQkJCQlsaW5lRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IHZhbHVlCgkJCQkJZW5kCgkJCQkJbGluZU9ialtpbmRleF0gPSB2YWx1ZQoJCQkJZW5kLAoJCQkJX19pbmRleCA9IGZ1bmN0aW9uKHNlbGYsIGluZGV4KQoJCQkJCWlmIGluZGV4ID09ICJSZW1vdmUiIG9yIGluZGV4ID09ICJEZXN0cm95IiB0aGVuCgkJCQkJCXJldHVybiBmdW5jdGlvbigpCgkJCQkJCQlsaW5lRnJhbWU6RGVzdHJveSgpCgkJCQkJCQlsaW5lT2JqLlJlbW92ZShzZWxmKQoJCQkJCQkJcmV0dXJuIGxpbmVPYmo6UmVtb3ZlKCkKCQkJCQkJZW5kCgkJCQkJZW5kCgkJCQkJcmV0dXJuIGxpbmVPYmpbaW5kZXhdCgkJCQllbmQKCQkJfSkKCQllbHNlaWYgZHJhd2luZ1R5cGUgPT0gIlRleHQiIHRoZW4KCQkJbG9jYWwgdGV4dE9iaiA9ICh7CgkJCQlUZXh0ID0gIiIsCgkJCQlGb250ID0gRHJhd2luZ0xpYi5Gb250cy5VSSwKCQkJCVNpemUgPSAwLAoJCQkJUG9zaXRpb24gPSBWZWN0b3IyLnplcm8sCgkJCQlDZW50ZXIgPSBmYWxzZSwKCQkJCU91dGxpbmUgPSBmYWxzZSwKCQkJCU91dGxpbmVDb2xvciA9IENvbG9yMy5uZXcoKQoJCQl9ICsgYmFzZURyYXdpbmdPYmopCgoJCQlsb2NhbCB0ZXh0TGFiZWwsIHVpU3Ryb2tlID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKSwgSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpCgkJCXRleHRMYWJlbC5OYW1lID0gZHJhd2luZ0luZGV4CgkJCXRleHRMYWJlbC5BbmNob3JQb2ludCA9IChWZWN0b3IyLm9uZSAqIC41KQoJCQl0ZXh0TGFiZWwuQm9yZGVyU2l6ZVBpeGVsID0gMAoJCQl0ZXh0TGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCgkJCXRleHRMYWJlbC5WaXNpYmxlID0gdGV4dE9iai5WaXNpYmxlCgkJCXRleHRMYWJlbC5UZXh0Q29sb3IzID0gdGV4dE9iai5Db2xvcgoJCQl0ZXh0TGFiZWwuVGV4dFRyYW5zcGFyZW5jeSA9IGNvbnZlcnRUcmFuc3BhcmVuY3kodGV4dE9iai5UcmFuc3BhcmVuY3kpCgkJCXRleHRMYWJlbC5aSW5kZXggPSB0ZXh0T2JqLlpJbmRleAoKCQkJdGV4dExhYmVsLkZvbnRGYWNlID0gZ2V0Rm9udEZyb21JbmRleCh0ZXh0T2JqLkZvbnQpCgkJCXRleHRMYWJlbC5UZXh0U2l6ZSA9IHRleHRPYmouU2l6ZQoKCQkJdGV4dExhYmVsOkdldFByb3BlcnR5Q2hhbmdlZFNpZ25hbCgiVGV4dEJvdW5kcyIpOkNvbm5lY3QoZnVuY3Rpb24oKQoJCQkJbG9jYWwgdGV4dEJvdW5kcyA9IHRleHRMYWJlbC5UZXh0Qm91bmRzCgkJCQlsb2NhbCBvZmZzZXQgPSB0ZXh0Qm91bmRzIC8gMgoKCQkJCXRleHRMYWJlbC5TaXplID0gVURpbTIuZnJvbU9mZnNldCh0ZXh0Qm91bmRzLlgsIHRleHRCb3VuZHMuWSkKCQkJCXRleHRMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLmZyb21PZmZzZXQodGV4dE9iai5Qb3NpdGlvbi5YICsgKGlmIG5vdCB0ZXh0T2JqLkNlbnRlciB0aGVuIG9mZnNldC5YIGVsc2UgMCksIHRleHRPYmouUG9zaXRpb24uWSArIG9mZnNldC5ZKQoJCQllbmQpCgoJCQl1aVN0cm9rZS5UaGlja25lc3MgPSAxCgkJCXVpU3Ryb2tlLkVuYWJsZWQgPSB0ZXh0T2JqLk91dGxpbmUKCQkJdWlTdHJva2UuQ29sb3IgPSB0ZXh0T2JqLkNvbG9yCgoJCQl0ZXh0TGFiZWwuUGFyZW50LCB1aVN0cm9rZS5QYXJlbnQgPSBkcmF3aW5nVUksIHRleHRMYWJlbAoJCQlsb2NhbCBicyA9IHRhYmxlLmNyZWF0ZSgwKQoJCQl0YWJsZS5pbnNlcnQoZHJhd2luZ3MsYnMpCgkJCXJldHVybiBzZXRtZXRhdGFibGUoYnMsIHsKCQkJCV9fbmV3aW5kZXggPSBmdW5jdGlvbihfLCBpbmRleCwgdmFsdWUpCgkJCQkJaWYgdHlwZW9mKHRleHRPYmpbaW5kZXhdKSA9PSAibmlsIiB0aGVuIHJldHVybiBlbmQKCgkJCQkJaWYgaW5kZXggPT0gIlRleHQiIHRoZW4KCQkJCQkJdGV4dExhYmVsLlRleHQgPSB2YWx1ZQoJCQkJCWVsc2VpZiBpbmRleCA9PSAiRm9udCIgdGhlbgoJCQkJCQl2YWx1ZSA9IG1hdGguY2xhbXAodmFsdWUsIDAsIDMpCgkJCQkJCXRleHRMYWJlbC5Gb250RmFjZSA9IGdldEZvbnRGcm9tSW5kZXgodmFsdWUpCgkJCQkJZWxzZWlmIGluZGV4ID09ICJTaXplIiB0aGVuCgkJCQkJCXRleHRMYWJlbC5UZXh0U2l6ZSA9IHZhbHVlCgkJCQkJZWxzZWlmIGluZGV4ID09ICJQb3NpdGlvbiIgdGhlbgoJCQkJCQlsb2NhbCBvZmZzZXQgPSB0ZXh0TGFiZWwuVGV4dEJvdW5kcyAvIDIKCgkJCQkJCXRleHRMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLmZyb21PZmZzZXQodmFsdWUuWCArIChpZiBub3QgdGV4dE9iai5DZW50ZXIgdGhlbiBvZmZzZXQuWCBlbHNlIDApLCB2YWx1ZS5ZICsgb2Zmc2V0LlkpCgkJCQkJZWxzZWlmIGluZGV4ID09ICJDZW50ZXIiIHRoZW4KCQkJCQkJbG9jYWwgcG9zaXRpb24gPSAoCgkJCQkJCQlpZiB2YWx1ZSB0aGVuCgkJCQkJCQkJY2FtZXJhLlZpZXdwb3J0U2l6ZSAvIDIKCQkJCQkJCQllbHNlCgkJCQkJCQkJdGV4dE9iai5Qb3NpdGlvbgoJCQkJCQkpCgoJCQkJCQl0ZXh0TGFiZWwuUG9zaXRpb24gPSBVRGltMi5mcm9tT2Zmc2V0KHBvc2l0aW9uLlgsIHBvc2l0aW9uLlkpCgkJCQkJZWxzZWlmIGluZGV4ID09ICJPdXRsaW5lIiB0aGVuCgkJCQkJCXVpU3Ryb2tlLkVuYWJsZWQgPSB2YWx1ZQoJCQkJCWVsc2VpZiBpbmRleCA9PSAiT3V0bGluZUNvbG9yIiB0aGVuCgkJCQkJCXVpU3Ryb2tlLkNvbG9yID0gdmFsdWUKCQkJCQllbHNlaWYgaW5kZXggPT0gIlZpc2libGUiIHRoZW4KCQkJCQkJdGV4dExhYmVsLlZpc2libGUgPSB2YWx1ZQoJCQkJCWVsc2VpZiBpbmRleCA9PSAiWkluZGV4IiB0aGVuCgkJCQkJCXRleHRMYWJlbC5aSW5kZXggPSB2YWx1ZQoJCQkJCWVsc2VpZiBpbmRleCA9PSAiVHJhbnNwYXJlbmN5IiB0aGVuCgkJCQkJCWxvY2FsIHRyYW5zcGFyZW5jeSA9IGNvbnZlcnRUcmFuc3BhcmVuY3kodmFsdWUpCgoJCQkJCQl0ZXh0TGFiZWwuVGV4dFRyYW5zcGFyZW5jeSA9IHRyYW5zcGFyZW5jeQoJCQkJCQl1aVN0cm9rZS5UcmFuc3BhcmVuY3kgPSB0cmFuc3BhcmVuY3kKCQkJCQllbHNlaWYgaW5kZXggPT0gIkNvbG9yIiB0aGVuCgkJCQkJCXRleHRMYWJlbC5UZXh0Q29sb3IzID0gdmFsdWUKCQkJCQllbmQKCQkJCQl0ZXh0T2JqW2luZGV4XSA9IHZhbHVlCgkJCQllbmQsCgkJCQlfX2luZGV4ID0gZnVuY3Rpb24oc2VsZiwgaW5kZXgpCgkJCQkJaWYgaW5kZXggPT0gIlJlbW92ZSIgb3IgaW5kZXggPT0gIkRlc3Ryb3kiIHRoZW4KCQkJCQkJcmV0dXJuIGZ1bmN0aW9uKCkKCQkJCQkJCXRleHRMYWJlbDpEZXN0cm95KCkKCQkJCQkJCXRleHRPYmouUmVtb3ZlKHNlbGYpCgkJCQkJCQlyZXR1cm4gdGV4dE9iajpSZW1vdmUoKQoJCQkJCQllbmQKCQkJCQllbHNlaWYgaW5kZXggPT0gIlRleHRCb3VuZHMiIHRoZW4KCQkJCQkJcmV0dXJuIHRleHRMYWJlbC5UZXh0Qm91bmRzCgkJCQkJZW5kCgkJCQkJcmV0dXJuIHRleHRPYmpbaW5kZXhdCgkJCQllbmQKCQkJfSkKCQllbHNlaWYgZHJhd2luZ1R5cGUgPT0gIkNpcmNsZSIgdGhlbgoJCQlsb2NhbCBjaXJjbGVPYmogPSAoewoJCQkJUmFkaXVzID0gMTUwLAoJCQkJUG9zaXRpb24gPSBWZWN0b3IyLnplcm8sCgkJCQlUaGlja25lc3MgPSAuNywKCQkJCUZpbGxlZCA9IGZhbHNlCgkJCX0gKyBiYXNlRHJhd2luZ09iaikKCgkJCWxvY2FsIGNpcmNsZUZyYW1lLCB1aUNvcm5lciwgdWlTdHJva2UgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIiksIEluc3RhbmNlLm5ldygiVUlDb3JuZXIiKSwgSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpCgkJCWNpcmNsZUZyYW1lLk5hbWUgPSBkcmF3aW5nSW5kZXgKCQkJY2lyY2xlRnJhbWUuQW5jaG9yUG9pbnQgPSAoVmVjdG9yMi5vbmUgKiAuNSkKCQkJY2lyY2xlRnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMAoKCQkJY2lyY2xlRnJhbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IChpZiBjaXJjbGVPYmouRmlsbGVkIHRoZW4gY29udmVydFRyYW5zcGFyZW5jeShjaXJjbGVPYmouVHJhbnNwYXJlbmN5KSBlbHNlIDEpCgkJCWNpcmNsZUZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBjaXJjbGVPYmouQ29sb3IKCQkJY2lyY2xlRnJhbWUuVmlzaWJsZSA9IGNpcmNsZU9iai5WaXNpYmxlCgkJCWNpcmNsZUZyYW1lLlpJbmRleCA9IGNpcmNsZU9iai5aSW5kZXgKCgkJCXVpQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDEsIDApCgkJCWNpcmNsZUZyYW1lLlNpemUgPSBVRGltMi5mcm9tT2Zmc2V0KGNpcmNsZU9iai5SYWRpdXMsIGNpcmNsZU9iai5SYWRpdXMpCgoJCQl1aVN0cm9rZS5UaGlja25lc3MgPSBjaXJjbGVPYmouVGhpY2tuZXNzCgkJCXVpU3Ryb2tlLkVuYWJsZWQgPSBub3QgY2lyY2xlT2JqLkZpbGxlZAoJCQl1aVN0cm9rZS5BcHBseVN0cm9rZU1vZGUgPSBFbnVtLkFwcGx5U3Ryb2tlTW9kZS5Cb3JkZXIKCgkJCWNpcmNsZUZyYW1lLlBhcmVudCwgdWlDb3JuZXIuUGFyZW50LCB1aVN0cm9rZS5QYXJlbnQgPSBkcmF3aW5nVUksIGNpcmNsZUZyYW1lLCBjaXJjbGVGcmFtZQoJCQlsb2NhbCBicyA9IHRhYmxlLmNyZWF0ZSgwKQoJCQl0YWJsZS5pbnNlcnQoZHJhd2luZ3MsYnMpCgkJCXJldHVybiBzZXRtZXRhdGFibGUoYnMsIHsKCQkJCV9fbmV3aW5kZXggPSBmdW5jdGlvbihfLCBpbmRleCwgdmFsdWUpCgkJCQkJaWYgdHlwZW9mKGNpcmNsZU9ialtpbmRleF0pID09ICJuaWwiIHRoZW4gcmV0dXJuIGVuZAoKCQkJCQlpZiBpbmRleCA9PSAiUmFkaXVzIiB0aGVuCgkJCQkJCWxvY2FsIHJhZGl1cyA9IHZhbHVlICogMgoJCQkJCQljaXJjbGVGcmFtZS5TaXplID0gVURpbTIuZnJvbU9mZnNldChyYWRpdXMsIHJhZGl1cykKCQkJCQllbHNlaWYgaW5kZXggPT0gIlBvc2l0aW9uIiB0aGVuCgkJCQkJCWNpcmNsZUZyYW1lLlBvc2l0aW9uID0gVURpbTIuZnJvbU9mZnNldCh2YWx1ZS5YLCB2YWx1ZS5ZKQoJCQkJCWVsc2VpZiBpbmRleCA9PSAiVGhpY2tuZXNzIiB0aGVuCgkJCQkJCXZhbHVlID0gbWF0aC5jbGFtcCh2YWx1ZSwgLjYsIDB4N2ZmZmZmZmYpCgkJCQkJCXVpU3Ryb2tlLlRoaWNrbmVzcyA9IHZhbHVlCgkJCQkJZWxzZWlmIGluZGV4ID09ICJGaWxsZWQiIHRoZW4KCQkJCQkJY2lyY2xlRnJhbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IChpZiB2YWx1ZSB0aGVuIGNvbnZlcnRUcmFuc3BhcmVuY3koY2lyY2xlT2JqLlRyYW5zcGFyZW5jeSkgZWxzZSAxKQoJCQkJCQl1aVN0cm9rZS5FbmFibGVkID0gbm90IHZhbHVlCgkJCQkJZWxzZWlmIGluZGV4ID09ICJWaXNpYmxlIiB0aGVuCgkJCQkJCWNpcmNsZUZyYW1lLlZpc2libGUgPSB2YWx1ZQoJCQkJCWVsc2VpZiBpbmRleCA9PSAiWkluZGV4IiB0aGVuCgkJCQkJCWNpcmNsZUZyYW1lLlpJbmRleCA9IHZhbHVlCgkJCQkJZWxzZWlmIGluZGV4ID09ICJUcmFuc3BhcmVuY3kiIHRoZW4KCQkJCQkJbG9jYWwgdHJhbnNwYXJlbmN5ID0gY29udmVydFRyYW5zcGFyZW5jeSh2YWx1ZSkKCgkJCQkJCWNpcmNsZUZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAoaWYgY2lyY2xlT2JqLkZpbGxlZCB0aGVuIHRyYW5zcGFyZW5jeSBlbHNlIDEpCgkJCQkJCXVpU3Ryb2tlLlRyYW5zcGFyZW5jeSA9IHRyYW5zcGFyZW5jeQoJCQkJCWVsc2VpZiBpbmRleCA9PSAiQ29sb3IiIHRoZW4KCQkJCQkJY2lyY2xlRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IHZhbHVlCgkJCQkJCXVpU3Ryb2tlLkNvbG9yID0gdmFsdWUKCQkJCQllbmQKCQkJCQljaXJjbGVPYmpbaW5kZXhdID0gdmFsdWUKCQkJCWVuZCwKCQkJCV9faW5kZXggPSBmdW5jdGlvbihzZWxmLCBpbmRleCkKCQkJCQlpZiBpbmRleCA9PSAiUmVtb3ZlIiBvciBpbmRleCA9PSAiRGVzdHJveSIgdGhlbgoJCQkJCQlyZXR1cm4gZnVuY3Rpb24oKQoJCQkJCQkJY2lyY2xlRnJhbWU6RGVzdHJveSgpCgkJCQkJCQljaXJjbGVPYmouUmVtb3ZlKHNlbGYpCgkJCQkJCQlyZXR1cm4gY2lyY2xlT2JqOlJlbW92ZSgpCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJCXJldHVybiBjaXJjbGVPYmpbaW5kZXhdCgkJCQllbmQKCQkJfSkKCQllbHNlaWYgZHJhd2luZ1R5cGUgPT0gIlNxdWFyZSIgdGhlbgoJCQlsb2NhbCBzcXVhcmVPYmogPSAoewoJCQkJU2l6ZSA9IFZlY3RvcjIuemVybywKCQkJCVBvc2l0aW9uID0gVmVjdG9yMi56ZXJvLAoJCQkJVGhpY2tuZXNzID0gLjcsCgkJCQlGaWxsZWQgPSBmYWxzZQoJCQl9ICsgYmFzZURyYXdpbmdPYmopCgoJCQlsb2NhbCBzcXVhcmVGcmFtZSwgdWlTdHJva2UgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIiksIEluc3RhbmNlLm5ldygiVUlTdHJva2UiKQoJCQlzcXVhcmVGcmFtZS5OYW1lID0gZHJhd2luZ0luZGV4CgkJCXNxdWFyZUZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDAKCgkJCXNxdWFyZUZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAoaWYgc3F1YXJlT2JqLkZpbGxlZCB0aGVuIGNvbnZlcnRUcmFuc3BhcmVuY3koc3F1YXJlT2JqLlRyYW5zcGFyZW5jeSkgZWxzZSAxKQoJCQlzcXVhcmVGcmFtZS5aSW5kZXggPSBzcXVhcmVPYmouWkluZGV4CgkJCXNxdWFyZUZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBzcXVhcmVPYmouQ29sb3IKCQkJc3F1YXJlRnJhbWUuVmlzaWJsZSA9IHNxdWFyZU9iai5WaXNpYmxlCgoJCQl1aVN0cm9rZS5UaGlja25lc3MgPSBzcXVhcmVPYmouVGhpY2tuZXNzCgkJCXVpU3Ryb2tlLkVuYWJsZWQgPSBub3Qgc3F1YXJlT2JqLkZpbGxlZAoJCQl1aVN0cm9rZS5MaW5lSm9pbk1vZGUgPSBFbnVtLkxpbmVKb2luTW9kZS5NaXRlcgoKCQkJc3F1YXJlRnJhbWUuUGFyZW50LCB1aVN0cm9rZS5QYXJlbnQgPSBkcmF3aW5nVUksIHNxdWFyZUZyYW1lCgkJCWxvY2FsIGJzID0gdGFibGUuY3JlYXRlKDApCgkJCXRhYmxlLmluc2VydChkcmF3aW5ncyxicykKCQkJcmV0dXJuIHNldG1ldGF0YWJsZShicywgewoJCQkJX19uZXdpbmRleCA9IGZ1bmN0aW9uKF8sIGluZGV4LCB2YWx1ZSkKCQkJCQlpZiB0eXBlb2Yoc3F1YXJlT2JqW2luZGV4XSkgPT0gIm5pbCIgdGhlbiByZXR1cm4gZW5kCgoJCQkJCWlmIGluZGV4ID09ICJTaXplIiB0aGVuCgkJCQkJCXNxdWFyZUZyYW1lLlNpemUgPSBVRGltMi5mcm9tT2Zmc2V0KHZhbHVlLlgsIHZhbHVlLlkpCgkJCQkJZWxzZWlmIGluZGV4ID09ICJQb3NpdGlvbiIgdGhlbgoJCQkJCQlzcXVhcmVGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLmZyb21PZmZzZXQodmFsdWUuWCwgdmFsdWUuWSkKCQkJCQllbHNlaWYgaW5kZXggPT0gIlRoaWNrbmVzcyIgdGhlbgoJCQkJCQl2YWx1ZSA9IG1hdGguY2xhbXAodmFsdWUsIDAuNiwgMHg3ZmZmZmZmZikKCQkJCQkJdWlTdHJva2UuVGhpY2tuZXNzID0gdmFsdWUKCQkJCQllbHNlaWYgaW5kZXggPT0gIkZpbGxlZCIgdGhlbgoJCQkJCQlzcXVhcmVGcmFtZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gKGlmIHZhbHVlIHRoZW4gY29udmVydFRyYW5zcGFyZW5jeShzcXVhcmVPYmouVHJhbnNwYXJlbmN5KSBlbHNlIDEpCgkJCQkJCXVpU3Ryb2tlLkVuYWJsZWQgPSBub3QgdmFsdWUKCQkJCQllbHNlaWYgaW5kZXggPT0gIlZpc2libGUiIHRoZW4KCQkJCQkJc3F1YXJlRnJhbWUuVmlzaWJsZSA9IHZhbHVlCgkJCQkJZWxzZWlmIGluZGV4ID09ICJaSW5kZXgiIHRoZW4KCQkJCQkJc3F1YXJlRnJhbWUuWkluZGV4ID0gdmFsdWUKCQkJCQllbHNlaWYgaW5kZXggPT0gIlRyYW5zcGFyZW5jeSIgdGhlbgoJCQkJCQlsb2NhbCB0cmFuc3BhcmVuY3kgPSBjb252ZXJ0VHJhbnNwYXJlbmN5KHZhbHVlKQoKCQkJCQkJc3F1YXJlRnJhbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IChpZiBzcXVhcmVPYmouRmlsbGVkIHRoZW4gdHJhbnNwYXJlbmN5IGVsc2UgMSkKCQkJCQkJdWlTdHJva2UuVHJhbnNwYXJlbmN5ID0gdHJhbnNwYXJlbmN5CgkJCQkJZWxzZWlmIGluZGV4ID09ICJDb2xvciIgdGhlbgoJCQkJCQl1aVN0cm9rZS5Db2xvciA9IHZhbHVlCgkJCQkJCXNxdWFyZUZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSB2YWx1ZQoJCQkJCWVuZAoJCQkJCXNxdWFyZU9ialtpbmRleF0gPSB2YWx1ZQoJCQkJZW5kLAoJCQkJX19pbmRleCA9IGZ1bmN0aW9uKHNlbGYsIGluZGV4KQoJCQkJCWlmIGluZGV4ID09ICJSZW1vdmUiIG9yIGluZGV4ID09ICJEZXN0cm95IiB0aGVuCgkJCQkJCXJldHVybiBmdW5jdGlvbigpCgkJCQkJCQlzcXVhcmVGcmFtZTpEZXN0cm95KCkKCQkJCQkJCXNxdWFyZU9iai5SZW1vdmUoc2VsZikKCQkJCQkJCXJldHVybiBzcXVhcmVPYmo6UmVtb3ZlKCkKCQkJCQkJZW5kCgkJCQkJZW5kCgkJCQkJcmV0dXJuIHNxdWFyZU9ialtpbmRleF0KCQkJCWVuZAoJCQl9KQoJCWVsc2VpZiBkcmF3aW5nVHlwZSA9PSAiSW1hZ2UiIHRoZW4KCQkJbG9jYWwgaW1hZ2VPYmogPSAoewoJCQkJRGF0YSA9ICIiLAoJCQkJRGF0YVVSTCA9ICJyYnhhc3NldGlkOi8vMCIsCgkJCQlTaXplID0gVmVjdG9yMi56ZXJvLAoJCQkJUG9zaXRpb24gPSBWZWN0b3IyLnplcm8KCQkJfSArIGJhc2VEcmF3aW5nT2JqKQoKCQkJbG9jYWwgaW1hZ2VGcmFtZSA9IEluc3RhbmNlLm5ldygiSW1hZ2VMYWJlbCIpCgkJCWltYWdlRnJhbWUuTmFtZSA9IGRyYXdpbmdJbmRleAoJCQlpbWFnZUZyYW1lLkJvcmRlclNpemVQaXhlbCA9IDAKCQkJaW1hZ2VGcmFtZS5TY2FsZVR5cGUgPSBFbnVtLlNjYWxlVHlwZS5TdHJldGNoCgkJCWltYWdlRnJhbWUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCgkJCWltYWdlRnJhbWUuVmlzaWJsZSA9IGltYWdlT2JqLlZpc2libGUKCQkJaW1hZ2VGcmFtZS5aSW5kZXggPSBpbWFnZU9iai5aSW5kZXgKCQkJaW1hZ2VGcmFtZS5JbWFnZVRyYW5zcGFyZW5jeSA9IGNvbnZlcnRUcmFuc3BhcmVuY3koaW1hZ2VPYmouVHJhbnNwYXJlbmN5KQoJCQlpbWFnZUZyYW1lLkltYWdlQ29sb3IzID0gaW1hZ2VPYmouQ29sb3IKCgkJCWltYWdlRnJhbWUuUGFyZW50ID0gZHJhd2luZ1VJCgkJCWxvY2FsIGJzID0gdGFibGUuY3JlYXRlKDApCgkJCXRhYmxlLmluc2VydChkcmF3aW5ncyxicykKCQkJcmV0dXJuIHNldG1ldGF0YWJsZShicywgewoJCQkJX19uZXdpbmRleCA9IGZ1bmN0aW9uKF8sIGluZGV4LCB2YWx1ZSkKCQkJCQlpZiB0eXBlb2YoaW1hZ2VPYmpbaW5kZXhdKSA9PSAibmlsIiB0aGVuIHJldHVybiBlbmQKCgkJCQkJaWYgaW5kZXggPT0gIkRhdGEiIHRoZW4KCQkJCQkJLS0gbGF0ZXIKCQkJCQllbHNlaWYgaW5kZXggPT0gIkRhdGFVUkwiIHRoZW4gLS0gdGVtcG9yYXJ5IHByb3BlcnR5CgkJCQkJCWltYWdlRnJhbWUuSW1hZ2UgPSB2YWx1ZQoJCQkJCWVsc2VpZiBpbmRleCA9PSAiU2l6ZSIgdGhlbgoJCQkJCQlpbWFnZUZyYW1lLlNpemUgPSBVRGltMi5mcm9tT2Zmc2V0KHZhbHVlLlgsIHZhbHVlLlkpCgkJCQkJZWxzZWlmIGluZGV4ID09ICJQb3NpdGlvbiIgdGhlbgoJCQkJCQlpbWFnZUZyYW1lLlBvc2l0aW9uID0gVURpbTIuZnJvbU9mZnNldCh2YWx1ZS5YLCB2YWx1ZS5ZKQoJCQkJCWVsc2VpZiBpbmRleCA9PSAiVmlzaWJsZSIgdGhlbgoJCQkJCQlpbWFnZUZyYW1lLlZpc2libGUgPSB2YWx1ZQoJCQkJCWVsc2VpZiBpbmRleCA9PSAiWkluZGV4IiB0aGVuCgkJCQkJCWltYWdlRnJhbWUuWkluZGV4ID0gdmFsdWUKCQkJCQllbHNlaWYgaW5kZXggPT0gIlRyYW5zcGFyZW5jeSIgdGhlbgoJCQkJCQlpbWFnZUZyYW1lLkltYWdlVHJhbnNwYXJlbmN5ID0gY29udmVydFRyYW5zcGFyZW5jeSh2YWx1ZSkKCQkJCQllbHNlaWYgaW5kZXggPT0gIkNvbG9yIiB0aGVuCgkJCQkJCWltYWdlRnJhbWUuSW1hZ2VDb2xvcjMgPSB2YWx1ZQoJCQkJCWVuZAoJCQkJCWltYWdlT2JqW2luZGV4XSA9IHZhbHVlCgkJCQllbmQsCgkJCQlfX2luZGV4ID0gZnVuY3Rpb24oc2VsZiwgaW5kZXgpCgkJCQkJaWYgaW5kZXggPT0gIlJlbW92ZSIgb3IgaW5kZXggPT0gIkRlc3Ryb3kiIHRoZW4KCQkJCQkJcmV0dXJuIGZ1bmN0aW9uKCkKCQkJCQkJCWltYWdlRnJhbWU6RGVzdHJveSgpCgkJCQkJCQlpbWFnZU9iai5SZW1vdmUoc2VsZikKCQkJCQkJCXJldHVybiBpbWFnZU9iajpSZW1vdmUoKQoJCQkJCQllbmQKCQkJCQllbHNlaWYgaW5kZXggPT0gIkRhdGEiIHRoZW4KCQkJCQkJcmV0dXJuIG5pbCAtLSBUT0RPOiBhZGQgZXJyb3IgaGVyZQoJCQkJCWVuZAoJCQkJCXJldHVybiBpbWFnZU9ialtpbmRleF0KCQkJCWVuZAoJCQl9KQoJCWVsc2VpZiBkcmF3aW5nVHlwZSA9PSAiUXVhZCIgdGhlbgoJCQlsb2NhbCBxdWFkT2JqID0gKHsKCQkJCVBvaW50QSA9IFZlY3RvcjIuemVybywKCQkJCVBvaW50QiA9IFZlY3RvcjIuemVybywKCQkJCVBvaW50QyA9IFZlY3RvcjIuemVybywKCQkJCVBvaW50RCA9IFZlY3RvcjMuemVybywKCQkJCVRoaWNrbmVzcyA9IDEsCgkJCQlGaWxsZWQgPSBmYWxzZQoJCQl9ICsgYmFzZURyYXdpbmdPYmopCgoJCQlsb2NhbCBfbGluZVBvaW50cyA9IHRhYmxlLmNyZWF0ZSgwKQoJCQlfbGluZVBvaW50cy5BID0gRHJhd2luZ0xpYi5uZXcoIkxpbmUiKQoJCQlfbGluZVBvaW50cy5CID0gRHJhd2luZ0xpYi5uZXcoIkxpbmUiKQoJCQlfbGluZVBvaW50cy5DID0gRHJhd2luZ0xpYi5uZXcoIkxpbmUiKQoJCQlfbGluZVBvaW50cy5EID0gRHJhd2luZ0xpYi5uZXcoIkxpbmUiKQoJCQlsb2NhbCBicyA9IHRhYmxlLmNyZWF0ZSgwKQoJCQl0YWJsZS5pbnNlcnQoZHJhd2luZ3MsYnMpCgkJCXJldHVybiBzZXRtZXRhdGFibGUoYnMsIHsKCQkJCV9fbmV3aW5kZXggPSBmdW5jdGlvbihfLCBpbmRleCwgdmFsdWUpCgkJCQkJaWYgdHlwZW9mKHF1YWRPYmpbaW5kZXhdKSA9PSAibmlsIiB0aGVuIHJldHVybiBlbmQKCgkJCQkJaWYgaW5kZXggPT0gIlBvaW50QSIgdGhlbgoJCQkJCQlfbGluZVBvaW50cy5BLkZyb20gPSB2YWx1ZQoJCQkJCQlfbGluZVBvaW50cy5CLlRvID0gdmFsdWUKCQkJCQllbHNlaWYgaW5kZXggPT0gIlBvaW50QiIgdGhlbgoJCQkJCQlfbGluZVBvaW50cy5CLkZyb20gPSB2YWx1ZQoJCQkJCQlfbGluZVBvaW50cy5DLlRvID0gdmFsdWUKCQkJCQllbHNlaWYgaW5kZXggPT0gIlBvaW50QyIgdGhlbgoJCQkJCQlfbGluZVBvaW50cy5DLkZyb20gPSB2YWx1ZQoJCQkJCQlfbGluZVBvaW50cy5ELlRvID0gdmFsdWUKCQkJCQllbHNlaWYgaW5kZXggPT0gIlBvaW50RCIgdGhlbgoJCQkJCQlfbGluZVBvaW50cy5ELkZyb20gPSB2YWx1ZQoJCQkJCQlfbGluZVBvaW50cy5BLlRvID0gdmFsdWUKCQkJCQllbHNlaWYgKGluZGV4ID09ICJUaGlja25lc3MiIG9yIGluZGV4ID09ICJWaXNpYmxlIiBvciBpbmRleCA9PSAiQ29sb3IiIG9yIGluZGV4ID09ICJaSW5kZXgiKSB0aGVuCgkJCQkJCWZvciBfLCBsaW5lUG9pbnQgaW4gX2xpbmVQb2ludHMgZG8KCQkJCQkJCWxpbmVQb2ludFtpbmRleF0gPSB2YWx1ZQoJCQkJCQllbmQKCQkJCQllbHNlaWYgaW5kZXggPT0gIkZpbGxlZCIgdGhlbgoJCQkJCQktLSBsYXRlcgoJCQkJCWVuZAoJCQkJCXF1YWRPYmpbaW5kZXhdID0gdmFsdWUKCQkJCWVuZCwKCQkJCV9faW5kZXggPSBmdW5jdGlvbihzZWxmLCBpbmRleCkKCQkJCQlpZiBpbmRleCA9PSAiUmVtb3ZlIiB0aGVuCgkJCQkJCXJldHVybiBmdW5jdGlvbigpCgkJCQkJCQlmb3IgXywgbGluZVBvaW50IGluIF9saW5lUG9pbnRzIGRvCgkJCQkJCQkJbGluZVBvaW50OlJlbW92ZSgpCgkJCQkJCQllbmQKCgkJCQkJCQlxdWFkT2JqLlJlbW92ZShzZWxmKQoJCQkJCQkJcmV0dXJuIHF1YWRPYmo6UmVtb3ZlKCkKCQkJCQkJZW5kCgkJCQkJZW5kCgkJCQkJaWYgaW5kZXggPT0gIkRlc3Ryb3kiIHRoZW4KCQkJCQkJcmV0dXJuIGZ1bmN0aW9uKCkKCQkJCQkJCWZvciBfLCBsaW5lUG9pbnQgaW4gX2xpbmVQb2ludHMgZG8KCQkJCQkJCQlsaW5lUG9pbnQ6UmVtb3ZlKCkKCQkJCQkJCWVuZAoKCQkJCQkJCXF1YWRPYmouUmVtb3ZlKHNlbGYpCgkJCQkJCQlyZXR1cm4gcXVhZE9iajpSZW1vdmUoKQoJCQkJCQllbmQKCQkJCQllbmQKCQkJCQlyZXR1cm4gcXVhZE9ialtpbmRleF0KCQkJCWVuZAoJCQl9KQoJCWVsc2VpZiBkcmF3aW5nVHlwZSA9PSAiVHJpYW5nbGUiIHRoZW4KCQkJbG9jYWwgdHJpYW5nbGVPYmogPSAoewoJCQkJUG9pbnRBID0gVmVjdG9yMi56ZXJvLAoJCQkJUG9pbnRCID0gVmVjdG9yMi56ZXJvLAoJCQkJUG9pbnRDID0gVmVjdG9yMi56ZXJvLAoJCQkJVGhpY2tuZXNzID0gMSwKCQkJCUZpbGxlZCA9IGZhbHNlCgkJCX0gKyBiYXNlRHJhd2luZ09iaikKCgkJCWxvY2FsIF9saW5lUG9pbnRzID0gdGFibGUuY3JlYXRlKDApCgkJCV9saW5lUG9pbnRzLkEgPSBEcmF3aW5nTGliLm5ldygiTGluZSIpCgkJCV9saW5lUG9pbnRzLkIgPSBEcmF3aW5nTGliLm5ldygiTGluZSIpCgkJCV9saW5lUG9pbnRzLkMgPSBEcmF3aW5nTGliLm5ldygiTGluZSIpCgkJCWxvY2FsIGJzID0gdGFibGUuY3JlYXRlKDApCgkJCXRhYmxlLmluc2VydChkcmF3aW5ncyxicykKCQkJcmV0dXJuIHNldG1ldGF0YWJsZShicywgewoJCQkJX19uZXdpbmRleCA9IGZ1bmN0aW9uKF8sIGluZGV4LCB2YWx1ZSkKCQkJCQlpZiB0eXBlb2YodHJpYW5nbGVPYmpbaW5kZXhdKSA9PSAibmlsIiB0aGVuIHJldHVybiBlbmQKCgkJCQkJaWYgaW5kZXggPT0gIlBvaW50QSIgdGhlbgoJCQkJCQlfbGluZVBvaW50cy5BLkZyb20gPSB2YWx1ZQoJCQkJCQlfbGluZVBvaW50cy5CLlRvID0gdmFsdWUKCQkJCQllbHNlaWYgaW5kZXggPT0gIlBvaW50QiIgdGhlbgoJCQkJCQlfbGluZVBvaW50cy5CLkZyb20gPSB2YWx1ZQoJCQkJCQlfbGluZVBvaW50cy5DLlRvID0gdmFsdWUKCQkJCQllbHNlaWYgaW5kZXggPT0gIlBvaW50QyIgdGhlbgoJCQkJCQlfbGluZVBvaW50cy5DLkZyb20gPSB2YWx1ZQoJCQkJCQlfbGluZVBvaW50cy5BLlRvID0gdmFsdWUKCQkJCQllbHNlaWYgKGluZGV4ID09ICJUaGlja25lc3MiIG9yIGluZGV4ID09ICJWaXNpYmxlIiBvciBpbmRleCA9PSAiQ29sb3IiIG9yIGluZGV4ID09ICJaSW5kZXgiKSB0aGVuCgkJCQkJCWZvciBfLCBsaW5lUG9pbnQgaW4gX2xpbmVQb2ludHMgZG8KCQkJCQkJCWxpbmVQb2ludFtpbmRleF0gPSB2YWx1ZQoJCQkJCQllbmQKCQkJCQllbHNlaWYgaW5kZXggPT0gIkZpbGxlZCIgdGhlbgoJCQkJCQktLSBsYXRlcgoJCQkJCWVuZAoJCQkJCXRyaWFuZ2xlT2JqW2luZGV4XSA9IHZhbHVlCgkJCQllbmQsCgkJCQlfX2luZGV4ID0gZnVuY3Rpb24oc2VsZiwgaW5kZXgpCgkJCQkJaWYgaW5kZXggPT0gIlJlbW92ZSIgdGhlbgoJCQkJCQlyZXR1cm4gZnVuY3Rpb24oKQoJCQkJCQkJZm9yIF8sIGxpbmVQb2ludCBpbiBfbGluZVBvaW50cyBkbwoJCQkJCQkJCWxpbmVQb2ludDpSZW1vdmUoKQoJCQkJCQkJZW5kCgoJCQkJCQkJdHJpYW5nbGVPYmouUmVtb3ZlKHNlbGYpCgkJCQkJCQlyZXR1cm4gdHJpYW5nbGVPYmo6UmVtb3ZlKCkKCQkJCQkJZW5kCgkJCQkJZW5kCgkJCQkJaWYgaW5kZXggPT0gIkRlc3Ryb3kiIHRoZW4KCQkJCQkJcmV0dXJuIGZ1bmN0aW9uKCkKCQkJCQkJCWZvciBfLCBsaW5lUG9pbnQgaW4gX2xpbmVQb2ludHMgZG8KCQkJCQkJCQlsaW5lUG9pbnQ6UmVtb3ZlKCkKCQkJCQkJCWVuZAoKCQkJCQkJCXRyaWFuZ2xlT2JqLlJlbW92ZShzZWxmKQoJCQkJCQkJcmV0dXJuIHRyaWFuZ2xlT2JqOlJlbW92ZSgpCgkJCQkJCWVuZAoJCQkJCWVuZAoJCQkJCXJldHVybiB0cmlhbmdsZU9ialtpbmRleF0KCQkJCWVuZAoJCQl9KQoJCWVuZAoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuRHJhd2luZyA9IERyYXdpbmdMaWIKCgllbnZpcm9ubWVudC5nbG9iYWwuZ2V0Z2VudiA9IGZ1bmN0aW9uKCkKCQlyZXR1cm4gY2xvbmVkX2Vudmlyb25tZW50Lmdsb2JhbAoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuZ2V0cmVudiA9IGZ1bmN0aW9uKCkKCQlyZXR1cm4gZW52aXJvbm1lbnQucm9ibG94CgllbmQKCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0LmJhc2U2NGVuY29kZSA9IGZ1bmN0aW9uKGRhdGEpCgkJYXNzZXJ0KGRhdGEsICJNaXNzaW5nICMxIGFyZ3VtZW50IikKCQlhc3NlcnQodHlwZW9mKGRhdGEpID09ICJzdHJpbmciLCAiRXhwZWN0ZWQgIzEgYXJndW1lbnQgdG8gYmUgc3RyaW5nLCBnb3QgIi4udHlwZW9mKGRhdGEpLi4gIiBpbnN0ZWFkIikKCgkJbG9jYWwgZW5jb2RlZCA9IHV0aWxzLmJhc2U2NF9lbmNvZGUoZGF0YSkKCgkJcmV0dXJuIGVuY29kZWQKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5jcnlwdC5iYXNlNjRkZWNvZGUgPSBmdW5jdGlvbihkYXRhKQoJCWFzc2VydChkYXRhLCAiTWlzc2luZyAjMSBhcmd1bWVudCIpCgkJYXNzZXJ0KHR5cGVvZihkYXRhKSA9PSAic3RyaW5nIiwgIkV4cGVjdGVkICMxIGFyZ3VtZW50IHRvIGJlIHN0cmluZywgZ290ICIuLnR5cGVvZihkYXRhKS4uICIgaW5zdGVhZCIpCgoJCWxvY2FsIGRlY29kZWQgPSB1dGlscy5iYXNlNjRfZGVjb2RlKGRhdGEpCgoJCXJldHVybiBkZWNvZGVkCgllbmQKCWVudmlyb25tZW50Lmdsb2JhbC5jcnlwdC5nZW5lcmF0ZWtleSA9IGZ1bmN0aW9uKG9wdGlvbmFsU2l6ZSkKIAkJbG9jYWwga2V5ID0gJycKIAkJbG9jYWwgYSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJwogCQlmb3IgaSA9IDEsIG9wdGlvbmFsU2l6ZSBvciAzMiBkbyBsb2NhbCBuID0gbWF0aC5yYW5kb20oMSwgI2EpIGtleSA9IGtleSAuLiBhOnN1YihuLCBuKSBlbmQKCQlyZXR1cm4gY3J5cHQuYmFzZTY0ZW5jb2RlKGtleSkKCWVuZAoJZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0LmdlbmVyYXRlYnl0ZXMgPSBmdW5jdGlvbihzaXplKQoJCWlmIHR5cGUoc2l6ZSkgfj0gJ251bWJlcicgdGhlbiByZXR1cm4gZXJyb3IoJ21pc3NpbmcgYXJndWVtZW50ICMxIHRvIFwnZ2VuZXJhdGVieXRlc1wnIChudW1iZXIgZXhwZWN0ZWQpJykgZW5kCgkJcmV0dXJuIGNyeXB0LmdlbmVyYXRla2V5KHNpemUpCgllbmQKCWxvY2FsIEhhc2hMaWIgPSBzZXRtZXRhdGFibGUoe30sIHsKCV9fbWV0YXRhYmxlID0gJ0hhc2hMaWIgLy8gUHJvdGVjdGVkJywKCV9faW5kZXggPSBmdW5jdGlvbihzZWxmLCBrZXkpIC0tIE1ha2UgaXQgd29yayBmb3IgYm90aCBfIGFuZCAtCgkJbG9jYWwgazEgPSBrZXk6Z3N1YignXycsICctJykKCQlsb2NhbCBrMiA9IGtleTpnc3ViKCclLScsICdfJykKCQlsb2NhbCBtMSwgbTIgPSBIYXNoW2sxXSwgSGFzaFtrMl0KCQlpZiBtMSB0aGVuIHJldHVybiBtMSBlbmQKCQlpZiBtMiB0aGVuIHJldHVybiBtMiBlbmQKCQlyZXR1cm4gcmF3Z2V0KHNlbGYsIGtleSkKCWVuZAp9KQoJZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0Lmhhc2ggPSBmdW5jdGlvbihkYXRhLCBhbGcpCgkJCWxvY2FsIHYxID0gSGFzaExpYlthbGddCgkJCWxvY2FsIHYyID0gSGFzaExpYltkYXRhXQoJCQlpZiBub3QgdjEgYW5kIG5vdCB2MiB0aGVuCgkJCQllcnJvcihzdHJpbmcuZm9ybWF0KCJObyBhbGdvcml0aG0gZm91bmQgd2l0aCBuYW1lICclcycgb3IgJyVzJyIsIGFsZywgZGF0YSkpCgkJCWVuZAoJCQlpZiB2MSB0aGVuCgkJCQlyZXR1cm4gdjEoZGF0YSkKCQkJZWxzZWlmIHYyIHRoZW4KCQkJCXJldHVybiB2MihhbGcpCgkJCWVuZAoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuY3J5cHQuZW5jcnlwdCA9IGZ1bmN0aW9uKGEsIGIpCglsb2NhbCByZXN1bHQgPSB7fQoJCWEgPSB0b3N0cmluZyhhKSBiID0gdG9zdHJpbmcoYikKCQlmb3IgaSA9IDEsICNhIGRvCgkJCWxvY2FsIGJ5dGUgPSBzdHJpbmcuYnl0ZShhLCBpKQoJCQlsb2NhbCBrZXlCeXRlID0gc3RyaW5nLmJ5dGUoYiwgKGkgLSAxKSAlICNiICsgMSkKCQkJdGFibGUuaW5zZXJ0KHJlc3VsdCwgc3RyaW5nLmNoYXIoYml0MzIuYnhvcihieXRlLCBrZXlCeXRlKSkpCgkJZW5kCgkJcmV0dXJuIHRhYmxlLmNvbmNhdChyZXN1bHQpCgllbmQKCWVudmlyb25tZW50Lmdsb2JhbC5jcnlwdC5kZWNyeXB0ID0gZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0LmVuY3J5cHQKCWVudmlyb25tZW50Lmdsb2JhbC5jcnlwdC5yYW5kb20gPSBmdW5jdGlvbihsZW4pCgkJcmV0dXJuIGNyeXB0LmdlbmVyYXRla2V5KGxlbikKCWVuZAoJZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0LmJhc2U2NC5lbmNvZGUgPSBlbnZpcm9ubWVudC5nbG9iYWwuY3J5cHQuYmFzZTY0ZW5jb2RlCgllbnZpcm9ubWVudC5nbG9iYWwuY3J5cHQuYmFzZTY0X2VuY29kZSA9IGVudmlyb25tZW50Lmdsb2JhbC5jcnlwdC5iYXNlNjRlbmNvZGUKCWVudmlyb25tZW50Lmdsb2JhbC5iYXNlNjQuZW5jb2RlID0gZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0LmJhc2U2NGVuY29kZQoJZW52aXJvbm1lbnQuZ2xvYmFsLmJhc2U2NGVuY29kZSA9IGVudmlyb25tZW50Lmdsb2JhbC5jcnlwdC5iYXNlNjRlbmNvZGUKCWVudmlyb25tZW50Lmdsb2JhbC5iYXNlNjRfZW5jb2RlID0gZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0LmJhc2U2NGVuY29kZQoJZW52aXJvbm1lbnQuZ2xvYmFsLnN5bi5jcnlwdC5iYXNlNjQuZW5jb2RlID0gZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0LmJhc2U2NGVuY29kZQoJZW52aXJvbm1lbnQuZ2xvYmFsLmZsdXh1cy5jcnlwdC5iYXNlNjRlbmNvZGUgPSBlbnZpcm9ubWVudC5nbG9iYWwuY3J5cHQuYmFzZTY0ZW5jb2RlCgkKCWVudmlyb25tZW50Lmdsb2JhbC5yY29uc29sZWNsZWFyID0gZnVuY3Rpb24oKQoJZW5kCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmNvbnNvbGVjbGVhciA9IGVudmlyb25tZW50Lmdsb2JhbC5yY29uc29sZWNsZWFyCgoJZW52aXJvbm1lbnQuZ2xvYmFsLnJjb25zb2xlY3JlYXRlID0gZnVuY3Rpb24oKQoJZW5kCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmNvbnNvbGVjcmVhdGUgPSBlbnZpcm9ubWVudC5nbG9iYWwucmNvbnNvbGVjbGVhcgoKCgllbnZpcm9ubWVudC5nbG9iYWwucmNvbnNvbGVkZXN0cm95ID0gZnVuY3Rpb24oKQoJZW5kCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmNvbnNvbGVkZXN0cm95ID0gZW52aXJvbm1lbnQuZ2xvYmFsLnJjb25zb2xlZGVzdHJveQoKCWVudmlyb25tZW50Lmdsb2JhbC5yY29uc29sZWlucHV0ID0gZnVuY3Rpb24oKQoJZW5kCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmNvbnNvbGVpbnB1dCA9IGVudmlyb25tZW50Lmdsb2JhbC5yY29uc29sZWlucHV0CgoJZW52aXJvbm1lbnQuZ2xvYmFsLnJjb25zb2xlcHJpbnQgPSBmdW5jdGlvbigpCgllbmQKCgllbnZpcm9ubWVudC5nbG9iYWwuY29uc29sZXByaW50ID0gZW52aXJvbm1lbnQuZ2xvYmFsLnJjb25zb2xlcHJpbnQKCgllbnZpcm9ubWVudC5nbG9iYWwucmNvbnNvbGVzZXR0aXRsZSA9IGZ1bmN0aW9uKCkKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5jb25zb2xlc2V0dGl0bGUgPSBlbnZpcm9ubWVudC5nbG9iYWwucmNvbnNvbGVzZXR0aXRsZQoJZW52aXJvbm1lbnQuZ2xvYmFsLnJjb25zb2xlbmFtZSA9IGVudmlyb25tZW50Lmdsb2JhbC5yY29uc29sZXNldHRpdGxlCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0LmJhc2U2NC5kZWNvZGUgPSBlbnZpcm9ubWVudC5nbG9iYWwuY3J5cHQuYmFzZTY0ZGVjb2RlCgllbnZpcm9ubWVudC5nbG9iYWwuY3J5cHQuYmFzZTY0X2RlY29kZSA9IGVudmlyb25tZW50Lmdsb2JhbC5jcnlwdC5iYXNlNjRkZWNvZGUKCWVudmlyb25tZW50Lmdsb2JhbC5iYXNlNjQuZGVjb2RlID0gZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0LmJhc2U2NGRlY29kZQoJZW52aXJvbm1lbnQuZ2xvYmFsLmJhc2U2NGRlY29kZSA9IGVudmlyb25tZW50Lmdsb2JhbC5jcnlwdC5iYXNlNjRkZWNvZGUKCWVudmlyb25tZW50Lmdsb2JhbC5iYXNlNjRfZGVjb2RlID0gZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0LmJhc2U2NGRlY29kZQoJZW52aXJvbm1lbnQuZ2xvYmFsLnN5bi5jcnlwdC5iYXNlNjQuZGVjb2RlID0gZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0LmJhc2U2NGRlY29kZQoJZW52aXJvbm1lbnQuZ2xvYmFsLmZsdXh1cy5jcnlwdC5iYXNlNjRlbmNvZGUgPSBlbnZpcm9ubWVudC5nbG9iYWwuY3J5cHQuYmFzZTY0ZW5jb2RlCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmlzcmVuZGVyb2JqID0gZnVuY3Rpb24oLi4uKQoJCWlmIHRhYmxlLmZpbmQoZHJhd2luZ3MsLi4uKSB0aGVuCgkJCXJldHVybiB0cnVlCgkJZWxzZQoJCQlyZXR1cm4gZmFsc2UKCQllbmQKCWVuZAoJZW52aXJvbm1lbnQuZ2xvYmFsLm5ld2NjbG9zdXJlID0gZnVuY3Rpb24oZnVuYykKCQlsb2NhbCBmdW5jMiA9IG5pbAoJCWZ1bmMyID0gZnVuY3Rpb24oLi4uKQoJCQllbnZpcm9ubWVudC5nbG9iYWxbZnVuY10gPSBjb3JvdXRpbmUud3JhcChmdW5jMikKCQkJcmV0dXJuIGZ1bmMoLi4uKQoJCWVuZAoJCWZ1bmMyID0gY29yb3V0aW5lLndyYXAoZnVuYzIpCgkJcmV0dXJuIGZ1bmMyCgllbmQKCWVudmlyb25tZW50Lmdsb2JhbC5wcmludGlkZW50aXR5ID0gZnVuY3Rpb24ocGhyYXNlKQoJCWxvY2FsIHBocmFzZSA9IHBocmFzZSBvciAiQ3VycmVudCBpZGVudGl0eSBpcyIKCQlwcmludChwaHJhc2UuLiAiICIuLiBpZGVudGl0eSkKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5nZXRyZW5kZXJwcm9wZXJ0eSA9IGZ1bmN0aW9uKGEsYikKCQlyZXR1cm4gYVtiXQoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuc2V0cmVuZGVycHJvcGVydHkgPSBmdW5jdGlvbihhLGIsYykKCQlhW2JdID0gYwoJZW5kCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmNsZWFyZHJhd2NhY2hlID0gZnVuY3Rpb24oKQoJCWZvciBfLCB2IGluIHBhaXJzKGdhbWU6R2V0RGVzY2VuZGFudHMoKSkgZG8KCQkJaWYgdi5QYXJlbnQgPT0gZHJhd2luZ1VJIHRoZW4KCQkJCXY6RGVzdHJveSgpCgkJCWVuZAoJCWVuZAoJCXJldHVybiB0cnVlCgllbmQKCgllbnZpcm9ubWVudC5nbG9iYWwuZ2V0c2NyaXB0aGFzaCA9IGZ1bmN0aW9uKHNjcmlwdCkKCQlhc3NlcnQodHlwZW9mKHNjcmlwdCkgPT0gIkluc3RhbmNlIiBhbmQgc2NyaXB0OklzQSgiTHVhU291cmNlQ29udGFpbmVyIiksICJJbnZhbGlkIGFyZ3VtZW50ICMxOiBFeHBlY3RlZCBMdWFTb3VyY2VDb250YWluZXIsIGdvdCAiLi4gdHlwZShzY3JpcHQpLCAwKQoJCXJldHVybiBzY3JpcHQ6R2V0SGFzaCgpCgllbmQKCgllbnZpcm9ubWVudC5nbG9iYWwuYmFzZTY0X2VuY29kZSA9IGVudmlyb25tZW50Lmdsb2JhbC5jcnlwdC5iYXNlNjRlbmNvZGUKCWVudmlyb25tZW50Lmdsb2JhbC5iYXNlNjRfZGVjb2RlID0gZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0LmJhc2U2NGRlY29kZQoKCWdldGZlbnYoKS5pZGVudGl0eSA9IDYgLS0gaW0gdHJ5IHRvIHNwb29mIG9rIHNpZ21hCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmlkZW50aWZ5ZXhlY3V0b3IgPSBmdW5jdGlvbigpCgkJcmV0dXJuICJCZXR0ZXJJbmNvZ25pdG8iLCBiaW5jb2d2ZXIoKQoJZW5kCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmdldHRocmVhZGlkZW50aXR5ID0gZnVuY3Rpb24oKQoJCXJldHVybiBpZGVudGl0eQoJZW5kCglsb2NhbCBEYXRhID0gZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKTpHZXRMb2NhbFBsYXllclRlbGVwb3J0RGF0YSgpCgkJbG9jYWwgVGVsZXBvcnREYXRhCgkJaWYgRGF0YSBhbmQgRGF0YS5NT1JFVU5DU0NSSVBUUVVFVUUgdGhlbgogCQkJVGVsZXBvcnREYXRhID0gRGF0YS5NT1JFVU5DU0NSSVBUUVVFVUUKCQllbmQKCQlpZiBUZWxlcG9ydERhdGEgdGhlbgogCQkJbG9jYWwgZnVuYyA9IGxvYWRzdHJpbmcoVGVsZXBvcnREYXRhKQogCQkJbG9jYWwgcywgZSA9IHBjYWxsKGZ1bmMpCiAJCQlpZiBub3QgcyB0aGVuIHRhc2suc3Bhd24oZXJyb3IsIGUpIGVuZAoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwucXVldWVfb25fdGVsZXBvcnQgPSBmdW5jdGlvbihzY3JpcHR0b2V4ZWMpCgkJbG9jYWwgbmV3VFBTZXJ2aWNlID0gewoJCV9faW5kZXggPSBmdW5jdGlvbihzZWxmLCBrZXkpCgkJaWYga2V5ID09ICdUZWxlcG9ydCcgdGhlbgoJCQlyZXR1cm4gZnVuY3Rpb24oZ2FtZUlkLCBwbGF5ZXIsIHRlbGVwb3J0RGF0YSwgbG9hZFNjcmVlbikKCQkJdGVsZXBvcnREYXRhID0ge3RlbGVwb3J0RGF0YSwgTU9SRVVOQ1NDUklQVFFVRVVFPXNjcmlwdHRvZXhlY30KCQkJcmV0dXJuIG9sZEdhbWU6R2V0U2VydmljZSgiVGVsZXBvcnRTZXJ2aWNlIik6VGVsZXBvcnQoZ2FtZUlkLCBwbGF5ZXIsIHRlbGVwb3J0RGF0YSwgbG9hZFNjcmVlbikKCQkJZW5kCgkJZW5kCgkJZW5kCgkJfQoJCWxvY2FsIGdhbWVNZXRhID0gewoJCV9faW5kZXggPSBmdW5jdGlvbihzZWxmLCBrZXkpCgkJCWlmIGtleSA9PSAnR2V0U2VydmljZScgdGhlbgoJCQlyZXR1cm4gZnVuY3Rpb24obmFtZSkKCQkJaWYgbmFtZSA9PSAnVGVsZXBvcnRTZXJ2aWNlJyB0aGVuIHJldHVybiBuZXdUUFNlcnZpY2UgZW5kCgkJCWVuZAoJCQllbHNlaWYga2V5ID09ICdUZWxlcG9ydFNlcnZpY2UnIHRoZW4gcmV0dXJuIG5ld1RQU2VydmljZSBlbmQKCQkJcmV0dXJuIGdhbWVba2V5XQoJCWVuZCwKCQlfX21ldGF0YWJsZSA9ICdUaGUgbWV0YXRhYmxlIGlzIHByb3RlY3RlZCcKCQl9CgkJZ2V0Z2VudigpLmdhbWUgPSBzZXRtZXRhdGFibGUoe30sIGdhbWVNZXRhKQoJCWVuZAoJCWVudmlyb25tZW50Lmdsb2JhbC5xdWV1ZW9udGVsZXBvcnQgPSBlbnZpcm9ubWVudC5nbG9iYWwucXVldWVfb25fdGVsZXBvcnQKCWVudmlyb25tZW50Lmdsb2JhbC5nZXRpZGVudGl0eSA9IGVudmlyb25tZW50Lmdsb2JhbC5nZXR0aHJlYWRpZGVudGl0eQoJZW52aXJvbm1lbnQuZ2xvYmFsLnN5bi5wcm90ZWN0X2d1aSA9IGZ1bmN0aW9uKGd1aSkKIAkJbmFtZXNbZ3VpXSA9IHtuYW1lPWd1aS5OYW1lLHBhcmVudD1ndWkuUGFyZW50fQogCQlwcm90ZWN0ZWR1aXNbZ3VpXSA9IGd1aQogCQlndWkuTmFtZSA9IGVudmlyb25tZW50Lmdsb2JhbC5jcnlwdC5yYW5kb20oNjQpIC0tIDY0IGJ5dGUgc3RyaW5nLCByZW1vdmVkIGhhc2hpbmcgY3V6IGl0cyB1c2VsZXNzIGxtYW8KIAkJZ3VpLlBhcmVudCA9IGdldGh1aSgpCgllbmQKCWVudmlyb25tZW50Lmdsb2JhbC5zeW4udW5wcm90ZWN0X2d1aSA9IGZ1bmN0aW9uKGd1aSkKIAlpZiBuYW1lc1tndWldIHRoZW4gZ3VpLk5hbWUgPSBuYW1lc1tndWldLm5hbWUgZ3VpLlBhcmVudCA9IG5hbWVzW2d1aV0ucGFyZW50IGVuZCBwcm90ZWN0ZWR1aXNbZ3VpXSA9IG5pbAoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuc3luLnByb3RlY3RndWkgPSBlbnZpcm9ubWVudC5nbG9iYWwuc3luLnByb3RlY3RfZ3VpCgllbnZpcm9ubWVudC5nbG9iYWwuc3luLnVucHJvdGVjdGd1aSA9IGVudmlyb25tZW50Lmdsb2JhbC5zeW4udW5wcm90ZWN0X2d1aQoJZW52aXJvbm1lbnQuZ2xvYmFsLmdldHRocmVhZGNvbnRleHQgPSBlbnZpcm9ubWVudC5nbG9iYWwuZ2V0dGhyZWFkaWRlbnRpdHkKCWVudmlyb25tZW50Lmdsb2JhbC5zeW4uZ2V0X3RocmVhZF9pZGVudGl0eSA9IGVudmlyb25tZW50Lmdsb2JhbC5nZXR0aHJlYWRpZGVudGl0eQoJZW52aXJvbm1lbnQuZ2xvYmFsLmdldF90aHJlYWRfaWRlbnRpdHkgPSBlbnZpcm9ubWVudC5nbG9iYWwuZ2V0dGhyZWFkaWRlbnRpdHkKCWVudmlyb25tZW50Lmdsb2JhbC5nZXRfdGhyZWFkX2NvbnRleHQgPSBlbnZpcm9ubWVudC5nbG9iYWwuZ2V0dGhyZWFkaWRlbnRpdHkKCWVudmlyb25tZW50Lmdsb2JhbC5nZXRfaWRlbnRpdHkgPSBlbnZpcm9ubWVudC5nbG9iYWwuZ2V0dGhyZWFkaWRlbnRpdHkKCWVudmlyb25tZW50Lmdsb2JhbC5zZXRzaW11bGF0aW9ucmFkaXVzID0gZnVuY3Rpb24oRGlzdGFuY2UsIE1heERpc3RhbmNlKQogCQlsb2NhbCBMb2NhbFBsYXllciA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpLkxvY2FsUGxheWVyCiAJCWFzc2VydCh0eXBlKERpc3RhbmNlKT09J251bWJlcicsJ0ludmFsaWQgYXJndWVtZW50ICMxIHRvIFwnc2V0c2ltdWxhdGlvbnJhZGl1c1wnLCBOdW1iZXIgZXhwZWN0ZWQgZ290ICcgLi4gdHlwZShEaXN0YW5jZSkpCiAJCUxvY2FsUGxheWVyLlNpbXVsYXRpb25SYWRpdXMgPSB0eXBlKERpc3RhbmNlKSA9PSAnbnVtYmVyJyBhbmQgRGlzdGFuY2Ugb3IgTG9jYWxQbGF5ZXIuU2ltdWxhdGlvblJhZGl1cwogCQlpZiBNYXhEaXN0YW5jZSB0aGVuCiAgCQkJYXNzZXJ0KHR5cGUoTWF4RGlzdGFuY2UpPT0nbnVtYmVyJywnSW52YWxpZCBhcmd1ZW1lbnQgIzIgdG8gXCdzZXRzaW11bGF0aW9ucmFkaXVzXCcsIE51bWJlciBleHBlY3RlZCBnb3QgJyAuLiB0eXBlKE1heERpc3RhbmNlKSkKICAJCQlMb2NhbFBsYXllci5NYXhTaW11bGF0aW9uRGlzdGFuY2UgPSBNYXhEaXN0YW5jZQogCQllbmQKCWVuZAoJZW52aXJvbm1lbnQuZ2xvYmFsLmdldGV4ZWN1dG9ybmFtZSA9IGZ1bmN0aW9uKCkKcmV0dXJuICJCZXR0ZXJJbmNvZ25pdG8iCmVuZAoJZW52aXJvbm1lbnQuZ2xvYmFsLml5ID0gZnVuY3Rpb24oKQogICAgaWYgSVlfTE9BREVEIGFuZCBub3QgX0cuSVlfREVCVUcgPT0gdHJ1ZSB0aGVuCiAgICAgIC0tIGVycm9yKCJJbmZpbml0ZSBZaWVsZCBpcyBhbHJlYWR5IHJ1bm5pbmchIiwgMCkKICAgICAgcmV0dXJuCiAgZW5kCiAgCiAgcGNhbGwoZnVuY3Rpb24oKSBnZXRnZW52KCkuSVlfTE9BREVEID0gdHJ1ZSBlbmQpCiAgCiAgbG9jYWwgY2xvbmVyZWYgPSBjbG9uZXJlZiBvciBmdW5jdGlvbihvKSByZXR1cm4gbyBlbmQKICBDT1JFR1VJID0gY2xvbmVyZWYoZ2FtZTpHZXRTZXJ2aWNlKCJDb3JlR3VpIikpCiAgUGxheWVycyA9IGNsb25lcmVmKGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpKQogIAogIGlmIG5vdCBnYW1lOklzTG9hZGVkKCkgdGhlbgogICAgICBsb2NhbCBub3RMb2FkZWQgPSBJbnN0YW5jZS5uZXcoIk1lc3NhZ2UiKQogICAgICBub3RMb2FkZWQuUGFyZW50ID0gQ09SRUdVSQogICAgICBub3RMb2FkZWQuVGV4dCA9ICJJbmZpbml0ZSBZaWVsZCBpcyB3YWl0aW5nIGZvciB0aGUgZ2FtZSB0byBsb2FkIgogICAgICBnYW1lLkxvYWRlZDpXYWl0KCkKICAgICAgbm90TG9hZGVkOkRlc3Ryb3koKQogIGVuZAogIAogIGN1cnJlbnRWZXJzaW9uID0gIjUuOS43IgogIAogIEhvbGRlciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogIFRpdGxlID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogIERhcmsgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICBDbWRiYXIgPSBJbnN0YW5jZS5uZXcoIlRleHRCb3giKQogIENNRHNGID0gSW5zdGFuY2UubmV3KCJTY3JvbGxpbmdGcmFtZSIpCiAgY21kTGlzdExheW91dCA9IEluc3RhbmNlLm5ldygiVUlMaXN0TGF5b3V0IikKICBTZXR0aW5nc0J1dHRvbiA9IEluc3RhbmNlLm5ldygiSW1hZ2VCdXR0b24iKQogIENvbG9yc0J1dHRvbiA9IEluc3RhbmNlLm5ldygiSW1hZ2VCdXR0b24iKQogIFNldHRpbmdzID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgUHJlZml4ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogIFByZWZpeEJveCA9IEluc3RhbmNlLm5ldygiVGV4dEJveCIpCiAgS2V5YmluZHMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgU3RheU9wZW4gPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgQnV0dG9uID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgT24gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogIFBvc2l0aW9ucyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICBFdmVudEJpbmQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgUGx1Z2lucyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICBFeGFtcGxlID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICBOb3RpZmljYXRpb24gPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICBUaXRsZV8yID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogIFRleHRfMiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICBDbG9zZUJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgQ2xvc2VJbWFnZSA9IEluc3RhbmNlLm5ldygiSW1hZ2VMYWJlbCIpCiAgUGluQnV0dG9uID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICBQaW5JbWFnZSA9IEluc3RhbmNlLm5ldygiSW1hZ2VMYWJlbCIpCiAgVG9vbHRpcCA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogIFRpdGxlXzMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgRGVzY3JpcHRpb24gPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgSW50cm9CYWNrZ3JvdW5kID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgTG9nbyA9IEluc3RhbmNlLm5ldygiSW1hZ2VMYWJlbCIpCiAgQ3JlZGl0cyA9IEluc3RhbmNlLm5ldygiVGV4dEJveCIpCiAgS2V5YmluZHNGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogIENsb3NlID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICBBZGQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogIERlbGV0ZSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgSG9sZGVyXzIgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIikKICBFeGFtcGxlXzIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICBUZXh0XzMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgRGVsZXRlXzIgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogIEtleWJpbmRFZGl0b3IgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICBiYWNrZ3JvdW5kXzIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICBEYXJrXzMgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICBEaXJlY3Rpb25zID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogIEJpbmRUbyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgVHJpZ2dlckxhYmVsID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogIEJpbmRUcmlnZ2VyU2VsZWN0ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICBBZGRfMiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgVG9nZ2xlcyA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQogIENsaWNrVFAgID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogIFNlbGVjdCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgQ2xpY2tEZWxldGUgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgU2VsZWN0XzIgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogIENtZGJhcl8yID0gSW5zdGFuY2UubmV3KCJUZXh0Qm94IikKICBDbWRiYXJfMyA9IEluc3RhbmNlLm5ldygiVGV4dEJveCIpCiAgQ3JlYXRlVG9nZ2xlID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogIEJ1dHRvbl8yID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgT25fMiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgc2hhZG93XzIgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICBQb3B1cFRleHRfMiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICBFeGl0XzIgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogIEV4aXRJbWFnZV8yID0gSW5zdGFuY2UubmV3KCJJbWFnZUxhYmVsIikKICBQb3NpdGlvbnNGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogIENsb3NlXzMgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogIERlbGV0ZV81ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICBQYXJ0ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICBIb2xkZXJfNCA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQogIEV4YW1wbGVfNCA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogIFRleHRfNSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICBEZWxldGVfNiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgVFAgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogIEFsaWFzZXNGcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogIENsb3NlXzIgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogIERlbGV0ZV8zID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICBIb2xkZXJfMyA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQogIEV4YW1wbGVfMyA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogIFRleHRfNCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICBEZWxldGVfNCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgQWxpYXNlcyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICBQbHVnaW5zRnJhbWUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICBDbG9zZV80ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICBBZGRfMyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgSG9sZGVyXzUgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIikKICBFeGFtcGxlXzUgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICBUZXh0XzYgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgRGVsZXRlXzcgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogIFBsdWdpbkVkaXRvciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogIGJhY2tncm91bmRfMyA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogIERhcmtfMiA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogIEltZyA9IEluc3RhbmNlLm5ldygiSW1hZ2VCdXR0b24iKQogIEFkZFBsdWdpbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgRmlsZU5hbWUgPSBJbnN0YW5jZS5uZXcoIlRleHRCb3giKQogIEFib3V0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogIERpcmVjdGlvbnNfMiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICBzaGFkb3dfMyA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogIFBvcHVwVGV4dF8zID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogIEV4aXRfMyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgRXhpdEltYWdlXzMgPSBJbnN0YW5jZS5uZXcoIkltYWdlTGFiZWwiKQogIEFsaWFzSGludCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICBQbHVnaW5zSGludCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICBQb3NpdGlvbnNIaW50ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogIFRvUGFydEZyYW1lID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgYmFja2dyb3VuZF80ID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgQ2hvb3NlUGFydCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgQ29weVBhdGggPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogIERpcmVjdGlvbnNfMyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICBQYXRoID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogIHNoYWRvd180ID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgUG9wdXBUZXh0XzUgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgRXhpdF80ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICBFeGl0SW1hZ2VfNSA9IEluc3RhbmNlLm5ldygiSW1hZ2VMYWJlbCIpCiAgbG9ncyA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogIHNoYWRvdyA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogIEhpZGUgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogIEltYWdlTGFiZWwgPSBJbnN0YW5jZS5uZXcoIkltYWdlTGFiZWwiKQogIFBvcHVwVGV4dCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICBFeGl0ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICBJbWFnZUxhYmVsXzIgPSBJbnN0YW5jZS5uZXcoIkltYWdlTGFiZWwiKQogIGJhY2tncm91bmQgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICBjaGF0ID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgQ2xlYXIgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogIFNhdmVDaGF0bG9ncyA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgVG9nZ2xlID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICBzY3JvbGxfMiA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQogIGpvaW4gPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICBUb2dnbGVfMiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgQ2xlYXJfMiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgc2Nyb2xsXzMgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIikKICBsaXN0bGF5b3V0ID0gSW5zdGFuY2UubmV3KCJVSUxpc3RMYXlvdXQiLHNjcm9sbF8zKQogIHNlbGVjdENoYXQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogIHNlbGVjdEpvaW4gPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogIAogIGZ1bmN0aW9uIHJhbmRvbVN0cmluZygpCiAgICBsb2NhbCBsZW5ndGggPSBtYXRoLnJhbmRvbSgxMCwyMCkKICAgIGxvY2FsIGFycmF5ID0ge30KICAgIGZvciBpID0gMSwgbGVuZ3RoIGRvCiAgICAgIGFycmF5W2ldID0gc3RyaW5nLmNoYXIobWF0aC5yYW5kb20oMzIsIDEyNikpCiAgICBlbmQKICAgIHJldHVybiB0YWJsZS5jb25jYXQoYXJyYXkpCiAgZW5kCiAgCiAgUEFSRU5UID0gbmlsCiAgaWYgZ2V0X2hpZGRlbl9ndWkgb3IgZ2V0aHVpIHRoZW4KICAgIGxvY2FsIGhpZGRlblVJID0gZ2V0X2hpZGRlbl9ndWkgb3IgZ2V0aHVpCiAgICBsb2NhbCBNYWluID0gSW5zdGFuY2UubmV3KCJTY3JlZW5HdWkiKQogICAgTWFpbi5OYW1lID0gcmFuZG9tU3RyaW5nKCkKICAgIE1haW4uUGFyZW50ID0gaGlkZGVuVUkoKQogICAgUEFSRU5UID0gTWFpbgogIGVsc2VpZiAobm90IGlzX3Npcmh1cnRfY2xvc3VyZSkgYW5kIChzeW4gYW5kIHN5bi5wcm90ZWN0X2d1aSkgdGhlbgogICAgbG9jYWwgTWFpbiA9IEluc3RhbmNlLm5ldygiU2NyZWVuR3VpIikKICAgIE1haW4uTmFtZSA9IHJhbmRvbVN0cmluZygpCiAgICBzeW4ucHJvdGVjdF9ndWkoTWFpbikKICAgIE1haW4uUGFyZW50ID0gQ09SRUdVSQogICAgUEFSRU5UID0gTWFpbgogIGVsc2VpZiBDT1JFR1VJOkZpbmRGaXJzdENoaWxkKCdSb2Jsb3hHdWknKSB0aGVuCiAgICBQQVJFTlQgPSBDT1JFR1VJLlJvYmxveEd1aQogIGVsc2UKICAgIGxvY2FsIE1haW4gPSBJbnN0YW5jZS5uZXcoIlNjcmVlbkd1aSIpCiAgICBNYWluLk5hbWUgPSByYW5kb21TdHJpbmcoKQogICAgTWFpbi5QYXJlbnQgPSBDT1JFR1VJCiAgICBQQVJFTlQgPSBNYWluCiAgZW5kCiAgCiAgc2hhZGUxID0ge30KICBzaGFkZTIgPSB7fQogIHNoYWRlMyA9IHt9CiAgdGV4dDEgPSB7fQogIHRleHQyID0ge30KICBzY3JvbGwgPSB7fQogIAogIEhvbGRlci5OYW1lID0gcmFuZG9tU3RyaW5nKCkKICBIb2xkZXIuUGFyZW50ID0gUEFSRU5UCiAgSG9sZGVyLkFjdGl2ZSA9IHRydWUKICBIb2xkZXIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgSG9sZGVyLkJvcmRlclNpemVQaXhlbCA9IDAKICBIb2xkZXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTI1MCwgMSwgLTIyMCkKICBIb2xkZXIuU2l6ZSA9IFVEaW0yLm5ldygwLCAyNTAsIDAsIDIyMCkKICBIb2xkZXIuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLEhvbGRlcikKICAKICBUaXRsZS5OYW1lID0gIlRpdGxlIgogIFRpdGxlLlBhcmVudCA9IEhvbGRlcgogIFRpdGxlLkFjdGl2ZSA9IHRydWUKICBUaXRsZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzYsMzYsMzcpCiAgVGl0bGUuQm9yZGVyU2l6ZVBpeGVsID0gMAogIFRpdGxlLlNpemUgPSBVRGltMi5uZXcoMCwgMjUwLCAwLCAyMCkKICBUaXRsZS5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBUaXRsZS5UZXh0U2l6ZSA9IDE4CiAgVGl0bGUuVGV4dCA9ICJJbmZpbml0ZSBZaWVsZCBGRSB2IiAuLiBjdXJyZW50VmVyc2lvbgogIAogIGRvCiAgICBsb2NhbCBlbW9qaSA9ICh7CiAgICAgIFsiMDEgMDEiXSA9ICLwn46GIiwKICAgICAgWyhmdW5jdGlvbihZZWFyKQogICAgICAgIGxvY2FsIEEgPSBtYXRoLmZsb29yKFllYXIvMTAwKQogICAgICAgIGxvY2FsIEIgPSBtYXRoLmZsb29yKCgxMys4KkEpLzI1KQogICAgICAgIGxvY2FsIEMgPSAoMTUtQitBLW1hdGguZmxvb3IoQS80KSklMzAKICAgICAgICBsb2NhbCBEID0gKDQrQS1tYXRoLmZsb29yKEEvNCkpJTcKICAgICAgICBsb2NhbCBFID0gKDE5KihZZWFyJTE5KStDKSUzMAogICAgICAgIGxvY2FsIEYgPSAoMiooWWVhciU0KSs0KihZZWFyJTcpKzYqRStEKSU3CiAgICAgICAgbG9jYWwgRyA9ICgyMitFK0YpCiAgICAgICAgaWYgRSA9PSAyOSBhbmQgRiA9PSA2IHRoZW4KICAgICAgICAgIHJldHVybiAiMDQgMTkiCiAgICAgICAgZWxzZWlmIEUgPT0gMjggYW5kIEYgPT0gNiB0aGVuCiAgICAgICAgICByZXR1cm4gIjA0IDE4IgogICAgICAgIGVsc2VpZiAzMSA8IEcgdGhlbgogICAgICAgICAgcmV0dXJuICgiMDQgJTAyZCIpOmZvcm1hdChHLTMxKQogICAgICAgIGVuZAogICAgICAgIHJldHVybiAoIjAzICUwMmQiKTpmb3JtYXQoRykKICAgICAgZW5kKSh0b251bWJlcihvcy5kYXRlIiVZIikpXSA9ICLwn6WaIiwKICAgICAgWyIxMCAzMSJdID0gIvCfjoMiLAogICAgICBbIjEyIDI1Il0gPSAi8J+OhCIKICAgIH0pW29zLmRhdGUoIiVtICVkIildCiAgICBpZiBlbW9qaSB0aGVuCiAgICAgIFRpdGxlLlRleHQgPSAoIiVzICVzICVzIik6Zm9ybWF0KGVtb2ppLCBUaXRsZS5UZXh0LCBlbW9qaSkKICAgIGVuZAogIGVuZAogIAogIFRpdGxlLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgVGl0bGUuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUxLFRpdGxlKQogIHRhYmxlLmluc2VydCh0ZXh0MSxUaXRsZSkKICAKICBEYXJrLk5hbWUgPSAiRGFyayIKICBEYXJrLlBhcmVudCA9IEhvbGRlcgogIERhcmsuQWN0aXZlID0gdHJ1ZQogIERhcmsuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDM2LCAzNiwgMzcpCiAgRGFyay5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgRGFyay5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCA0NSkKICBEYXJrLlNpemUgPSBVRGltMi5uZXcoMCwgMjUwLCAwLCAxNzUpCiAgRGFyay5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTEsRGFyaykKICAKICBDbWRiYXIuTmFtZSA9ICJDbWRiYXIiCiAgQ21kYmFyLlBhcmVudCA9IEhvbGRlcgogIENtZGJhci5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIENtZGJhci5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgQ21kYmFyLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDIwKQogIENtZGJhci5TaXplID0gVURpbTIubmV3KDAsIDI0MCwgMCwgMjUpCiAgQ21kYmFyLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIENtZGJhci5UZXh0U2l6ZSA9IDE4CiAgQ21kYmFyLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgQ21kYmFyLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgQ21kYmFyLlRleHQgPSAiIgogIENtZGJhci5aSW5kZXggPSAxMAogIENtZGJhci5QbGFjZWhvbGRlclRleHQgPSAiQ29tbWFuZCBCYXIiCiAgCiAgQ01Ec0YuTmFtZSA9ICJDTURzIgogIENNRHNGLlBhcmVudCA9IEhvbGRlcgogIENNRHNGLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgQ01Ec0YuQm9yZGVyU2l6ZVBpeGVsID0gMAogIENNRHNGLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDQ1KQogIENNRHNGLlNpemUgPSBVRGltMi5uZXcoMCwgMjQ1LCAwLCAxNzUpCiAgQ01Ec0YuU2Nyb2xsQmFySW1hZ2VDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3OCw3OCw3OSkKICBDTURzRi5Cb3R0b21JbWFnZSA9ICJyYnhhc3NldDovL3RleHR1cmVzL3VpL1Njcm9sbC9zY3JvbGwtbWlkZGxlLnBuZyIKICBDTURzRi5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApCiAgQ01Ec0YuTWlkSW1hZ2UgPSAicmJ4YXNzZXQ6Ly90ZXh0dXJlcy91aS9TY3JvbGwvc2Nyb2xsLW1pZGRsZS5wbmciCiAgQ01Ec0YuU2Nyb2xsQmFyVGhpY2tuZXNzID0gOAogIENNRHNGLlRvcEltYWdlID0gInJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIgogIENNRHNGLlZlcnRpY2FsU2Nyb2xsQmFySW5zZXQgPSAnQWx3YXlzJwogIENNRHNGLlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNjcm9sbCxDTURzRikKICAKICBjbWRMaXN0TGF5b3V0LlBhcmVudCA9IENNRHNGCiAgCiAgU2V0dGluZ3NCdXR0b24uTmFtZSA9ICJTZXR0aW5nc0J1dHRvbiIKICBTZXR0aW5nc0J1dHRvbi5QYXJlbnQgPSBIb2xkZXIKICBTZXR0aW5nc0J1dHRvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIFNldHRpbmdzQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDIzMCwgMCwgMCkKICBTZXR0aW5nc0J1dHRvbi5TaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCkKICBTZXR0aW5nc0J1dHRvbi5JbWFnZSA9ICJyYnhhc3NldGlkOi8vMTIwNDM5NzAyOSIKICBTZXR0aW5nc0J1dHRvbi5aSW5kZXggPSAxMAogIAogIFJlZmVyZW5jZUJ1dHRvbiA9IEluc3RhbmNlLm5ldygiSW1hZ2VCdXR0b24iKQogIFJlZmVyZW5jZUJ1dHRvbi5OYW1lID0gIlJlZmVyZW5jZUJ1dHRvbiIKICBSZWZlcmVuY2VCdXR0b24uUGFyZW50ID0gSG9sZGVyCiAgUmVmZXJlbmNlQnV0dG9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgUmVmZXJlbmNlQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDIxMiwgMCwgMikKICBSZWZlcmVuY2VCdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygwLCAxNiwgMCwgMTYpCiAgUmVmZXJlbmNlQnV0dG9uLkltYWdlID0gInJieGFzc2V0aWQ6Ly8zNTIzMjQzNzU1IgogIFJlZmVyZW5jZUJ1dHRvbi5aSW5kZXggPSAxMAogIAogIFNldHRpbmdzLk5hbWUgPSAiU2V0dGluZ3MiCiAgU2V0dGluZ3MuUGFyZW50ID0gSG9sZGVyCiAgU2V0dGluZ3MuQWN0aXZlID0gdHJ1ZQogIFNldHRpbmdzLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzNiwgMzYsIDM3KQogIFNldHRpbmdzLkJvcmRlclNpemVQaXhlbCA9IDAKICBTZXR0aW5ncy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAyMjApCiAgU2V0dGluZ3MuU2l6ZSA9IFVEaW0yLm5ldygwLCAyNTAsIDAsIDE3NSkKICBTZXR0aW5ncy5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTEsU2V0dGluZ3MpCiAgCiAgU2V0dGluZ3NIb2xkZXIgPSBJbnN0YW5jZS5uZXcoIlNjcm9sbGluZ0ZyYW1lIikKICBTZXR0aW5nc0hvbGRlci5OYW1lID0gIkhvbGRlciIKICBTZXR0aW5nc0hvbGRlci5QYXJlbnQgPSBTZXR0aW5ncwogIFNldHRpbmdzSG9sZGVyLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgU2V0dGluZ3NIb2xkZXIuQm9yZGVyU2l6ZVBpeGVsID0gMAogIFNldHRpbmdzSG9sZGVyLlNpemUgPSBVRGltMi5uZXcoMSwwLDEsMCkKICBTZXR0aW5nc0hvbGRlci5TY3JvbGxCYXJJbWFnZUNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDc4LDc4LDc5KQogIFNldHRpbmdzSG9sZGVyLkJvdHRvbUltYWdlID0gInJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIgogIFNldHRpbmdzSG9sZGVyLkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMjM1KQogIFNldHRpbmdzSG9sZGVyLk1pZEltYWdlID0gInJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIgogIFNldHRpbmdzSG9sZGVyLlNjcm9sbEJhclRoaWNrbmVzcyA9IDgKICBTZXR0aW5nc0hvbGRlci5Ub3BJbWFnZSA9ICJyYnhhc3NldDovL3RleHR1cmVzL3VpL1Njcm9sbC9zY3JvbGwtbWlkZGxlLnBuZyIKICBTZXR0aW5nc0hvbGRlci5WZXJ0aWNhbFNjcm9sbEJhckluc2V0ID0gJ0Fsd2F5cycKICBTZXR0aW5nc0hvbGRlci5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzY3JvbGwsU2V0dGluZ3NIb2xkZXIpCiAgCiAgUHJlZml4Lk5hbWUgPSAiUHJlZml4IgogIFByZWZpeC5QYXJlbnQgPSBTZXR0aW5nc0hvbGRlcgogIFByZWZpeC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDYsIDQ2LCA0NykKICBQcmVmaXguQm9yZGVyU2l6ZVBpeGVsID0gMAogIFByZWZpeC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIFByZWZpeC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCA1KQogIFByZWZpeC5TaXplID0gVURpbTIubmV3KDEsIC0xMCwgMCwgMjApCiAgUHJlZml4LkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIFByZWZpeC5UZXh0U2l6ZSA9IDE0CiAgUHJlZml4LlRleHQgPSAiUHJlZml4IgogIFByZWZpeC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIFByZWZpeC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogIFByZWZpeC5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTIsUHJlZml4KQogIHRhYmxlLmluc2VydCh0ZXh0MSxQcmVmaXgpCiAgCiAgUHJlZml4Qm94Lk5hbWUgPSAiUHJlZml4Qm94IgogIFByZWZpeEJveC5QYXJlbnQgPSBQcmVmaXgKICBQcmVmaXhCb3guQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDc4LCA3OCwgNzkpCiAgUHJlZml4Qm94LkJvcmRlclNpemVQaXhlbCA9IDAKICBQcmVmaXhCb3guUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTIwLCAwLCAwKQogIFByZWZpeEJveC5TaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCkKICBQcmVmaXhCb3guRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zQm9sZAogIFByZWZpeEJveC5UZXh0U2l6ZSA9IDE0CiAgUHJlZml4Qm94LlRleHQgPSAnJwogIFByZWZpeEJveC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygwLCAwLCAwKQogIFByZWZpeEJveC5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTMsUHJlZml4Qm94KQogIHRhYmxlLmluc2VydCh0ZXh0MixQcmVmaXhCb3gpCiAgCiAgZnVuY3Rpb24gbWFrZVNldHRpbmdzQnV0dG9uKG5hbWUsaWNvbklELG9mZikKICAgIGxvY2FsIGJ1dHRvbiA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICBidXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgICBidXR0b24uQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgYnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAsMCwwLDApCiAgICBidXR0b24uU2l6ZSA9IFVEaW0yLm5ldygxLDAsMCwyNSkKICAgIGJ1dHRvbi5UZXh0ID0gIiIKICAgIGJ1dHRvbi5aSW5kZXggPSAxMAogICAgbG9jYWwgaWNvbiA9IEluc3RhbmNlLm5ldygiSW1hZ2VMYWJlbCIpCiAgICBpY29uLk5hbWUgPSAiSWNvbiIKICAgIGljb24uUGFyZW50ID0gYnV0dG9uCiAgICBpY29uLlBvc2l0aW9uID0gVURpbTIubmV3KDAsNSwwLDUpCiAgICBpY29uLlNpemUgPSBVRGltMi5uZXcoMCwxNiwwLDE2KQogICAgaWNvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgaWNvbi5JbWFnZSA9IGljb25JRAogICAgaWNvbi5aSW5kZXggPSAxMAogICAgaWYgb2ZmIHRoZW4KICAgICAgaWNvbi5TY2FsZVR5cGUgPSBFbnVtLlNjYWxlVHlwZS5Dcm9wCiAgICAgIGljb24uSW1hZ2VSZWN0U2l6ZSA9IFZlY3RvcjIubmV3KDE2LDE2KQogICAgICBpY29uLkltYWdlUmVjdE9mZnNldCA9IFZlY3RvcjIubmV3KG9mZiwwKQogICAgZW5kCiAgICBsb2NhbCBsYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgIGxhYmVsLk5hbWUgPSAiQnV0dG9uTGFiZWwiCiAgICBsYWJlbC5QYXJlbnQgPSBidXR0b24KICAgIGxhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBsYWJlbC5UZXh0ID0gbmFtZQogICAgbGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwyOCwwLDApCiAgICBsYWJlbC5TaXplID0gVURpbTIubmV3KDEsLTI4LDEsMCkKICAgIGxhYmVsLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogICAgbGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICAgIGxhYmVsLlRleHRTaXplID0gMTQKICAgIGxhYmVsLlpJbmRleCA9IDEwCiAgICBsYWJlbC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgdGFibGUuaW5zZXJ0KHNoYWRlMixidXR0b24pCiAgICB0YWJsZS5pbnNlcnQodGV4dDEsbGFiZWwpCiAgICByZXR1cm4gYnV0dG9uCiAgZW5kCiAgCiAgQ29sb3JzQnV0dG9uID0gbWFrZVNldHRpbmdzQnV0dG9uKCJFZGl0IFRoZW1lIiwicmJ4YXNzZXRpZDovLzQ5MTE5NjI5OTEiKQogIENvbG9yc0J1dHRvbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLDUsMCw1NSkKICBDb2xvcnNCdXR0b24uU2l6ZSA9IFVEaW0yLm5ldygxLC0xMCwwLDI1KQogIENvbG9yc0J1dHRvbi5OYW1lID0gIkNvbG9ycyIKICBDb2xvcnNCdXR0b24uUGFyZW50ID0gU2V0dGluZ3NIb2xkZXIKICAKICBLZXliaW5kcyA9IG1ha2VTZXR0aW5nc0J1dHRvbigiRWRpdCBLZXliaW5kcyIsInJieGFzc2V0aWQ6Ly8xMjk2OTc5MzAiKQogIEtleWJpbmRzLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDg1KQogIEtleWJpbmRzLlNpemUgPSBVRGltMi5uZXcoMSwgLTEwLCAwLCAyNSkKICBLZXliaW5kcy5OYW1lID0gIktleWJpbmRzIgogIEtleWJpbmRzLlBhcmVudCA9IFNldHRpbmdzSG9sZGVyCiAgCiAgQWxpYXNlcyA9IG1ha2VTZXR0aW5nc0J1dHRvbigiRWRpdCBBbGlhc2VzIiwicmJ4YXNzZXRpZDovLzUxNDc0ODg2NTgiKQogIEFsaWFzZXMuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMTE1KQogIEFsaWFzZXMuU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTAsIDAsIDI1KQogIEFsaWFzZXMuTmFtZSA9ICJBbGlhc2VzIgogIEFsaWFzZXMuUGFyZW50ID0gU2V0dGluZ3NIb2xkZXIKICAKICBTdGF5T3Blbi5OYW1lID0gIlN0YXlPcGVuIgogIFN0YXlPcGVuLlBhcmVudCA9IFNldHRpbmdzSG9sZGVyCiAgU3RheU9wZW4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgU3RheU9wZW4uQm9yZGVyU2l6ZVBpeGVsID0gMAogIFN0YXlPcGVuLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgU3RheU9wZW4uUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMzApCiAgU3RheU9wZW4uU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTAsIDAsIDIwKQogIFN0YXlPcGVuLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIFN0YXlPcGVuLlRleHRTaXplID0gMTQKICBTdGF5T3Blbi5UZXh0ID0gIktlZXAgTWVudSBPcGVuIgogIFN0YXlPcGVuLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgU3RheU9wZW4uVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICBTdGF5T3Blbi5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTIsU3RheU9wZW4pCiAgdGFibGUuaW5zZXJ0KHRleHQxLFN0YXlPcGVuKQogIAogIEJ1dHRvbi5OYW1lID0gIkJ1dHRvbiIKICBCdXR0b24uUGFyZW50ID0gU3RheU9wZW4KICBCdXR0b24uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDc4LCA3OCwgNzkpCiAgQnV0dG9uLkJvcmRlclNpemVQaXhlbCA9IDAKICBCdXR0b24uUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTIwLCAwLCAwKQogIEJ1dHRvbi5TaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCkKICBCdXR0b24uWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUzLEJ1dHRvbikKICAKICBPbi5OYW1lID0gIk9uIgogIE9uLlBhcmVudCA9IEJ1dHRvbgogIE9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigxNTAsIDE1MCwgMTUxKQogIE9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgT24uQm9yZGVyU2l6ZVBpeGVsID0gMAogIE9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDIsIDAsIDIpCiAgT24uU2l6ZSA9IFVEaW0yLm5ldygwLCAxNiwgMCwgMTYpCiAgT24uRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgT24uRm9udFNpemUgPSBFbnVtLkZvbnRTaXplLlNpemUxNAogIE9uLlRleHQgPSAiIgogIE9uLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDAsIDAsIDApCiAgT24uWkluZGV4ID0gMTAKICAKICBQb3NpdGlvbnMgPSBtYWtlU2V0dGluZ3NCdXR0b24oIkVkaXQvR290byBXYXlwb2ludHMiLCJyYnhhc3NldGlkOi8vNTE0NzQ4ODU5MiIpCiAgUG9zaXRpb25zLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDE0NSkKICBQb3NpdGlvbnMuU2l6ZSA9IFVEaW0yLm5ldygxLCAtMTAsIDAsIDI1KQogIFBvc2l0aW9ucy5OYW1lID0gIldheXBvaW50cyIKICBQb3NpdGlvbnMuUGFyZW50ID0gU2V0dGluZ3NIb2xkZXIKICAKICBFdmVudEJpbmQgPSBtYWtlU2V0dGluZ3NCdXR0b24oIkVkaXQgRXZlbnQgQmluZHMiLCJyYnhhc3NldGlkOi8vNTE0NzY5NTQ3NCIsNzU5KQogIEV2ZW50QmluZC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCAyMDUpCiAgRXZlbnRCaW5kLlNpemUgPSBVRGltMi5uZXcoMSwgLTEwLCAwLCAyNSkKICBFdmVudEJpbmQuTmFtZSA9ICJFdmVudEJpbmRzIgogIEV2ZW50QmluZC5QYXJlbnQgPSBTZXR0aW5nc0hvbGRlcgogIAogIFBsdWdpbnMgPSBtYWtlU2V0dGluZ3NCdXR0b24oIk1hbmFnZSBQbHVnaW5zIiwicmJ4YXNzZXRpZDovLzUxNDc2OTU0NzQiLDc0MykKICBQbHVnaW5zLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDE3NSkKICBQbHVnaW5zLlNpemUgPSBVRGltMi5uZXcoMSwgLTEwLCAwLCAyNSkKICBQbHVnaW5zLk5hbWUgPSAiUGx1Z2lucyIKICBQbHVnaW5zLlBhcmVudCA9IFNldHRpbmdzSG9sZGVyCiAgCiAgRXhhbXBsZS5OYW1lID0gIkV4YW1wbGUiCiAgRXhhbXBsZS5QYXJlbnQgPSBIb2xkZXIKICBFeGFtcGxlLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgRXhhbXBsZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgRXhhbXBsZS5TaXplID0gVURpbTIubmV3KDAsIDE5MCwgMCwgMjApCiAgRXhhbXBsZS5WaXNpYmxlID0gZmFsc2UKICBFeGFtcGxlLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIEV4YW1wbGUuVGV4dFNpemUgPSAxOAogIEV4YW1wbGUuVGV4dCA9ICJFeGFtcGxlIgogIEV4YW1wbGUuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICBFeGFtcGxlLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgRXhhbXBsZS5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydCh0ZXh0MSxFeGFtcGxlKQogIAogIE5vdGlmaWNhdGlvbi5OYW1lID0gcmFuZG9tU3RyaW5nKCkKICBOb3RpZmljYXRpb24uUGFyZW50ID0gUEFSRU5UCiAgTm90aWZpY2F0aW9uLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzNiwgMzYsIDM3KQogIE5vdGlmaWNhdGlvbi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgTm90aWZpY2F0aW9uLlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC01MDAsIDEsIDIwKQogIE5vdGlmaWNhdGlvbi5TaXplID0gVURpbTIubmV3KDAsIDI1MCwgMCwgMTAwKQogIE5vdGlmaWNhdGlvbi5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTEsTm90aWZpY2F0aW9uKQogIAogIFRpdGxlXzIuTmFtZSA9ICJUaXRsZSIKICBUaXRsZV8yLlBhcmVudCA9IE5vdGlmaWNhdGlvbgogIFRpdGxlXzIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgVGl0bGVfMi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgVGl0bGVfMi5TaXplID0gVURpbTIubmV3KDAsIDI1MCwgMCwgMjApCiAgVGl0bGVfMi5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBUaXRsZV8yLlRleHRTaXplID0gMTQKICBUaXRsZV8yLlRleHQgPSAiTm90aWZpY2F0aW9uIFRpdGxlIgogIFRpdGxlXzIuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICBUaXRsZV8yLlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMixUaXRsZV8yKQogIHRhYmxlLmluc2VydCh0ZXh0MSxUaXRsZV8yKQogIAogIFRleHRfMi5OYW1lID0gIlRleHQiCiAgVGV4dF8yLlBhcmVudCA9IE5vdGlmaWNhdGlvbgogIFRleHRfMi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIFRleHRfMi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgVGV4dF8yLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDI1KQogIFRleHRfMi5TaXplID0gVURpbTIubmV3KDAsIDI0MCwgMCwgNzUpCiAgVGV4dF8yLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIFRleHRfMi5UZXh0U2l6ZSA9IDE2CiAgVGV4dF8yLlRleHQgPSAiTm90aWZpY2F0aW9uIFRleHQiCiAgVGV4dF8yLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgVGV4dF8yLlRleHRXcmFwcGVkID0gdHJ1ZQogIFRleHRfMi5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydCh0ZXh0MSxUZXh0XzIpCiAgCiAgQ2xvc2VCdXR0b24uTmFtZSA9ICJDbG9zZUJ1dHRvbiIKICBDbG9zZUJ1dHRvbi5QYXJlbnQgPSBOb3RpZmljYXRpb24KICBDbG9zZUJ1dHRvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIENsb3NlQnV0dG9uLlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0yMCwgMCwgMCkKICBDbG9zZUJ1dHRvbi5TaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCkKICBDbG9zZUJ1dHRvbi5UZXh0ID0gIiIKICBDbG9zZUJ1dHRvbi5aSW5kZXggPSAxMAogIAogIENsb3NlSW1hZ2UuUGFyZW50ID0gQ2xvc2VCdXR0b24KICBDbG9zZUltYWdlLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgQ2xvc2VJbWFnZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIENsb3NlSW1hZ2UuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgNSkKICBDbG9zZUltYWdlLlNpemUgPSBVRGltMi5uZXcoMCwgMTAsIDAsIDEwKQogIENsb3NlSW1hZ2UuSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzUwNTQ2NjM2NTAiCiAgQ2xvc2VJbWFnZS5aSW5kZXggPSAxMAogIAogIFBpbkJ1dHRvbi5OYW1lID0gIlBpbkJ1dHRvbiIKICBQaW5CdXR0b24uUGFyZW50ID0gTm90aWZpY2F0aW9uCiAgUGluQnV0dG9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgUGluQnV0dG9uLlNpemUgPSBVRGltMi5uZXcoMCwgMjAsIDAsIDIwKQogIFBpbkJ1dHRvbi5aSW5kZXggPSAxMAogIFBpbkJ1dHRvbi5UZXh0ID0gIiIKICAKICBQaW5JbWFnZS5QYXJlbnQgPSBQaW5CdXR0b24KICBQaW5JbWFnZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIFBpbkltYWdlLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgUGluSW1hZ2UuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMywgMCwgMykKICBQaW5JbWFnZS5TaXplID0gVURpbTIubmV3KDAsIDE0LCAwLCAxNCkKICBQaW5JbWFnZS5aSW5kZXggPSAxMAogIFBpbkltYWdlLkltYWdlID0gInJieGFzc2V0aWQ6Ly82MjM0NjkxMzUwIgogIAogIFRvb2x0aXAuTmFtZSA9IHJhbmRvbVN0cmluZygpCiAgVG9vbHRpcC5QYXJlbnQgPSBQQVJFTlQKICBUb29sdGlwLkFjdGl2ZSA9IHRydWUKICBUb29sdGlwLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzNiwgMzYsIDM3KQogIFRvb2x0aXAuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuMQogIFRvb2x0aXAuQm9yZGVyU2l6ZVBpeGVsID0gMAogIFRvb2x0aXAuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDk2KQogIFRvb2x0aXAuVmlzaWJsZSA9IGZhbHNlCiAgVG9vbHRpcC5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTEsVG9vbHRpcCkKICAKICBUaXRsZV8zLk5hbWUgPSAiVGl0bGUiCiAgVGl0bGVfMy5QYXJlbnQgPSBUb29sdGlwCiAgVGl0bGVfMy5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDYsIDQ2LCA0NykKICBUaXRsZV8zLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjEKICBUaXRsZV8zLkJvcmRlclNpemVQaXhlbCA9IDAKICBUaXRsZV8zLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCAyMCkKICBUaXRsZV8zLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIFRpdGxlXzMuVGV4dFNpemUgPSAxNAogIFRpdGxlXzMuVGV4dCA9ICIiCiAgVGl0bGVfMy5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIFRpdGxlXzMuVGV4dFRyYW5zcGFyZW5jeSA9IDAuMQogIFRpdGxlXzMuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLFRpdGxlXzMpCiAgdGFibGUuaW5zZXJ0KHRleHQxLFRpdGxlXzMpCiAgCiAgRGVzY3JpcHRpb24uTmFtZSA9ICJEZXNjcmlwdGlvbiIKICBEZXNjcmlwdGlvbi5QYXJlbnQgPSBUb29sdGlwCiAgRGVzY3JpcHRpb24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBEZXNjcmlwdGlvbi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgRGVzY3JpcHRpb24uU2l6ZSA9IFVEaW0yLm5ldygwLDE4MCwwLDcyKQogIERlc2NyaXB0aW9uLlBvc2l0aW9uID0gVURpbTIubmV3KDAsMTAsMCwxOCkKICBEZXNjcmlwdGlvbi5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBEZXNjcmlwdGlvbi5UZXh0U2l6ZSA9IDE2CiAgRGVzY3JpcHRpb24uVGV4dCA9ICIiCiAgRGVzY3JpcHRpb24uVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICBEZXNjcmlwdGlvbi5UZXh0VHJhbnNwYXJlbmN5ID0gMC4xCiAgRGVzY3JpcHRpb24uVGV4dFdyYXBwZWQgPSB0cnVlCiAgRGVzY3JpcHRpb24uWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQodGV4dDEsRGVzY3JpcHRpb24pCiAgCiAgSW50cm9CYWNrZ3JvdW5kLk5hbWUgPSAiSW50cm9CYWNrZ3JvdW5kIgogIEludHJvQmFja2dyb3VuZC5QYXJlbnQgPSBIb2xkZXIKICBJbnRyb0JhY2tncm91bmQuQWN0aXZlID0gdHJ1ZQogIEludHJvQmFja2dyb3VuZC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzYsIDM2LCAzNykKICBJbnRyb0JhY2tncm91bmQuQm9yZGVyU2l6ZVBpeGVsID0gMAogIEludHJvQmFja2dyb3VuZC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCA0NSkKICBJbnRyb0JhY2tncm91bmQuU2l6ZSA9IFVEaW0yLm5ldygwLCAyNTAsIDAsIDE3NSkKICBJbnRyb0JhY2tncm91bmQuWkluZGV4ID0gMTAKICAKICBMb2dvLk5hbWUgPSAiTG9nbyIKICBMb2dvLlBhcmVudCA9IEhvbGRlcgogIExvZ28uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBMb2dvLkJvcmRlclNpemVQaXhlbCA9IDAKICBMb2dvLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEyNSwgMCwgMTI3KQogIExvZ28uU2l6ZSA9IFVEaW0yLm5ldygwLCAxMCwgMCwgMTApCiAgTG9nby5JbWFnZSA9ICJyYnhhc3NldGlkOi8vMTM1MjU0Mzg3MyIKICBMb2dvLkltYWdlVHJhbnNwYXJlbmN5ID0gMAogIExvZ28uWkluZGV4ID0gMTAKICAKICBDcmVkaXRzLk5hbWUgPSAiQ3JlZGl0cyIKICBDcmVkaXRzLlBhcmVudCA9IEhvbGRlcgogIENyZWRpdHMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBDcmVkaXRzLkJvcmRlclNpemVQaXhlbCA9IDAKICBDcmVkaXRzLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAuOSwgMzApCiAgQ3JlZGl0cy5TaXplID0gVURpbTIubmV3KDAsIDI1MCwgMCwgMjApCiAgQ3JlZGl0cy5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnNMaWdodAogIENyZWRpdHMuRm9udFNpemUgPSBFbnVtLkZvbnRTaXplLlNpemUxOAogIENyZWRpdHMuVGV4dCA9ICJFZGdlIC8vIFp3b2xmIC8vIE1vb24gLy8gVG9vbiIKICBDcmVkaXRzLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgQ3JlZGl0cy5aSW5kZXggPSAxMAogIAogIEtleWJpbmRzRnJhbWUuTmFtZSA9ICJLZXliaW5kc0ZyYW1lIgogIEtleWJpbmRzRnJhbWUuUGFyZW50ID0gU2V0dGluZ3MKICBLZXliaW5kc0ZyYW1lLkFjdGl2ZSA9IHRydWUKICBLZXliaW5kc0ZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzNiwgMzYsIDM3KQogIEtleWJpbmRzRnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMAogIEtleWJpbmRzRnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMTc1KQogIEtleWJpbmRzRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygwLCAyNTAsIDAsIDE3NSkKICBLZXliaW5kc0ZyYW1lLlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMSxLZXliaW5kc0ZyYW1lKQogIAogIENsb3NlLk5hbWUgPSAiQ2xvc2UiCiAgQ2xvc2UuUGFyZW50ID0gS2V5YmluZHNGcmFtZQogIENsb3NlLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIENsb3NlLkJvcmRlclNpemVQaXhlbCA9IDAKICBDbG9zZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyMDUsIDAsIDE1MCkKICBDbG9zZS5TaXplID0gVURpbTIubmV3KDAsIDQwLCAwLCAyMCkKICBDbG9zZS5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBDbG9zZS5UZXh0U2l6ZSA9IDE0CiAgQ2xvc2UuVGV4dCA9ICJDbG9zZSIKICBDbG9zZS5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIENsb3NlLlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMixDbG9zZSkKICB0YWJsZS5pbnNlcnQodGV4dDEsQ2xvc2UpCiAgCiAgQWRkLk5hbWUgPSAiQWRkIgogIEFkZC5QYXJlbnQgPSBLZXliaW5kc0ZyYW1lCiAgQWRkLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIEFkZC5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgQWRkLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDE1MCkKICBBZGQuU2l6ZSA9IFVEaW0yLm5ldygwLCA0MCwgMCwgMjApCiAgQWRkLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIEFkZC5UZXh0U2l6ZSA9IDE0CiAgQWRkLlRleHQgPSAiQWRkIgogIEFkZC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIEFkZC5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTIsQWRkKQogIHRhYmxlLmluc2VydCh0ZXh0MSxBZGQpCiAgCiAgRGVsZXRlLk5hbWUgPSAiRGVsZXRlIgogIERlbGV0ZS5QYXJlbnQgPSBLZXliaW5kc0ZyYW1lCiAgRGVsZXRlLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIERlbGV0ZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgRGVsZXRlLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUwLCAwLCAxNTApCiAgRGVsZXRlLlNpemUgPSBVRGltMi5uZXcoMCwgNDAsIDAsIDIwKQogIERlbGV0ZS5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBEZWxldGUuVGV4dFNpemUgPSAxNAogIERlbGV0ZS5UZXh0ID0gIkNsZWFyIgogIERlbGV0ZS5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIERlbGV0ZS5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTIsRGVsZXRlKQogIHRhYmxlLmluc2VydCh0ZXh0MSxEZWxldGUpCiAgCiAgSG9sZGVyXzIuTmFtZSA9ICJIb2xkZXIiCiAgSG9sZGVyXzIuUGFyZW50ID0gS2V5YmluZHNGcmFtZQogIEhvbGRlcl8yLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgSG9sZGVyXzIuQm9yZGVyU2l6ZVBpeGVsID0gMAogIEhvbGRlcl8yLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDApCiAgSG9sZGVyXzIuU2l6ZSA9IFVEaW0yLm5ldygwLCAyNTAsIDAsIDE0NSkKICBIb2xkZXJfMi5TY3JvbGxCYXJJbWFnZUNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDc4LDc4LDc5KQogIEhvbGRlcl8yLkJvdHRvbUltYWdlID0gInJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIgogIEhvbGRlcl8yLkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMCkKICBIb2xkZXJfMi5NaWRJbWFnZSA9ICJyYnhhc3NldDovL3RleHR1cmVzL3VpL1Njcm9sbC9zY3JvbGwtbWlkZGxlLnBuZyIKICBIb2xkZXJfMi5TY3JvbGxCYXJUaGlja25lc3MgPSAwCiAgSG9sZGVyXzIuVG9wSW1hZ2UgPSAicmJ4YXNzZXQ6Ly90ZXh0dXJlcy91aS9TY3JvbGwvc2Nyb2xsLW1pZGRsZS5wbmciCiAgSG9sZGVyXzIuVmVydGljYWxTY3JvbGxCYXJJbnNldCA9ICdBbHdheXMnCiAgSG9sZGVyXzIuWkluZGV4ID0gMTAKICAKICBFeGFtcGxlXzIuTmFtZSA9ICJFeGFtcGxlIgogIEV4YW1wbGVfMi5QYXJlbnQgPSBLZXliaW5kc0ZyYW1lCiAgRXhhbXBsZV8yLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIEV4YW1wbGVfMi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgRXhhbXBsZV8yLlNpemUgPSBVRGltMi5uZXcoMCwgMTAsIDAsIDIwKQogIEV4YW1wbGVfMi5WaXNpYmxlID0gZmFsc2UKICBFeGFtcGxlXzIuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLEV4YW1wbGVfMikKICAKICBUZXh0XzMuTmFtZSA9ICJUZXh0IgogIFRleHRfMy5QYXJlbnQgPSBFeGFtcGxlXzIKICBUZXh0XzMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgVGV4dF8zLkJvcmRlclNpemVQaXhlbCA9IDAKICBUZXh0XzMuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAsIDAsIDApCiAgVGV4dF8zLlNpemUgPSBVRGltMi5uZXcoMCwgMjQwLCAwLCAyMCkKICBUZXh0XzMuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgVGV4dF8zLlRleHRTaXplID0gMTQKICBUZXh0XzMuVGV4dCA9ICJub20iCiAgVGV4dF8zLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgVGV4dF8zLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgVGV4dF8zLlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMixUZXh0XzMpCiAgdGFibGUuaW5zZXJ0KHRleHQxLFRleHRfMykKICAKICBEZWxldGVfMi5OYW1lID0gIkRlbGV0ZSIKICBEZWxldGVfMi5QYXJlbnQgPSBUZXh0XzMKICBEZWxldGVfMi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzgsIDc4LCA3OSkKICBEZWxldGVfMi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgRGVsZXRlXzIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjAwLCAwLCAwKQogIERlbGV0ZV8yLlNpemUgPSBVRGltMi5uZXcoMCwgNDAsIDAsIDIwKQogIERlbGV0ZV8yLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIERlbGV0ZV8yLlRleHRTaXplID0gMTQKICBEZWxldGVfMi5UZXh0ID0gIkRlbGV0ZSIKICBEZWxldGVfMi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygwLCAwLCAwKQogIERlbGV0ZV8yLlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMyxEZWxldGVfMikKICB0YWJsZS5pbnNlcnQodGV4dDIsRGVsZXRlXzIpCiAgCiAgS2V5YmluZEVkaXRvci5OYW1lID0gcmFuZG9tU3RyaW5nKCkKICBLZXliaW5kRWRpdG9yLlBhcmVudCA9IFBBUkVOVAogIEtleWJpbmRFZGl0b3IuQWN0aXZlID0gdHJ1ZQogIEtleWJpbmRFZGl0b3IuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBLZXliaW5kRWRpdG9yLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgLTE4MCwgMCwgLTUwMCkKICBLZXliaW5kRWRpdG9yLlNpemUgPSBVRGltMi5uZXcoMCwgMzYwLCAwLCAyMCkKICBLZXliaW5kRWRpdG9yLlpJbmRleCA9IDEwCiAgCiAgYmFja2dyb3VuZF8yLk5hbWUgPSAiYmFja2dyb3VuZCIKICBiYWNrZ3JvdW5kXzIuUGFyZW50ID0gS2V5YmluZEVkaXRvcgogIGJhY2tncm91bmRfMi5BY3RpdmUgPSB0cnVlCiAgYmFja2dyb3VuZF8yLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzNiwgMzYsIDM3KQogIGJhY2tncm91bmRfMi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgYmFja2dyb3VuZF8yLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDIwKQogIGJhY2tncm91bmRfMi5TaXplID0gVURpbTIubmV3KDAsIDM2MCwgMCwgMTg1KQogIGJhY2tncm91bmRfMi5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTEsYmFja2dyb3VuZF8yKQogIAogIERhcmtfMy5OYW1lID0gIkRhcmsiCiAgRGFya18zLlBhcmVudCA9IGJhY2tncm91bmRfMgogIERhcmtfMy5BY3RpdmUgPSB0cnVlCiAgRGFya18zLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIERhcmtfMy5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgRGFya18zLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEzNSwgMCwgMCkKICBEYXJrXzMuU2l6ZSA9IFVEaW0yLm5ldygwLCAyLCAwLCAxODUpCiAgRGFya18zLlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMixEYXJrXzMpCiAgCiAgRGlyZWN0aW9ucy5OYW1lID0gIkRpcmVjdGlvbnMiCiAgRGlyZWN0aW9ucy5QYXJlbnQgPSBiYWNrZ3JvdW5kXzIKICBEaXJlY3Rpb25zLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgRGlyZWN0aW9ucy5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgRGlyZWN0aW9ucy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMCwgMTUpCiAgRGlyZWN0aW9ucy5TaXplID0gVURpbTIubmV3KDAsIDExNSwgMCwgOTApCiAgRGlyZWN0aW9ucy5aSW5kZXggPSAxMAogIERpcmVjdGlvbnMuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgRGlyZWN0aW9ucy5UZXh0ID0gIkNsaWNrIHRoZSBidXR0b24gYmVsb3cgYW5kIHByZXNzIGEga2V5L21vdXNlIGJ1dHRvbi4gVGhlbiBzZWxlY3Qgd2hhdCB5b3Ugd2FudCB0byBiaW5kIGl0IHRvLiIKICBEaXJlY3Rpb25zLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogIERpcmVjdGlvbnMuVGV4dFNpemUgPSAxNC4wMDAKICBEaXJlY3Rpb25zLlRleHRXcmFwcGVkID0gdHJ1ZQogIERpcmVjdGlvbnMuVGV4dFlBbGlnbm1lbnQgPSBFbnVtLlRleHRZQWxpZ25tZW50LlRvcAogIHRhYmxlLmluc2VydCh0ZXh0MSxEaXJlY3Rpb25zKQogIAogIEJpbmRUby5OYW1lID0gIkJpbmRUbyIKICBCaW5kVG8uUGFyZW50ID0gYmFja2dyb3VuZF8yCiAgQmluZFRvLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIEJpbmRUby5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgQmluZFRvLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCA5NSkKICBCaW5kVG8uU2l6ZSA9IFVEaW0yLm5ldygwLCAxMTUsIDAsIDUwKQogIEJpbmRUby5aSW5kZXggPSAxMAogIEJpbmRUby5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBCaW5kVG8uVGV4dCA9ICJDbGljayB0byBiaW5kIgogIEJpbmRUby5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICBCaW5kVG8uVGV4dFNpemUgPSAxNi4wMDAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLEJpbmRUbykKICB0YWJsZS5pbnNlcnQodGV4dDEsQmluZFRvKQogIAogIFRyaWdnZXJMYWJlbC5OYW1lID0gIlRyaWdnZXJMYWJlbCIKICBUcmlnZ2VyTGFiZWwuUGFyZW50ID0gYmFja2dyb3VuZF8yCiAgVHJpZ2dlckxhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgVHJpZ2dlckxhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCAxNTUpCiAgVHJpZ2dlckxhYmVsLlNpemUgPSBVRGltMi5uZXcoMCwgNDUsIDAsIDIwKQogIFRyaWdnZXJMYWJlbC5aSW5kZXggPSAxMAogIFRyaWdnZXJMYWJlbC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBUcmlnZ2VyTGFiZWwuVGV4dCA9ICJUcmlnZ2VyOiIKICBUcmlnZ2VyTGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgVHJpZ2dlckxhYmVsLlRleHRTaXplID0gMTQuMDAwCiAgVHJpZ2dlckxhYmVsLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgdGFibGUuaW5zZXJ0KHRleHQxLFRyaWdnZXJMYWJlbCkKICAKICBCaW5kVHJpZ2dlclNlbGVjdC5OYW1lID0gIkJpbmRUbyIKICBCaW5kVHJpZ2dlclNlbGVjdC5QYXJlbnQgPSBiYWNrZ3JvdW5kXzIKICBCaW5kVHJpZ2dlclNlbGVjdC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDYsIDQ2LCA0NykKICBCaW5kVHJpZ2dlclNlbGVjdC5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgQmluZFRyaWdnZXJTZWxlY3QuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNjAsIDAsIDE1NSkKICBCaW5kVHJpZ2dlclNlbGVjdC5TaXplID0gVURpbTIubmV3KDAsIDY1LCAwLCAyMCkKICBCaW5kVHJpZ2dlclNlbGVjdC5aSW5kZXggPSAxMAogIEJpbmRUcmlnZ2VyU2VsZWN0LkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIEJpbmRUcmlnZ2VyU2VsZWN0LlRleHQgPSAiS2V5RG93biIKICBCaW5kVHJpZ2dlclNlbGVjdC5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICBCaW5kVHJpZ2dlclNlbGVjdC5UZXh0U2l6ZSA9IDE2LjAwMAogIHRhYmxlLmluc2VydChzaGFkZTIsQmluZFRyaWdnZXJTZWxlY3QpCiAgdGFibGUuaW5zZXJ0KHRleHQxLEJpbmRUcmlnZ2VyU2VsZWN0KQogIAogIEFkZF8yLk5hbWUgPSAiQWRkIgogIEFkZF8yLlBhcmVudCA9IGJhY2tncm91bmRfMgogIEFkZF8yLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIEFkZF8yLkJvcmRlclNpemVQaXhlbCA9IDAKICBBZGRfMi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAzMTAsIDAsIDM1KQogIEFkZF8yLlNpemUgPSBVRGltMi5uZXcoMCwgNDAsIDAsIDIwKQogIEFkZF8yLlpJbmRleCA9IDEwCiAgQWRkXzIuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgQWRkXzIuVGV4dCA9ICJBZGQiCiAgQWRkXzIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgQWRkXzIuVGV4dFNpemUgPSAxNC4wMDAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLEFkZF8yKQogIHRhYmxlLmluc2VydCh0ZXh0MSxBZGRfMikKICAKICBUb2dnbGVzLk5hbWUgPSAiVG9nZ2xlcyIKICBUb2dnbGVzLlBhcmVudCA9IGJhY2tncm91bmRfMgogIFRvZ2dsZXMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBUb2dnbGVzLkJvcmRlclNpemVQaXhlbCA9IDAKICBUb2dnbGVzLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDE1MCwgMCwgMTI1KQogIFRvZ2dsZXMuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDUwKQogIFRvZ2dsZXMuWkluZGV4ID0gMTAKICBUb2dnbGVzLkJvdHRvbUltYWdlID0gInJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIgogIFRvZ2dsZXMuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCA1MCkKICBUb2dnbGVzLlNjcm9sbEJhclRoaWNrbmVzcyA9IDgKICBUb2dnbGVzLlRvcEltYWdlID0gInJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIgogIFRvZ2dsZXMuVmVydGljYWxTY3JvbGxCYXJJbnNldCA9IEVudW0uU2Nyb2xsQmFySW5zZXQuQWx3YXlzCiAgdGFibGUuaW5zZXJ0KHNjcm9sbCxUb2dnbGVzKQogIAogIENsaWNrVFAuTmFtZSA9ICJDbGljayBUUCAoSG9sZCBLZXkgJiBDbGljaykiCiAgQ2xpY2tUUC5QYXJlbnQgPSBUb2dnbGVzCiAgQ2xpY2tUUC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDYsIDQ2LCA0NykKICBDbGlja1RQLkJvcmRlclNpemVQaXhlbCA9IDAKICBDbGlja1RQLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCAyMCkKICBDbGlja1RQLlpJbmRleCA9IDEwCiAgQ2xpY2tUUC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBDbGlja1RQLlRleHQgPSAiICAgIENsaWNrIFRQIChIb2xkIEtleSAmIENsaWNrKSIKICBDbGlja1RQLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogIENsaWNrVFAuVGV4dFNpemUgPSAxNC4wMDAKICBDbGlja1RQLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgdGFibGUuaW5zZXJ0KHNoYWRlMixDbGlja1RQKQogIHRhYmxlLmluc2VydCh0ZXh0MSxDbGlja1RQKQogIAogIFNlbGVjdC5OYW1lID0gIlNlbGVjdCIKICBTZWxlY3QuUGFyZW50ID0gQ2xpY2tUUAogIFNlbGVjdC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzgsIDc4LCA3OSkKICBTZWxlY3QuQm9yZGVyU2l6ZVBpeGVsID0gMAogIFNlbGVjdC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxNjAsIDAsIDApCiAgU2VsZWN0LlNpemUgPSBVRGltMi5uZXcoMCwgNDAsIDAsIDIwKQogIFNlbGVjdC5aSW5kZXggPSAxMAogIFNlbGVjdC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBTZWxlY3QuVGV4dCA9ICJBZGQiCiAgU2VsZWN0LlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigwLCAwLCAwKQogIFNlbGVjdC5UZXh0U2l6ZSA9IDE0LjAwMAogIHRhYmxlLmluc2VydChzaGFkZTMsU2VsZWN0KQogIHRhYmxlLmluc2VydCh0ZXh0MixTZWxlY3QpCiAgCiAgQ2xpY2tEZWxldGUuTmFtZSA9ICJDbGljayBEZWxldGUgKEhvbGQgS2V5ICYgQ2xpY2spIgogIENsaWNrRGVsZXRlLlBhcmVudCA9IFRvZ2dsZXMKICBDbGlja0RlbGV0ZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDYsIDQ2LCA0NykKICBDbGlja0RlbGV0ZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgQ2xpY2tEZWxldGUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMjUpCiAgQ2xpY2tEZWxldGUuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDIwKQogIENsaWNrRGVsZXRlLlpJbmRleCA9IDEwCiAgQ2xpY2tEZWxldGUuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgQ2xpY2tEZWxldGUuVGV4dCA9ICIgICAgQ2xpY2sgRGVsZXRlIChIb2xkIEtleSAmIENsaWNrKSIKICBDbGlja0RlbGV0ZS5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICBDbGlja0RlbGV0ZS5UZXh0U2l6ZSA9IDE0LjAwMAogIENsaWNrRGVsZXRlLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgdGFibGUuaW5zZXJ0KHNoYWRlMixDbGlja0RlbGV0ZSkKICB0YWJsZS5pbnNlcnQodGV4dDEsQ2xpY2tEZWxldGUpCiAgCiAgU2VsZWN0XzIuTmFtZSA9ICJTZWxlY3QiCiAgU2VsZWN0XzIuUGFyZW50ID0gQ2xpY2tEZWxldGUKICBTZWxlY3RfMi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzgsIDc4LCA3OSkKICBTZWxlY3RfMi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgU2VsZWN0XzIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTYwLCAwLCAwKQogIFNlbGVjdF8yLlNpemUgPSBVRGltMi5uZXcoMCwgNDAsIDAsIDIwKQogIFNlbGVjdF8yLlpJbmRleCA9IDEwCiAgU2VsZWN0XzIuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgU2VsZWN0XzIuVGV4dCA9ICJBZGQiCiAgU2VsZWN0XzIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDAsIDAsIDApCiAgU2VsZWN0XzIuVGV4dFNpemUgPSAxNC4wMDAKICB0YWJsZS5pbnNlcnQoc2hhZGUzLFNlbGVjdF8yKQogIHRhYmxlLmluc2VydCh0ZXh0MixTZWxlY3RfMikKICAKICBDbWRiYXJfMi5OYW1lID0gIkNtZGJhcl8yIgogIENtZGJhcl8yLlBhcmVudCA9IGJhY2tncm91bmRfMgogIENtZGJhcl8yLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIENtZGJhcl8yLkJvcmRlclNpemVQaXhlbCA9IDAKICBDbWRiYXJfMi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxNTAsIDAsIDM1KQogIENtZGJhcl8yLlNpemUgPSBVRGltMi5uZXcoMCwgMTUwLCAwLCAyMCkKICBDbWRiYXJfMi5aSW5kZXggPSAxMAogIENtZGJhcl8yLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIENtZGJhcl8yLlBsYWNlaG9sZGVyVGV4dCA9ICJDb21tYW5kIgogIENtZGJhcl8yLlRleHQgPSAiIgogIENtZGJhcl8yLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogIENtZGJhcl8yLlRleHRTaXplID0gMTQuMDAwCiAgQ21kYmFyXzIuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAKICBDbWRiYXJfMy5OYW1lID0gIkNtZGJhcl8zIgogIENtZGJhcl8zLlBhcmVudCA9IGJhY2tncm91bmRfMgogIENtZGJhcl8zLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIENtZGJhcl8zLkJvcmRlclNpemVQaXhlbCA9IDAKICBDbWRiYXJfMy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxNTAsIDAsIDYwKQogIENtZGJhcl8zLlNpemUgPSBVRGltMi5uZXcoMCwgMTUwLCAwLCAyMCkKICBDbWRiYXJfMy5aSW5kZXggPSAxMAogIENtZGJhcl8zLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIENtZGJhcl8zLlBsYWNlaG9sZGVyVGV4dCA9ICJDb21tYW5kIDIiCiAgQ21kYmFyXzMuVGV4dCA9ICIiCiAgQ21kYmFyXzMuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgQ21kYmFyXzMuVGV4dFNpemUgPSAxNC4wMDAKICBDbWRiYXJfMy5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogIAogIENyZWF0ZVRvZ2dsZS5OYW1lID0gIkNyZWF0ZVRvZ2dsZSIKICBDcmVhdGVUb2dnbGUuUGFyZW50ID0gYmFja2dyb3VuZF8yCiAgQ3JlYXRlVG9nZ2xlLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIENyZWF0ZVRvZ2dsZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIENyZWF0ZVRvZ2dsZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgQ3JlYXRlVG9nZ2xlLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDE1MiwgMCwgMTApCiAgQ3JlYXRlVG9nZ2xlLlNpemUgPSBVRGltMi5uZXcoMCwgMTk4LCAwLCAyMCkKICBDcmVhdGVUb2dnbGUuWkluZGV4ID0gMTAKICBDcmVhdGVUb2dnbGUuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgQ3JlYXRlVG9nZ2xlLlRleHQgPSAiQ3JlYXRlIFRvZ2dsZSIKICBDcmVhdGVUb2dnbGUuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgQ3JlYXRlVG9nZ2xlLlRleHRTaXplID0gMTQuMDAwCiAgQ3JlYXRlVG9nZ2xlLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgdGFibGUuaW5zZXJ0KHRleHQxLENyZWF0ZVRvZ2dsZSkKICAKICBCdXR0b25fMi5OYW1lID0gIkJ1dHRvbiIKICBCdXR0b25fMi5QYXJlbnQgPSBDcmVhdGVUb2dnbGUKICBCdXR0b25fMi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNzgsIDc4LCA3OSkKICBCdXR0b25fMi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgQnV0dG9uXzIuUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTIwLCAwLCAwKQogIEJ1dHRvbl8yLlNpemUgPSBVRGltMi5uZXcoMCwgMjAsIDAsIDIwKQogIEJ1dHRvbl8yLlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMyxCdXR0b25fMikKICAKICBPbl8yLk5hbWUgPSAiT24iCiAgT25fMi5QYXJlbnQgPSBCdXR0b25fMgogIE9uXzIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDE1MCwgMTUwLCAxNTEpCiAgT25fMi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIE9uXzIuQm9yZGVyU2l6ZVBpeGVsID0gMAogIE9uXzIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMiwgMCwgMikKICBPbl8yLlNpemUgPSBVRGltMi5uZXcoMCwgMTYsIDAsIDE2KQogIE9uXzIuWkluZGV4ID0gMTAKICBPbl8yLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIE9uXzIuVGV4dCA9ICIiCiAgT25fMi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMCwgMCwgMCkKICBPbl8yLlRleHRTaXplID0gMTQuMDAwCiAgCiAgc2hhZG93XzIuTmFtZSA9ICJzaGFkb3ciCiAgc2hhZG93XzIuUGFyZW50ID0gS2V5YmluZEVkaXRvcgogIHNoYWRvd18yLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIHNoYWRvd18yLkJvcmRlclNpemVQaXhlbCA9IDAKICBzaGFkb3dfMi5TaXplID0gVURpbTIubmV3KDAsIDM2MCwgMCwgMjApCiAgc2hhZG93XzIuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLHNoYWRvd18yKQogIAogIFBvcHVwVGV4dF8yLk5hbWUgPSAiUG9wdXBUZXh0XzIiCiAgUG9wdXBUZXh0XzIuUGFyZW50ID0gc2hhZG93XzIKICBQb3B1cFRleHRfMi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIFBvcHVwVGV4dF8yLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC45NDk5OTk5ODgsIDApCiAgUG9wdXBUZXh0XzIuWkluZGV4ID0gMTAKICBQb3B1cFRleHRfMi5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBQb3B1cFRleHRfMi5UZXh0ID0gIlNldCBLZXliaW5kcyIKICBQb3B1cFRleHRfMi5UZXh0Q29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKICBQb3B1cFRleHRfMi5UZXh0U2l6ZSA9IDE0LjAwMAogIFBvcHVwVGV4dF8yLlRleHRXcmFwcGVkID0gdHJ1ZQogIHRhYmxlLmluc2VydCh0ZXh0MSxQb3B1cFRleHRfMikKICAKICBFeGl0XzIuTmFtZSA9ICJFeGl0XzIiCiAgRXhpdF8yLlBhcmVudCA9IHNoYWRvd18yCiAgRXhpdF8yLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgRXhpdF8yLlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0yMCwgMCwgMCkKICBFeGl0XzIuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMCwgMCwgMjApCiAgRXhpdF8yLlpJbmRleCA9IDEwCiAgRXhpdF8yLlRleHQgPSAiIgogIAogIEV4aXRJbWFnZV8yLlBhcmVudCA9IEV4aXRfMgogIEV4aXRJbWFnZV8yLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogIEV4aXRJbWFnZV8yLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgRXhpdEltYWdlXzIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgNSkKICBFeGl0SW1hZ2VfMi5TaXplID0gVURpbTIubmV3KDAsIDEwLCAwLCAxMCkKICBFeGl0SW1hZ2VfMi5aSW5kZXggPSAxMAogIEV4aXRJbWFnZV8yLkltYWdlID0gInJieGFzc2V0aWQ6Ly81MDU0NjYzNjUwIgogIAogIFBvc2l0aW9uc0ZyYW1lLk5hbWUgPSAiUG9zaXRpb25zRnJhbWUiCiAgUG9zaXRpb25zRnJhbWUuUGFyZW50ID0gU2V0dGluZ3MKICBQb3NpdGlvbnNGcmFtZS5BY3RpdmUgPSB0cnVlCiAgUG9zaXRpb25zRnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDM2LCAzNiwgMzcpCiAgUG9zaXRpb25zRnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMAogIFBvc2l0aW9uc0ZyYW1lLlNpemUgPSBVRGltMi5uZXcoMCwgMjUwLCAwLCAxNzUpCiAgUG9zaXRpb25zRnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMTc1KQogIFBvc2l0aW9uc0ZyYW1lLlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMSxQb3NpdGlvbnNGcmFtZSkKICAKICBDbG9zZV8zLk5hbWUgPSAiQ2xvc2UiCiAgQ2xvc2VfMy5QYXJlbnQgPSBQb3NpdGlvbnNGcmFtZQogIENsb3NlXzMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgQ2xvc2VfMy5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgQ2xvc2VfMy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyMDUsIDAsIDE1MCkKICBDbG9zZV8zLlNpemUgPSBVRGltMi5uZXcoMCwgNDAsIDAsIDIwKQogIENsb3NlXzMuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgQ2xvc2VfMy5UZXh0U2l6ZSA9IDE0CiAgQ2xvc2VfMy5UZXh0ID0gIkNsb3NlIgogIENsb3NlXzMuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICBDbG9zZV8zLlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMixDbG9zZV8zKQogIHRhYmxlLmluc2VydCh0ZXh0MSxDbG9zZV8zKQogIAogIERlbGV0ZV81Lk5hbWUgPSAiRGVsZXRlIgogIERlbGV0ZV81LlBhcmVudCA9IFBvc2l0aW9uc0ZyYW1lCiAgRGVsZXRlXzUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgRGVsZXRlXzUuQm9yZGVyU2l6ZVBpeGVsID0gMAogIERlbGV0ZV81LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUwLCAwLCAxNTApCiAgRGVsZXRlXzUuU2l6ZSA9IFVEaW0yLm5ldygwLCA0MCwgMCwgMjApCiAgRGVsZXRlXzUuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgRGVsZXRlXzUuVGV4dFNpemUgPSAxNAogIERlbGV0ZV81LlRleHQgPSAiQ2xlYXIiCiAgRGVsZXRlXzUuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICBEZWxldGVfNS5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTIsRGVsZXRlXzUpCiAgdGFibGUuaW5zZXJ0KHRleHQxLERlbGV0ZV81KQogIAogIFBhcnQuTmFtZSA9ICJQYXJ0R290byIKICBQYXJ0LlBhcmVudCA9IFBvc2l0aW9uc0ZyYW1lCiAgUGFydC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDYsIDQ2LCA0NykKICBQYXJ0LkJvcmRlclNpemVQaXhlbCA9IDAKICBQYXJ0LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDE1MCkKICBQYXJ0LlNpemUgPSBVRGltMi5uZXcoMCwgNDAsIDAsIDIwKQogIFBhcnQuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgUGFydC5UZXh0U2l6ZSA9IDE0CiAgUGFydC5UZXh0ID0gIlBhcnQiCiAgUGFydC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIFBhcnQuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLFBhcnQpCiAgdGFibGUuaW5zZXJ0KHRleHQxLFBhcnQpCiAgCiAgSG9sZGVyXzQuTmFtZSA9ICJIb2xkZXIiCiAgSG9sZGVyXzQuUGFyZW50ID0gUG9zaXRpb25zRnJhbWUKICBIb2xkZXJfNC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIEhvbGRlcl80LkJvcmRlclNpemVQaXhlbCA9IDAKICBIb2xkZXJfNC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKQogIEhvbGRlcl80LlNlbGVjdGFibGUgPSBmYWxzZQogIEhvbGRlcl80LlNpemUgPSBVRGltMi5uZXcoMCwgMjUwLCAwLCAxNDUpCiAgSG9sZGVyXzQuU2Nyb2xsQmFySW1hZ2VDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3OCw3OCw3OSkKICBIb2xkZXJfNC5Cb3R0b21JbWFnZSA9ICJyYnhhc3NldDovL3RleHR1cmVzL3VpL1Njcm9sbC9zY3JvbGwtbWlkZGxlLnBuZyIKICBIb2xkZXJfNC5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApCiAgSG9sZGVyXzQuTWlkSW1hZ2UgPSAicmJ4YXNzZXQ6Ly90ZXh0dXJlcy91aS9TY3JvbGwvc2Nyb2xsLW1pZGRsZS5wbmciCiAgSG9sZGVyXzQuU2Nyb2xsQmFyVGhpY2tuZXNzID0gMAogIEhvbGRlcl80LlRvcEltYWdlID0gInJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIgogIEhvbGRlcl80LlZlcnRpY2FsU2Nyb2xsQmFySW5zZXQgPSAnQWx3YXlzJwogIEhvbGRlcl80LlpJbmRleCA9IDEwCiAgCiAgRXhhbXBsZV80Lk5hbWUgPSAiRXhhbXBsZSIKICBFeGFtcGxlXzQuUGFyZW50ID0gUG9zaXRpb25zRnJhbWUKICBFeGFtcGxlXzQuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgRXhhbXBsZV80LkJvcmRlclNpemVQaXhlbCA9IDAKICBFeGFtcGxlXzQuU2l6ZSA9IFVEaW0yLm5ldygwLCAxMCwgMCwgMjApCiAgRXhhbXBsZV80LlZpc2libGUgPSBmYWxzZQogIEV4YW1wbGVfNC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAtNSkKICBFeGFtcGxlXzQuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLEV4YW1wbGVfNCkKICAKICBUZXh0XzUuTmFtZSA9ICJUZXh0IgogIFRleHRfNS5QYXJlbnQgPSBFeGFtcGxlXzQKICBUZXh0XzUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgVGV4dF81LkJvcmRlclNpemVQaXhlbCA9IDAKICBUZXh0XzUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAsIDAsIDApCiAgVGV4dF81LlNpemUgPSBVRGltMi5uZXcoMCwgMjQwLCAwLCAyMCkKICBUZXh0XzUuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgVGV4dF81LlRleHRTaXplID0gMTQKICBUZXh0XzUuVGV4dCA9ICJQb3NpdGlvbiIKICBUZXh0XzUuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICBUZXh0XzUuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICBUZXh0XzUuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLFRleHRfNSkKICB0YWJsZS5pbnNlcnQodGV4dDEsVGV4dF81KQogIAogIERlbGV0ZV82Lk5hbWUgPSAiRGVsZXRlIgogIERlbGV0ZV82LlBhcmVudCA9IFRleHRfNQogIERlbGV0ZV82LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3OCwgNzgsIDc5KQogIERlbGV0ZV82LkJvcmRlclNpemVQaXhlbCA9IDAKICBEZWxldGVfNi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDApCiAgRGVsZXRlXzYuU2l6ZSA9IFVEaW0yLm5ldygwLCA0MCwgMCwgMjApCiAgRGVsZXRlXzYuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgRGVsZXRlXzYuVGV4dFNpemUgPSAxNAogIERlbGV0ZV82LlRleHQgPSAiRGVsZXRlIgogIERlbGV0ZV82LlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDAsIDAsIDApCiAgRGVsZXRlXzYuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUzLERlbGV0ZV82KQogIHRhYmxlLmluc2VydCh0ZXh0MixEZWxldGVfNikKICAKICBUUC5OYW1lID0gIlRQIgogIFRQLlBhcmVudCA9IFRleHRfNQogIFRQLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3OCwgNzgsIDc5KQogIFRQLkJvcmRlclNpemVQaXhlbCA9IDAKICBUUC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxNTUsIDAsIDApCiAgVFAuU2l6ZSA9IFVEaW0yLm5ldygwLCA0MCwgMCwgMjApCiAgVFAuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgVFAuVGV4dFNpemUgPSAxNAogIFRQLlRleHQgPSAiR290byIKICBUUC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygwLCAwLCAwKQogIFRQLlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMyxUUCkKICB0YWJsZS5pbnNlcnQodGV4dDIsVFApCiAgCiAgQWxpYXNlc0ZyYW1lLk5hbWUgPSAiQWxpYXNlc0ZyYW1lIgogIEFsaWFzZXNGcmFtZS5QYXJlbnQgPSBTZXR0aW5ncwogIEFsaWFzZXNGcmFtZS5BY3RpdmUgPSB0cnVlCiAgQWxpYXNlc0ZyYW1lLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzNiwgMzYsIDM3KQogIEFsaWFzZXNGcmFtZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgQWxpYXNlc0ZyYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDE3NSkKICBBbGlhc2VzRnJhbWUuU2l6ZSA9IFVEaW0yLm5ldygwLCAyNTAsIDAsIDE3NSkKICBBbGlhc2VzRnJhbWUuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUxLEFsaWFzZXNGcmFtZSkKICAKICBDbG9zZV8yLk5hbWUgPSAiQ2xvc2UiCiAgQ2xvc2VfMi5QYXJlbnQgPSBBbGlhc2VzRnJhbWUKICBDbG9zZV8yLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIENsb3NlXzIuQm9yZGVyU2l6ZVBpeGVsID0gMAogIENsb3NlXzIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjA1LCAwLCAxNTApCiAgQ2xvc2VfMi5TaXplID0gVURpbTIubmV3KDAsIDQwLCAwLCAyMCkKICBDbG9zZV8yLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIENsb3NlXzIuVGV4dFNpemUgPSAxNAogIENsb3NlXzIuVGV4dCA9ICJDbG9zZSIKICBDbG9zZV8yLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgQ2xvc2VfMi5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTIsQ2xvc2VfMikKICB0YWJsZS5pbnNlcnQodGV4dDEsQ2xvc2VfMikKICAKICBEZWxldGVfMy5OYW1lID0gIkRlbGV0ZSIKICBEZWxldGVfMy5QYXJlbnQgPSBBbGlhc2VzRnJhbWUKICBEZWxldGVfMy5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDYsIDQ2LCA0NykKICBEZWxldGVfMy5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgRGVsZXRlXzMuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMTUwKQogIERlbGV0ZV8zLlNpemUgPSBVRGltMi5uZXcoMCwgNDAsIDAsIDIwKQogIERlbGV0ZV8zLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIERlbGV0ZV8zLlRleHRTaXplID0gMTQKICBEZWxldGVfMy5UZXh0ID0gIkNsZWFyIgogIERlbGV0ZV8zLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgRGVsZXRlXzMuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLERlbGV0ZV8zKQogIHRhYmxlLmluc2VydCh0ZXh0MSxEZWxldGVfMykKICAKICBIb2xkZXJfMy5OYW1lID0gIkhvbGRlciIKICBIb2xkZXJfMy5QYXJlbnQgPSBBbGlhc2VzRnJhbWUKICBIb2xkZXJfMy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIEhvbGRlcl8zLkJvcmRlclNpemVQaXhlbCA9IDAKICBIb2xkZXJfMy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAwKQogIEhvbGRlcl8zLlNpemUgPSBVRGltMi5uZXcoMCwgMjUwLCAwLCAxNDUpCiAgSG9sZGVyXzMuU2Nyb2xsQmFySW1hZ2VDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3OCw3OCw3OSkKICBIb2xkZXJfMy5Cb3R0b21JbWFnZSA9ICJyYnhhc3NldDovL3RleHR1cmVzL3VpL1Njcm9sbC9zY3JvbGwtbWlkZGxlLnBuZyIKICBIb2xkZXJfMy5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApCiAgSG9sZGVyXzMuTWlkSW1hZ2UgPSAicmJ4YXNzZXQ6Ly90ZXh0dXJlcy91aS9TY3JvbGwvc2Nyb2xsLW1pZGRsZS5wbmciCiAgSG9sZGVyXzMuU2Nyb2xsQmFyVGhpY2tuZXNzID0gMAogIEhvbGRlcl8zLlRvcEltYWdlID0gInJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIgogIEhvbGRlcl8zLlZlcnRpY2FsU2Nyb2xsQmFySW5zZXQgPSAnQWx3YXlzJwogIEhvbGRlcl8zLlpJbmRleCA9IDEwCiAgCiAgRXhhbXBsZV8zLk5hbWUgPSAiRXhhbXBsZSIKICBFeGFtcGxlXzMuUGFyZW50ID0gQWxpYXNlc0ZyYW1lCiAgRXhhbXBsZV8zLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIEV4YW1wbGVfMy5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgRXhhbXBsZV8zLlNpemUgPSBVRGltMi5uZXcoMCwgMTAsIDAsIDIwKQogIEV4YW1wbGVfMy5WaXNpYmxlID0gZmFsc2UKICBFeGFtcGxlXzMuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLEV4YW1wbGVfMykKICAKICBUZXh0XzQuTmFtZSA9ICJUZXh0IgogIFRleHRfNC5QYXJlbnQgPSBFeGFtcGxlXzMKICBUZXh0XzQuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgVGV4dF80LkJvcmRlclNpemVQaXhlbCA9IDAKICBUZXh0XzQuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAsIDAsIDApCiAgVGV4dF80LlNpemUgPSBVRGltMi5uZXcoMCwgMjQwLCAwLCAyMCkKICBUZXh0XzQuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgVGV4dF80LlRleHRTaXplID0gMTQKICBUZXh0XzQuVGV4dCA9ICJob25rIgogIFRleHRfNC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIFRleHRfNC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogIFRleHRfNC5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTIsVGV4dF80KQogIHRhYmxlLmluc2VydCh0ZXh0MSxUZXh0XzQpCiAgCiAgRGVsZXRlXzQuTmFtZSA9ICJEZWxldGUiCiAgRGVsZXRlXzQuUGFyZW50ID0gVGV4dF80CiAgRGVsZXRlXzQuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDc4LCA3OCwgNzkpCiAgRGVsZXRlXzQuQm9yZGVyU2l6ZVBpeGVsID0gMAogIERlbGV0ZV80LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDIwMCwgMCwgMCkKICBEZWxldGVfNC5TaXplID0gVURpbTIubmV3KDAsIDQwLCAwLCAyMCkKICBEZWxldGVfNC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBEZWxldGVfNC5UZXh0U2l6ZSA9IDE0CiAgRGVsZXRlXzQuVGV4dCA9ICJEZWxldGUiCiAgRGVsZXRlXzQuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMCwgMCwgMCkKICBEZWxldGVfNC5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTMsRGVsZXRlXzQpCiAgdGFibGUuaW5zZXJ0KHRleHQyLERlbGV0ZV80KQogIAogIFBsdWdpbnNGcmFtZS5OYW1lID0gIlBsdWdpbnNGcmFtZSIKICBQbHVnaW5zRnJhbWUuUGFyZW50ID0gU2V0dGluZ3MKICBQbHVnaW5zRnJhbWUuQWN0aXZlID0gdHJ1ZQogIFBsdWdpbnNGcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMzYsIDM2LCAzNykKICBQbHVnaW5zRnJhbWUuQm9yZGVyU2l6ZVBpeGVsID0gMAogIFBsdWdpbnNGcmFtZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAxNzUpCiAgUGx1Z2luc0ZyYW1lLlNpemUgPSBVRGltMi5uZXcoMCwgMjUwLCAwLCAxNzUpCiAgUGx1Z2luc0ZyYW1lLlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMSxQbHVnaW5zRnJhbWUpCiAgCiAgQ2xvc2VfNC5OYW1lID0gIkNsb3NlIgogIENsb3NlXzQuUGFyZW50ID0gUGx1Z2luc0ZyYW1lCiAgQ2xvc2VfNC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDYsIDQ2LCA0NykKICBDbG9zZV80LkJvcmRlclNpemVQaXhlbCA9IDAKICBDbG9zZV80LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDIwNSwgMCwgMTUwKQogIENsb3NlXzQuU2l6ZSA9IFVEaW0yLm5ldygwLCA0MCwgMCwgMjApCiAgQ2xvc2VfNC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBDbG9zZV80LlRleHRTaXplID0gMTQKICBDbG9zZV80LlRleHQgPSAiQ2xvc2UiCiAgQ2xvc2VfNC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIENsb3NlXzQuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLENsb3NlXzQpCiAgdGFibGUuaW5zZXJ0KHRleHQxLENsb3NlXzQpCiAgCiAgQWRkXzMuTmFtZSA9ICJBZGQiCiAgQWRkXzMuUGFyZW50ID0gUGx1Z2luc0ZyYW1lCiAgQWRkXzMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgQWRkXzMuQm9yZGVyU2l6ZVBpeGVsID0gMAogIEFkZF8zLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDE1MCkKICBBZGRfMy5TaXplID0gVURpbTIubmV3KDAsIDQwLCAwLCAyMCkKICBBZGRfMy5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBBZGRfMy5UZXh0U2l6ZSA9IDE0CiAgQWRkXzMuVGV4dCA9ICJBZGQiCiAgQWRkXzMuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICBBZGRfMy5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTIsQWRkXzMpCiAgdGFibGUuaW5zZXJ0KHRleHQxLEFkZF8zKQogIAogIEhvbGRlcl81Lk5hbWUgPSAiSG9sZGVyIgogIEhvbGRlcl81LlBhcmVudCA9IFBsdWdpbnNGcmFtZQogIEhvbGRlcl81LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgSG9sZGVyXzUuQm9yZGVyU2l6ZVBpeGVsID0gMAogIEhvbGRlcl81LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDApCiAgSG9sZGVyXzUuU2VsZWN0YWJsZSA9IGZhbHNlCiAgSG9sZGVyXzUuU2l6ZSA9IFVEaW0yLm5ldygwLCAyNTAsIDAsIDE0NSkKICBIb2xkZXJfNS5TY3JvbGxCYXJJbWFnZUNvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDc4LDc4LDc5KQogIEhvbGRlcl81LkJvdHRvbUltYWdlID0gInJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIgogIEhvbGRlcl81LkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMCkKICBIb2xkZXJfNS5NaWRJbWFnZSA9ICJyYnhhc3NldDovL3RleHR1cmVzL3VpL1Njcm9sbC9zY3JvbGwtbWlkZGxlLnBuZyIKICBIb2xkZXJfNS5TY3JvbGxCYXJUaGlja25lc3MgPSAwCiAgSG9sZGVyXzUuVG9wSW1hZ2UgPSAicmJ4YXNzZXQ6Ly90ZXh0dXJlcy91aS9TY3JvbGwvc2Nyb2xsLW1pZGRsZS5wbmciCiAgSG9sZGVyXzUuVmVydGljYWxTY3JvbGxCYXJJbnNldCA9ICdBbHdheXMnCiAgSG9sZGVyXzUuWkluZGV4ID0gMTAKICAKICBFeGFtcGxlXzUuTmFtZSA9ICJFeGFtcGxlIgogIEV4YW1wbGVfNS5QYXJlbnQgPSBQbHVnaW5zRnJhbWUKICBFeGFtcGxlXzUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgRXhhbXBsZV81LkJvcmRlclNpemVQaXhlbCA9IDAKICBFeGFtcGxlXzUuU2l6ZSA9IFVEaW0yLm5ldygwLCAxMCwgMCwgMjApCiAgRXhhbXBsZV81LlZpc2libGUgPSBmYWxzZQogIEV4YW1wbGVfNS5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTIsRXhhbXBsZV81KQogIAogIFRleHRfNi5OYW1lID0gIlRleHQiCiAgVGV4dF82LlBhcmVudCA9IEV4YW1wbGVfNQogIFRleHRfNi5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDYsIDQ2LCA0NykKICBUZXh0XzYuQm9yZGVyU2l6ZVBpeGVsID0gMAogIFRleHRfNi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMCwgMCkKICBUZXh0XzYuU2l6ZSA9IFVEaW0yLm5ldygwLCAyNDAsIDAsIDIwKQogIFRleHRfNi5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBUZXh0XzYuVGV4dFNpemUgPSAxNAogIFRleHRfNi5UZXh0ID0gIkY0ID4gVG9nZ2xlIEZseSIKICBUZXh0XzYuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICBUZXh0XzYuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICBUZXh0XzYuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLFRleHRfNikKICB0YWJsZS5pbnNlcnQodGV4dDEsVGV4dF82KQogIAogIERlbGV0ZV83Lk5hbWUgPSAiRGVsZXRlIgogIERlbGV0ZV83LlBhcmVudCA9IFRleHRfNgogIERlbGV0ZV83LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig3OCwgNzgsIDc5KQogIERlbGV0ZV83LkJvcmRlclNpemVQaXhlbCA9IDAKICBEZWxldGVfNy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyMDAsIDAsIDApCiAgRGVsZXRlXzcuU2l6ZSA9IFVEaW0yLm5ldygwLCA0MCwgMCwgMjApCiAgRGVsZXRlXzcuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgRGVsZXRlXzcuVGV4dFNpemUgPSAxNAogIERlbGV0ZV83LlRleHQgPSAiRGVsZXRlIgogIERlbGV0ZV83LlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDAsIDAsIDApCiAgRGVsZXRlXzcuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUzLERlbGV0ZV83KQogIHRhYmxlLmluc2VydCh0ZXh0MixEZWxldGVfNykKICAKICBQbHVnaW5FZGl0b3IuTmFtZSA9IHJhbmRvbVN0cmluZygpCiAgUGx1Z2luRWRpdG9yLlBhcmVudCA9IFBBUkVOVAogIFBsdWdpbkVkaXRvci5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgUGx1Z2luRWRpdG9yLkFjdGl2ZSA9IHRydWUKICBQbHVnaW5FZGl0b3IuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBQbHVnaW5FZGl0b3IuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtMTgwLCAwLCAtNTAwKQogIFBsdWdpbkVkaXRvci5TaXplID0gVURpbTIubmV3KDAsIDM2MCwgMCwgMjApCiAgUGx1Z2luRWRpdG9yLlpJbmRleCA9IDEwCiAgCiAgYmFja2dyb3VuZF8zLk5hbWUgPSAiYmFja2dyb3VuZCIKICBiYWNrZ3JvdW5kXzMuUGFyZW50ID0gUGx1Z2luRWRpdG9yCiAgYmFja2dyb3VuZF8zLkFjdGl2ZSA9IHRydWUKICBiYWNrZ3JvdW5kXzMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDM2LCAzNiwgMzcpCiAgYmFja2dyb3VuZF8zLkJvcmRlclNpemVQaXhlbCA9IDAKICBiYWNrZ3JvdW5kXzMuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMjApCiAgYmFja2dyb3VuZF8zLlNpemUgPSBVRGltMi5uZXcoMCwgMzYwLCAwLCAxNjApCiAgYmFja2dyb3VuZF8zLlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMSxiYWNrZ3JvdW5kXzMpCiAgCiAgRGFya18yLk5hbWUgPSAiRGFyayIKICBEYXJrXzIuUGFyZW50ID0gYmFja2dyb3VuZF8zCiAgRGFya18yLkFjdGl2ZSA9IHRydWUKICBEYXJrXzIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgRGFya18yLkJvcmRlclNpemVQaXhlbCA9IDAKICBEYXJrXzIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjIyLCAwLCAwKQogIERhcmtfMi5TaXplID0gVURpbTIubmV3KDAsIDIsIDAsIDE2MCkKICBEYXJrXzIuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLERhcmtfMikKICAKICBJbWcuTmFtZSA9ICJJbWciCiAgSW1nLlBhcmVudCA9IGJhY2tncm91bmRfMwogIEltZy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIEltZy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyNDIsIDAsIDMpCiAgSW1nLlNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAwLCA5NSkKICBJbWcuSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzQxMTMwNTAzODMiCiAgSW1nLlpJbmRleCA9IDEwCiAgCiAgQWRkUGx1Z2luLk5hbWUgPSAiQWRkUGx1Z2luIgogIEFkZFBsdWdpbi5QYXJlbnQgPSBiYWNrZ3JvdW5kXzMKICBBZGRQbHVnaW4uQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgQWRkUGx1Z2luLkJvcmRlclNpemVQaXhlbCA9IDAKICBBZGRQbHVnaW4uUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjM1LCAwLCAxMDApCiAgQWRkUGx1Z2luLlNpemUgPSBVRGltMi5uZXcoMCwgMTE1LCAwLCA1MCkKICBBZGRQbHVnaW4uRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgQWRkUGx1Z2luLlRleHRTaXplID0gMTQKICBBZGRQbHVnaW4uVGV4dCA9ICJBZGQgUGx1Z2luIgogIEFkZFBsdWdpbi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIEFkZFBsdWdpbi5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTIsQWRkUGx1Z2luKQogIHRhYmxlLmluc2VydCh0ZXh0MSxBZGRQbHVnaW4pCiAgCiAgRmlsZU5hbWUuTmFtZSA9ICJGaWxlTmFtZSIKICBGaWxlTmFtZS5QYXJlbnQgPSBiYWNrZ3JvdW5kXzMKICBGaWxlTmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDYsIDQ2LCA0NykKICBGaWxlTmFtZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgRmlsZU5hbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC4wMjgsIDAsIDAuNjI1LCAwKQogIEZpbGVOYW1lLlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCkKICBGaWxlTmFtZS5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBGaWxlTmFtZS5UZXh0U2l6ZSA9IDE0CiAgRmlsZU5hbWUuVGV4dCA9ICJQbHVnaW4gRmlsZSBOYW1lIgogIEZpbGVOYW1lLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgRmlsZU5hbWUuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLEZpbGVOYW1lKQogIHRhYmxlLmluc2VydCh0ZXh0MSxGaWxlTmFtZSkKICAKICBBYm91dC5OYW1lID0gIkFib3V0IgogIEFib3V0LlBhcmVudCA9IGJhY2tncm91bmRfMwogIEFib3V0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgQWJvdXQuQm9yZGVyU2l6ZVBpeGVsID0gMAogIEFib3V0LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDE3LCAwLCAxMCkKICBBYm91dC5TaXplID0gVURpbTIubmV3KDAsIDE4NywgMCwgNDkpCiAgQWJvdXQuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgQWJvdXQuVGV4dFNpemUgPSAxNAogIEFib3V0LlRleHQgPSAiUGx1Z2lucyBhcmUgLml5IGZpbGVzIGFuZCBzaG91bGQgYmUgbG9jYXRlZCBpbiB0aGUgJ3dvcmtzcGFjZScgZm9sZGVyIG9mIHlvdXIgZXhwbG9pdC4iCiAgQWJvdXQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCiAgQWJvdXQuVGV4dFdyYXBwZWQgPSB0cnVlCiAgQWJvdXQuVGV4dFlBbGlnbm1lbnQgPSBFbnVtLlRleHRZQWxpZ25tZW50LlRvcAogIEFib3V0LlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHRleHQxLEFib3V0KQogIAogIERpcmVjdGlvbnNfMi5OYW1lID0gIkRpcmVjdGlvbnMiCiAgRGlyZWN0aW9uc18yLlBhcmVudCA9IGJhY2tncm91bmRfMwogIERpcmVjdGlvbnNfMi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIERpcmVjdGlvbnNfMi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgRGlyZWN0aW9uc18yLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDE3LCAwLCA2MCkKICBEaXJlY3Rpb25zXzIuU2l6ZSA9IFVEaW0yLm5ldygwLCAxODcsIDAsIDQ5KQogIERpcmVjdGlvbnNfMi5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBEaXJlY3Rpb25zXzIuVGV4dFNpemUgPSAxNAogIERpcmVjdGlvbnNfMi5UZXh0ID0gIlR5cGUgdGhlIG5hbWUgb2YgdGhlIHBsdWdpbiBmaWxlIHlvdSB3YW50IHRvIGFkZCBiZWxvdy4iCiAgRGlyZWN0aW9uc18yLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogIERpcmVjdGlvbnNfMi5UZXh0V3JhcHBlZCA9IHRydWUKICBEaXJlY3Rpb25zXzIuVGV4dFlBbGlnbm1lbnQgPSBFbnVtLlRleHRZQWxpZ25tZW50LlRvcAogIERpcmVjdGlvbnNfMi5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydCh0ZXh0MSxEaXJlY3Rpb25zXzIpCiAgCiAgc2hhZG93XzMuTmFtZSA9ICJzaGFkb3ciCiAgc2hhZG93XzMuUGFyZW50ID0gUGx1Z2luRWRpdG9yCiAgc2hhZG93XzMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgc2hhZG93XzMuQm9yZGVyU2l6ZVBpeGVsID0gMAogIHNoYWRvd18zLlNpemUgPSBVRGltMi5uZXcoMCwgMzYwLCAwLCAyMCkKICBzaGFkb3dfMy5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydChzaGFkZTIsc2hhZG93XzMpCiAgCiAgUG9wdXBUZXh0XzMuTmFtZSA9ICJQb3B1cFRleHQiCiAgUG9wdXBUZXh0XzMuUGFyZW50ID0gc2hhZG93XzMKICBQb3B1cFRleHRfMy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIFBvcHVwVGV4dF8zLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC45NSwgMCkKICBQb3B1cFRleHRfMy5aSW5kZXggPSAxMAogIFBvcHVwVGV4dF8zLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIFBvcHVwVGV4dF8zLlRleHRTaXplID0gMTQKICBQb3B1cFRleHRfMy5UZXh0ID0gIkFkZCBQbHVnaW5zIgogIFBvcHVwVGV4dF8zLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgUG9wdXBUZXh0XzMuVGV4dFdyYXBwZWQgPSB0cnVlCiAgdGFibGUuaW5zZXJ0KHRleHQxLFBvcHVwVGV4dF8zKQogIAogIEV4aXRfMy5OYW1lID0gIkV4aXQiCiAgRXhpdF8zLlBhcmVudCA9IHNoYWRvd18zCiAgRXhpdF8zLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgRXhpdF8zLlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0yMCwgMCwgMCkKICBFeGl0XzMuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMCwgMCwgMjApCiAgRXhpdF8zLlRleHQgPSAiIgogIEV4aXRfMy5aSW5kZXggPSAxMAogIAogIEV4aXRJbWFnZV8zLlBhcmVudCA9IEV4aXRfMwogIEV4aXRJbWFnZV8zLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgRXhpdEltYWdlXzMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBFeGl0SW1hZ2VfMy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCA1KQogIEV4aXRJbWFnZV8zLlNpemUgPSBVRGltMi5uZXcoMCwgMTAsIDAsIDEwKQogIEV4aXRJbWFnZV8zLkltYWdlID0gInJieGFzc2V0aWQ6Ly81MDU0NjYzNjUwIgogIEV4aXRJbWFnZV8zLlpJbmRleCA9IDEwCiAgCiAgQWxpYXNIaW50Lk5hbWUgPSAiQWxpYXNIaW50IgogIEFsaWFzSGludC5QYXJlbnQgPSBBbGlhc2VzRnJhbWUKICBBbGlhc0hpbnQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBBbGlhc0hpbnQuQm9yZGVyU2l6ZVBpeGVsID0gMAogIEFsaWFzSGludC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyNSwgMCwgNDApCiAgQWxpYXNIaW50LlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCkKICBBbGlhc0hpbnQuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zSXRhbGljCiAgQWxpYXNIaW50LlRleHRTaXplID0gMTYKICBBbGlhc0hpbnQuVGV4dCA9ICJBZGQgYWxpYXNlcyBieSB1c2luZyB0aGUgJ2FkZGFsaWFzJyBjb21tYW5kIgogIEFsaWFzSGludC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIEFsaWFzSGludC5UZXh0U3Ryb2tlQ29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIEFsaWFzSGludC5UZXh0V3JhcHBlZCA9IHRydWUKICBBbGlhc0hpbnQuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQodGV4dDEsQWxpYXNIaW50KQogIAogIFBsdWdpbnNIaW50Lk5hbWUgPSAiUGx1Z2luc0hpbnQiCiAgUGx1Z2luc0hpbnQuUGFyZW50ID0gUGx1Z2luc0ZyYW1lCiAgUGx1Z2luc0hpbnQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBQbHVnaW5zSGludC5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgUGx1Z2luc0hpbnQuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjUsIDAsIDQwKQogIFBsdWdpbnNIaW50LlNpemUgPSBVRGltMi5uZXcoMCwgMjAwLCAwLCA1MCkKICBQbHVnaW5zSGludC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnNJdGFsaWMKICBQbHVnaW5zSGludC5UZXh0U2l6ZSA9IDE2CiAgUGx1Z2luc0hpbnQuVGV4dCA9ICJEb3dubG9hZCBwbHVnaW5zIGZyb20gdGhlIElZIERpc2NvcmQgKGRpc2NvcmQuZ2cvNzhadVdTcSkiCiAgUGx1Z2luc0hpbnQuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICBQbHVnaW5zSGludC5UZXh0U3Ryb2tlQ29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIFBsdWdpbnNIaW50LlRleHRXcmFwcGVkID0gdHJ1ZQogIFBsdWdpbnNIaW50LlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHRleHQxLFBsdWdpbnNIaW50KQogIAogIFBvc2l0aW9uc0hpbnQuTmFtZSA9ICJQb3NpdGlvbnNIaW50IgogIFBvc2l0aW9uc0hpbnQuUGFyZW50ID0gUG9zaXRpb25zRnJhbWUKICBQb3NpdGlvbnNIaW50LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgUG9zaXRpb25zSGludC5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgUG9zaXRpb25zSGludC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyNSwgMCwgNDApCiAgUG9zaXRpb25zSGludC5TaXplID0gVURpbTIubmV3KDAsIDIwMCwgMCwgNzApCiAgUG9zaXRpb25zSGludC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnNJdGFsaWMKICBQb3NpdGlvbnNIaW50LlRleHRTaXplID0gMTYKICBQb3NpdGlvbnNIaW50LlRleHQgPSAiVXNlIHRoZSAnc3dwJyBvciAnc2V0d2F5cG9pbnQnIGNvbW1hbmQgdG8gYWRkIGEgcG9zaXRpb24gdXNpbmcgeW91ciBjaGFyYWN0ZXIgKE5PVEU6IFBhcnQgdGVsZXBvcnRzIHdpbGwgbm90IHNhdmUpIgogIFBvc2l0aW9uc0hpbnQuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICBQb3NpdGlvbnNIaW50LlRleHRTdHJva2VDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgUG9zaXRpb25zSGludC5UZXh0V3JhcHBlZCA9IHRydWUKICBQb3NpdGlvbnNIaW50LlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHRleHQxLFBvc2l0aW9uc0hpbnQpCiAgCiAgVG9QYXJ0RnJhbWUuTmFtZSA9IHJhbmRvbVN0cmluZygpCiAgVG9QYXJ0RnJhbWUuUGFyZW50ID0gUEFSRU5UCiAgVG9QYXJ0RnJhbWUuQWN0aXZlID0gdHJ1ZQogIFRvUGFydEZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgVG9QYXJ0RnJhbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtMTgwLCAwLCAtNTAwKQogIFRvUGFydEZyYW1lLlNpemUgPSBVRGltMi5uZXcoMCwgMzYwLCAwLCAyMCkKICBUb1BhcnRGcmFtZS5aSW5kZXggPSAxMAogIAogIGJhY2tncm91bmRfNC5OYW1lID0gImJhY2tncm91bmQiCiAgYmFja2dyb3VuZF80LlBhcmVudCA9IFRvUGFydEZyYW1lCiAgYmFja2dyb3VuZF80LkFjdGl2ZSA9IHRydWUKICBiYWNrZ3JvdW5kXzQuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDM2LCAzNiwgMzcpCiAgYmFja2dyb3VuZF80LkJvcmRlclNpemVQaXhlbCA9IDAKICBiYWNrZ3JvdW5kXzQuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgMjApCiAgYmFja2dyb3VuZF80LlNpemUgPSBVRGltMi5uZXcoMCwgMzYwLCAwLCAxMTcpCiAgYmFja2dyb3VuZF80LlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMSxiYWNrZ3JvdW5kXzQpCiAgCiAgQ2hvb3NlUGFydC5OYW1lID0gIkNob29zZVBhcnQiCiAgQ2hvb3NlUGFydC5QYXJlbnQgPSBiYWNrZ3JvdW5kXzQKICBDaG9vc2VQYXJ0LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIENob29zZVBhcnQuQm9yZGVyU2l6ZVBpeGVsID0gMAogIENob29zZVBhcnQuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMTAwLCAwLCA1NSkKICBDaG9vc2VQYXJ0LlNpemUgPSBVRGltMi5uZXcoMCwgNzUsIDAsIDMwKQogIENob29zZVBhcnQuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgQ2hvb3NlUGFydC5UZXh0U2l6ZSA9IDE0CiAgQ2hvb3NlUGFydC5UZXh0ID0gIlNlbGVjdCBQYXJ0IgogIENob29zZVBhcnQuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICBDaG9vc2VQYXJ0LlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMixDaG9vc2VQYXJ0KQogIHRhYmxlLmluc2VydCh0ZXh0MSxDaG9vc2VQYXJ0KQogIAogIENvcHlQYXRoLk5hbWUgPSAiQ29weVBhdGgiCiAgQ29weVBhdGguUGFyZW50ID0gYmFja2dyb3VuZF80CiAgQ29weVBhdGguQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpCiAgQ29weVBhdGguQm9yZGVyU2l6ZVBpeGVsID0gMAogIENvcHlQYXRoLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDE4NSwgMCwgNTUpCiAgQ29weVBhdGguU2l6ZSA9IFVEaW0yLm5ldygwLCA3NSwgMCwgMzApCiAgQ29weVBhdGguRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgQ29weVBhdGguVGV4dFNpemUgPSAxNAogIENvcHlQYXRoLlRleHQgPSAiQ29weSBQYXRoIgogIENvcHlQYXRoLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgQ29weVBhdGguWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLENvcHlQYXRoKQogIHRhYmxlLmluc2VydCh0ZXh0MSxDb3B5UGF0aCkKICAKICBEaXJlY3Rpb25zXzMuTmFtZSA9ICJEaXJlY3Rpb25zIgogIERpcmVjdGlvbnNfMy5QYXJlbnQgPSBiYWNrZ3JvdW5kXzQKICBEaXJlY3Rpb25zXzMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBEaXJlY3Rpb25zXzMuQm9yZGVyU2l6ZVBpeGVsID0gMAogIERpcmVjdGlvbnNfMy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1MSwgMCwgMTcpCiAgRGlyZWN0aW9uc18zLlNpemUgPSBVRGltMi5uZXcoMCwgMjU3LCAwLCAzMikKICBEaXJlY3Rpb25zXzMuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgRGlyZWN0aW9uc18zLlRleHRTaXplID0gMTQKICBEaXJlY3Rpb25zXzMuVGV4dCA9ICdDbGljayBvbiBhIHBhcnQgYW5kIHRoZW4gY2xpY2sgdGhlICJTZWxlY3QgUGFydCIgYnV0dG9uIGJlbG93IHRvIHNldCBpdCBhcyBhIHRlbGVwb3J0IGxvY2F0aW9uJwogIERpcmVjdGlvbnNfMy5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIERpcmVjdGlvbnNfMy5UZXh0V3JhcHBlZCA9IHRydWUKICBEaXJlY3Rpb25zXzMuVGV4dFlBbGlnbm1lbnQgPSBFbnVtLlRleHRZQWxpZ25tZW50LlRvcAogIERpcmVjdGlvbnNfMy5aSW5kZXggPSAxMAogIHRhYmxlLmluc2VydCh0ZXh0MSxEaXJlY3Rpb25zXzMpCiAgCiAgUGF0aC5OYW1lID0gIlBhdGgiCiAgUGF0aC5QYXJlbnQgPSBiYWNrZ3JvdW5kXzQKICBQYXRoLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgUGF0aC5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgUGF0aC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCA5NCkKICBQYXRoLlNpemUgPSBVRGltMi5uZXcoMCwgMzYwLCAwLCAxNikKICBQYXRoLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2Fuc0l0YWxpYwogIFBhdGguVGV4dFNpemUgPSAxNAogIFBhdGguVGV4dCA9ICIiCiAgUGF0aC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIFBhdGguVGV4dFNjYWxlZCA9IHRydWUKICBQYXRoLlRleHRXcmFwcGVkID0gdHJ1ZQogIFBhdGguVGV4dFlBbGlnbm1lbnQgPSBFbnVtLlRleHRZQWxpZ25tZW50LlRvcAogIFBhdGguWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQodGV4dDEsUGF0aCkKICAKICBzaGFkb3dfNC5OYW1lID0gInNoYWRvdyIKICBzaGFkb3dfNC5QYXJlbnQgPSBUb1BhcnRGcmFtZQogIHNoYWRvd180LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogIHNoYWRvd180LkJvcmRlclNpemVQaXhlbCA9IDAKICBzaGFkb3dfNC5TaXplID0gVURpbTIubmV3KDAsIDM2MCwgMCwgMjApCiAgc2hhZG93XzQuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUyLHNoYWRvd180KQogIAogIFBvcHVwVGV4dF81Lk5hbWUgPSAiUG9wdXBUZXh0IgogIFBvcHVwVGV4dF81LlBhcmVudCA9IHNoYWRvd180CiAgUG9wdXBUZXh0XzUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBQb3B1cFRleHRfNS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAuOTUsIDApCiAgUG9wdXBUZXh0XzUuWkluZGV4ID0gMTAKICBQb3B1cFRleHRfNS5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBQb3B1cFRleHRfNS5UZXh0U2l6ZSA9IDE0CiAgUG9wdXBUZXh0XzUuVGV4dCA9ICJUZWxlcG9ydCB0byBQYXJ0IgogIFBvcHVwVGV4dF81LlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgUG9wdXBUZXh0XzUuVGV4dFdyYXBwZWQgPSB0cnVlCiAgdGFibGUuaW5zZXJ0KHRleHQxLFBvcHVwVGV4dF81KQogIAogIEV4aXRfNC5OYW1lID0gIkV4aXQiCiAgRXhpdF80LlBhcmVudCA9IHNoYWRvd180CiAgRXhpdF80LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgRXhpdF80LlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0yMCwgMCwgMCkKICBFeGl0XzQuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMCwgMCwgMjApCiAgRXhpdF80LlRleHQgPSAiIgogIEV4aXRfNC5aSW5kZXggPSAxMAogIAogIEV4aXRJbWFnZV81LlBhcmVudCA9IEV4aXRfNAogIEV4aXRJbWFnZV81LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgRXhpdEltYWdlXzUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBFeGl0SW1hZ2VfNS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCA1KQogIEV4aXRJbWFnZV81LlNpemUgPSBVRGltMi5uZXcoMCwgMTAsIDAsIDEwKQogIEV4aXRJbWFnZV81LkltYWdlID0gInJieGFzc2V0aWQ6Ly81MDU0NjYzNjUwIgogIEV4aXRJbWFnZV81LlpJbmRleCA9IDEwCiAgCiAgbG9ncy5OYW1lID0gcmFuZG9tU3RyaW5nKCkKICBsb2dzLlBhcmVudCA9IFBBUkVOVAogIGxvZ3MuQWN0aXZlID0gdHJ1ZQogIGxvZ3MuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBsb2dzLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDEsIDEwKQogIGxvZ3MuU2l6ZSA9IFVEaW0yLm5ldygwLCAzMzgsIDAsIDIwKQogIGxvZ3MuWkluZGV4ID0gMTAKICAKICBzaGFkb3cuTmFtZSA9ICJzaGFkb3ciCiAgc2hhZG93LlBhcmVudCA9IGxvZ3MKICBzaGFkb3cuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5uZXcoMC4xODAzOTIsIDAuMTgwMzkyLCAwLjE4NDMxNCkKICBzaGFkb3cuQm9yZGVyU2l6ZVBpeGVsID0gMAogIHNoYWRvdy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLjAwOTk5OTk5OTc4LCAwKQogIHNoYWRvdy5TaXplID0gVURpbTIubmV3KDAsIDMzOCwgMCwgMjApCiAgc2hhZG93LlpJbmRleCA9IDEwCiAgdGFibGUuaW5zZXJ0KHNoYWRlMixzaGFkb3cpCiAgCiAgSGlkZS5OYW1lID0gIkhpZGUiCiAgSGlkZS5QYXJlbnQgPSBzaGFkb3cKICBIaWRlLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgSGlkZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtNDAsIDAsIDApCiAgSGlkZS5TaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCkKICBIaWRlLlpJbmRleCA9IDEwCiAgSGlkZS5UZXh0ID0gIiIKICAKICBJbWFnZUxhYmVsLlBhcmVudCA9IEhpZGUKICBJbWFnZUxhYmVsLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgSW1hZ2VMYWJlbC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogIEltYWdlTGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMywgMCwgMykKICBJbWFnZUxhYmVsLlNpemUgPSBVRGltMi5uZXcoMCwgMTQsIDAsIDE0KQogIEltYWdlTGFiZWwuSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzI0MDY2MTcwMzEiCiAgSW1hZ2VMYWJlbC5aSW5kZXggPSAxMAogIAogIFBvcHVwVGV4dC5OYW1lID0gIlBvcHVwVGV4dCIKICBQb3B1cFRleHQuUGFyZW50ID0gc2hhZG93CiAgUG9wdXBUZXh0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgUG9wdXBUZXh0LlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMC45NDk5OTk5ODgsIDApCiAgUG9wdXBUZXh0LlpJbmRleCA9IDEwCiAgUG9wdXBUZXh0LkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIFBvcHVwVGV4dC5Gb250U2l6ZSA9IEVudW0uRm9udFNpemUuU2l6ZTE0CiAgUG9wdXBUZXh0LlRleHQgPSAiTG9ncyIKICBQb3B1cFRleHQuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICBQb3B1cFRleHQuVGV4dFdyYXBwZWQgPSB0cnVlCiAgdGFibGUuaW5zZXJ0KHRleHQxLFBvcHVwVGV4dCkKICAKICBFeGl0Lk5hbWUgPSAiRXhpdCIKICBFeGl0LlBhcmVudCA9IHNoYWRvdwogIEV4aXQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBFeGl0LlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0yMCwgMCwgMCkKICBFeGl0LlNpemUgPSBVRGltMi5uZXcoMCwgMjAsIDAsIDIwKQogIEV4aXQuWkluZGV4ID0gMTAKICBFeGl0LlRleHQgPSAiIgogIAogIEltYWdlTGFiZWxfMi5QYXJlbnQgPSBFeGl0CiAgSW1hZ2VMYWJlbF8yLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgSW1hZ2VMYWJlbF8yLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgSW1hZ2VMYWJlbF8yLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDUpCiAgSW1hZ2VMYWJlbF8yLlNpemUgPSBVRGltMi5uZXcoMCwgMTAsIDAsIDEwKQogIEltYWdlTGFiZWxfMi5JbWFnZSA9ICJyYnhhc3NldGlkOi8vNTA1NDY2MzY1MCIKICBJbWFnZUxhYmVsXzIuWkluZGV4ID0gMTAKICAKICBiYWNrZ3JvdW5kLk5hbWUgPSAiYmFja2dyb3VuZCIKICBiYWNrZ3JvdW5kLlBhcmVudCA9IGxvZ3MKICBiYWNrZ3JvdW5kLkFjdGl2ZSA9IHRydWUKICBiYWNrZ3JvdW5kLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDAuMTQxMTc2LCAwLjE0MTE3NiwgMC4xNDUwOTgpCiAgYmFja2dyb3VuZC5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgYmFja2dyb3VuZC5DbGlwc0Rlc2NlbmRhbnRzID0gdHJ1ZQogIGJhY2tncm91bmQuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMSwgMCkKICBiYWNrZ3JvdW5kLlNpemUgPSBVRGltMi5uZXcoMCwgMzM4LCAwLCAyNDUpCiAgYmFja2dyb3VuZC5aSW5kZXggPSAxMAogIAogIGNoYXQuTmFtZSA9ICJjaGF0IgogIGNoYXQuUGFyZW50ID0gYmFja2dyb3VuZAogIGNoYXQuQWN0aXZlID0gdHJ1ZQogIGNoYXQuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5uZXcoMC4xNDExNzYsIDAuMTQxMTc2LCAwLjE0NTA5OCkKICBjaGF0LkJvcmRlclNpemVQaXhlbCA9IDAKICBjaGF0LkNsaXBzRGVzY2VuZGFudHMgPSB0cnVlCiAgY2hhdC5TaXplID0gVURpbTIubmV3KDAsIDMzOCwgMCwgMjQ1KQogIGNoYXQuWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUxLGNoYXQpCiAgCiAgQ2xlYXIuTmFtZSA9ICJDbGVhciIKICBDbGVhci5QYXJlbnQgPSBjaGF0CiAgQ2xlYXIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5uZXcoMC4xODAzOTIsIDAuMTgwMzkyLCAwLjE4NDMxNCkKICBDbGVhci5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgQ2xlYXIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMjIwKQogIENsZWFyLlNpemUgPSBVRGltMi5uZXcoMCwgNTAsIDAsIDIwKQogIENsZWFyLlpJbmRleCA9IDEwCiAgQ2xlYXIuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgQ2xlYXIuRm9udFNpemUgPSBFbnVtLkZvbnRTaXplLlNpemUxNAogIENsZWFyLlRleHQgPSAiQ2xlYXIiCiAgQ2xlYXIuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICB0YWJsZS5pbnNlcnQoc2hhZGUyLENsZWFyKQogIHRhYmxlLmluc2VydCh0ZXh0MSxDbGVhcikKICAKICBTYXZlQ2hhdGxvZ3MuTmFtZSA9ICJTYXZlQ2hhdGxvZ3MiCiAgU2F2ZUNoYXRsb2dzLlBhcmVudCA9IGNoYXQKICBTYXZlQ2hhdGxvZ3MuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5uZXcoMC4xODAzOTIsIDAuMTgwMzkyLCAwLjE4NDMxNCkKICBTYXZlQ2hhdGxvZ3MuQm9yZGVyU2l6ZVBpeGVsID0gMAogIFNhdmVDaGF0bG9ncy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAyNTgsIDAsIDIyMCkKICBTYXZlQ2hhdGxvZ3MuU2l6ZSA9IFVEaW0yLm5ldygwLCA3NSwgMCwgMjApCiAgU2F2ZUNoYXRsb2dzLlpJbmRleCA9IDEwCiAgU2F2ZUNoYXRsb2dzLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIFNhdmVDaGF0bG9ncy5Gb250U2l6ZSA9IEVudW0uRm9udFNpemUuU2l6ZTE0CiAgU2F2ZUNoYXRsb2dzLlRleHQgPSAiU2F2ZSBUbyAudHh0IgogIFNhdmVDaGF0bG9ncy5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIHRhYmxlLmluc2VydChzaGFkZTIsU2F2ZUNoYXRsb2dzKQogIHRhYmxlLmluc2VydCh0ZXh0MSxTYXZlQ2hhdGxvZ3MpCiAgCiAgVG9nZ2xlLk5hbWUgPSAiVG9nZ2xlIgogIFRvZ2dsZS5QYXJlbnQgPSBjaGF0CiAgVG9nZ2xlLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDAuMTgwMzkyLCAwLjE4MDM5MiwgMC4xODQzMTQpCiAgVG9nZ2xlLkJvcmRlclNpemVQaXhlbCA9IDAKICBUb2dnbGUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNjAsIDAsIDIyMCkKICBUb2dnbGUuU2l6ZSA9IFVEaW0yLm5ldygwLCA2NiwgMCwgMjApCiAgVG9nZ2xlLlpJbmRleCA9IDEwCiAgVG9nZ2xlLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIFRvZ2dsZS5Gb250U2l6ZSA9IEVudW0uRm9udFNpemUuU2l6ZTE0CiAgVG9nZ2xlLlRleHQgPSAiRGlzYWJsZWQiCiAgVG9nZ2xlLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgdGFibGUuaW5zZXJ0KHNoYWRlMixUb2dnbGUpCiAgdGFibGUuaW5zZXJ0KHRleHQxLFRvZ2dsZSkKICAKICBzY3JvbGxfMi5OYW1lID0gInNjcm9sbCIKICBzY3JvbGxfMi5QYXJlbnQgPSBjaGF0CiAgc2Nyb2xsXzIuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5uZXcoMC4xODAzOTIsIDAuMTgwMzkyLCAwLjE4NDMxNCkKICBzY3JvbGxfMi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgc2Nyb2xsXzIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMjUpCiAgc2Nyb2xsXzIuU2l6ZSA9IFVEaW0yLm5ldygwLCAzMjgsIDAsIDE5MCkKICBzY3JvbGxfMi5aSW5kZXggPSAxMAogIHNjcm9sbF8yLkJvdHRvbUltYWdlID0gInJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIgogIHNjcm9sbF8yLkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMTApCiAgc2Nyb2xsXzIuU2Nyb2xsQmFyVGhpY2tuZXNzID0gOAogIHNjcm9sbF8yLlRvcEltYWdlID0gInJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIgogIHRhYmxlLmluc2VydChzY3JvbGwsc2Nyb2xsXzIpCiAgdGFibGUuaW5zZXJ0KHNoYWRlMixzY3JvbGxfMikKICAKICBqb2luLk5hbWUgPSAiam9pbiIKICBqb2luLlBhcmVudCA9IGJhY2tncm91bmQKICBqb2luLkFjdGl2ZSA9IHRydWUKICBqb2luLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDAuMTQxMTc2LCAwLjE0MTE3NiwgMC4xNDUwOTgpCiAgam9pbi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgam9pbi5DbGlwc0Rlc2NlbmRhbnRzID0gdHJ1ZQogIGpvaW4uU2l6ZSA9IFVEaW0yLm5ldygwLCAzMzgsIDAsIDI0NSkKICBqb2luLlZpc2libGUgPSBmYWxzZQogIGpvaW4uWkluZGV4ID0gMTAKICB0YWJsZS5pbnNlcnQoc2hhZGUxLGpvaW4pCiAgCiAgVG9nZ2xlXzIuTmFtZSA9ICJUb2dnbGUiCiAgVG9nZ2xlXzIuUGFyZW50ID0gam9pbgogIFRvZ2dsZV8yLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDAuMTgwMzkyLCAwLjE4MDM5MiwgMC4xODQzMTQpCiAgVG9nZ2xlXzIuQm9yZGVyU2l6ZVBpeGVsID0gMAogIFRvZ2dsZV8yLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDYwLCAwLCAyMjApCiAgVG9nZ2xlXzIuU2l6ZSA9IFVEaW0yLm5ldygwLCA2NiwgMCwgMjApCiAgVG9nZ2xlXzIuWkluZGV4ID0gMTAKICBUb2dnbGVfMi5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBUb2dnbGVfMi5Gb250U2l6ZSA9IEVudW0uRm9udFNpemUuU2l6ZTE0CiAgVG9nZ2xlXzIuVGV4dCA9ICJEaXNhYmxlZCIKICBUb2dnbGVfMi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIHRhYmxlLmluc2VydChzaGFkZTIsVG9nZ2xlXzIpCiAgdGFibGUuaW5zZXJ0KHRleHQxLFRvZ2dsZV8yKQogIAogIENsZWFyXzIuTmFtZSA9ICJDbGVhciIKICBDbGVhcl8yLlBhcmVudCA9IGpvaW4KICBDbGVhcl8yLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDAuMTgwMzkyLCAwLjE4MDM5MiwgMC4xODQzMTQpCiAgQ2xlYXJfMi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgQ2xlYXJfMi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCAyMjApCiAgQ2xlYXJfMi5TaXplID0gVURpbTIubmV3KDAsIDUwLCAwLCAyMCkKICBDbGVhcl8yLlpJbmRleCA9IDEwCiAgQ2xlYXJfMi5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICBDbGVhcl8yLkZvbnRTaXplID0gRW51bS5Gb250U2l6ZS5TaXplMTQKICBDbGVhcl8yLlRleHQgPSAiQ2xlYXIiCiAgQ2xlYXJfMi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIHRhYmxlLmluc2VydChzaGFkZTIsQ2xlYXJfMikKICB0YWJsZS5pbnNlcnQodGV4dDEsQ2xlYXJfMikKICAKICBzY3JvbGxfMy5OYW1lID0gInNjcm9sbCIKICBzY3JvbGxfMy5QYXJlbnQgPSBqb2luCiAgc2Nyb2xsXzMuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5uZXcoMC4xODAzOTIsIDAuMTgwMzkyLCAwLjE4NDMxNCkKICBzY3JvbGxfMy5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgc2Nyb2xsXzMuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMjUpCiAgc2Nyb2xsXzMuU2l6ZSA9IFVEaW0yLm5ldygwLCAzMjgsIDAsIDE5MCkKICBzY3JvbGxfMy5aSW5kZXggPSAxMAogIHNjcm9sbF8zLkJvdHRvbUltYWdlID0gInJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIgogIHNjcm9sbF8zLkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMTApCiAgc2Nyb2xsXzMuU2Nyb2xsQmFyVGhpY2tuZXNzID0gOAogIHNjcm9sbF8zLlRvcEltYWdlID0gInJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIgogIHRhYmxlLmluc2VydChzY3JvbGwsc2Nyb2xsXzMpCiAgdGFibGUuaW5zZXJ0KHNoYWRlMixzY3JvbGxfMykKICAKICBzZWxlY3RDaGF0Lk5hbWUgPSAic2VsZWN0Q2hhdCIKICBzZWxlY3RDaGF0LlBhcmVudCA9IGJhY2tncm91bmQKICBzZWxlY3RDaGF0LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDAuMTgwMzkyLCAwLjE4MDM5MiwgMC4xODQzMTQpCiAgc2VsZWN0Q2hhdC5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgc2VsZWN0Q2hhdC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCA1KQogIHNlbGVjdENoYXQuU2l6ZSA9IFVEaW0yLm5ldygwLCAxNjQsIDAsIDIwKQogIHNlbGVjdENoYXQuWkluZGV4ID0gMTAKICBzZWxlY3RDaGF0LkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogIHNlbGVjdENoYXQuRm9udFNpemUgPSBFbnVtLkZvbnRTaXplLlNpemUxNAogIHNlbGVjdENoYXQuVGV4dCA9ICJDaGF0IExvZ3MiCiAgc2VsZWN0Q2hhdC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogIHRhYmxlLmluc2VydChzaGFkZTIsc2VsZWN0Q2hhdCkKICB0YWJsZS5pbnNlcnQodGV4dDEsc2VsZWN0Q2hhdCkKICAKICBzZWxlY3RKb2luLk5hbWUgPSAic2VsZWN0Sm9pbiIKICBzZWxlY3RKb2luLlBhcmVudCA9IGJhY2tncm91bmQKICBzZWxlY3RKb2luLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDAuMzA1ODgyLCAwLjMwNTg4MiwgMC4zMDk4MDQpCiAgc2VsZWN0Sm9pbi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgc2VsZWN0Sm9pbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxNjksIDAsIDUpCiAgc2VsZWN0Sm9pbi5TaXplID0gVURpbTIubmV3KDAsIDE2NCwgMCwgMjApCiAgc2VsZWN0Sm9pbi5aSW5kZXggPSAxMAogIHNlbGVjdEpvaW4uRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgc2VsZWN0Sm9pbi5Gb250U2l6ZSA9IEVudW0uRm9udFNpemUuU2l6ZTE0CiAgc2VsZWN0Sm9pbi5UZXh0ID0gIkpvaW4gTG9ncyIKICBzZWxlY3RKb2luLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgdGFibGUuaW5zZXJ0KHNoYWRlMyxzZWxlY3RKb2luKQogIHRhYmxlLmluc2VydCh0ZXh0MSxzZWxlY3RKb2luKQogIAogIGZ1bmN0aW9uIGNyZWF0ZShkYXRhKQogICAgbG9jYWwgaW5zdHMgPSB7fQogICAgZm9yIGksdiBpbiBwYWlycyhkYXRhKSBkbyBpbnN0c1t2WzFdXSA9IEluc3RhbmNlLm5ldyh2WzJdKSBlbmQKICAKICAgIGZvciBfLHYgaW4gcGFpcnMoZGF0YSkgZG8KICAgICAgZm9yIHByb3AsdmFsIGluIHBhaXJzKHZbM10pIGRvCiAgICAgICAgaWYgdHlwZSh2YWwpID09ICJ0YWJsZSIgdGhlbgogICAgICAgICAgaW5zdHNbdlsxXV1bcHJvcF0gPSBpbnN0c1t2YWxbMV1dCiAgICAgICAgZWxzZQogICAgICAgICAgaW5zdHNbdlsxXV1bcHJvcF0gPSB2YWwKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICAKICAgIHJldHVybiBpbnN0c1sxXQogIGVuZAogIAogIFRleHRTZXJ2aWNlID0gY2xvbmVyZWYoZ2FtZTpHZXRTZXJ2aWNlKCJUZXh0U2VydmljZSIpKQogIFZpZXdwb3J0VGV4dEJveCA9IChmdW5jdGlvbigpCiAgCiAgICBsb2NhbCBmdW5jcyA9IHt9CiAgICBmdW5jcy5VcGRhdGUgPSBmdW5jdGlvbihzZWxmKQogICAgICBsb2NhbCBjdXJzb3JQb3MgPSBzZWxmLlRleHRCb3guQ3Vyc29yUG9zaXRpb24KICAgICAgbG9jYWwgdGV4dCA9IHNlbGYuVGV4dEJveC5UZXh0CiAgICAgIGlmIHRleHQgPT0gIiIgdGhlbiBzZWxmLlRleHRCb3guUG9zaXRpb24gPSBVRGltMi5uZXcoMCwyLDAsMCkgcmV0dXJuIGVuZAogICAgICBpZiBjdXJzb3JQb3MgPT0gLTEgdGhlbiByZXR1cm4gZW5kCiAgCiAgICAgIGxvY2FsIGN1cnNvclRleHQgPSB0ZXh0OnN1YigxLGN1cnNvclBvcy0xKQogICAgICBsb2NhbCBwb3MgPSBuaWwKICAgICAgbG9jYWwgbGVmdEVuZCA9IC1zZWxmLlRleHRCb3guUG9zaXRpb24uWC5PZmZzZXQKICAgICAgbG9jYWwgcmlnaHRFbmQgPSBsZWZ0RW5kICsgc2VsZi5WaWV3LkFic29sdXRlU2l6ZS5YCiAgCiAgICAgIGxvY2FsIHRvdGFsVGV4dFNpemUgPSBUZXh0U2VydmljZTpHZXRUZXh0U2l6ZSh0ZXh0LHNlbGYuVGV4dEJveC5UZXh0U2l6ZSxzZWxmLlRleHRCb3guRm9udCxWZWN0b3IyLm5ldyg5OTk5OTk5OTksMTAwKSkuWAogICAgICBsb2NhbCBjdXJzb3JUZXh0U2l6ZSA9IFRleHRTZXJ2aWNlOkdldFRleHRTaXplKGN1cnNvclRleHQsc2VsZi5UZXh0Qm94LlRleHRTaXplLHNlbGYuVGV4dEJveC5Gb250LFZlY3RvcjIubmV3KDk5OTk5OTk5OSwxMDApKS5YCiAgCiAgICAgIGlmIGN1cnNvclRleHRTaXplID4gcmlnaHRFbmQgdGhlbgogICAgICAgIHBvcyA9IG1hdGgubWF4KC0yLGN1cnNvclRleHRTaXplIC0gc2VsZi5WaWV3LkFic29sdXRlU2l6ZS5YICsgMikKICAgICAgZWxzZWlmIGN1cnNvclRleHRTaXplIDwgbGVmdEVuZCB0aGVuCiAgICAgICAgcG9zID0gbWF0aC5tYXgoLTIsY3Vyc29yVGV4dFNpemUtMikKICAgICAgZWxzZWlmIHRvdGFsVGV4dFNpemUgPCByaWdodEVuZCB0aGVuCiAgICAgICAgcG9zID0gbWF0aC5tYXgoLTIsdG90YWxUZXh0U2l6ZSAtIHNlbGYuVmlldy5BYnNvbHV0ZVNpemUuWCArIDIpCiAgICAgIGVuZAogIAogICAgICBpZiBwb3MgdGhlbgogICAgICAgIHNlbGYuVGV4dEJveC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLC1wb3MsMCwwKQogICAgICAgIHNlbGYuVGV4dEJveC5TaXplID0gVURpbTIubmV3KDEscG9zLDEsMCkKICAgICAgZW5kCiAgICBlbmQKICAKICAgIGxvY2FsIG10ID0ge30KICAgIG10Ll9faW5kZXggPSBmdW5jcwogIAogICAgbG9jYWwgZnVuY3Rpb24gY29udmVydCh0ZXh0Ym94KQogICAgICBsb2NhbCBvYmogPSBzZXRtZXRhdGFibGUoe09mZnNldFggPSAwLCBUZXh0Qm94ID0gdGV4dGJveH0sbXQpCiAgCiAgICAgIGxvY2FsIHZpZXcgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgdmlldy5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gdGV4dGJveC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5CiAgICAgIHZpZXcuQmFja2dyb3VuZENvbG9yMyA9IHRleHRib3guQmFja2dyb3VuZENvbG9yMwogICAgICB2aWV3LkJvcmRlclNpemVQaXhlbCA9IHRleHRib3guQm9yZGVyU2l6ZVBpeGVsCiAgICAgIHZpZXcuQm9yZGVyQ29sb3IzID0gdGV4dGJveC5Cb3JkZXJDb2xvcjMKICAgICAgdmlldy5Qb3NpdGlvbiA9IHRleHRib3guUG9zaXRpb24KICAgICAgdmlldy5TaXplID0gdGV4dGJveC5TaXplCiAgICAgIHZpZXcuQ2xpcHNEZXNjZW5kYW50cyA9IHRydWUKICAgICAgdmlldy5OYW1lID0gdGV4dGJveC5OYW1lCiAgICAgIHZpZXcuWkluZGV4ID0gMTAKICAgICAgdGV4dGJveC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICB0ZXh0Ym94LlBvc2l0aW9uID0gVURpbTIubmV3KDAsNCwwLDApCiAgICAgIHRleHRib3guU2l6ZSA9IFVEaW0yLm5ldygxLC04LDEsMCkKICAgICAgdGV4dGJveC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICB0ZXh0Ym94Lk5hbWUgPSAiSW5wdXQiCiAgICAgIHRhYmxlLmluc2VydCh0ZXh0MSx0ZXh0Ym94KQogICAgICB0YWJsZS5pbnNlcnQoc2hhZGUyLHZpZXcpCiAgCiAgICAgIG9iai5WaWV3ID0gdmlldwogIAogICAgICB0ZXh0Ym94LkNoYW5nZWQ6Q29ubmVjdChmdW5jdGlvbihwcm9wKQogICAgICAgIGlmIHByb3AgPT0gIlRleHQiIG9yIHByb3AgPT0gIkN1cnNvclBvc2l0aW9uIiBvciBwcm9wID09ICJBYnNvbHV0ZVNpemUiIHRoZW4KICAgICAgICAgIG9iajpVcGRhdGUoKQogICAgICAgIGVuZAogICAgICBlbmQpCiAgCiAgICAgIG9iajpVcGRhdGUoKQogIAogICAgICB2aWV3LlBhcmVudCA9IHRleHRib3guUGFyZW50CiAgICAgIHRleHRib3guUGFyZW50ID0gdmlldwogIAogICAgICByZXR1cm4gb2JqCiAgICBlbmQKICAKICAgIHJldHVybiB7Y29udmVydCA9IGNvbnZlcnR9CiAgZW5kKSgpCiAgCiAgVmlld3BvcnRUZXh0Qm94LmNvbnZlcnQoQ21kYmFyKS5WaWV3LlpJbmRleCA9IDEwCiAgVmlld3BvcnRUZXh0Qm94LmNvbnZlcnQoQ21kYmFyXzIpLlZpZXcuWkluZGV4ID0gMTAKICBWaWV3cG9ydFRleHRCb3guY29udmVydChDbWRiYXJfMykuVmlldy5aSW5kZXggPSAxMAogIAogIElZTW91c2UgPSBQbGF5ZXJzLkxvY2FsUGxheWVyOkdldE1vdXNlKCkKICBQbGF5ZXJHdWkgPSBQbGF5ZXJzLkxvY2FsUGxheWVyOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIlBsYXllckd1aSIpCiAgVXNlcklucHV0U2VydmljZSA9IGNsb25lcmVmKGdhbWU6R2V0U2VydmljZSgiVXNlcklucHV0U2VydmljZSIpKQogIFR3ZWVuU2VydmljZSA9IGNsb25lcmVmKGdhbWU6R2V0U2VydmljZSgiVHdlZW5TZXJ2aWNlIikpCiAgSHR0cFNlcnZpY2UgPSBjbG9uZXJlZihnYW1lOkdldFNlcnZpY2UoIkh0dHBTZXJ2aWNlIikpCiAgTWFya2V0cGxhY2VTZXJ2aWNlID0gY2xvbmVyZWYoZ2FtZTpHZXRTZXJ2aWNlKCJNYXJrZXRwbGFjZVNlcnZpY2UiKSkKICBSdW5TZXJ2aWNlID0gY2xvbmVyZWYoZ2FtZTpHZXRTZXJ2aWNlKCJSdW5TZXJ2aWNlIikpCiAgVGVsZXBvcnRTZXJ2aWNlID0gY2xvbmVyZWYoZ2FtZTpHZXRTZXJ2aWNlKCJUZWxlcG9ydFNlcnZpY2UiKSkKICBTdGFydGVyR3VpID0gY2xvbmVyZWYoZ2FtZTpHZXRTZXJ2aWNlKCJTdGFydGVyR3VpIikpCiAgR3VpU2VydmljZSA9IGNsb25lcmVmKGdhbWU6R2V0U2VydmljZSgiR3VpU2VydmljZSIpKQogIExpZ2h0aW5nID0gY2xvbmVyZWYoZ2FtZTpHZXRTZXJ2aWNlKCJMaWdodGluZyIpKQogIENvbnRleHRBY3Rpb25TZXJ2aWNlID0gY2xvbmVyZWYoZ2FtZTpHZXRTZXJ2aWNlKCJDb250ZXh0QWN0aW9uU2VydmljZSIpKQogIE5ldHdvcmtDbGllbnQgPSBjbG9uZXJlZihnYW1lOkdldFNlcnZpY2UoIk5ldHdvcmtDbGllbnQiKSkKICBSZXBsaWNhdGVkU3RvcmFnZSA9IGNsb25lcmVmKGdhbWU6R2V0U2VydmljZSgiUmVwbGljYXRlZFN0b3JhZ2UiKSkKICBHcm91cFNlcnZpY2UgPSBjbG9uZXJlZihnYW1lOkdldFNlcnZpY2UoIkdyb3VwU2VydmljZSIpKQogIFBhdGhTZXJ2aWNlID0gY2xvbmVyZWYoZ2FtZTpHZXRTZXJ2aWNlKCJQYXRoZmluZGluZ1NlcnZpY2UiKSkKICBTb3VuZFNlcnZpY2UgPSBjbG9uZXJlZihnYW1lOkdldFNlcnZpY2UoIlNvdW5kU2VydmljZSIpKQogIFRlYW1zID0gY2xvbmVyZWYoZ2FtZTpHZXRTZXJ2aWNlKCJUZWFtcyIpKQogIFN0YXJ0ZXJQbGF5ZXIgPSBjbG9uZXJlZihnYW1lOkdldFNlcnZpY2UoIlN0YXJ0ZXJQbGF5ZXIiKSkKICBJbnNlcnRTZXJ2aWNlID0gY2xvbmVyZWYoZ2FtZTpHZXRTZXJ2aWNlKCJJbnNlcnRTZXJ2aWNlIikpCiAgQ2hhdFNlcnZpY2UgPSBjbG9uZXJlZihnYW1lOkdldFNlcnZpY2UoIkNoYXQiKSkKICBQcm94aW1pdHlQcm9tcHRTZXJ2aWNlID0gY2xvbmVyZWYoZ2FtZTpHZXRTZXJ2aWNlKCJQcm94aW1pdHlQcm9tcHRTZXJ2aWNlIikpCiAgU3RhdHNTZXJ2aWNlID0gY2xvbmVyZWYoZ2FtZTpHZXRTZXJ2aWNlKCJTdGF0cyIpKQogIE1hdGVyaWFsU2VydmljZSA9IGNsb25lcmVmKGdhbWU6R2V0U2VydmljZSgiTWF0ZXJpYWxTZXJ2aWNlIikpCiAgQXZhdGFyRWRpdG9yU2VydmljZSA9IGNsb25lcmVmKGdhbWU6R2V0U2VydmljZSgiQXZhdGFyRWRpdG9yU2VydmljZSIpKQogIFRleHRDaGF0U2VydmljZSA9IGNsb25lcmVmKGdhbWU6R2V0U2VydmljZSgiVGV4dENoYXRTZXJ2aWNlIikpCiAgCiAgc2V0aGlkZGVuID0gc2V0aGlkZGVucHJvcGVydHkgb3Igc2V0X2hpZGRlbl9wcm9wZXJ0eSBvciBzZXRfaGlkZGVuX3Byb3AKICBnZXRoaWRkZW4gPSBnZXRoaWRkZW5wcm9wZXJ0eSBvciBnZXRfaGlkZGVuX3Byb3BlcnR5IG9yIGdldF9oaWRkZW5fcHJvcAogIHF1ZXVldGVsZXBvcnQgPSAoc3luIGFuZCBzeW4ucXVldWVfb25fdGVsZXBvcnQpIG9yIHF1ZXVlX29uX3RlbGVwb3J0IG9yIChmbHV4dXMgYW5kIGZsdXh1cy5xdWV1ZV9vbl90ZWxlcG9ydCkKICBodHRwcmVxdWVzdCA9IChzeW4gYW5kIHN5bi5yZXF1ZXN0KSBvciAoaHR0cCBhbmQgaHR0cC5yZXF1ZXN0KSBvciBodHRwX3JlcXVlc3Qgb3IgKGZsdXh1cyBhbmQgZmx1eHVzLnJlcXVlc3QpIG9yIHJlcXVlc3QKICBQbGFjZUlkLCBKb2JJZCA9IGdhbWUuUGxhY2VJZCwgZ2FtZS5Kb2JJZAogIGxvY2FsIElzT25Nb2JpbGUgPSB0YWJsZS5maW5kKHtFbnVtLlBsYXRmb3JtLklPUywgRW51bS5QbGF0Zm9ybS5BbmRyb2lkfSwgVXNlcklucHV0U2VydmljZTpHZXRQbGF0Zm9ybSgpKQogIGV2ZXJ5Q2xpcGJvYXJkID0gc2V0Y2xpcGJvYXJkIG9yIHRvY2xpcGJvYXJkIG9yIHNldF9jbGlwYm9hcmQgb3IgKENsaXBib2FyZCBhbmQgQ2xpcGJvYXJkLnNldCkKICAKICBmdW5jdGlvbiB3cml0ZWZpbGVFeHBsb2l0KCkKICAgIGlmIHdyaXRlZmlsZSB0aGVuCiAgICAgIHJldHVybiB0cnVlCiAgICBlbmQKICBlbmQKICAKICBmdW5jdGlvbiBpc051bWJlcihzdHIpCiAgICBpZiB0b251bWJlcihzdHIpIH49IG5pbCBvciBzdHIgPT0gJ2luZicgdGhlbgogICAgICByZXR1cm4gdHJ1ZQogICAgZW5kCiAgZW5kCiAgCiAgZnVuY3Rpb24gZ2V0Um9vdChjaGFyKQogICAgbG9jYWwgcm9vdFBhcnQgPSBjaGFyOkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0Jykgb3IgY2hhcjpGaW5kRmlyc3RDaGlsZCgnVG9yc28nKSBvciBjaGFyOkZpbmRGaXJzdENoaWxkKCdVcHBlclRvcnNvJykKICAgIHJldHVybiByb290UGFydAogIGVuZAogIAogIGZ1bmN0aW9uIHRvb2xzKHBscikKICAgIGlmIHBscjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkJhY2twYWNrIik6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdUb29sJykgb3IgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ1Rvb2wnKSB0aGVuCiAgICAgIHJldHVybiB0cnVlCiAgICBlbmQKICBlbmQKICAKICBmdW5jdGlvbiByMTUocGxyKQogICAgaWYgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuUmlnVHlwZSA9PSBFbnVtLkh1bWFub2lkUmlnVHlwZS5SMTUgdGhlbgogICAgICByZXR1cm4gdHJ1ZQogICAgZW5kCiAgZW5kCiAgCiAgZnVuY3Rpb24gdG9DbGlwYm9hcmQodHh0KQogICAgICBpZiBldmVyeUNsaXBib2FyZCB0aGVuCiAgICAgICAgICBldmVyeUNsaXBib2FyZCh0b3N0cmluZyh0eHQpKQogICAgICAgICAgbm90aWZ5KCJDbGlwYm9hcmQiLCAiQ29waWVkIHRvIGNsaXBib2FyZCIpCiAgICAgIGVsc2UKICAgICAgICAgIG5vdGlmeSgiQ2xpcGJvYXJkIiwgIllvdXIgZXhwbG9pdCBkb2Vzbid0IGhhdmUgdGhlIGFiaWxpdHkgdG8gdXNlIHRoZSBjbGlwYm9hcmQiKQogICAgICBlbmQKICBlbmQKICAKICBmdW5jdGlvbiBjaGF0TWVzc2FnZShzdHIpCiAgICAgIHN0ciA9IHRvc3RyaW5nKHN0cikKICAgICAgaWYgVGV4dENoYXRTZXJ2aWNlLkNoYXRWZXJzaW9uID09IEVudW0uQ2hhdFZlcnNpb24uVGV4dENoYXRTZXJ2aWNlIHRoZW4KICAgICAgICAgIFRleHRDaGF0U2VydmljZS5UZXh0Q2hhbm5lbHMuUkJYR2VuZXJhbDpTZW5kQXN5bmMoc3RyKQogICAgICBlbHNlCiAgICAgICAgICBSZXBsaWNhdGVkU3RvcmFnZS5EZWZhdWx0Q2hhdFN5c3RlbUNoYXRFdmVudHMuU2F5TWVzc2FnZVJlcXVlc3Q6RmlyZVNlcnZlcihzdHIsICJBbGwiKQogICAgICBlbmQKICBlbmQKICAKICBmdW5jdGlvbiBnZXRIaWVyYXJjaHkob2JqKQogICAgbG9jYWwgZnVsbG5hbWUKICAgIGxvY2FsIHBlcmlvZAogIAogICAgaWYgc3RyaW5nLmZpbmQob2JqLk5hbWUsJyAnKSB0aGVuCiAgICAgIGZ1bGxuYW1lID0gJ1siJy4ub2JqLk5hbWUuLiciXScKICAgICAgcGVyaW9kID0gZmFsc2UKICAgIGVsc2UKICAgICAgZnVsbG5hbWUgPSBvYmouTmFtZQogICAgICBwZXJpb2QgPSB0cnVlCiAgICBlbmQKICAKICAgIGxvY2FsIGdldFMgPSBvYmoKICAgIGxvY2FsIHBhcmVudCA9IG9iagogICAgbG9jYWwgc2VydmljZSA9ICcnCiAgCiAgICBpZiBnZXRTLlBhcmVudCB+PSBnYW1lIHRoZW4KICAgICAgcmVwZWF0CiAgICAgICAgZ2V0UyA9IGdldFMuUGFyZW50CiAgICAgICAgc2VydmljZSA9IGdldFMuQ2xhc3NOYW1lCiAgICAgIHVudGlsIGdldFMuUGFyZW50ID09IGdhbWUKICAgIGVuZAogIAogICAgaWYgcGFyZW50LlBhcmVudCB+PSBnZXRTIHRoZW4KICAgICAgcmVwZWF0CiAgICAgICAgcGFyZW50ID0gcGFyZW50LlBhcmVudAogICAgICAgIGlmIHN0cmluZy5maW5kKHRvc3RyaW5nKHBhcmVudCksJyAnKSB0aGVuCiAgICAgICAgICBpZiBwZXJpb2QgdGhlbgogICAgICAgICAgICBmdWxsbmFtZSA9ICdbIicuLnBhcmVudC5OYW1lLi4nIl0uJy4uZnVsbG5hbWUKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgZnVsbG5hbWUgPSAnWyInLi5wYXJlbnQuTmFtZS4uJyJdJy4uZnVsbG5hbWUKICAgICAgICAgIGVuZAogICAgICAgICAgcGVyaW9kID0gZmFsc2UKICAgICAgICBlbHNlCiAgICAgICAgICBpZiBwZXJpb2QgdGhlbgogICAgICAgICAgICBmdWxsbmFtZSA9IHBhcmVudC5OYW1lLi4nLicuLmZ1bGxuYW1lCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIGZ1bGxuYW1lID0gcGFyZW50Lk5hbWUuLicnLi5mdWxsbmFtZQogICAgICAgICAgZW5kCiAgICAgICAgICBwZXJpb2QgPSB0cnVlCiAgICAgICAgZW5kCiAgICAgIHVudGlsIHBhcmVudC5QYXJlbnQgPT0gZ2V0UwogICAgZWxzZWlmIHN0cmluZy5maW5kKHRvc3RyaW5nKHBhcmVudCksJyAnKSB0aGVuCiAgICAgIGZ1bGxuYW1lID0gJ1siJy4ucGFyZW50Lk5hbWUuLiciXScKICAgICAgcGVyaW9kID0gZmFsc2UKICAgIGVuZAogIAogICAgaWYgcGVyaW9kIHRoZW4KICAgICAgcmV0dXJuICdnYW1lOkdldFNlcnZpY2UoIicuLnNlcnZpY2UuLiciKS4nLi5mdWxsbmFtZQogICAgZWxzZQogICAgICByZXR1cm4gJ2dhbWU6R2V0U2VydmljZSgiJy4uc2VydmljZS4uJyIpJy4uZnVsbG5hbWUKICAgIGVuZAogIGVuZAogIAogIEFsbFdheXBvaW50cyA9IHt9CiAgCiAgbG9jYWwgY29vbGRvd24gPSBmYWxzZQogIGZ1bmN0aW9uIHdyaXRlZmlsZUNvb2xkb3duKG5hbWUsZGF0YSkKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICBpZiBub3QgY29vbGRvd24gdGhlbgogICAgICAgIGNvb2xkb3duID0gdHJ1ZQogICAgICAgIHdyaXRlZmlsZShuYW1lLCBkYXRhKQogICAgICBlbHNlCiAgICAgICAgcmVwZWF0IHdhaXQoKSB1bnRpbCBjb29sZG93biA9PSBmYWxzZQogICAgICAgIHdyaXRlZmlsZUNvb2xkb3duKG5hbWUsZGF0YSkKICAgICAgZW5kCiAgICAgIHdhaXQoMykKICAgICAgY29vbGRvd24gPSBmYWxzZQogICAgZW5kKQogIGVuZAogIAogIGZ1bmN0aW9uIGRyYWdHVUkoZ3VpKQogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgIGxvY2FsIGRyYWdnaW5nCiAgICAgIGxvY2FsIGRyYWdJbnB1dAogICAgICBsb2NhbCBkcmFnU3RhcnQgPSBWZWN0b3IzLm5ldygwLDAsMCkKICAgICAgbG9jYWwgc3RhcnRQb3MKICAgICAgbG9jYWwgZnVuY3Rpb24gdXBkYXRlKGlucHV0KQogICAgICAgIGxvY2FsIGRlbHRhID0gaW5wdXQuUG9zaXRpb24gLSBkcmFnU3RhcnQKICAgICAgICBsb2NhbCBQb3NpdGlvbiA9IFVEaW0yLm5ldyhzdGFydFBvcy5YLlNjYWxlLCBzdGFydFBvcy5YLk9mZnNldCArIGRlbHRhLlgsIHN0YXJ0UG9zLlkuU2NhbGUsIHN0YXJ0UG9zLlkuT2Zmc2V0ICsgZGVsdGEuWSkKICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKGd1aSwgVHdlZW5JbmZvLm5ldyguMjApLCB7UG9zaXRpb24gPSBQb3NpdGlvbn0pOlBsYXkoKQogICAgICBlbmQKICAgICAgZ3VpLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCkKICAgICAgICBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZUJ1dHRvbjEgb3IgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuVG91Y2ggdGhlbgogICAgICAgICAgZHJhZ2dpbmcgPSB0cnVlCiAgICAgICAgICBkcmFnU3RhcnQgPSBpbnB1dC5Qb3NpdGlvbgogICAgICAgICAgc3RhcnRQb3MgPSBndWkuUG9zaXRpb24KICAKICAgICAgICAgIGlucHV0LkNoYW5nZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIGlucHV0LlVzZXJJbnB1dFN0YXRlID09IEVudW0uVXNlcklucHV0U3RhdGUuRW5kIHRoZW4KICAgICAgICAgICAgICBkcmFnZ2luZyA9IGZhbHNlCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgICBlbmQpCiAgICAgIGd1aS5JbnB1dENoYW5nZWQ6Q29ubmVjdChmdW5jdGlvbihpbnB1dCkKICAgICAgICBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZU1vdmVtZW50IG9yIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLlRvdWNoIHRoZW4KICAgICAgICAgIGRyYWdJbnB1dCA9IGlucHV0CiAgICAgICAgZW5kCiAgICAgIGVuZCkKICAgICAgVXNlcklucHV0U2VydmljZS5JbnB1dENoYW5nZWQ6Q29ubmVjdChmdW5jdGlvbihpbnB1dCkKICAgICAgICBpZiBpbnB1dCA9PSBkcmFnSW5wdXQgYW5kIGRyYWdnaW5nIHRoZW4KICAgICAgICAgIHVwZGF0ZShpbnB1dCkKICAgICAgICBlbmQKICAgICAgZW5kKQogICAgZW5kKQogIGVuZAogIAogIGRyYWdHVUkobG9ncykKICBkcmFnR1VJKEtleWJpbmRFZGl0b3IpCiAgZHJhZ0dVSShQbHVnaW5FZGl0b3IpCiAgZHJhZ0dVSShUb1BhcnRGcmFtZSkKICAKICBldmVudEVkaXRvciA9IChmdW5jdGlvbigpCiAgICBsb2NhbCBldmVudHMgPSB7fQogIAogICAgbG9jYWwgZnVuY3Rpb24gcmVnaXN0ZXJFdmVudChuYW1lLHNldHMpCiAgICAgIGV2ZW50c1tuYW1lXSA9IHsKICAgICAgICBjb21tYW5kcyA9IHt9LAogICAgICAgIHNldHMgPSBzZXRzIG9yIHt9CiAgICAgIH0KICAgIGVuZAogIAogICAgbG9jYWwgb25FZGl0ZWQgPSBuaWwKICAKICAgIGxvY2FsIGZ1bmN0aW9uIGZpcmVFdmVudChuYW1lLC4uLikKICAgICAgbG9jYWwgYXJncyA9IHsuLi59CiAgICAgIGxvY2FsIGV2ZW50ID0gZXZlbnRzW25hbWVdCiAgICAgIGlmIGV2ZW50IHRoZW4KICAgICAgICBmb3IgaSxjbWQgaW4gcGFpcnMoZXZlbnQuY29tbWFuZHMpIGRvCiAgICAgICAgICBsb2NhbCBtZXRDb25kaXRpb24gPSB0cnVlCiAgICAgICAgICBmb3IgaWR4LHNldCBpbiBwYWlycyhldmVudC5zZXRzKSBkbwogICAgICAgICAgICBsb2NhbCBhcmdWYWwgPSBhcmdzW2lkeF0KICAgICAgICAgICAgbG9jYWwgY21kU2V0ID0gY21kWzJdW2lkeF0KICAgICAgICAgICAgbG9jYWwgY29uZFR5cGUgPSBzZXQuVHlwZQogICAgICAgICAgICBpZiBjb25kVHlwZSA9PSAiUGxheWVyIiB0aGVuCiAgICAgICAgICAgICAgaWYgY21kU2V0ID09IDAgdGhlbgogICAgICAgICAgICAgICAgbWV0Q29uZGl0aW9uID0gbWV0Q29uZGl0aW9uIGFuZCAodG9zdHJpbmcoUGxheWVycy5Mb2NhbFBsYXllcikgPT0gYXJnVmFsKQogICAgICAgICAgICAgIGVsc2VpZiBjbWRTZXQgfj0gMSB0aGVuCiAgICAgICAgICAgICAgICBtZXRDb25kaXRpb24gPSBtZXRDb25kaXRpb24gYW5kIHRhYmxlLmZpbmQoZ2V0UGxheWVyKGNtZFNldCxQbGF5ZXJzLkxvY2FsUGxheWVyKSxhcmdWYWwpCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2VpZiBjb25kVHlwZSA9PSAiU3RyaW5nIiB0aGVuCiAgICAgICAgICAgICAgaWYgY21kU2V0IH49IDAgdGhlbgogICAgICAgICAgICAgICAgbWV0Q29uZGl0aW9uID0gbWV0Q29uZGl0aW9uIGFuZCBzdHJpbmcuZmluZChhcmdWYWw6bG93ZXIoKSxjbWRTZXQ6bG93ZXIoKSkKICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZWlmIGNvbmRUeXBlID09ICJOdW1iZXIiIHRoZW4KICAgICAgICAgICAgICBpZiBjbWRTZXQgfj0gMCB0aGVuCiAgICAgICAgICAgICAgICBtZXRDb25kaXRpb24gPSBtZXRDb25kaXRpb24gYW5kIHRvbnVtYmVyKGFyZ1ZhbCk8PXRvbnVtYmVyKGNtZFNldCkKICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGlmIG5vdCBtZXRDb25kaXRpb24gdGhlbiBicmVhayBlbmQKICAgICAgICAgIGVuZAogIAogICAgICAgICAgaWYgbWV0Q29uZGl0aW9uIHRoZW4KICAgICAgICAgICAgcGNhbGwodGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgICAgbG9jYWwgY21kU3RyID0gY21kWzFdCiAgICAgICAgICAgICAgZm9yIGNvdW50LGFyZyBpbiBwYWlycyhhcmdzKSBkbwogICAgICAgICAgICAgICAgY21kU3RyID0gY21kU3RyOmdzdWIoIiUkIi4uY291bnQsYXJnKQogICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgIHdhaXQoY21kWzNdIG9yIDApCiAgICAgICAgICAgICAgZXhlY0NtZChjbWRTdHIpCiAgICAgICAgICAgIGVuZCkpCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICAKICAgIGxvY2FsIG1haW4gPSBjcmVhdGUoewogICAgICB7MSwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xNDExNzY0NzcwNzQ2MiwwLjE0MTE3NjQ3NzA3NDYyLDAuMTQ1MDk4MDQ1NDY4MzMpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJFdmVudEVkaXRvciIsUG9zaXRpb249VURpbTIubmV3KDAuNSwtMTc1LDAsLTUwMCksU2l6ZT1VRGltMi5uZXcoMCwzNTAsMCwyMCksWkluZGV4PTEwLH19LAogICAgICB7MiwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPWN1cnJlbnRTaGFkZTIsQm9yZGVyU2l6ZVBpeGVsPTAsTmFtZT0iVG9wQmFyIixQYXJlbnQ9ezF9LFNpemU9VURpbTIubmV3KDEsMCwwLDIwKSxaSW5kZXg9MTAsfX0sCiAgICAgIHszLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iVGl0bGUiLFBhcmVudD17Mn0sUG9zaXRpb249VURpbTIubmV3KDAsMCwwLDApLFNpemU9VURpbTIubmV3KDEsMCwwLjk1LDApLFRleHQ9IkV2ZW50IEVkaXRvciIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0WEFsaWdubWVudD1FbnVtLlRleHRYQWxpZ25tZW50LkNlbnRlcixaSW5kZXg9MTAsfX0sCiAgICAgIHs0LCJUZXh0QnV0dG9uIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD0zLE5hbWU9IkNsb3NlIixQYXJlbnQ9ezJ9LFBvc2l0aW9uPVVEaW0yLm5ldygxLC0yMCwwLDApLFNpemU9VURpbTIubmV3KDAsMjAsMCwyMCksVGV4dD0iIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFpJbmRleD0xMCx9fSwKICAgICAgezUsIkltYWdlTGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxJbWFnZT0icmJ4YXNzZXRpZDovLzUwNTQ2NjM2NTAiLFBhcmVudD17NH0sUG9zaXRpb249VURpbTIubmV3KDAsNSwwLDUpLFNpemU9VURpbTIubmV3KDAsMTAsMCwxMCksWkluZGV4PTEwLH19LAogICAgICB7NiwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPWN1cnJlbnRTaGFkZTEsQm9yZGVyU2l6ZVBpeGVsPTAsTmFtZT0iQ29udGVudCIsUGFyZW50PXsxfSxQb3NpdGlvbj1VRGltMi5uZXcoMCwwLDAsMjApLFNpemU9VURpbTIubmV3KDEsMCwwLDIwMiksWkluZGV4PTEwLH19LAogICAgICB7NywiU2Nyb2xsaW5nRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xNDExNzY0NzcwNzQ2MiwwLjE0MTE3NjQ3NzA3NDYyLDAuMTQ1MDk4MDQ1NDY4MzMpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJDb2xvcjM9Q29sb3IzLm5ldygwLjE1Njg2Mjc1MDY0OTQ1LDAuMTU2ODYyNzUwNjQ5NDUsMC4xNTY4NjI3NTA2NDk0NSksQm9yZGVyU2l6ZVBpeGVsPTAsQm90dG9tSW1hZ2U9InJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIixDYW52YXNTaXplPVVEaW0yLm5ldygwLDAsMCwxMDApLE5hbWU9Ikxpc3QiLFBhcmVudD17Nn0sUG9zaXRpb249VURpbTIubmV3KDAsNSwwLDUpLFNjcm9sbEJhckltYWdlQ29sb3IzPUNvbG9yMy5uZXcoMC4zMDU4ODIzNjQ1MTE0OSwwLjMwNTg4MjM2NDUxMTQ5LDAuMzA5ODAzOTMyOTA1MiksU2Nyb2xsQmFyVGhpY2tuZXNzPTgsU2l6ZT1VRGltMi5uZXcoMSwtMTAsMSwtMTApLFRvcEltYWdlPSJyYnhhc3NldDovL3RleHR1cmVzL3VpL1Njcm9sbC9zY3JvbGwtbWlkZGxlLnBuZyIsWkluZGV4PTEwLH19LAogICAgICB7OCwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxOYW1lPSJIb2xkZXIiLFBhcmVudD17N30sU2l6ZT1VRGltMi5uZXcoMSwwLDEsMCksWkluZGV4PTEwLH19LAogICAgICB7OSwiVUlMaXN0TGF5b3V0Iix7UGFyZW50PXs4fSxTb3J0T3JkZXI9Mix9fSwKICAgICAgezEwLCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE0MTE3NjQ3NzA3NDYyLDAuMTQxMTc2NDc3MDc0NjIsMC4xNDUwOTgwNDU0NjgzMyksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlckNvbG9yMz1Db2xvcjMubmV3KDAuMzEzNzI1NTAxMjk4OSwwLjMxMzcyNTUwMTI5ODksMC4zMTM3MjU1MDEyOTg5KSxCb3JkZXJTaXplUGl4ZWw9MCxDbGlwc0Rlc2NlbmRhbnRzPXRydWUsTmFtZT0iU2V0dGluZ3MiLFBhcmVudD17Nn0sUG9zaXRpb249VURpbTIubmV3KDEsMCwwLDApLFNpemU9VURpbTIubmV3KDAsMTUwLDEsMCksWkluZGV4PTEwLH19LAogICAgICB7MTEsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMTQxMTc2NDc3MDc0NjIsMC4xNDExNzY0NzcwNzQ2MiwwLjE0NTA5ODA0NTQ2ODMzKSxOYW1lPSJTbGlkZXIiLFBhcmVudD17MTB9LFBvc2l0aW9uPVVEaW0yLm5ldygwLC0xNTAsMCwwKSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxaSW5kZXg9MTAsfX0sCiAgICAgIHsxMiwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4yMzUyOTQxMzM0MjQ3NiwwLjIzNTI5NDEzMzQyNDc2LDAuMjM1Mjk0MTMzNDI0NzYpLEJvcmRlckNvbG9yMz1Db2xvcjMubmV3KDAuMzEzNzI1NTAxMjk4OSwwLjMxMzcyNTUwMTI5ODksMC4zMTM3MjU1MDEyOTg5KSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJMaW5lIixQYXJlbnQ9ezExfSxTaXplPVVEaW0yLm5ldygwLDEsMSwwKSxaSW5kZXg9MTAsfX0sCiAgICAgIHsxMywiU2Nyb2xsaW5nRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xNDExNzY0NzcwNzQ2MiwwLjE0MTE3NjQ3NzA3NDYyLDAuMTQ1MDk4MDQ1NDY4MzMpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJDb2xvcjM9Q29sb3IzLm5ldygwLjE1Njg2Mjc1MDY0OTQ1LDAuMTU2ODYyNzUwNjQ5NDUsMC4xNTY4NjI3NTA2NDk0NSksQm9yZGVyU2l6ZVBpeGVsPTAsQm90dG9tSW1hZ2U9InJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIixDYW52YXNTaXplPVVEaW0yLm5ldygwLDAsMCwxMDApLE5hbWU9Ikxpc3QiLFBhcmVudD17MTF9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDAsMCwyNSksU2Nyb2xsQmFySW1hZ2VDb2xvcjM9Q29sb3IzLm5ldygwLjMwNTg4MjM2NDUxMTQ5LDAuMzA1ODgyMzY0NTExNDksMC4zMDk4MDM5MzI5MDUyKSxTY3JvbGxCYXJUaGlja25lc3M9OCxTaXplPVVEaW0yLm5ldygxLDAsMSwtMjUpLFRvcEltYWdlPSJyYnhhc3NldDovL3RleHR1cmVzL3VpL1Njcm9sbC9zY3JvbGwtbWlkZGxlLnBuZyIsWkluZGV4PTEwLH19LAogICAgICB7MTQsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsTmFtZT0iSG9sZGVyIixQYXJlbnQ9ezEzfSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxaSW5kZXg9MTAsfX0sCiAgICAgIHsxNSwiVUlMaXN0TGF5b3V0Iix7UGFyZW50PXsxNH0sU29ydE9yZGVyPTIsfX0sCiAgICAgIHsxNiwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD0zLE5hbWU9IlRpdGxlIixQYXJlbnQ9ezExfSxTaXplPVVEaW0yLm5ldygxLDAsMCwyMCksVGV4dD0iRXZlbnQgU2V0dGluZ3MiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsWkluZGV4PTEwLH19LAogICAgICB7MTcsIlRleHRCdXR0b24iLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xNDExNzY0NzcwNzQ2MiwwLjE0MTE3NjQ3NzA3NDYyLDAuMTQ1MDk4MDQ1NDY4MzMpLEJvcmRlckNvbG9yMz1Db2xvcjMubmV3KDAuMTU2ODYyNzUwNjQ5NDUsMC4xNTY4NjI3NTA2NDk0NSwwLjE1Njg2Mjc1MDY0OTQ1KSxGb250PTMsTmFtZT0iQ2xvc2UiLEJvcmRlclNpemVQaXhlbD0wLFBhcmVudD17MTF9LFBvc2l0aW9uPVVEaW0yLm5ldygxLC0yMCwwLDApLFNpemU9VURpbTIubmV3KDAsMjAsMCwyMCksVGV4dD0iPCIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xOCxaSW5kZXg9MTAsfX0sCiAgICAgIHsxOCwiRm9sZGVyIix7TmFtZT0iVGVtcGxhdGVzIixQYXJlbnQ9ezEwfSx9fSwKICAgICAgezE5LCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE5NjA3ODQ0OTQ4NzY5LDAuMTk2MDc4NDQ5NDg3NjksMC4xOTYwNzg0NDk0ODc2OSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlckNvbG9yMz1Db2xvcjMubmV3KDAuMTU2ODYyNzUwNjQ5NDUsMC4xNTY4NjI3NTA2NDk0NSwwLjE1Njg2Mjc1MDY0OTQ1KSxOYW1lPSJQbGF5ZXJzIixQYXJlbnQ9ezE4fSxQb3NpdGlvbj1VRGltMi5uZXcoMCwwLDAsMjUpLFNpemU9VURpbTIubmV3KDEsMCwwLDg2KSxWaXNpYmxlPWZhbHNlLFpJbmRleD0xMCx9fSwKICAgICAgezIwLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iVGl0bGUiLFBhcmVudD17MTl9LFNpemU9VURpbTIubmV3KDEsMCwwLDIwKSxUZXh0PSJDaG9vc2UgUGxheWVycyIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxaSW5kZXg9MTAsfX0sCiAgICAgIHsyMSwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMTgwMzkyMTYxMDExNywwLjE4MDM5MjE2MTAxMTcsMC4xODQzMTM3Mjk0MDU0KSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsQm9yZGVyU2l6ZVBpeGVsPTAsRm9udD0zLE5hbWU9IkFueSIsUGFyZW50PXsxOX0sUG9zaXRpb249VURpbTIubmV3KDAsNSwwLDQyKSxTaXplPVVEaW0yLm5ldygxLC0xMCwwLDIwKSxUZXh0PSJBbnkgUGxheWVyIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7MjIsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMzA1ODgyMzY0NTExNDksMC4zMDU4ODIzNjQ1MTE0OSwwLjMwOTgwMzkzMjkwNTIpLEJvcmRlclNpemVQaXhlbD0wLE5hbWU9IkJ1dHRvbiIsUGFyZW50PXsyMX0sUG9zaXRpb249VURpbTIubmV3KDEsLTIwLDAsMCksU2l6ZT1VRGltMi5uZXcoMCwyMCwwLDIwKSxaSW5kZXg9MTAsfX0sCiAgICAgIHsyMywiVGV4dEJ1dHRvbiIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjU4ODIzNTMxODY2MDc0LDAuNTg4MjM1MzE4NjYwNzQsMC41OTIxNTY4ODcwNTQ0NCksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlclNpemVQaXhlbD0wLEZvbnQ9MyxOYW1lPSJPbiIsUGFyZW50PXsyMn0sUG9zaXRpb249VURpbTIubmV3KDAsMiwwLDIpLFNpemU9VURpbTIubmV3KDAsMTYsMCwxNiksVGV4dD0iIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMCwwLDApLFRleHRTaXplPTE0LFpJbmRleD0xMCx9fSwKICAgICAgezI0LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xODAzOTIxNjEwMTE3LDAuMTgwMzkyMTYxMDExNywwLjE4NDMxMzcyOTQwNTQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxGb250PTMsTmFtZT0iTWUiLFBhcmVudD17MTl9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDUsMCwyMCksU2l6ZT1VRGltMi5uZXcoMSwtMTAsMCwyMCksVGV4dD0iTWUgT25seSIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezI1LCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjMwNTg4MjM2NDUxMTQ5LDAuMzA1ODgyMzY0NTExNDksMC4zMDk4MDM5MzI5MDUyKSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJCdXR0b24iLFBhcmVudD17MjR9LFBvc2l0aW9uPVVEaW0yLm5ldygxLC0yMCwwLDApLFNpemU9VURpbTIubmV3KDAsMjAsMCwyMCksWkluZGV4PTEwLH19LAogICAgICB7MjYsIlRleHRCdXR0b24iLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC41ODgyMzUzMTg2NjA3NCwwLjU4ODIzNTMxODY2MDc0LDAuNTkyMTU2ODg3MDU0NDQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxGb250PTMsTmFtZT0iT24iLFBhcmVudD17MjV9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDIsMCwyKSxTaXplPVVEaW0yLm5ldygwLDE2LDAsMTYpLFRleHQ9IiIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDAsMCwwKSxUZXh0U2l6ZT0xNCxaSW5kZXg9MTAsfX0sCiAgICAgIHsyNywiVGV4dEJveCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksQm9yZGVyQ29sb3IzPUNvbG9yMy5uZXcoMC4xNTY4NjI3NTA2NDk0NSwwLjE1Njg2Mjc1MDY0OTQ1LDAuMTU2ODYyNzUwNjQ5NDUpLEJvcmRlclNpemVQaXhlbD0wLENsZWFyVGV4dE9uRm9jdXM9ZmFsc2UsRm9udD0zLE5hbWU9IkN1c3RvbSIsUGFyZW50PXsxOX0sUGxhY2Vob2xkZXJDb2xvcjM9Q29sb3IzLm5ldygwLjQ3MDU4ODI2Njg0OTUyLDAuNDcwNTg4MjY2ODQ5NTIsMC40NzA1ODgyNjY4NDk1MiksUGxhY2Vob2xkZXJUZXh0PSJDdXN0b20gUGxheWVyIFNldCIsUG9zaXRpb249VURpbTIubmV3KDAsNSwwLDY0KSxTaXplPVVEaW0yLm5ldygxLC0zNSwwLDIwKSxUZXh0PSIiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHsyOCwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4zMDU4ODIzNjQ1MTE0OSwwLjMwNTg4MjM2NDUxMTQ5LDAuMzA5ODAzOTMyOTA1MiksQm9yZGVyU2l6ZVBpeGVsPTAsTmFtZT0iQ3VzdG9tQnV0dG9uIixQYXJlbnQ9ezE5fSxQb3NpdGlvbj1VRGltMi5uZXcoMSwtMjUsMCw2NCksU2l6ZT1VRGltMi5uZXcoMCwyMCwwLDIwKSxaSW5kZXg9MTAsfX0sCiAgICAgIHsyOSwiVGV4dEJ1dHRvbiIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjU4ODIzNTMxODY2MDc0LDAuNTg4MjM1MzE4NjYwNzQsMC41OTIxNTY4ODcwNTQ0NCksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlclNpemVQaXhlbD0wLEZvbnQ9MyxOYW1lPSJPbiIsUGFyZW50PXsyOH0sUG9zaXRpb249VURpbTIubmV3KDAsMiwwLDIpLFNpemU9VURpbTIubmV3KDAsMTYsMCwxNiksVGV4dD0iIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMCwwLDApLFRleHRTaXplPTE0LFpJbmRleD0xMCx9fSwKICAgICAgezMwLCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE5NjA3ODQ0OTQ4NzY5LDAuMTk2MDc4NDQ5NDg3NjksMC4xOTYwNzg0NDk0ODc2OSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlckNvbG9yMz1Db2xvcjMubmV3KDAuMTU2ODYyNzUwNjQ5NDUsMC4xNTY4NjI3NTA2NDk0NSwwLjE1Njg2Mjc1MDY0OTQ1KSxOYW1lPSJTdHJpbmdzIixQYXJlbnQ9ezE4fSxQb3NpdGlvbj1VRGltMi5uZXcoMCwwLDAsMjUpLFNpemU9VURpbTIubmV3KDEsMCwwLDY0KSxWaXNpYmxlPWZhbHNlLFpJbmRleD0xMCx9fSwKICAgICAgezMxLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iVGl0bGUiLFBhcmVudD17MzB9LFNpemU9VURpbTIubmV3KDEsMCwwLDIwKSxUZXh0PSJDaG9vc2UgU3RyaW5nIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFpJbmRleD0xMCx9fSwKICAgICAgezMyLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xODAzOTIxNjEwMTE3LDAuMTgwMzkyMTYxMDExNywwLjE4NDMxMzcyOTQwNTQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxGb250PTMsTmFtZT0iQW55IixQYXJlbnQ9ezMwfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw1LDAsMjApLFNpemU9VURpbTIubmV3KDEsLTEwLDAsMjApLFRleHQ9IkFueSBTdHJpbmciLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHszMywiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4zMDU4ODIzNjQ1MTE0OSwwLjMwNTg4MjM2NDUxMTQ5LDAuMzA5ODAzOTMyOTA1MiksQm9yZGVyU2l6ZVBpeGVsPTAsTmFtZT0iQnV0dG9uIixQYXJlbnQ9ezMyfSxQb3NpdGlvbj1VRGltMi5uZXcoMSwtMjAsMCwwKSxTaXplPVVEaW0yLm5ldygwLDIwLDAsMjApLFpJbmRleD0xMCx9fSwKICAgICAgezM0LCJUZXh0QnV0dG9uIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuNTg4MjM1MzE4NjYwNzQsMC41ODgyMzUzMTg2NjA3NCwwLjU5MjE1Njg4NzA1NDQ0KSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsQm9yZGVyU2l6ZVBpeGVsPTAsRm9udD0zLE5hbWU9Ik9uIixQYXJlbnQ9ezMzfSxQb3NpdGlvbj1VRGltMi5uZXcoMCwyLDAsMiksU2l6ZT1VRGltMi5uZXcoMCwxNiwwLDE2KSxUZXh0PSIiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygwLDAsMCksVGV4dFNpemU9MTQsWkluZGV4PTEwLH19LAogICAgICB7NTQsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMTk2MDc4NDQ5NDg3NjksMC4xOTYwNzg0NDk0ODc2OSwwLjE5NjA3ODQ0OTQ4NzY5KSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsQm9yZGVyQ29sb3IzPUNvbG9yMy5uZXcoMC4xNTY4NjI3NTA2NDk0NSwwLjE1Njg2Mjc1MDY0OTQ1LDAuMTU2ODYyNzUwNjQ5NDUpLE5hbWU9Ik51bWJlcnMiLFBhcmVudD17MTh9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDAsMCwyNSksU2l6ZT1VRGltMi5uZXcoMSwwLDAsNjQpLFZpc2libGU9ZmFsc2UsWkluZGV4PTEwLH19LAogICAgICB7NTUsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJUaXRsZSIsUGFyZW50PXs1NH0sU2l6ZT1VRGltMi5uZXcoMSwwLDAsMjApLFRleHQ9IkNob29zZSBTdHJpbmciLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsWkluZGV4PTEwLH19LAogICAgICB7NTYsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlclNpemVQaXhlbD0wLEZvbnQ9MyxOYW1lPSJBbnkiLFBhcmVudD17NTR9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDUsMCwyMCksU2l6ZT1VRGltMi5uZXcoMSwtMTAsMCwyMCksVGV4dD0iQW55IE51bWJlciIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezU3LCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjMwNTg4MjM2NDUxMTQ5LDAuMzA1ODgyMzY0NTExNDksMC4zMDk4MDM5MzI5MDUyKSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJCdXR0b24iLFBhcmVudD17NTZ9LFBvc2l0aW9uPVVEaW0yLm5ldygxLC0yMCwwLDApLFNpemU9VURpbTIubmV3KDAsMjAsMCwyMCksWkluZGV4PTEwLH19LAogICAgICB7NTgsIlRleHRCdXR0b24iLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC41ODgyMzUzMTg2NjA3NCwwLjU4ODIzNTMxODY2MDc0LDAuNTkyMTU2ODg3MDU0NDQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxGb250PTMsTmFtZT0iT24iLFBhcmVudD17NTd9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDIsMCwyKSxTaXplPVVEaW0yLm5ldygwLDE2LDAsMTYpLFRleHQ9IiIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDAsMCwwKSxUZXh0U2l6ZT0xNCxaSW5kZXg9MTAsfX0sCiAgICAgIHs1OSwiVGV4dEJveCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksQm9yZGVyQ29sb3IzPUNvbG9yMy5uZXcoMC4xNTY4NjI3NTA2NDk0NSwwLjE1Njg2Mjc1MDY0OTQ1LDAuMTU2ODYyNzUwNjQ5NDUpLEJvcmRlclNpemVQaXhlbD0wLENsZWFyVGV4dE9uRm9jdXM9ZmFsc2UsRm9udD0zLE5hbWU9IkN1c3RvbSIsUGFyZW50PXs1NH0sUGxhY2Vob2xkZXJDb2xvcjM9Q29sb3IzLm5ldygwLjQ3MDU4ODI2Njg0OTUyLDAuNDcwNTg4MjY2ODQ5NTIsMC40NzA1ODgyNjY4NDk1MiksUGxhY2Vob2xkZXJUZXh0PSJOdW1iZXIiLFBvc2l0aW9uPVVEaW0yLm5ldygwLDUsMCw0MiksU2l6ZT1VRGltMi5uZXcoMSwtMzUsMCwyMCksVGV4dD0iIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7NjAsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMzA1ODgyMzY0NTExNDksMC4zMDU4ODIzNjQ1MTE0OSwwLjMwOTgwMzkzMjkwNTIpLEJvcmRlclNpemVQaXhlbD0wLE5hbWU9IkN1c3RvbUJ1dHRvbiIsUGFyZW50PXs1NH0sUG9zaXRpb249VURpbTIubmV3KDEsLTI1LDAsNDIpLFNpemU9VURpbTIubmV3KDAsMjAsMCwyMCksWkluZGV4PTEwLH19LAogICAgICB7NjEsIlRleHRCdXR0b24iLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC41ODgyMzUzMTg2NjA3NCwwLjU4ODIzNTMxODY2MDc0LDAuNTkyMTU2ODg3MDU0NDQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxGb250PTMsTmFtZT0iT24iLFBhcmVudD17NjB9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDIsMCwyKSxTaXplPVVEaW0yLm5ldygwLDE2LDAsMTYpLFRleHQ9IiIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDAsMCwwKSxUZXh0U2l6ZT0xNCxaSW5kZXg9MTAsfX0sCiAgICAgIHszNSwiVGV4dEJveCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksQm9yZGVyQ29sb3IzPUNvbG9yMy5uZXcoMC4xNTY4NjI3NTA2NDk0NSwwLjE1Njg2Mjc1MDY0OTQ1LDAuMTU2ODYyNzUwNjQ5NDUpLEJvcmRlclNpemVQaXhlbD0wLENsZWFyVGV4dE9uRm9jdXM9ZmFsc2UsRm9udD0zLE5hbWU9IkN1c3RvbSIsUGFyZW50PXszMH0sUGxhY2Vob2xkZXJDb2xvcjM9Q29sb3IzLm5ldygwLjQ3MDU4ODI2Njg0OTUyLDAuNDcwNTg4MjY2ODQ5NTIsMC40NzA1ODgyNjY4NDk1MiksUGxhY2Vob2xkZXJUZXh0PSJNYXRjaCBTdHJpbmciLFBvc2l0aW9uPVVEaW0yLm5ldygwLDUsMCw0MiksU2l6ZT1VRGltMi5uZXcoMSwtMzUsMCwyMCksVGV4dD0iIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7MzYsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMzA1ODgyMzY0NTExNDksMC4zMDU4ODIzNjQ1MTE0OSwwLjMwOTgwMzkzMjkwNTIpLEJvcmRlclNpemVQaXhlbD0wLE5hbWU9IkN1c3RvbUJ1dHRvbiIsUGFyZW50PXszMH0sUG9zaXRpb249VURpbTIubmV3KDEsLTI1LDAsNDIpLFNpemU9VURpbTIubmV3KDAsMjAsMCwyMCksWkluZGV4PTEwLH19LAogICAgICB7MzcsIlRleHRCdXR0b24iLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC41ODgyMzUzMTg2NjA3NCwwLjU4ODIzNTMxODY2MDc0LDAuNTkyMTU2ODg3MDU0NDQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxGb250PTMsTmFtZT0iT24iLFBhcmVudD17MzZ9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDIsMCwyKSxTaXplPVVEaW0yLm5ldygwLDE2LDAsMTYpLFRleHQ9IiIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDAsMCwwKSxUZXh0U2l6ZT0xNCxaSW5kZXg9MTAsfX0sCiAgICAgIHszOCwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xOTYwNzg0NDk0ODc2OSwwLjE5NjA3ODQ0OTQ4NzY5LDAuMTk2MDc4NDQ5NDg3NjkpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJDb2xvcjM9Q29sb3IzLm5ldygwLjE1Njg2Mjc1MDY0OTQ1LDAuMTU2ODYyNzUwNjQ5NDUsMC4xNTY4NjI3NTA2NDk0NSksTmFtZT0iRGVsYXlFZGl0b3IiLFBhcmVudD17MTh9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDAsMCwyNSksU2l6ZT1VRGltMi5uZXcoMSwwLDAsMjQpLFZpc2libGU9ZmFsc2UsWkluZGV4PTEwLH19LAogICAgICB7MzksIlRleHRCb3giLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xODAzOTIxNjEwMTE3LDAuMTgwMzkyMTYxMDExNywwLjE4NDMxMzcyOTQwNTQpLEJvcmRlckNvbG9yMz1Db2xvcjMubmV3KDAuMTU2ODYyNzUwNjQ5NDUsMC4xNTY4NjI3NTA2NDk0NSwwLjE1Njg2Mjc1MDY0OTQ1KSxCb3JkZXJTaXplUGl4ZWw9MCxGb250PTMsTmFtZT0iU2VjcyIsUGFyZW50PXszOH0sUGxhY2Vob2xkZXJDb2xvcjM9Q29sb3IzLm5ldygwLjQ3MDU4ODI2Njg0OTUyLDAuNDcwNTg4MjY2ODQ5NTIsMC40NzA1ODgyNjY4NDk1MiksUG9zaXRpb249VURpbTIubmV3KDAsNjAsMCwyKSxTaXplPVVEaW0yLm5ldygxLC02NSwwLDIwKSxUZXh0PSIiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs0MCwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMTgwMzkyMTYxMDExNywwLjE4MDM5MjE2MTAxMTcsMC4xODQzMTM3Mjk0MDU0KSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsQm9yZGVyU2l6ZVBpeGVsPTAsRm9udD0zLE5hbWU9IkxhYmVsIixQYXJlbnQ9ezM5fSxQb3NpdGlvbj1VRGltMi5uZXcoMCwtNTUsMCwwKSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSJEZWxheSAocyk6IixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7NDEsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1jdXJyZW50U2hhZGUxLEJvcmRlclNpemVQaXhlbD0wLENsaXBzRGVzY2VuZGFudHM9dHJ1ZSxOYW1lPSJFdmVudFRlbXBsYXRlIixQYXJlbnQ9ezZ9LFNpemU9VURpbTIubmV3KDEsMCwwLDIwKSxWaXNpYmxlPWZhbHNlLFpJbmRleD0xMCx9fSwKICAgICAgezQyLCJUZXh0QnV0dG9uIix7QmFja2dyb3VuZENvbG9yMz1jdXJyZW50VGV4dDEsQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJFeHBhbmQiLFBhcmVudD17NDF9LFNpemU9VURpbTIubmV3KDAsMjAsMCwyMCksVGV4dD0iPiIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xOCxaSW5kZXg9MTAsfX0sCiAgICAgIHs0MywiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1jdXJyZW50VGV4dDEsQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJFdmVudE5hbWUiLFBhcmVudD17NDF9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDI1LDAsMCksU2l6ZT1VRGltMi5uZXcoMSwtMjUsMCwyMCksVGV4dD0iT25TcGF3biIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezQ0LCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE5NjA3ODQ0OTQ4NzY5LDAuMTk2MDc4NDQ5NDg3NjksMC4xOTYwNzg0NDk0ODc2OSksQm9yZGVyU2l6ZVBpeGVsPTAsQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLENsaXBzRGVzY2VuZGFudHM9dHJ1ZSxOYW1lPSJDbWRzIixQYXJlbnQ9ezQxfSxQb3NpdGlvbj1VRGltMi5uZXcoMCwwLDAsMjApLFNpemU9VURpbTIubmV3KDEsMCwxLC0yMCksWkluZGV4PTEwLH19LAogICAgICB7NDUsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMTQxMTc2NDc3MDc0NjIsMC4xNDExNzY0NzcwNzQ2MiwwLjE0NTA5ODA0NTQ2ODMzKSxCb3JkZXJDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksTmFtZT0iQWRkIixQYXJlbnQ9ezQ0fSxQb3NpdGlvbj1VRGltMi5uZXcoMCwwLDEsLTIwKSxTaXplPVVEaW0yLm5ldygxLDAsMCwyMCksWkluZGV4PTEwLH19LAogICAgICB7NDYsIlRleHRCb3giLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxDbGVhclRleHRPbkZvY3VzPWZhbHNlLEZvbnQ9MyxQYXJlbnQ9ezQ1fSxQbGFjZWhvbGRlckNvbG9yMz1Db2xvcjMubmV3KDAuNzg0MzEzNzM4MzQ2MSwwLjc4NDMxMzczODM0NjEsMC43ODQzMTM3MzgzNDYxKSxQbGFjZWhvbGRlclRleHQ9IkFkZCBuZXcgY29tbWFuZCIsUG9zaXRpb249VURpbTIubmV3KDAsNSwwLDApLFNpemU9VURpbTIubmV3KDEsLTEwLDEsMCksVGV4dD0iIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7NDcsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsTmFtZT0iSG9sZGVyIixQYXJlbnQ9ezQ0fSxTaXplPVVEaW0yLm5ldygxLDAsMSwtMjApLFpJbmRleD0xMCx9fSwKICAgICAgezQ4LCJVSUxpc3RMYXlvdXQiLHtQYXJlbnQ9ezQ3fSxTb3J0T3JkZXI9Mix9fSwKICAgICAgezQ5LCJGcmFtZSIse2N1cnJlbnRTaGFkZTEsQm9yZGVyU2l6ZVBpeGVsPTAsQ2xpcHNEZXNjZW5kYW50cz10cnVlLE5hbWU9IkNtZFRlbXBsYXRlIixQYXJlbnQ9ezZ9LFNpemU9VURpbTIubmV3KDEsMCwwLDIwKSxWaXNpYmxlPWZhbHNlLFpJbmRleD0xMCx9fSwKICAgICAgezUwLCJUZXh0Qm94Iix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsQ2xlYXJUZXh0T25Gb2N1cz1mYWxzZSxGb250PTMsUGFyZW50PXs0OX0sUGxhY2Vob2xkZXJDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksUG9zaXRpb249VURpbTIubmV3KDAsNSwwLDApLFNpemU9VURpbTIubmV3KDEsLTQ1LDAsMjApLFRleHQ9ImFcXGJcXGNcXGQiLFRleHRDb2xvcjM9Y3VycmVudFRleHQxLFRleHRTaXplPTE0LFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7NTEsIlRleHRCdXR0b24iLHtCYWNrZ3JvdW5kQ29sb3IzPWN1cnJlbnRTaGFkZTEsQm9yZGVyU2l6ZVBpeGVsPTAsRm9udD0zLE5hbWU9IkRlbGV0ZSIsUGFyZW50PXs0OX0sUG9zaXRpb249VURpbTIubmV3KDEsLTIwLDAsMCksU2l6ZT1VRGltMi5uZXcoMCwyMCwwLDIwKSxUZXh0PSJYIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE4LFpJbmRleD0xMCx9fSwKICAgICAgezUyLCJUZXh0QnV0dG9uIix7QmFja2dyb3VuZENvbG9yMz1jdXJyZW50U2hhZGUxLEJvcmRlclNpemVQaXhlbD0wLEZvbnQ9MyxOYW1lPSJTZXR0aW5ncyIsUGFyZW50PXs0OX0sUG9zaXRpb249VURpbTIubmV3KDEsLTQwLDAsMCksU2l6ZT1VRGltMi5uZXcoMCwyMCwwLDIwKSxUZXh0PSIiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTgsWkluZGV4PTEwLH19LAogICAgICB7NTMsIkltYWdlTGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxJbWFnZT0icmJ4YXNzZXRpZDovLzEyMDQzOTcwMjkiLFBhcmVudD17NTJ9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDIsMCwyKSxTaXplPVVEaW0yLm5ldygwLDE2LDAsMTYpLFpJbmRleD0xMCx9fSwKICAgIH0pCiAgICBtYWluLk5hbWUgPSByYW5kb21TdHJpbmcoKQogICAgbG9jYWwgbWFpbkZyYW1lID0gbWFpbjpXYWl0Rm9yQ2hpbGQoIkNvbnRlbnQiKQogICAgbG9jYWwgZXZlbnRMaXN0ID0gbWFpbkZyYW1lOldhaXRGb3JDaGlsZCgiTGlzdCIpCiAgICBsb2NhbCBldmVudExpc3RIb2xkZXIgPSBldmVudExpc3Q6V2FpdEZvckNoaWxkKCJIb2xkZXIiKQogICAgbG9jYWwgY21kVGVtcGxhdGUgPSBtYWluRnJhbWU6V2FpdEZvckNoaWxkKCJDbWRUZW1wbGF0ZSIpCiAgICBsb2NhbCBldmVudFRlbXBsYXRlID0gbWFpbkZyYW1lOldhaXRGb3JDaGlsZCgiRXZlbnRUZW1wbGF0ZSIpCiAgICBsb2NhbCBzZXR0aW5nc0ZyYW1lID0gbWFpbkZyYW1lOldhaXRGb3JDaGlsZCgiU2V0dGluZ3MiKTpXYWl0Rm9yQ2hpbGQoIlNsaWRlciIpCiAgICBsb2NhbCBzZXR0aW5nc1RlbXBsYXRlcyA9IG1haW5GcmFtZS5TZXR0aW5nczpXYWl0Rm9yQ2hpbGQoIlRlbXBsYXRlcyIpCiAgICBsb2NhbCBzZXR0aW5nc0xpc3QgPSBzZXR0aW5nc0ZyYW1lOldhaXRGb3JDaGlsZCgiTGlzdCIpOldhaXRGb3JDaGlsZCgiSG9sZGVyIikKICAgIHRhYmxlLmluc2VydChzaGFkZTIsbWFpbi5Ub3BCYXIpIHRhYmxlLmluc2VydChzaGFkZTEsbWFpbkZyYW1lKSB0YWJsZS5pbnNlcnQoc2hhZGUyLGV2ZW50VGVtcGxhdGUpCiAgICB0YWJsZS5pbnNlcnQodGV4dDEsZXZlbnRUZW1wbGF0ZS5FdmVudE5hbWUpIHRhYmxlLmluc2VydChzaGFkZTEsZXZlbnRUZW1wbGF0ZS5DbWRzLkFkZCkgdGFibGUuaW5zZXJ0KHNoYWRlMSxjbWRUZW1wbGF0ZSkKICAgIHRhYmxlLmluc2VydCh0ZXh0MSxjbWRUZW1wbGF0ZS5UZXh0Qm94KSB0YWJsZS5pbnNlcnQoc2hhZGUyLGNtZFRlbXBsYXRlLkRlbGV0ZSkgdGFibGUuaW5zZXJ0KHNoYWRlMixjbWRUZW1wbGF0ZS5TZXR0aW5ncykKICAgIHRhYmxlLmluc2VydChzY3JvbGwsbWFpbkZyYW1lLkxpc3QpIHRhYmxlLmluc2VydChzaGFkZTEsc2V0dGluZ3NGcmFtZSkgdGFibGUuaW5zZXJ0KHNoYWRlMixzZXR0aW5nc0ZyYW1lLkxpbmUpCiAgICB0YWJsZS5pbnNlcnQoc2hhZGUyLHNldHRpbmdzRnJhbWUuQ2xvc2UpIHRhYmxlLmluc2VydChzY3JvbGwsc2V0dGluZ3NGcmFtZS5MaXN0KSB0YWJsZS5pbnNlcnQoc2hhZGUyLHNldHRpbmdzVGVtcGxhdGVzLkRlbGF5RWRpdG9yLlNlY3MpCiAgICB0YWJsZS5pbnNlcnQodGV4dDEsc2V0dGluZ3NUZW1wbGF0ZXMuRGVsYXlFZGl0b3IuU2VjcykgdGFibGUuaW5zZXJ0KHRleHQxLHNldHRpbmdzVGVtcGxhdGVzLkRlbGF5RWRpdG9yLlNlY3MuTGFiZWwpIHRhYmxlLmluc2VydCh0ZXh0MSxzZXR0aW5nc1RlbXBsYXRlcy5QbGF5ZXJzLlRpdGxlKQogICAgdGFibGUuaW5zZXJ0KHNoYWRlMyxzZXR0aW5nc1RlbXBsYXRlcy5QbGF5ZXJzLkN1c3RvbUJ1dHRvbikgdGFibGUuaW5zZXJ0KHNoYWRlMixzZXR0aW5nc1RlbXBsYXRlcy5QbGF5ZXJzLkN1c3RvbSkgdGFibGUuaW5zZXJ0KHRleHQxLHNldHRpbmdzVGVtcGxhdGVzLlBsYXllcnMuQ3VzdG9tKQogICAgdGFibGUuaW5zZXJ0KHNoYWRlMyxzZXR0aW5nc1RlbXBsYXRlcy5QbGF5ZXJzLkFueS5CdXR0b24pIHRhYmxlLmluc2VydChzaGFkZTMsc2V0dGluZ3NUZW1wbGF0ZXMuUGxheWVycy5NZS5CdXR0b24pIHRhYmxlLmluc2VydCh0ZXh0MSxzZXR0aW5nc1RlbXBsYXRlcy5QbGF5ZXJzLkFueSkKICAgIHRhYmxlLmluc2VydCh0ZXh0MSxzZXR0aW5nc1RlbXBsYXRlcy5QbGF5ZXJzLk1lKSB0YWJsZS5pbnNlcnQodGV4dDEsc2V0dGluZ3NUZW1wbGF0ZXMuU3RyaW5ncy5UaXRsZSkgdGFibGUuaW5zZXJ0KHRleHQxLHNldHRpbmdzVGVtcGxhdGVzLlN0cmluZ3MuQW55KQogICAgdGFibGUuaW5zZXJ0KHNoYWRlMyxzZXR0aW5nc1RlbXBsYXRlcy5TdHJpbmdzLkFueS5CdXR0b24pIHRhYmxlLmluc2VydChzaGFkZTMsc2V0dGluZ3NUZW1wbGF0ZXMuU3RyaW5ncy5DdXN0b21CdXR0b24pIHRhYmxlLmluc2VydCh0ZXh0MSxzZXR0aW5nc1RlbXBsYXRlcy5TdHJpbmdzLkN1c3RvbSkKICAgIHRhYmxlLmluc2VydChzaGFkZTIsc2V0dGluZ3NUZW1wbGF0ZXMuU3RyaW5ncy5DdXN0b20pCiAgICB0YWJsZS5pbnNlcnQodGV4dDEsc2V0dGluZ3NUZW1wbGF0ZXMuUGxheWVycy5NZSkgdGFibGUuaW5zZXJ0KHRleHQxLHNldHRpbmdzVGVtcGxhdGVzLk51bWJlcnMuVGl0bGUpIHRhYmxlLmluc2VydCh0ZXh0MSxzZXR0aW5nc1RlbXBsYXRlcy5OdW1iZXJzLkFueSkKICAgIHRhYmxlLmluc2VydChzaGFkZTMsc2V0dGluZ3NUZW1wbGF0ZXMuTnVtYmVycy5BbnkuQnV0dG9uKSB0YWJsZS5pbnNlcnQoc2hhZGUzLHNldHRpbmdzVGVtcGxhdGVzLk51bWJlcnMuQ3VzdG9tQnV0dG9uKSB0YWJsZS5pbnNlcnQodGV4dDEsc2V0dGluZ3NUZW1wbGF0ZXMuTnVtYmVycy5DdXN0b20pCiAgICB0YWJsZS5pbnNlcnQoc2hhZGUyLHNldHRpbmdzVGVtcGxhdGVzLk51bWJlcnMuQ3VzdG9tKQogIAogICAgbG9jYWwgdHdlZW5JbmYgPSBUd2VlbkluZm8ubmV3KDAuMjUsRW51bS5FYXNpbmdTdHlsZS5RdWFydCxFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpCiAgCiAgICBsb2NhbCBjdXJyZW50bHlFZGl0aW5nQ21kID0gbmlsCiAgCiAgICBzZXR0aW5nc0ZyYW1lOldhaXRGb3JDaGlsZCgiQ2xvc2UiKS5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgc2V0dGluZ3NGcmFtZTpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLC0xNTAsMCwwKSxFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQsRW51bS5FYXNpbmdTdHlsZS5RdWFydCwwLjI1LHRydWUpCiAgICBlbmQpCiAgCiAgICBsb2NhbCBmdW5jdGlvbiByZXNpemVMaXN0KCkKICAgICAgbG9jYWwgc2l6ZSA9IDAKICAKICAgICAgZm9yIGksdiBpbiBwYWlycyhldmVudExpc3RIb2xkZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2Lk5hbWUgPT0gIkV2ZW50VGVtcGxhdGUiIHRoZW4KICAgICAgICAgIHNpemUgPSBzaXplICsgMjAKICAgICAgICAgIGlmIHYuRXhwYW5kLlJvdGF0aW9uID09IDkwIHRoZW4KICAgICAgICAgICAgc2l6ZSA9IHNpemUgKyAyMCooMSsoI2V2ZW50c1t2LkV2ZW50TmFtZTpHZXRBdHRyaWJ1dGUoIlJhd05hbWUiKV0uY29tbWFuZHMgb3IgMCkpCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgCiAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoZXZlbnRMaXN0LHR3ZWVuSW5mLHtDYW52YXNTaXplID0gVURpbTIubmV3KDAsMCwwLHNpemUpfSk6UGxheSgpCiAgCiAgICAgIGlmIHNpemUgPiBldmVudExpc3QuQWJzb2x1dGVTaXplLlkgdGhlbgogICAgICAgIGV2ZW50TGlzdEhvbGRlci5TaXplID0gVURpbTIubmV3KDEsLTgsMSwwKQogICAgICBlbHNlCiAgICAgICAgZXZlbnRMaXN0SG9sZGVyLlNpemUgPSBVRGltMi5uZXcoMSwwLDEsMCkKICAgICAgZW5kCiAgICBlbmQKICAKICAgIGxvY2FsIGZ1bmN0aW9uIHJlc2l6ZVNldHRpbmdzTGlzdCgpCiAgICAgIGxvY2FsIHNpemUgPSAwCiAgCiAgICAgIGZvciBpLHYgaW4gcGFpcnMoc2V0dGluZ3NMaXN0OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjpJc0EoIkZyYW1lIikgdGhlbgogICAgICAgICAgc2l6ZSA9IHNpemUgKyB2LkFic29sdXRlU2l6ZS5ZCiAgICAgICAgZW5kCiAgICAgIGVuZAogIAogICAgICBzZXR0aW5nc0xpc3QuUGFyZW50LkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwwLDAsc2l6ZSkKICAKICAgICAgaWYgc2l6ZSA+IHNldHRpbmdzTGlzdC5QYXJlbnQuQWJzb2x1dGVTaXplLlkgdGhlbgogICAgICAgIHNldHRpbmdzTGlzdC5TaXplID0gVURpbTIubmV3KDEsLTgsMSwwKQogICAgICBlbHNlCiAgICAgICAgc2V0dGluZ3NMaXN0LlNpemUgPSBVRGltMi5uZXcoMSwwLDEsMCkKICAgICAgZW5kCiAgICBlbmQKICAKICAgIGxvY2FsIGZ1bmN0aW9uIHNldHVwQ2hlY2tib3goYnV0dG9uLGNhbGxiYWNrKQogICAgICBsb2NhbCBlbmFibGVkID0gYnV0dG9uLk9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPT0gMAogIAogICAgICBsb2NhbCBmdW5jdGlvbiB1cGRhdGUoKQogICAgICAgIGJ1dHRvbi5Pbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gKGVuYWJsZWQgYW5kIDAgb3IgMSkKICAgICAgZW5kCiAgCiAgICAgIGJ1dHRvbi5Pbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBlbmFibGVkID0gbm90IGVuYWJsZWQKICAgICAgICB1cGRhdGUoKQogICAgICAgIGlmIGNhbGxiYWNrIHRoZW4gY2FsbGJhY2soZW5hYmxlZCkgZW5kCiAgICAgIGVuZCkKICAKICAgICAgcmV0dXJuIHsKICAgICAgICBUb2dnbGUgPSBmdW5jdGlvbihub2NhbGwpIGVuYWJsZWQgPSBub3QgZW5hYmxlZCB1cGRhdGUoKSBpZiBub3Qgbm9jYWxsIGFuZCBjYWxsYmFjayB0aGVuIGNhbGxiYWNrKGVuYWJsZWQpIGVuZCBlbmQsCiAgICAgICAgRW5hYmxlID0gZnVuY3Rpb24obm9jYWxsKSBpZiBlbmFibGVkIHRoZW4gcmV0dXJuIGVuZCBlbmFibGVkID0gdHJ1ZSB1cGRhdGUoKWlmIG5vdCBub2NhbGwgYW5kIGNhbGxiYWNrIHRoZW4gY2FsbGJhY2soZW5hYmxlZCkgZW5kIGVuZCwKICAgICAgICBEaXNhYmxlID0gZnVuY3Rpb24obm9jYWxsKSBpZiBub3QgZW5hYmxlZCB0aGVuIHJldHVybiBlbmQgZW5hYmxlZCA9IGZhbHNlIHVwZGF0ZSgpaWYgbm90IG5vY2FsbCBhbmQgY2FsbGJhY2sgdGhlbiBjYWxsYmFjayhlbmFibGVkKSBlbmQgZW5kLAogICAgICAgIElzRW5hYmxlZCA9IGZ1bmN0aW9uKCkgcmV0dXJuIGVuYWJsZWQgZW5kCiAgICAgIH0KICAgIGVuZAogIAogICAgbG9jYWwgZnVuY3Rpb24gb3BlblNldHRpbmdzRWRpdG9yKGV2ZW50LGNtZCkKICAgICAgY3VycmVudGx5RWRpdGluZ0NtZCA9IGNtZAogIAogICAgICBmb3IgaSx2IGluIHBhaXJzKHNldHRpbmdzTGlzdDpHZXRDaGlsZHJlbigpKSBkbyBpZiB2OklzQSgiRnJhbWUiKSB0aGVuIHY6RGVzdHJveSgpIGVuZCBlbmQKICAKICAgICAgbG9jYWwgZGVsYXlFZGl0b3IgPSBzZXR0aW5nc1RlbXBsYXRlcy5EZWxheUVkaXRvcjpDbG9uZSgpCiAgICAgIGRlbGF5RWRpdG9yLlNlY3MuRm9jdXNMb3N0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIGNtZFszXSA9IHRvbnVtYmVyKGRlbGF5RWRpdG9yLlNlY3MuVGV4dCkgb3IgMAogICAgICAgIGRlbGF5RWRpdG9yLlNlY3MuVGV4dCA9IGNtZFszXQogICAgICAgIGlmIG9uRWRpdGVkIHRoZW4gb25FZGl0ZWQoKSBlbmQKICAgICAgZW5kKQogICAgICBkZWxheUVkaXRvci5TZWNzLlRleHQgPSBjbWRbM10KICAgICAgZGVsYXlFZGl0b3IuVmlzaWJsZSA9IHRydWUKICAgICAgdGFibGUuaW5zZXJ0KHNoYWRlMixkZWxheUVkaXRvci5TZWNzKQogICAgICB0YWJsZS5pbnNlcnQodGV4dDEsZGVsYXlFZGl0b3IuU2VjcykKICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLGRlbGF5RWRpdG9yLlNlY3MuTGFiZWwpCiAgICAgIGRlbGF5RWRpdG9yLlBhcmVudCA9IHNldHRpbmdzTGlzdAogIAogICAgICBmb3IgaSx2IGluIHBhaXJzKGV2ZW50LnNldHMpIGRvCiAgICAgICAgaWYgdi5UeXBlID09ICJQbGF5ZXIiIHRoZW4KICAgICAgICAgIGxvY2FsIHRlbXBsYXRlID0gc2V0dGluZ3NUZW1wbGF0ZXMuUGxheWVyczpDbG9uZSgpCiAgICAgICAgICB0ZW1wbGF0ZS5UaXRsZS5UZXh0ID0gdi5OYW1lIG9yICJQbGF5ZXIiCiAgCiAgICAgICAgICBsb2NhbCBtZSxhbnksY3VzdG9tCiAgCiAgICAgICAgICBtZSA9IHNldHVwQ2hlY2tib3godGVtcGxhdGUuTWUuQnV0dG9uLGZ1bmN0aW9uKG9uKQogICAgICAgICAgICBpZiBub3Qgb24gdGhlbiByZXR1cm4gZW5kCiAgICAgICAgICAgIGFueS5EaXNhYmxlKCkKICAgICAgICAgICAgY3VzdG9tLkRpc2FibGUoKQogICAgICAgICAgICBjbWRbMl1baV0gPSAwCiAgICAgICAgICAgIGlmIG9uRWRpdGVkIHRoZW4gb25FZGl0ZWQoKSBlbmQKICAgICAgICAgIGVuZCkKICAKICAgICAgICAgIGFueSA9IHNldHVwQ2hlY2tib3godGVtcGxhdGUuQW55LkJ1dHRvbixmdW5jdGlvbihvbikKICAgICAgICAgICAgaWYgbm90IG9uIHRoZW4gcmV0dXJuIGVuZAogICAgICAgICAgICBtZS5EaXNhYmxlKCkKICAgICAgICAgICAgY3VzdG9tLkRpc2FibGUoKQogICAgICAgICAgICBjbWRbMl1baV0gPSAxCiAgICAgICAgICAgIGlmIG9uRWRpdGVkIHRoZW4gb25FZGl0ZWQoKSBlbmQKICAgICAgICAgIGVuZCkKICAKICAgICAgICAgIGxvY2FsIGN1c3RvbVRleHRCb3ggPSB0ZW1wbGF0ZS5DdXN0b20KICAgICAgICAgIGN1c3RvbSA9IHNldHVwQ2hlY2tib3godGVtcGxhdGUuQ3VzdG9tQnV0dG9uLGZ1bmN0aW9uKG9uKQogICAgICAgICAgICBpZiBub3Qgb24gdGhlbiByZXR1cm4gZW5kCiAgICAgICAgICAgIG1lLkRpc2FibGUoKQogICAgICAgICAgICBhbnkuRGlzYWJsZSgpCiAgICAgICAgICAgIGNtZFsyXVtpXSA9IGN1c3RvbVRleHRCb3guVGV4dAogICAgICAgICAgICBpZiBvbkVkaXRlZCB0aGVuIG9uRWRpdGVkKCkgZW5kCiAgICAgICAgICBlbmQpCiAgCiAgICAgICAgICBWaWV3cG9ydFRleHRCb3guY29udmVydChjdXN0b21UZXh0Qm94KQogICAgICAgICAgY3VzdG9tVGV4dEJveC5Gb2N1c0xvc3Q6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIGN1c3RvbTpJc0VuYWJsZWQoKSB0aGVuCiAgICAgICAgICAgICAgY21kWzJdW2ldID0gY3VzdG9tVGV4dEJveC5UZXh0CiAgICAgICAgICAgICAgaWYgb25FZGl0ZWQgdGhlbiBvbkVkaXRlZCgpIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZCkKICAKICAgICAgICAgIGxvY2FsIGNWYWwgPSBjbWRbMl1baV0KICAgICAgICAgIGlmIGNWYWwgPT0gMCB0aGVuCiAgICAgICAgICAgIG1lOkVuYWJsZSgpCiAgICAgICAgICBlbHNlaWYgY1ZhbCA9PSAxIHRoZW4KICAgICAgICAgICAgYW55OkVuYWJsZSgpCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIGN1c3RvbTpFbmFibGUoKQogICAgICAgICAgICBjdXN0b21UZXh0Qm94LlRleHQgPSBjVmFsCiAgICAgICAgICBlbmQKICAKICAgICAgICAgIHRlbXBsYXRlLlZpc2libGUgPSB0cnVlCiAgICAgICAgICB0YWJsZS5pbnNlcnQodGV4dDEsdGVtcGxhdGUuVGl0bGUpCiAgICAgICAgICB0YWJsZS5pbnNlcnQoc2hhZGUzLHRlbXBsYXRlLkN1c3RvbUJ1dHRvbikKICAgICAgICAgIHRhYmxlLmluc2VydChzaGFkZTMsdGVtcGxhdGUuQW55LkJ1dHRvbikKICAgICAgICAgIHRhYmxlLmluc2VydChzaGFkZTMsdGVtcGxhdGUuTWUuQnV0dG9uKQogICAgICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLHRlbXBsYXRlLkFueSkKICAgICAgICAgIHRhYmxlLmluc2VydCh0ZXh0MSx0ZW1wbGF0ZS5NZSkKICAgICAgICAgIHRlbXBsYXRlLlBhcmVudCA9IHNldHRpbmdzTGlzdAogICAgICAgIGVsc2VpZiB2LlR5cGUgPT0gIlN0cmluZyIgdGhlbgogICAgICAgICAgbG9jYWwgdGVtcGxhdGUgPSBzZXR0aW5nc1RlbXBsYXRlcy5TdHJpbmdzOkNsb25lKCkKICAgICAgICAgIHRlbXBsYXRlLlRpdGxlLlRleHQgPSB2Lk5hbWUgb3IgIlN0cmluZyIKICAKICAgICAgICAgIGxvY2FsIGFueSxjdXN0b20KICAKICAgICAgICAgIGFueSA9IHNldHVwQ2hlY2tib3godGVtcGxhdGUuQW55LkJ1dHRvbixmdW5jdGlvbihvbikKICAgICAgICAgICAgaWYgbm90IG9uIHRoZW4gcmV0dXJuIGVuZAogICAgICAgICAgICBjdXN0b20uRGlzYWJsZSgpCiAgICAgICAgICAgIGNtZFsyXVtpXSA9IDAKICAgICAgICAgICAgaWYgb25FZGl0ZWQgdGhlbiBvbkVkaXRlZCgpIGVuZAogICAgICAgICAgZW5kKQogIAogICAgICAgICAgbG9jYWwgY3VzdG9tVGV4dEJveCA9IHRlbXBsYXRlLkN1c3RvbQogICAgICAgICAgY3VzdG9tID0gc2V0dXBDaGVja2JveCh0ZW1wbGF0ZS5DdXN0b21CdXR0b24sZnVuY3Rpb24ob24pCiAgICAgICAgICAgIGlmIG5vdCBvbiB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgYW55LkRpc2FibGUoKQogICAgICAgICAgICBjbWRbMl1baV0gPSBjdXN0b21UZXh0Qm94LlRleHQKICAgICAgICAgICAgaWYgb25FZGl0ZWQgdGhlbiBvbkVkaXRlZCgpIGVuZAogICAgICAgICAgZW5kKQogIAogICAgICAgICAgVmlld3BvcnRUZXh0Qm94LmNvbnZlcnQoY3VzdG9tVGV4dEJveCkKICAgICAgICAgIGN1c3RvbVRleHRCb3guRm9jdXNMb3N0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBjdXN0b206SXNFbmFibGVkKCkgdGhlbgogICAgICAgICAgICAgIGNtZFsyXVtpXSA9IGN1c3RvbVRleHRCb3guVGV4dAogICAgICAgICAgICAgIGlmIG9uRWRpdGVkIHRoZW4gb25FZGl0ZWQoKSBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmQpCiAgCiAgICAgICAgICBsb2NhbCBjVmFsID0gY21kWzJdW2ldCiAgICAgICAgICBpZiBjVmFsID09IDAgdGhlbgogICAgICAgICAgICBhbnk6RW5hYmxlKCkKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgY3VzdG9tOkVuYWJsZSgpCiAgICAgICAgICAgIGN1c3RvbVRleHRCb3guVGV4dCA9IGNWYWwKICAgICAgICAgIGVuZAogIAogICAgICAgICAgdGVtcGxhdGUuVmlzaWJsZSA9IHRydWUKICAgICAgICAgIHRhYmxlLmluc2VydCh0ZXh0MSx0ZW1wbGF0ZS5UaXRsZSkKICAgICAgICAgIHRhYmxlLmluc2VydCh0ZXh0MSx0ZW1wbGF0ZS5BbnkpCiAgICAgICAgICB0YWJsZS5pbnNlcnQoc2hhZGUzLHRlbXBsYXRlLkFueS5CdXR0b24pCiAgICAgICAgICB0YWJsZS5pbnNlcnQoc2hhZGUzLHRlbXBsYXRlLkN1c3RvbUJ1dHRvbikKICAgICAgICAgIHRlbXBsYXRlLlBhcmVudCA9IHNldHRpbmdzTGlzdAogICAgICAgIGVsc2VpZiB2LlR5cGUgPT0gIk51bWJlciIgdGhlbgogICAgICAgICAgbG9jYWwgdGVtcGxhdGUgPSBzZXR0aW5nc1RlbXBsYXRlcy5OdW1iZXJzOkNsb25lKCkKICAgICAgICAgIHRlbXBsYXRlLlRpdGxlLlRleHQgPSB2Lk5hbWUgb3IgIk51bWJlciIKICAKICAgICAgICAgIGxvY2FsIGFueSxjdXN0b20KICAKICAgICAgICAgIGFueSA9IHNldHVwQ2hlY2tib3godGVtcGxhdGUuQW55LkJ1dHRvbixmdW5jdGlvbihvbikKICAgICAgICAgICAgaWYgbm90IG9uIHRoZW4gcmV0dXJuIGVuZAogICAgICAgICAgICBjdXN0b20uRGlzYWJsZSgpCiAgICAgICAgICAgIGNtZFsyXVtpXSA9IDAKICAgICAgICAgICAgaWYgb25FZGl0ZWQgdGhlbiBvbkVkaXRlZCgpIGVuZAogICAgICAgICAgZW5kKQogIAogICAgICAgICAgbG9jYWwgY3VzdG9tVGV4dEJveCA9IHRlbXBsYXRlLkN1c3RvbQogICAgICAgICAgY3VzdG9tID0gc2V0dXBDaGVja2JveCh0ZW1wbGF0ZS5DdXN0b21CdXR0b24sZnVuY3Rpb24ob24pCiAgICAgICAgICAgIGlmIG5vdCBvbiB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgYW55LkRpc2FibGUoKQogICAgICAgICAgICBjbWRbMl1baV0gPSBjdXN0b21UZXh0Qm94LlRleHQKICAgICAgICAgICAgaWYgb25FZGl0ZWQgdGhlbiBvbkVkaXRlZCgpIGVuZAogICAgICAgICAgZW5kKQogIAogICAgICAgICAgVmlld3BvcnRUZXh0Qm94LmNvbnZlcnQoY3VzdG9tVGV4dEJveCkKICAgICAgICAgIGN1c3RvbVRleHRCb3guRm9jdXNMb3N0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBjbWRbMl1baV0gPSB0b251bWJlcihjdXN0b21UZXh0Qm94LlRleHQpIG9yIDAKICAgICAgICAgICAgY3VzdG9tVGV4dEJveC5UZXh0ID0gY21kWzJdW2ldCiAgICAgICAgICAgIGlmIGN1c3RvbTpJc0VuYWJsZWQoKSB0aGVuCiAgICAgICAgICAgICAgaWYgb25FZGl0ZWQgdGhlbiBvbkVkaXRlZCgpIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZCkKICAKICAgICAgICAgIGxvY2FsIGNWYWwgPSBjbWRbMl1baV0KICAgICAgICAgIGlmIGNWYWwgPT0gMCB0aGVuCiAgICAgICAgICAgIGFueTpFbmFibGUoKQogICAgICAgICAgZWxzZQogICAgICAgICAgICBjdXN0b206RW5hYmxlKCkKICAgICAgICAgICAgY3VzdG9tVGV4dEJveC5UZXh0ID0gY1ZhbAogICAgICAgICAgZW5kCiAgCiAgICAgICAgICB0ZW1wbGF0ZS5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLHRlbXBsYXRlLlRpdGxlKQogICAgICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLHRlbXBsYXRlLkFueSkKICAgICAgICAgIHRhYmxlLmluc2VydChzaGFkZTMsdGVtcGxhdGUuQW55LkJ1dHRvbikKICAgICAgICAgIHRhYmxlLmluc2VydChzaGFkZTMsdGVtcGxhdGUuQ3VzdG9tQnV0dG9uKQogICAgICAgICAgdGVtcGxhdGUuUGFyZW50ID0gc2V0dGluZ3NMaXN0CiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICByZXNpemVTZXR0aW5nc0xpc3QoKQogICAgICBzZXR0aW5nc0ZyYW1lOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAsMCwwLDApLEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCxFbnVtLkVhc2luZ1N0eWxlLlF1YXJ0LDAuMjUsdHJ1ZSkKICAgIGVuZAogIAogICAgbG9jYWwgZnVuY3Rpb24gZGVmYXVsdFNldHRpbmdzKGV2KQogICAgICBsb2NhbCByZXMgPSB7fQogIAogICAgICBmb3IgaSx2IGluIHBhaXJzKGV2LnNldHMpIGRvCiAgICAgICAgaWYgdi5UeXBlID09ICJQbGF5ZXIiIHRoZW4KICAgICAgICAgIHJlc1sjcmVzKzFdID0gdi5EZWZhdWx0IG9yIDAKICAgICAgICBlbHNlaWYgdi5UeXBlID09ICJTdHJpbmciIHRoZW4KICAgICAgICAgIHJlc1sjcmVzKzFdID0gdi5EZWZhdWx0IG9yIDAKICAgICAgICBlbHNlaWYgdi5UeXBlID09ICJOdW1iZXIiIHRoZW4KICAgICAgICAgIHJlc1sjcmVzKzFdID0gdi5EZWZhdWx0IG9yIDAKICAgICAgICBlbmQKICAgICAgZW5kCiAgCiAgICAgIHJldHVybiByZXMKICAgIGVuZAogIAogICAgbG9jYWwgZnVuY3Rpb24gcmVmcmVzaExpc3QoKQogICAgICBmb3IgaSx2IGluIHBhaXJzKGV2ZW50TGlzdEhvbGRlcjpHZXRDaGlsZHJlbigpKSBkbyBpZiB2OklzQSgiRnJhbWUiKSB0aGVuIHY6RGVzdHJveSgpIGVuZCBlbmQKICAKICAgICAgZm9yIG5hbWUsZXZlbnQgaW4gcGFpcnMoZXZlbnRzKSBkbwogICAgICAgIGxvY2FsIGV2ZW50RiA9IGV2ZW50VGVtcGxhdGU6Q2xvbmUoKQogICAgICAgIGV2ZW50Ri5FdmVudE5hbWUuVGV4dCA9IG5hbWUKICAgICAgICBldmVudEYuVmlzaWJsZSA9IHRydWUKICAgICAgICBldmVudEYuRXZlbnROYW1lOlNldEF0dHJpYnV0ZSgiUmF3TmFtZSIsIG5hbWUpCiAgICAgICAgdGFibGUuaW5zZXJ0KHNoYWRlMixldmVudEYpCiAgICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLGV2ZW50Ri5FdmVudE5hbWUpCiAgICAgICAgdGFibGUuaW5zZXJ0KHNoYWRlMSxldmVudEYuQ21kcy5BZGQpCiAgCiAgICAgICAgbG9jYWwgZXhwYW5kZWQgPSBmYWxzZQogICAgICAgIGV2ZW50Ri5FeHBhbmQuTW91c2VCdXR0b24xRG93bjpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgIGV4cGFuZGVkID0gbm90IGV4cGFuZGVkCiAgICAgICAgICBldmVudEY6VHdlZW5TaXplKFVEaW0yLm5ldygxLDAsMCwyMCArIChleHBhbmRlZCBhbmQgMjAqI2V2ZW50Ri5DbWRzLkhvbGRlcjpHZXRDaGlsZHJlbigpIG9yIDApKSxFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQsRW51bS5FYXNpbmdTdHlsZS5RdWFydCwwLjI1LHRydWUpCiAgICAgICAgICBldmVudEYuRXhwYW5kLlJvdGF0aW9uID0gZXhwYW5kZWQgYW5kIDkwIG9yIDAKICAgICAgICAgIHJlc2l6ZUxpc3QoKQogICAgICAgIGVuZCkKICAKICAgICAgICBsb2NhbCBmdW5jdGlvbiByZWZyZXNoQ29tbWFuZHMoKQogICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhldmVudEYuQ21kcy5Ib2xkZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgaWYgdi5OYW1lID09ICJDbWRUZW1wbGF0ZSIgdGhlbgogICAgICAgICAgICAgIHY6RGVzdHJveSgpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgCiAgICAgICAgICBldmVudEYuRXZlbnROYW1lLlRleHQgPSBuYW1lLi4oI2V2ZW50LmNvbW1hbmRzID4gMCBhbmQgIiAoIi4uI2V2ZW50LmNvbW1hbmRzLi4iKSIgb3IgIiIpCiAgCiAgICAgICAgICBmb3IgaSxjbWQgaW4gcGFpcnMoZXZlbnQuY29tbWFuZHMpIGRvCiAgICAgICAgICAgIGxvY2FsIGNtZEYgPSBjbWRUZW1wbGF0ZTpDbG9uZSgpCiAgICAgICAgICAgIGxvY2FsIGNtZFRleHRCb3ggPSBjbWRGLlRleHRCb3gKICAgICAgICAgICAgVmlld3BvcnRUZXh0Qm94LmNvbnZlcnQoY21kVGV4dEJveCkKICAgICAgICAgICAgY21kVGV4dEJveC5UZXh0ID0gY21kWzFdCiAgICAgICAgICAgIGNtZEYuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgdGFibGUuaW5zZXJ0KHNoYWRlMSxjbWRGKQogICAgICAgICAgICB0YWJsZS5pbnNlcnQoc2hhZGUyLGNtZEYuRGVsZXRlKQogICAgICAgICAgICB0YWJsZS5pbnNlcnQoc2hhZGUyLGNtZEYuU2V0dGluZ3MpCiAgCiAgICAgICAgICAgIGNtZFRleHRCb3guRm9jdXNMb3N0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgIGV2ZW50LmNvbW1hbmRzW2ldID0ge2NtZFRleHRCb3guVGV4dCxjbWRbMl0sY21kWzNdfQogICAgICAgICAgICAgIGlmIG9uRWRpdGVkIHRoZW4gb25FZGl0ZWQoKSBlbmQKICAgICAgICAgICAgZW5kKQogIAogICAgICAgICAgICBjbWRGLlNldHRpbmdzLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgIG9wZW5TZXR0aW5nc0VkaXRvcihldmVudCxjbWQpCiAgICAgICAgICAgIGVuZCkKICAKICAgICAgICAgICAgY21kRi5EZWxldGUuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgdGFibGUucmVtb3ZlKGV2ZW50LmNvbW1hbmRzLGkpCiAgICAgICAgICAgICAgcmVmcmVzaENvbW1hbmRzKCkKICAgICAgICAgICAgICByZXNpemVMaXN0KCkKICAKICAgICAgICAgICAgICBpZiBjdXJyZW50bHlFZGl0aW5nQ21kID09IGNtZCB0aGVuCiAgICAgICAgICAgICAgICBzZXR0aW5nc0ZyYW1lOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAsLTE1MCwwLDApLEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCxFbnVtLkVhc2luZ1N0eWxlLlF1YXJ0LDAuMjUsdHJ1ZSkKICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICBpZiBvbkVkaXRlZCB0aGVuIG9uRWRpdGVkKCkgZW5kCiAgICAgICAgICAgIGVuZCkKICAKICAgICAgICAgICAgY21kRi5QYXJlbnQgPSBldmVudEYuQ21kcy5Ib2xkZXIKICAgICAgICAgIGVuZAogIAogICAgICAgICAgZXZlbnRGOlR3ZWVuU2l6ZShVRGltMi5uZXcoMSwwLDAsMjAgKyAoZXhwYW5kZWQgYW5kIDIwKiNldmVudEYuQ21kcy5Ib2xkZXI6R2V0Q2hpbGRyZW4oKSBvciAwKSksRW51bS5FYXNpbmdEaXJlY3Rpb24uT3V0LEVudW0uRWFzaW5nU3R5bGUuUXVhcnQsMC4yNSx0cnVlKQogICAgICAgIGVuZAogIAogICAgICAgIGxvY2FsIG5ld0JveCA9IGV2ZW50Ri5DbWRzLkFkZC5UZXh0Qm94CiAgICAgICAgVmlld3BvcnRUZXh0Qm94LmNvbnZlcnQobmV3Qm94KQogICAgICAgIG5ld0JveC5Gb2N1c0xvc3Q6Q29ubmVjdChmdW5jdGlvbihlbnRlcikKICAgICAgICAgIGlmIGVudGVyIHRoZW4KICAgICAgICAgICAgZXZlbnQuY29tbWFuZHNbI2V2ZW50LmNvbW1hbmRzKzFdID0ge25ld0JveC5UZXh0LGRlZmF1bHRTZXR0aW5ncyhldmVudCksMH0KICAgICAgICAgICAgbmV3Qm94LlRleHQgPSAiIgogIAogICAgICAgICAgICByZWZyZXNoQ29tbWFuZHMoKQogICAgICAgICAgICByZXNpemVMaXN0KCkKICAgICAgICAgICAgaWYgb25FZGl0ZWQgdGhlbiBvbkVkaXRlZCgpIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogIAogICAgICAgIC0tZXZlbnRGOkdldFByb3BlcnR5Q2hhbmdlZFNpZ25hbCgiQWJzb2x1dGVTaXplIik6Q29ubmVjdChyZXNpemVMaXN0KQogIAogICAgICAgIGV2ZW50Ri5QYXJlbnQgPSBldmVudExpc3RIb2xkZXIKICAKICAgICAgICByZWZyZXNoQ29tbWFuZHMoKQogICAgICBlbmQKICAKICAgICAgcmVzaXplTGlzdCgpCiAgICBlbmQKICAKICAgIGxvY2FsIGZ1bmN0aW9uIHNhdmVEYXRhKCkKICAgICAgbG9jYWwgcmVzdWx0ID0ge30KICAgICAgZm9yIGksdiBpbiBwYWlycyhldmVudHMpIGRvCiAgICAgICAgcmVzdWx0W2ldID0gdi5jb21tYW5kcwogICAgICBlbmQKICAgICAgcmV0dXJuIEh0dHBTZXJ2aWNlOkpTT05FbmNvZGUocmVzdWx0KQogICAgZW5kCiAgCiAgICBsb2NhbCBmdW5jdGlvbiBsb2FkRGF0YShzdHIpCiAgICAgIGxvY2FsIGRhdGEgPSBIdHRwU2VydmljZTpKU09ORGVjb2RlKHN0cikKICAgICAgZm9yIGksdiBpbiBwYWlycyhkYXRhKSBkbwogICAgICAgIGlmIGV2ZW50c1tpXSB0aGVuCiAgICAgICAgICBldmVudHNbaV0uY29tbWFuZHMgPSB2CiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgCiAgICBsb2NhbCBmdW5jdGlvbiBhZGRDbWQoZXZlbnQsZGF0YSkKICAgICAgdGFibGUuaW5zZXJ0KGV2ZW50c1tldmVudF0uY29tbWFuZHMsZGF0YSkKICAgIGVuZAogIAogICAgbG9jYWwgZnVuY3Rpb24gc2V0T25FZGl0ZWQoZikKICAgICAgaWYgdHlwZShmKSA9PSAiZnVuY3Rpb24iIHRoZW4KICAgICAgICBvbkVkaXRlZCA9IGYKICAgICAgZW5kCiAgICBlbmQKICAKICAgIG1haW4uVG9wQmFyLkNsb3NlLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBtYWluOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAuNSwtMTc1LDAsLTUwMCksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKQogICAgZW5kKQogICAgZHJhZ0dVSShtYWluKQogICAgbWFpbi5QYXJlbnQgPSBQQVJFTlQKICAKICAgIHJldHVybiB7CiAgICAgIFJlZ2lzdGVyRXZlbnQgPSByZWdpc3RlckV2ZW50LAogICAgICBGaXJlRXZlbnQgPSBmaXJlRXZlbnQsCiAgICAgIFJlZnJlc2ggPSByZWZyZXNoTGlzdCwKICAgICAgU2F2ZURhdGEgPSBzYXZlRGF0YSwKICAgICAgTG9hZERhdGEgPSBsb2FkRGF0YSwKICAgICAgQWRkQ21kID0gYWRkQ21kLAogICAgICBGcmFtZSA9IG1haW4sCiAgICAgIFNldE9uRWRpdGVkID0gc2V0T25FZGl0ZWQKICAgIH0KICBlbmQpKCkKICAKICByZWZlcmVuY2UgPSAoZnVuY3Rpb24oKQogICAgbG9jYWwgbWFpbiA9IGNyZWF0ZSh7CiAgICAgIHsxLCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE0MTE3NjQ3NzA3NDYyLDAuMTQxMTc2NDc3MDc0NjIsMC4xNDUwOTgwNDU0NjgzMyksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlckNvbG9yMz1Db2xvcjMubmV3KDAuMTU2ODYyNzUwNjQ5NDUsMC4xNTY4NjI3NTA2NDk0NSwwLjE1Njg2Mjc1MDY0OTQ1KSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJNYWluIixQb3NpdGlvbj1VRGltMi5uZXcoMC41LC0yNTAsMCwtNTAwKSxTaXplPVVEaW0yLm5ldygwLDUwMCwwLDIwKSxaSW5kZXg9MTAsfX0sCiAgICAgIHsyLCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksQm9yZGVyU2l6ZVBpeGVsPTAsTmFtZT0iVG9wQmFyIixQYXJlbnQ9ezF9LFNpemU9VURpbTIubmV3KDEsMCwwLDIwKSxaSW5kZXg9MTAsfX0sCiAgICAgIHszLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iVGl0bGUiLFBhcmVudD17Mn0sU2l6ZT1VRGltMi5uZXcoMSwwLDAuOTQ5OTk5OTg4MDc5MDcsMCksVGV4dD0iUmVmZXJlbmNlIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFpJbmRleD0xMCx9fSwKICAgICAgezQsIlRleHRCdXR0b24iLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iQ2xvc2UiLFBhcmVudD17Mn0sUG9zaXRpb249VURpbTIubmV3KDEsLTIwLDAsMCksU2l6ZT1VRGltMi5uZXcoMCwyMCwwLDIwKSxUZXh0PSIiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsWkluZGV4PTEwLH19LAogICAgICB7NSwiSW1hZ2VMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEltYWdlPSJyYnhhc3NldGlkOi8vNTA1NDY2MzY1MCIsUGFyZW50PXs0fSxQb3NpdGlvbj1VRGltMi5uZXcoMCw1LDAsNSksU2l6ZT1VRGltMi5uZXcoMCwxMCwwLDEwKSxaSW5kZXg9MTAsfX0sCiAgICAgIHs2LCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE0MTE3NjQ3NzA3NDYyLDAuMTQxMTc2NDc3MDc0NjIsMC4xNDUwOTgwNDU0NjgzMyksQm9yZGVyU2l6ZVBpeGVsPTAsTmFtZT0iQ29udGVudCIsUGFyZW50PXsxfSxQb3NpdGlvbj1VRGltMi5uZXcoMCwwLDAsMjApLFNpemU9VURpbTIubmV3KDEsMCwwLDMwMCksWkluZGV4PTEwLH19LAogICAgICB7NywiU2Nyb2xsaW5nRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xNDExNzY0NzcwNzQ2MiwwLjE0MTE3NjQ3NzA3NDYyLDAuMTQ1MDk4MDQ1NDY4MzMpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJDb2xvcjM9Q29sb3IzLm5ldygwLjE1Njg2Mjc1MDY0OTQ1LDAuMTU2ODYyNzUwNjQ5NDUsMC4xNTY4NjI3NTA2NDk0NSksQm9yZGVyU2l6ZVBpeGVsPTAsQm90dG9tSW1hZ2U9InJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIixDYW52YXNTaXplPVVEaW0yLm5ldygwLDAsMCwxMzEzKSxOYW1lPSJMaXN0IixQYXJlbnQ9ezZ9LFNjcm9sbEJhckltYWdlQ29sb3IzPUNvbG9yMy5uZXcoMC4zMDU4ODIzNjQ1MTE0OSwwLjMwNTg4MjM2NDUxMTQ5LDAuMzA5ODAzOTMyOTA1MiksU2Nyb2xsQmFyVGhpY2tuZXNzPTgsU2l6ZT1VRGltMi5uZXcoMSwwLDEsMCksVG9wSW1hZ2U9InJieGFzc2V0Oi8vdGV4dHVyZXMvdWkvU2Nyb2xsL3Njcm9sbC1taWRkbGUucG5nIixWZXJ0aWNhbFNjcm9sbEJhckluc2V0PTIsWkluZGV4PTEwLH19LAogICAgICB7OCwiVUlMaXN0TGF5b3V0Iix7UGFyZW50PXs3fSxTb3J0T3JkZXI9Mix9fSwKICAgICAgezksIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsTmFtZT0iU2VjdGlvbiIsUGFyZW50PXs3fSxTaXplPVVEaW0yLm5ldygxLDAsMCw0MjkpLFpJbmRleD0xMCx9fSwKICAgICAgezEwLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTQsTmFtZT0iSGVhZGVyIixQYXJlbnQ9ezl9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCw1KSxTaXplPVVEaW0yLm5ldygxLC04LDAsMjApLFRleHQ9IlNwZWNpYWwgUGxheWVyIENhc2VzIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTIwLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7MTEsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJUZXh0IixQYXJlbnQ9ezl9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCwyNSksU2l6ZT1VRGltMi5uZXcoMSwtOCwwLDIwKSxUZXh0PSJUaGVzZSBrZXl3b3JkcyBjYW4gYmUgdXNlZCB0byBxdWlja2x5IHNlbGVjdCBncm91cHMgb2YgcGxheWVycyBpbiBjb21tYW5kczoiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezEyLCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksQm9yZGVyU2l6ZVBpeGVsPTAsTmFtZT0iTGluZSIsUGFyZW50PXs5fSxQb3NpdGlvbj1VRGltMi5uZXcoMCwxMCwxLC0xKSxTaXplPVVEaW0yLm5ldygxLC0yMCwwLDEpLFpJbmRleD0xMCx9fSwKICAgICAgezEzLCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlclNpemVQaXhlbD0wLE5hbWU9IkNhc2VzIixQYXJlbnQ9ezl9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCw1NSksU2l6ZT1VRGltMi5uZXcoMSwtMTYsMCwzNDIpLFpJbmRleD0xMCx9fSwKICAgICAgezE0LCJVSUxpc3RMYXlvdXQiLHtQYXJlbnQ9ezEzfSxTb3J0T3JkZXI9Mix9fSwKICAgICAgezE1LCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlclNpemVQaXhlbD0wLExheW91dE9yZGVyPS00LE5hbWU9IkNhc2UiLFBhcmVudD17MTN9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCw2MCksU2l6ZT1VRGltMi5uZXcoMSwwLDAsMTgpLFpJbmRleD0xMCx9fSwKICAgICAgezE2LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTQsTmFtZT0iQ2FzZU5hbWUiLFBhcmVudD17MTV9LFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9ImFsbCIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7MTcsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJDYXNlRGVzYyIsUGFyZW50PXsxNX0sUG9zaXRpb249VURpbTIubmV3KDAsMTUsMCwwKSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSItIGluY2x1ZGVzIGV2ZXJ5b25lIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHsxOCwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xODAzOTIxNjEwMTE3LDAuMTgwMzkyMTYxMDExNywwLjE4NDMxMzcyOTQwNTQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxMYXlvdXRPcmRlcj0tMyxOYW1lPSJDYXNlIixQYXJlbnQ9ezEzfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsNjApLFNpemU9VURpbTIubmV3KDEsMCwwLDE4KSxaSW5kZXg9MTAsfX0sCiAgICAgIHsxOSwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD00LE5hbWU9IkNhc2VOYW1lIixQYXJlbnQ9ezE4fSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSJvdGhlcnMiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezIwLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iQ2FzZURlc2MiLFBhcmVudD17MTh9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDM3LDAsMCksU2l6ZT1VRGltMi5uZXcoMSwwLDEsMCksVGV4dD0iLSBpbmNsdWRlcyBldmVyeW9uZSBleGNlcHQgeW91IixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHsyMSwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xODAzOTIxNjEwMTE3LDAuMTgwMzkyMTYxMDExNywwLjE4NDMxMzcyOTQwNTQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxMYXlvdXRPcmRlcj0tMixOYW1lPSJDYXNlIixQYXJlbnQ9ezEzfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsNjApLFNpemU9VURpbTIubmV3KDEsMCwwLDE4KSxaSW5kZXg9MTAsfX0sCiAgICAgIHsyMiwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD00LE5hbWU9IkNhc2VOYW1lIixQYXJlbnQ9ezIxfSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSJtZSIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7MjMsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJDYXNlRGVzYyIsUGFyZW50PXsyMX0sUG9zaXRpb249VURpbTIubmV3KDAsMTksMCwwKSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSItIGluY2x1ZGVzIHlvdXIgcGxheWVyIG9ubHkiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezI0LCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlclNpemVQaXhlbD0wLE5hbWU9IkNhc2UiLFBhcmVudD17MTN9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCw2MCksU2l6ZT1VRGltMi5uZXcoMSwwLDAsMTgpLFpJbmRleD0xMCx9fSwKICAgICAgezI1LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTQsTmFtZT0iQ2FzZU5hbWUiLFBhcmVudD17MjR9LFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9IiNbbnVtYmVyXSIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7MjYsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJDYXNlRGVzYyIsUGFyZW50PXsyNH0sUG9zaXRpb249VURpbTIubmV3KDAsNTksMCwwKSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSItIGdldHMgYSBzcGVjaWZpZWQgYW1vdW50IG9mIHJhbmRvbSBwbGF5ZXJzIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHsyNywiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xODAzOTIxNjEwMTE3LDAuMTgwMzkyMTYxMDExNywwLjE4NDMxMzcyOTQwNTQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJDYXNlIixQYXJlbnQ9ezEzfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsNjApLFNpemU9VURpbTIubmV3KDEsMCwwLDE4KSxaSW5kZXg9MTAsfX0sCiAgICAgIHsyOCwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD00LE5hbWU9IkNhc2VOYW1lIixQYXJlbnQ9ezI3fSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSJyYW5kb20iLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezI5LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iQ2FzZURlc2MiLFBhcmVudD17Mjd9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDQ0LDAsMCksU2l6ZT1VRGltMi5uZXcoMSwwLDEsMCksVGV4dD0iLSBhZmZlY3RzIGEgcmFuZG9tIHBsYXllciIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7MzAsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMTgwMzkyMTYxMDExNywwLjE4MDM5MjE2MTAxMTcsMC4xODQzMTM3Mjk0MDU0KSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsQm9yZGVyU2l6ZVBpeGVsPTAsTmFtZT0iQ2FzZSIsUGFyZW50PXsxM30sUG9zaXRpb249VURpbTIubmV3KDAsOCwwLDYwKSxTaXplPVVEaW0yLm5ldygxLDAsMCwxOCksWkluZGV4PTEwLH19LAogICAgICB7MzEsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9NCxOYW1lPSJDYXNlTmFtZSIsUGFyZW50PXszMH0sU2l6ZT1VRGltMi5uZXcoMSwwLDEsMCksVGV4dD0iJVt0ZWFtIG5hbWVdIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHszMiwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD0zLE5hbWU9IkNhc2VEZXNjIixQYXJlbnQ9ezMwfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw3OCwwLDApLFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9Ii0gaW5jbHVkZXMgZXZlcnlvbmUgb24gYSBnaXZlbiB0ZWFtIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHszMywiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xODAzOTIxNjEwMTE3LDAuMTgwMzkyMTYxMDExNywwLjE4NDMxMzcyOTQwNTQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJDYXNlIixQYXJlbnQ9ezEzfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsNjApLFNpemU9VURpbTIubmV3KDEsMCwwLDE4KSxaSW5kZXg9MTAsfX0sCiAgICAgIHszNCwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD00LE5hbWU9IkNhc2VOYW1lIixQYXJlbnQ9ezMzfSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSJhbGxpZXMgLyB0ZWFtIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHszNSwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD0zLE5hbWU9IkNhc2VEZXNjIixQYXJlbnQ9ezMzfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw2MywwLDApLFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9Ii0gcGxheWVycyB3aG8gYXJlIG9uIHlvdXIgdGVhbSIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7MzYsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMTgwMzkyMTYxMDExNywwLjE4MDM5MjE2MTAxMTcsMC4xODQzMTM3Mjk0MDU0KSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsQm9yZGVyU2l6ZVBpeGVsPTAsTmFtZT0iQ2FzZSIsUGFyZW50PXsxM30sUG9zaXRpb249VURpbTIubmV3KDAsOCwwLDYwKSxTaXplPVVEaW0yLm5ldygxLDAsMCwxOCksWkluZGV4PTEwLH19LAogICAgICB7MzcsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9NCxOYW1lPSJDYXNlTmFtZSIsUGFyZW50PXszNn0sU2l6ZT1VRGltMi5uZXcoMSwwLDEsMCksVGV4dD0iZW5lbWllcyAvIG5vbnRlYW0iLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezM4LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iQ2FzZURlc2MiLFBhcmVudD17MzZ9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDEwMSwwLDApLFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9Ii0gcGxheWVycyB3aG8gYXJlIG5vdCBvbiB5b3VyIHRlYW0iLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezM5LCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlclNpemVQaXhlbD0wLE5hbWU9IkNhc2UiLFBhcmVudD17MTN9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCw2MCksU2l6ZT1VRGltMi5uZXcoMSwwLDAsMTgpLFpJbmRleD0xMCx9fSwKICAgICAgezQwLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTQsTmFtZT0iQ2FzZU5hbWUiLFBhcmVudD17Mzl9LFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9ImZyaWVuZHMiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezQxLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iQ2FzZURlc2MiLFBhcmVudD17Mzl9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDQwLDAsMCksU2l6ZT1VRGltMi5uZXcoMSwwLDEsMCksVGV4dD0iLSBhbnlvbmUgd2hvIGlzIGZyaWVuZHMgd2l0aCB5b3UiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezQyLCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlclNpemVQaXhlbD0wLE5hbWU9IkNhc2UiLFBhcmVudD17MTN9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCw2MCksU2l6ZT1VRGltMi5uZXcoMSwwLDAsMTgpLFpJbmRleD0xMCx9fSwKICAgICAgezQzLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTQsTmFtZT0iQ2FzZU5hbWUiLFBhcmVudD17NDJ9LFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9Im5vbmZyaWVuZHMiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezQ0LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iQ2FzZURlc2MiLFBhcmVudD17NDJ9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDYxLDAsMCksU2l6ZT1VRGltMi5uZXcoMSwwLDEsMCksVGV4dD0iLSBhbnlvbmUgd2hvIGlzIG5vdCBmcmllbmRzIHdpdGggeW91IixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs0NSwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xODAzOTIxNjEwMTE3LDAuMTgwMzkyMTYxMDExNywwLjE4NDMxMzcyOTQwNTQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJDYXNlIixQYXJlbnQ9ezEzfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsNjApLFNpemU9VURpbTIubmV3KDEsMCwwLDE4KSxaSW5kZXg9MTAsfX0sCiAgICAgIHs0NiwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD00LE5hbWU9IkNhc2VOYW1lIixQYXJlbnQ9ezQ1fSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSJndWVzdHMiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezQ3LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iQ2FzZURlc2MiLFBhcmVudD17NDV9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDM2LDAsMCksU2l6ZT1VRGltMi5uZXcoMSwwLDEsMCksVGV4dD0iLSBndWVzdCBwbGF5ZXJzIChvYnNvbGV0ZSkiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezQ4LCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlclNpemVQaXhlbD0wLE5hbWU9IkNhc2UiLFBhcmVudD17MTN9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCw2MCksU2l6ZT1VRGltMi5uZXcoMSwwLDAsMTgpLFpJbmRleD0xMCx9fSwKICAgICAgezQ5LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTQsTmFtZT0iQ2FzZU5hbWUiLFBhcmVudD17NDh9LFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9ImJhY29ucyIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7NTAsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJDYXNlRGVzYyIsUGFyZW50PXs0OH0sUG9zaXRpb249VURpbTIubmV3KDAsNDAsMCwwKSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSItIGFueW9uZSB3aXRoIHRoZSBcImJhY29uXCIgb3IgcGFsIGhhaXIiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezUxLCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlclNpemVQaXhlbD0wLE5hbWU9IkNhc2UiLFBhcmVudD17MTN9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCw2MCksU2l6ZT1VRGltMi5uZXcoMSwwLDAsMTgpLFpJbmRleD0xMCx9fSwKICAgICAgezUyLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTQsTmFtZT0iQ2FzZU5hbWUiLFBhcmVudD17NTF9LFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9ImFnZVtudW1iZXJdIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs1MywiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD0zLE5hbWU9IkNhc2VEZXNjIixQYXJlbnQ9ezUxfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw3MSwwLDApLFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9Ii0gaW5jbHVkZXMgYW55b25lIGJlbG93IG9yIGF0IHRoZSBnaXZlbiBhZ2UiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezU0LCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEJvcmRlclNpemVQaXhlbD0wLE5hbWU9IkNhc2UiLFBhcmVudD17MTN9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCw2MCksU2l6ZT1VRGltMi5uZXcoMSwwLDAsMTgpLFpJbmRleD0xMCx9fSwKICAgICAgezU1LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTQsTmFtZT0iQ2FzZU5hbWUiLFBhcmVudD17NTR9LFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9InJhZFtudW1iZXJdIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs1NiwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD0zLE5hbWU9IkNhc2VEZXNjIixQYXJlbnQ9ezU0fSxQb3NpdGlvbj1VRGltMi5uZXcoMCw3MCwwLDApLFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9Ii0gaW5jbHVkZXMgYW55b25lIHdpdGhpbiB0aGUgZ2l2ZW4gcmFkaXVzIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs1NywiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xODAzOTIxNjEwMTE3LDAuMTgwMzkyMTYxMDExNywwLjE4NDMxMzcyOTQwNTQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJDYXNlIixQYXJlbnQ9ezEzfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsNjApLFNpemU9VURpbTIubmV3KDEsMCwwLDE4KSxaSW5kZXg9MTAsfX0sCiAgICAgIHs1OCwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD00LE5hbWU9IkNhc2VOYW1lIixQYXJlbnQ9ezU3fSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSJuZWFyZXN0IixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs1OSwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD0zLE5hbWU9IkNhc2VEZXNjIixQYXJlbnQ9ezU3fSxQb3NpdGlvbj1VRGltMi5uZXcoMCw0MywwLDApLFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9Ii0gZ2V0cyB0aGUgY2xvc2VzdCBwbGF5ZXIgdG8geW91IixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs2MCwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xODAzOTIxNjEwMTE3LDAuMTgwMzkyMTYxMDExNywwLjE4NDMxMzcyOTQwNTQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJDYXNlIixQYXJlbnQ9ezEzfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsNjApLFNpemU9VURpbTIubmV3KDEsMCwwLDE4KSxaSW5kZXg9MTAsfX0sCiAgICAgIHs2MSwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD00LE5hbWU9IkNhc2VOYW1lIixQYXJlbnQ9ezYwfSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSJmYXJ0aGVzdCIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7NjIsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJDYXNlRGVzYyIsUGFyZW50PXs2MH0sUG9zaXRpb249VURpbTIubmV3KDAsNDYsMCwwKSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSItIGdldHMgdGhlIGZhcnRoZXN0IHBsYXllciBmcm9tIHlvdSIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7NjMsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMTgwMzkyMTYxMDExNywwLjE4MDM5MjE2MTAxMTcsMC4xODQzMTM3Mjk0MDU0KSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsQm9yZGVyU2l6ZVBpeGVsPTAsTmFtZT0iQ2FzZSIsUGFyZW50PXsxM30sUG9zaXRpb249VURpbTIubmV3KDAsOCwwLDYwKSxTaXplPVVEaW0yLm5ldygxLDAsMCwxOCksWkluZGV4PTEwLH19LAogICAgICB7NjQsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9NCxOYW1lPSJDYXNlTmFtZSIsUGFyZW50PXs2M30sU2l6ZT1VRGltMi5uZXcoMSwwLDEsMCksVGV4dD0iZ3JvdXBbSURdIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs2NSwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD0zLE5hbWU9IkNhc2VEZXNjIixQYXJlbnQ9ezYzfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw1NSwwLDApLFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9Ii0gZ2V0cyBwbGF5ZXJzIHdobyBhcmUgaW4gYSBjZXJ0YWluIGdyb3VwIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs2NiwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xODAzOTIxNjEwMTE3LDAuMTgwMzkyMTYxMDExNywwLjE4NDMxMzcyOTQwNTQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJDYXNlIixQYXJlbnQ9ezEzfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsNjApLFNpemU9VURpbTIubmV3KDEsMCwwLDE4KSxaSW5kZXg9MTAsfX0sCiAgICAgIHs2NywiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD00LE5hbWU9IkNhc2VOYW1lIixQYXJlbnQ9ezY2fSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSJhbGl2ZSIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7NjgsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJDYXNlRGVzYyIsUGFyZW50PXs2Nn0sUG9zaXRpb249VURpbTIubmV3KDAsMjcsMCwwKSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSItIGdldHMgcGxheWVycyB3aG8gYXJlIGFsaXZlIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs2OSwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xODAzOTIxNjEwMTE3LDAuMTgwMzkyMTYxMDExNywwLjE4NDMxMzcyOTQwNTQpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJDYXNlIixQYXJlbnQ9ezEzfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsNjApLFNpemU9VURpbTIubmV3KDEsMCwwLDE4KSxaSW5kZXg9MTAsfX0sCiAgICAgIHs3MCwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD00LE5hbWU9IkNhc2VOYW1lIixQYXJlbnQ9ezY5fSxTaXplPVVEaW0yLm5ldygxLDAsMSwwKSxUZXh0PSJkZWFkIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs3MSwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD0zLE5hbWU9IkNhc2VEZXNjIixQYXJlbnQ9ezY5fSxQb3NpdGlvbj1VRGltMi5uZXcoMCwyOSwwLDApLFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9Ii0gZ2V0cyBwbGF5ZXJzIHdobyBhcmUgZGVhZCIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7NzIsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMTgwMzkyMTYxMDExNywwLjE4MDM5MjE2MTAxMTcsMC4xODQzMTM3Mjk0MDU0KSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsQm9yZGVyU2l6ZVBpeGVsPTAsTGF5b3V0T3JkZXI9LTEsTmFtZT0iQ2FzZSIsUGFyZW50PXsxM30sUG9zaXRpb249VURpbTIubmV3KDAsOCwwLDYwKSxTaXplPVVEaW0yLm5ldygxLDAsMCwxOCksWkluZGV4PTEwLH19LAogICAgICB7NzMsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9NCxOYW1lPSJDYXNlTmFtZSIsUGFyZW50PXs3Mn0sU2l6ZT1VRGltMi5uZXcoMSwwLDEsMCksVGV4dD0iQHVzZXJuYW1lIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs3NCwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD0zLE5hbWU9IkNhc2VEZXNjIixQYXJlbnQ9ezcyfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw2NiwwLDApLFNpemU9VURpbTIubmV3KDEsMCwxLDApLFRleHQ9Ii0gc2VhcmNoZXMgZm9yIHBsYXllcnMgYnkgdXNlcm5hbWUgb25seSAoaWdub3JlcyBkaXNwbGF5bmFtZXMpIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs3NSwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxOYW1lPSJTZWN0aW9uIixQYXJlbnQ9ezd9LFNpemU9VURpbTIubmV3KDEsMCwwLDE4MCksWkluZGV4PTEwLH19LAogICAgICB7NzYsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9NCxOYW1lPSJIZWFkZXIiLFBhcmVudD17NzV9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCw1KSxTaXplPVVEaW0yLm5ldygxLC04LDAsMjApLFRleHQ9IlZhcmlvdXMgT3BlcmF0b3JzIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTIwLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7NzcsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMTgwMzkyMTYxMDExNywwLjE4MDM5MjE2MTAxMTcsMC4xODQzMTM3Mjk0MDU0KSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJMaW5lIixQYXJlbnQ9ezc1fSxQb3NpdGlvbj1VRGltMi5uZXcoMCwxMCwxLC0xKSxTaXplPVVEaW0yLm5ldygxLC0yMCwwLDEpLFpJbmRleD0xMCx9fSwKICAgICAgezc4LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTQsTmFtZT0iVGV4dCIsUGFyZW50PXs3NX0sUG9zaXRpb249VURpbTIubmV3KDAsOCwwLDMwKSxTaXplPVVEaW0yLm5ldygxLC04LDAsMTYpLFRleHQ9IlVzZSBjb21tYXMgdG8gc2VwYXJhdGUgbXVsdGlwbGUgZXhwcmVzc2lvbnM6IixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxUZXh0WUFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezc5LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTQsTmFtZT0iVGV4dCIsUGFyZW50PXs3NX0sUG9zaXRpb249VURpbTIubmV3KDAsOCwwLDc1KSxTaXplPVVEaW0yLm5ldygxLC04LDAsMTYpLFRleHQ9IlVzZSAtIHRvIGV4Y2x1ZGUsIGFuZCArIHRvIGluY2x1ZGUgcGxheWVycyBpbiB5b3VyIGV4cHJlc3Npb246IixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxUZXh0WUFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezgwLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iVGV4dCIsUGFyZW50PXs3NX0sUG9zaXRpb249VURpbTIubmV3KDAsOCwwLDkxKSxTaXplPVVEaW0yLm5ldygxLC04LDAsMTYpLFRleHQ9Ijtsb2NhdGUgJWJsdWUtZnJpZW5kcyAoZ2V0cyBwbGF5ZXJzIGluIGJsdWUgdGVhbSB3aG8gYXJlbid0IHlvdXIgZnJpZW5kcykiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFRleHRZQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7ODEsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJUZXh0IixQYXJlbnQ9ezc1fSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsNDYpLFNpemU9VURpbTIubmV3KDEsLTgsMCwxNiksVGV4dD0iO2xvY2F0ZSBub29iLG5vb2IyLGJvYiIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsVGV4dFlBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs4MiwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD00LE5hbWU9IlRleHQiLFBhcmVudD17NzV9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCwxMjApLFNpemU9VURpbTIubmV3KDEsLTgsMCwxNiksVGV4dD0iUHV0ICEgYmVmb3JlIGEgY29tbWFuZCB0byBydW4gaXQgd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgaXQgd2FzIHJhbiB3aXRoOiIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsVGV4dFlBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs4MywiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD0zLE5hbWU9IlRleHQiLFBhcmVudD17NzV9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCwxMzYpLFNpemU9VURpbTIubmV3KDEsLTgsMCwzMiksVGV4dD0iQWZ0ZXIgcnVubmluZyA7b2Zmc2V0IDAgMTAwIDAsICB5b3UgY2FuIHJ1biAhb2Zmc2V0IGFueXRpbWUgdG8gcmVwZWF0IHRoYXQgY29tbWFuZCB3aXRoIHRoZSBzYW1lIGFyZ3VtZW50cyB0aGF0IHdlcmUgdXNlZCB0byBydW4gaXQgbGFzdCB0aW1lIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxUZXh0WUFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezg0LCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLE5hbWU9IlNlY3Rpb24iLFBhcmVudD17N30sU2l6ZT1VRGltMi5uZXcoMSwwLDAsMTU0KSxaSW5kZXg9MTAsfX0sCiAgICAgIHs4NSwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD00LE5hbWU9IkhlYWRlciIsUGFyZW50PXs4NH0sUG9zaXRpb249VURpbTIubmV3KDAsOCwwLDUpLFNpemU9VURpbTIubmV3KDEsLTgsMCwyMCksVGV4dD0iQ29tbWFuZCBMb29waW5nIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTIwLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7ODYsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9NCxOYW1lPSJUZXh0IixQYXJlbnQ9ezg0fSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsMzApLFNpemU9VURpbTIubmV3KDEsLTgsMCwyMCksVGV4dD0iRm9ybTogW0hvdyBtYW55IHRpbWVzIGl0IGxvb3BzXV5bZGVsYXkgKG9wdGlvbmFsKV1eW2NvbW1hbmRdIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE1LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs4NywiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xODAzOTIxNjEwMTE3LDAuMTgwMzkyMTYxMDExNywwLjE4NDMxMzcyOTQwNTQpLEJvcmRlclNpemVQaXhlbD0wLE5hbWU9IkxpbmUiLFBhcmVudD17ODR9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDEwLDEsLTEpLFNpemU9VURpbTIubmV3KDEsLTIwLDAsMSksWkluZGV4PTEwLH19LAogICAgICB7ODgsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJUZXh0IixQYXJlbnQ9ezg0fSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsNTApLFNpemU9VURpbTIubmV3KDEsLTgsMCwyMCksVGV4dD0iVXNlIHRoZSAnYnJlYWtsb29wcycgY29tbWFuZCB0byBzdG9wIGFsbCBydW5uaW5nIGxvb3BzLiIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNSxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7ODksIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9NCxOYW1lPSJUZXh0IixQYXJlbnQ9ezg0fSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsODApLFNpemU9VURpbTIubmV3KDEsLTgsMCwxNiksVGV4dD0iRXhhbXBsZXM6IixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxUZXh0WUFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezkwLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iVGV4dCIsUGFyZW50PXs4NH0sUG9zaXRpb249VURpbTIubmV3KDAsOCwwLDk4KSxTaXplPVVEaW0yLm5ldygxLC04LDAsNDIpLFRleHQ9Ijs1XmJ0b29scyAtIGdpdmVzIHlvdSA1IHNldHMgb2YgYnRvb2xzXG47MTBeM15kcm9waGF0cyAtIGRyb3BzIHlvdXIgaGF0cyBldmVyeSAzIHNlY29uZHMgMTAgdGltZXNcbjtpbmZeMC4xXmFuaW1zcGVlZCAxMDAgLSBpbmZpbml0ZWx5IGxvb3BzIHlvdXIgYW5pbWF0aW9uIHNwZWVkIHRvIDEwMCIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsVGV4dFlBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs5MSwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxOYW1lPSJTZWN0aW9uIixQYXJlbnQ9ezd9LFNpemU9VURpbTIubmV3KDEsMCwwLDEyMCksWkluZGV4PTEwLH19LAogICAgICB7OTIsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9NCxOYW1lPSJIZWFkZXIiLFBhcmVudD17OTF9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCw1KSxTaXplPVVEaW0yLm5ldygxLC04LDAsMjApLFRleHQ9IkV4ZWN1dGUgTXVsdGlwbGUgQ29tbWFuZHMgYXQgT25jZSIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0yMCxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezkzLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTQsTmFtZT0iVGV4dCIsUGFyZW50PXs5MX0sUG9zaXRpb249VURpbTIubmV3KDAsOCwwLDMwKSxTaXplPVVEaW0yLm5ldygxLC04LDAsMjApLFRleHQ9IllvdSBjYW4gZXhlY3V0ZSBtdWx0aXBsZSBjb21tYW5kcyBhdCBvbmNlIHVzaW5nIFwiXFxcIiIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7OTQsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMTgwMzkyMTYxMDExNywwLjE4MDM5MjE2MTAxMTcsMC4xODQzMTM3Mjk0MDU0KSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJMaW5lIixQYXJlbnQ9ezkxfSxQb3NpdGlvbj1VRGltMi5uZXcoMCwxMCwxLC0xKSxTaXplPVVEaW0yLm5ldygxLC0yMCwwLDEpLFpJbmRleD0xMCx9fSwKICAgICAgezk1LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTQsTmFtZT0iVGV4dCIsUGFyZW50PXs5MX0sUG9zaXRpb249VURpbTIubmV3KDAsOCwwLDYwKSxTaXplPVVEaW0yLm5ldygxLC04LDAsMTYpLFRleHQ9IkV4YW1wbGVzOiIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsVGV4dFlBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHs5NiwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD0zLE5hbWU9IlRleHQiLFBhcmVudD17OTF9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCw3OCksU2l6ZT1VRGltMi5uZXcoMSwtOCwwLDMyKSxUZXh0PSI7ZHJvcGhhdHNcXHJlc3Bhd24gLSBkcm9wcyB5b3VyIGhhdHMgYW5kIHJlc3Bhd25zIHlvdVxuO2VuYWJsZSBpbnZlbnRvcnlcXGVuYWJsZSBwbGF5ZXJsaXN0XFxyZWZyZXNoIC0gZW5hYmxlcyB0aG9zZSBjb3JlZ3VpIGl0ZW1zIGFuZCByZWZyZXNoZXMgeW91IixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxUZXh0WUFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezk3LCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLE5hbWU9IlNlY3Rpb24iLFBhcmVudD17N30sU2l6ZT1VRGltMi5uZXcoMSwwLDAsNzUpLFpJbmRleD0xMCx9fSwKICAgICAgezk4LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTQsTmFtZT0iSGVhZGVyIixQYXJlbnQ9ezk3fSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsNSksU2l6ZT1VRGltMi5uZXcoMSwtOCwwLDIwKSxUZXh0PSJCcm93c2UgQ29tbWFuZCBIaXN0b3J5IixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTIwLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7OTksIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJUZXh0IixQYXJlbnQ9ezk3fSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsMzApLFNpemU9VURpbTIubmV3KDEsLTgsMCwzMiksVGV4dD0iV2hpbGUgZm9jdXNlZCBvbiB0aGUgY29tbWFuZCBiYXIsIHlvdSBjYW4gdXNlIHRoZSB1cCBhbmQgZG93biBhcnJvdyBrZXlzIHRvIGJyb3dzZSByZWNlbnRseSB1c2VkIGNvbW1hbmRzIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHsxMDAsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMTgwMzkyMTYxMDExNywwLjE4MDM5MjE2MTAxMTcsMC4xODQzMTM3Mjk0MDU0KSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJMaW5lIixQYXJlbnQ9ezk3fSxQb3NpdGlvbj1VRGltMi5uZXcoMCwxMCwxLC0xKSxTaXplPVVEaW0yLm5ldygxLC0yMCwwLDEpLFpJbmRleD0xMCx9fSwKICAgICAgezEwMSwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxOYW1lPSJTZWN0aW9uIixQYXJlbnQ9ezd9LFNpemU9VURpbTIubmV3KDEsMCwwLDc1KSxaSW5kZXg9MTAsfX0sCiAgICAgIHsxMDIsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9NCxOYW1lPSJIZWFkZXIiLFBhcmVudD17MTAxfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsNSksU2l6ZT1VRGltMi5uZXcoMSwtOCwwLDIwKSxUZXh0PSJBdXRvY29tcGxldGUgaW4gdGhlIENvbW1hbmQgQmFyIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTIwLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7MTAzLCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iVGV4dCIsUGFyZW50PXsxMDF9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCwzMCksU2l6ZT1VRGltMi5uZXcoMSwtOCwwLDMyKSxUZXh0PSJXaGlsZSBmb2N1c2VkIG9uIHRoZSBjb21tYW5kIGJhciwgeW91IGNhbiB1c2UgdGhlIHRhYiBrZXkgdG8gaW5zZXJ0IHRoZSB0b3Agc3VnZ2VzdGVkIGNvbW1hbmQgaW50byB0aGUgY29tbWFuZCBiYXIuIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHsxMDQsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMTgwMzkyMTYxMDExNywwLjE4MDM5MjE2MTAxMTcsMC4xODQzMTM3Mjk0MDU0KSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJMaW5lIixQYXJlbnQ9ezEwMX0sUG9zaXRpb249VURpbTIubmV3KDAsMTAsMSwtMSksU2l6ZT1VRGltMi5uZXcoMSwtMjAsMCwxKSxaSW5kZXg9MTAsfX0sCiAgICAgIHsxMDUsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsTmFtZT0iU2VjdGlvbiIsUGFyZW50PXs3fSxTaXplPVVEaW0yLm5ldygxLDAsMCwxNzUpLFpJbmRleD0xMCx9fSwKICAgICAgezEwNiwiVGV4dExhYmVsIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxCYWNrZ3JvdW5kVHJhbnNwYXJlbmN5PTEsRm9udD00LE5hbWU9IkhlYWRlciIsUGFyZW50PXsxMDV9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCw1KSxTaXplPVVEaW0yLm5ldygxLC04LDAsMjApLFRleHQ9IlVzaW5nIEV2ZW50IEJpbmRzIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTIwLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7MTA3LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iVGV4dCIsUGFyZW50PXsxMDV9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCwzMCksU2l6ZT1VRGltMi5uZXcoMSwtOCwwLDMyKSxUZXh0PSJVc2UgZXZlbnQgYmluZHMgdG8gc2V0IHVwIGNvbW1hbmRzIHRoYXQgZ2V0IGV4ZWN1dGVkIHdoZW4gY2VydGFpbiBldmVudHMgaGFwcGVuLiBZb3UgY2FuIGVkaXQgdGhlIGNvbmRpdGlvbnMgZm9yIGFuIGV2ZW50IGNvbW1hbmQgdG8gcnVuIChzdWNoIGFzIHdoaWNoIHBsYXllciB0cmlnZ2VycyBpdCkuIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHsxMDgsIkZyYW1lIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuMTgwMzkyMTYxMDExNywwLjE4MDM5MjE2MTAxMTcsMC4xODQzMTM3Mjk0MDU0KSxCb3JkZXJTaXplUGl4ZWw9MCxOYW1lPSJMaW5lIixQYXJlbnQ9ezEwNX0sUG9zaXRpb249VURpbTIubmV3KDAsMTAsMSwtMSksU2l6ZT1VRGltMi5uZXcoMSwtMjAsMCwxKSxaSW5kZXg9MTAsfX0sCiAgICAgIHsxMDksIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJUZXh0IixQYXJlbnQ9ezEwNX0sUG9zaXRpb249VURpbTIubmV3KDAsOCwwLDcwKSxTaXplPVVEaW0yLm5ldygxLC04LDAsNDgpLFRleHQ9IlNvbWUgZXZlbnRzIG1heSBzZW5kIGFyZ3VtZW50czsgeW91IGNhbiB1c2UgdGhlbSBpbiB5b3VyIGV2ZW50IGNvbW1hbmQgYnkgdXNpbmcgJCBmb2xsb3dlZCBieSB0aGUgYXJndW1lbnQgbnVtYmVyICgkMSwgJDIsIGV0YykuIFlvdSBjYW4gZmluZCBvdXQgdGhlIG9yZGVyIGFuZCB0eXBlcyBvZiB0aGVzZSBhcmd1bWVudHMgYnkgbG9va2luZyBhdCB0aGUgc2V0dGluZ3Mgb2YgdGhlIGV2ZW50IGNvbW1hbmQuIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTE0LFRleHRXcmFwcGVkPXRydWUsVGV4dFhBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHsxMTAsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9NCxOYW1lPSJUZXh0IixQYXJlbnQ9ezEwNX0sUG9zaXRpb249VURpbTIubmV3KDAsOCwwLDEzMCksU2l6ZT1VRGltMi5uZXcoMSwtOCwwLDE2KSxUZXh0PSJFeGFtcGxlOiIsVGV4dENvbG9yMz1Db2xvcjMubmV3KDEsMSwxKSxUZXh0U2l6ZT0xNCxUZXh0V3JhcHBlZD10cnVlLFRleHRYQWxpZ25tZW50PTAsVGV4dFlBbGlnbm1lbnQ9MCxaSW5kZXg9MTAsfX0sCiAgICAgIHsxMTEsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9MyxOYW1lPSJUZXh0IixQYXJlbnQ9ezEwNX0sUG9zaXRpb249VURpbTIubmV3KDAsOCwwLDE0OCksU2l6ZT1VRGltMi5uZXcoMSwtOCwwLDE2KSxUZXh0PSJTZXR0aW5nIHVwICdnb3RvICQxJyBvbiB0aGUgT25DaGF0dGVkIGV2ZW50IHdpbGwgdGVsZXBvcnQgeW91IHRvIGFueSBwbGF5ZXIgdGhhdCBjaGF0cy4iLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFRleHRZQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7MTEyLCJGcmFtZSIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLE5hbWU9IlNlY3Rpb24iLFBhcmVudD17N30sU2l6ZT1VRGltMi5uZXcoMSwwLDAsMTA1KSxaSW5kZXg9MTAsfX0sCiAgICAgIHsxMTMsIlRleHRMYWJlbCIse0JhY2tncm91bmRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksQmFja2dyb3VuZFRyYW5zcGFyZW5jeT0xLEZvbnQ9NCxOYW1lPSJIZWFkZXIiLFBhcmVudD17MTEyfSxQb3NpdGlvbj1VRGltMi5uZXcoMCw4LDAsNSksU2l6ZT1VRGltMi5uZXcoMSwtOCwwLDIwKSxUZXh0PSJHZXQgRnVydGhlciBIZWxwIixUZXh0Q29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLFRleHRTaXplPTIwLFRleHRYQWxpZ25tZW50PTAsWkluZGV4PTEwLH19LAogICAgICB7MTE0LCJUZXh0TGFiZWwiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMSwxLDEpLEJhY2tncm91bmRUcmFuc3BhcmVuY3k9MSxGb250PTMsTmFtZT0iVGV4dCIsUGFyZW50PXsxMTJ9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDgsMCwzMCksU2l6ZT1VRGltMi5uZXcoMSwtOCwwLDMyKSxUZXh0PSJZb3UgY2FuIGpvaW4gdGhlIERpc2NvcmQgc2VydmVyIHRvIGdldCBzdXBwb3J0IHdpdGggSVksICBhbmQgcmVhZCB1cCBvbiBtb3JlIGRvY3VtZW50YXRpb24gc3VjaCBhcyB0aGUgUGx1Z2luIEFQSS4iLFRleHRDb2xvcjM9Q29sb3IzLm5ldygxLDEsMSksVGV4dFNpemU9MTQsVGV4dFdyYXBwZWQ9dHJ1ZSxUZXh0WEFsaWdubWVudD0wLFpJbmRleD0xMCx9fSwKICAgICAgezExNSwiRnJhbWUiLHtCYWNrZ3JvdW5kQ29sb3IzPUNvbG9yMy5uZXcoMC4xODAzOTIxNjEwMTE3LDAuMTgwMzkyMTYxMDExNywwLjE4NDMxMzcyOTQwNTQpLEJvcmRlclNpemVQaXhlbD0wLE5hbWU9IkxpbmUiLFBhcmVudD17MTEyfSxQb3NpdGlvbj1VRGltMi5uZXcoMCwxMCwxLC0xKSxTaXplPVVEaW0yLm5ldygxLC0yMCwwLDEpLFZpc2libGU9ZmFsc2UsWkluZGV4PTEwLH19LAogICAgICB7MTE2LCJUZXh0QnV0dG9uIix7QmFja2dyb3VuZENvbG9yMz1Db2xvcjMubmV3KDAuNDg2Mjc0NTEwNjIyMDIsMC42MTk2MDc4NjU4MTAzOSwwLjg1MDk4MDQwMTAzOTEyKSxCb3JkZXJDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksRm9udD00LE5hbWU9Ikludml0ZUJ1dHRvbiIsUGFyZW50PXsxMTJ9LFBvc2l0aW9uPVVEaW0yLm5ldygwLDUsMCw3NSksU2l6ZT1VRGltMi5uZXcoMSwtMTAsMCwyNSksVGV4dD0iQ29weSBEaXNjb3JkIEludml0ZSBMaW5rIChodHRwczovL2Rpc2NvcmQuZ2cvNzhadVdTcSkiLFRleHRDb2xvcjM9Q29sb3IzLm5ldygwLjE4MDM5MjE2MTAxMTcsMC4xODAzOTIxNjEwMTE3LDAuMTg0MzEzNzI5NDA1NCksVGV4dFNpemU9MTYsWkluZGV4PTEwLH19LAogICAgfSkKICAgIGZvciBpLHYgaW4gcGFpcnMobWFpbi5Db250ZW50Lkxpc3Q6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgaWYgdjpJc0EoIlRleHRMYWJlbCIpIHRoZW4KICAgICAgICB0YWJsZS5pbnNlcnQodGV4dDEsdikKICAgICAgZW5kCiAgICBlbmQKICAgIHRhYmxlLmluc2VydChzY3JvbGwsbWFpbi5Db250ZW50Lkxpc3QpCiAgICB0YWJsZS5pbnNlcnQoc2hhZGUxLG1haW4uQ29udGVudCkKICAgIHRhYmxlLmluc2VydChzaGFkZTIsbWFpbi5Ub3BCYXIpCiAgICBtYWluLk5hbWUgPSByYW5kb21TdHJpbmcoKQogICAgbWFpbi5Ub3BCYXIuQ2xvc2UuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIG1haW46VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMC41LC0yNTAsMCwtNTAwKSwgIkluT3V0IiwgIlF1YXJ0IiwgMC41LCB0cnVlLCBuaWwpCiAgICBlbmQpCiAgICBsb2NhbCBpbnZpdGVCdXR0b24gPSBtYWluOkZpbmRGaXJzdENoaWxkKCJJbnZpdGVCdXR0b24iLHRydWUpCiAgICBsb2NhbCBsYXN0UHJlc3MgPSBuaWwKICAgIGludml0ZUJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgaWYgZXZlcnlDbGlwYm9hcmQgdGhlbgogICAgICAgIHRvQ2xpcGJvYXJkKCJodHRwczovL2Rpc2NvcmQuZ2cvNzhadVdTcSIpCiAgICAgICAgaW52aXRlQnV0dG9uLlRleHQgPSAiQ29waWVkIgogICAgICBlbHNlCiAgICAgICAgaW52aXRlQnV0dG9uLlRleHQgPSAiTm8gQ2xpcGJvYXJkIEZ1bmN0aW9uLCB0eXBlIG91dCB0aGUgbGluayIKICAgICAgZW5kCiAgICAgIGxvY2FsIHByZXNzVGltZSA9IHRpY2soKQogICAgICBsYXN0UHJlc3MgPSBwcmVzc1RpbWUKICAgICAgd2FpdCgyKQogICAgICBpZiBsYXN0UHJlc3Mgfj0gcHJlc3NUaW1lIHRoZW4gcmV0dXJuIGVuZAogICAgICBpbnZpdGVCdXR0b24uVGV4dCA9ICJDb3B5IERpc2NvcmQgSW52aXRlIExpbmsgKGh0dHBzOi8vZGlzY29yZC5nZy83OFp1V1NxKSIKICAgIGVuZCkKICAgIGRyYWdHVUkobWFpbikKICAgIG1haW4uUGFyZW50ID0gUEFSRU5UCiAgCiAgICBSZWZlcmVuY2VCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIG1haW46VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMC41LC0yNTAsMC41LC0xNTApLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkKICAgIGVuZCkKICBlbmQpKCkKICAKICBjdXJyZW50U2hhZGUxID0gQ29sb3IzLmZyb21SR0IoMzYsIDM2LCAzNykKICBjdXJyZW50U2hhZGUyID0gQ29sb3IzLmZyb21SR0IoNDYsIDQ2LCA0NykKICBjdXJyZW50U2hhZGUzID0gQ29sb3IzLmZyb21SR0IoNzgsIDc4LCA3OSkKICBjdXJyZW50VGV4dDEgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgY3VycmVudFRleHQyID0gQ29sb3IzLm5ldygwLCAwLCAwKQogIGN1cnJlbnRTY3JvbGwgPSBDb2xvcjMuZnJvbVJHQig3OCw3OCw3OSkKICAKICBkZWZhdWx0c2V0dGluZ3MgPSB7CiAgICBwcmVmaXggPSAnOyc7CiAgICBTdGF5T3BlbiA9IGZhbHNlOwogICAgZXNwVHJhbnNwYXJlbmN5ID0gMC4zOwogICAga2VlcElZID0gdHJ1ZTsKICAgIGxvZ3NFbmFibGVkID0gZmFsc2U7CiAgICBqTG9nc0VuYWJsZWQgPSBmYWxzZTsKICAgIGFsaWFzZXMgPSB7fTsKICAgIGJpbmRzID0ge307CiAgICBXYXlQb2ludHMgPSB7fTsKICAgIFBsdWdpbnNUYWJsZSA9IHt9OwogICAgY3VycmVudFNoYWRlMSA9IHtjdXJyZW50U2hhZGUxLlIsY3VycmVudFNoYWRlMS5HLGN1cnJlbnRTaGFkZTEuQn07CiAgICBjdXJyZW50U2hhZGUyID0ge2N1cnJlbnRTaGFkZTIuUixjdXJyZW50U2hhZGUyLkcsY3VycmVudFNoYWRlMi5CfTsKICAgIGN1cnJlbnRTaGFkZTMgPSB7Y3VycmVudFNoYWRlMy5SLGN1cnJlbnRTaGFkZTMuRyxjdXJyZW50U2hhZGUzLkJ9OwogICAgY3VycmVudFRleHQxID0ge2N1cnJlbnRUZXh0MS5SLGN1cnJlbnRUZXh0MS5HLGN1cnJlbnRUZXh0MS5CfTsKICAgIGN1cnJlbnRUZXh0MiA9IHtjdXJyZW50VGV4dDIuUixjdXJyZW50VGV4dDIuRyxjdXJyZW50VGV4dDIuQn07CiAgICBjdXJyZW50U2Nyb2xsID0ge2N1cnJlbnRTY3JvbGwuUixjdXJyZW50U2Nyb2xsLkcsY3VycmVudFNjcm9sbC5CfTsKICAgIGV2ZW50QmluZHMgPSBldmVudEVkaXRvci5TYXZlRGF0YSgpCiAgfQogIAogIGRlZmF1bHRzID0gSHR0cFNlcnZpY2U6SlNPTkVuY29kZShkZWZhdWx0c2V0dGluZ3MpCiAgbm9zYXZlcyA9IGZhbHNlCiAgdXNlRmFjdG9yeVNldHRpbmdzID0gZnVuY3Rpb24oKQogICAgICBwcmVmaXggPSAnOycKICAgICAgU3RheU9wZW4gPSBmYWxzZQogICAgICBLZWVwSW5mWWllbGQgPSB0cnVlCiAgICAgIGVzcFRyYW5zcGFyZW5jeSA9IDAuMwogICAgICBsb2dzRW5hYmxlZCA9IGZhbHNlCiAgICAgIGpMb2dzRW5hYmxlZCA9IGZhbHNlCiAgICAgIGFsaWFzZXMgPSB7fQogICAgICBiaW5kcyA9IHt9CiAgICAgIFdheVBvaW50cyA9IHt9CiAgICAgIFBsdWdpbnNUYWJsZSA9IHt9CiAgZW5kCiAgCiAgbG9jYWwgbG9hZGVkRXZlbnREYXRhID0gbmlsCiAgbG9jYWwganNvbkF0dGVtcHRzID0gMAogIGZ1bmN0aW9uIHNhdmVzKCkKICAgIGlmIHdyaXRlZmlsZUV4cGxvaXQoKSBhbmQganNvbkF0dGVtcHRzIDwgNTAgdGhlbgogICAgICBpZiBwY2FsbChmdW5jdGlvbigpIHJlYWRmaWxlKCJJWV9GRS5peSIpIGVuZCkgdGhlbgogICAgICAgIGlmIHJlYWRmaWxlKCJJWV9GRS5peSIpIH49IG5pbCB0aGVuCiAgICAgICAgICBsb2NhbCBzdWNjZXNzLCByZXNwb25zZSA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgbG9jYWwganNvbiA9IEh0dHBTZXJ2aWNlOkpTT05EZWNvZGUocmVhZGZpbGUoIklZX0ZFLml5IikpCiAgICAgICAgICAgIGlmIGpzb24ucHJlZml4IH49IG5pbCB0aGVuIHByZWZpeCA9IGpzb24ucHJlZml4IGVsc2UgcHJlZml4ID0gJzsnIGVuZAogICAgICAgICAgICBpZiBqc29uLlN0YXlPcGVuIH49IG5pbCB0aGVuIFN0YXlPcGVuID0ganNvbi5TdGF5T3BlbiBlbHNlIFN0YXlPcGVuID0gZmFsc2UgZW5kCiAgICAgICAgICAgIGlmIGpzb24ua2VlcElZIH49IG5pbCB0aGVuIEtlZXBJbmZZaWVsZCA9IGpzb24ua2VlcElZIGVsc2UgS2VlcEluZllpZWxkID0gdHJ1ZSBlbmQKICAgICAgICAgICAgaWYganNvbi5lc3BUcmFuc3BhcmVuY3kgfj0gbmlsIHRoZW4gZXNwVHJhbnNwYXJlbmN5ID0ganNvbi5lc3BUcmFuc3BhcmVuY3kgZWxzZSBlc3BUcmFuc3BhcmVuY3kgPSAwLjMgZW5kCiAgICAgICAgICAgIGlmIGpzb24ubG9nc0VuYWJsZWQgfj0gbmlsIHRoZW4gbG9nc0VuYWJsZWQgPSBqc29uLmxvZ3NFbmFibGVkIGVsc2UgbG9nc0VuYWJsZWQgPSBmYWxzZSBlbmQKICAgICAgICAgICAgaWYganNvbi5qTG9nc0VuYWJsZWQgfj0gbmlsIHRoZW4gakxvZ3NFbmFibGVkID0ganNvbi5qTG9nc0VuYWJsZWQgZWxzZSBqTG9nc0VuYWJsZWQgPSBmYWxzZSBlbmQKICAgICAgICAgICAgaWYganNvbi5hbGlhc2VzIH49IG5pbCB0aGVuIGFsaWFzZXMgPSBqc29uLmFsaWFzZXMgZWxzZSBhbGlhc2VzID0ge30gZW5kCiAgICAgICAgICAgIGlmIGpzb24uYmluZHMgfj0gbmlsIHRoZW4gYmluZHMgPSAoanNvbi5iaW5kcyBvciB7fSkgZWxzZSBiaW5kcyA9IHt9IGVuZAogICAgICAgICAgICBpZiBqc29uLnNwYXduQ21kcyB+PSBuaWwgdGhlbiBzcGF3bkNtZHMgPSBqc29uLnNwYXduQ21kcyBlbmQKICAgICAgICAgICAgaWYganNvbi5XYXlQb2ludHMgfj0gbmlsIHRoZW4gQWxsV2F5cG9pbnRzID0ganNvbi5XYXlQb2ludHMgZWxzZSBXYXlQb2ludHMgPSB7fSBBbGxXYXlwb2ludHMgPSB7fSBlbmQKICAgICAgICAgICAgaWYganNvbi5QbHVnaW5zVGFibGUgfj0gbmlsIHRoZW4gUGx1Z2luc1RhYmxlID0ganNvbi5QbHVnaW5zVGFibGUgZWxzZSBQbHVnaW5zVGFibGUgPSB7fSBlbmQKICAgICAgICAgICAgaWYganNvbi5jdXJyZW50U2hhZGUxIH49IG5pbCB0aGVuIGN1cnJlbnRTaGFkZTEgPSBDb2xvcjMubmV3KGpzb24uY3VycmVudFNoYWRlMVsxXSxqc29uLmN1cnJlbnRTaGFkZTFbMl0sanNvbi5jdXJyZW50U2hhZGUxWzNdKSBlbmQKICAgICAgICAgICAgaWYganNvbi5jdXJyZW50U2hhZGUyIH49IG5pbCB0aGVuIGN1cnJlbnRTaGFkZTIgPSBDb2xvcjMubmV3KGpzb24uY3VycmVudFNoYWRlMlsxXSxqc29uLmN1cnJlbnRTaGFkZTJbMl0sanNvbi5jdXJyZW50U2hhZGUyWzNdKSBlbmQKICAgICAgICAgICAgaWYganNvbi5jdXJyZW50U2hhZGUzIH49IG5pbCB0aGVuIGN1cnJlbnRTaGFkZTMgPSBDb2xvcjMubmV3KGpzb24uY3VycmVudFNoYWRlM1sxXSxqc29uLmN1cnJlbnRTaGFkZTNbMl0sanNvbi5jdXJyZW50U2hhZGUzWzNdKSBlbmQKICAgICAgICAgICAgaWYganNvbi5jdXJyZW50VGV4dDEgfj0gbmlsIHRoZW4gY3VycmVudFRleHQxID0gQ29sb3IzLm5ldyhqc29uLmN1cnJlbnRUZXh0MVsxXSxqc29uLmN1cnJlbnRUZXh0MVsyXSxqc29uLmN1cnJlbnRUZXh0MVszXSkgZW5kCiAgICAgICAgICAgIGlmIGpzb24uY3VycmVudFRleHQyIH49IG5pbCB0aGVuIGN1cnJlbnRUZXh0MiA9IENvbG9yMy5uZXcoanNvbi5jdXJyZW50VGV4dDJbMV0sanNvbi5jdXJyZW50VGV4dDJbMl0sanNvbi5jdXJyZW50VGV4dDJbM10pIGVuZAogICAgICAgICAgICBpZiBqc29uLmN1cnJlbnRTY3JvbGwgfj0gbmlsIHRoZW4gY3VycmVudFNjcm9sbCA9IENvbG9yMy5uZXcoanNvbi5jdXJyZW50U2Nyb2xsWzFdLGpzb24uY3VycmVudFNjcm9sbFsyXSxqc29uLmN1cnJlbnRTY3JvbGxbM10pIGVuZAogICAgICAgICAgICBpZiBqc29uLmV2ZW50QmluZHMgfj0gbmlsIHRoZW4gbG9hZGVkRXZlbnREYXRhID0ganNvbi5ldmVudEJpbmRzIGVuZAogICAgICAgICAgZW5kKQogICAgICAgICAgaWYgbm90IHN1Y2Nlc3MgdGhlbgogICAgICAgICAgICBqc29uQXR0ZW1wdHMgPSBqc29uQXR0ZW1wdHMgKyAxCiAgICAgICAgICAgIHdhcm4oIlNhdmUgSnNvbiBFcnJvcjoiLCByZXNwb25zZSkKICAgICAgICAgICAgd2FybigiT3ZlcndyaXRpbmcgU2F2ZSBGaWxlIikKICAgICAgICAgICAgd3JpdGVmaWxlQ29vbGRvd24oIklZX0ZFLml5IiwgZGVmYXVsdHMpCiAgICAgICAgICAgIHdhaXQoKQogICAgICAgICAgICBzYXZlcygpCiAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICB3cml0ZWZpbGVDb29sZG93bigiSVlfRkUuaXkiLCBkZWZhdWx0cykKICAgICAgICAgIHdhaXQoKQogICAgICAgICAgc2F2ZXMoKQogICAgICAgIGVuZAogICAgICBlbHNlCiAgICAgICAgd3JpdGVmaWxlQ29vbGRvd24oIklZX0ZFLml5IiwgZGVmYXVsdHMpCiAgICAgICAgd2FpdCgpCiAgICAgICAgaWYgcGNhbGwoZnVuY3Rpb24oKSByZWFkZmlsZSgiSVlfRkUuaXkiKSBlbmQpIHRoZW4KICAgICAgICAgIHNhdmVzKCkKICAgICAgICBlbHNlCiAgICAgICAgICBub3NhdmVzID0gdHJ1ZQogICAgICAgICAgdXNlRmFjdG9yeVNldHRpbmdzKCkKICAKICAgICAgICAgIGxvY2FsIEZpbGVFcnJvciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgICAgbG9jYWwgYmFja2dyb3VuZCA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgICAgbG9jYWwgRGlyZWN0aW9ucyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgICAgIGxvY2FsIHNoYWRvdyA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgICAgbG9jYWwgUG9wdXBUZXh0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgICAgbG9jYWwgRXhpdCA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgICAgICAgICBsb2NhbCBFeGl0SW1hZ2UgPSBJbnN0YW5jZS5uZXcoIkltYWdlTGFiZWwiKQogIAogICAgICAgICAgRmlsZUVycm9yLk5hbWUgPSByYW5kb21TdHJpbmcoKQogICAgICAgICAgRmlsZUVycm9yLlBhcmVudCA9IFBBUkVOVAogICAgICAgICAgRmlsZUVycm9yLkFjdGl2ZSA9IHRydWUKICAgICAgICAgIEZpbGVFcnJvci5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgRmlsZUVycm9yLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgLTE4MCwgMCwgMjkwKQogICAgICAgICAgRmlsZUVycm9yLlNpemUgPSBVRGltMi5uZXcoMCwgMzYwLCAwLCAyMCkKICAgICAgICAgIEZpbGVFcnJvci5aSW5kZXggPSAxMAogIAogICAgICAgICAgYmFja2dyb3VuZC5OYW1lID0gImJhY2tncm91bmQiCiAgICAgICAgICBiYWNrZ3JvdW5kLlBhcmVudCA9IEZpbGVFcnJvcgogICAgICAgICAgYmFja2dyb3VuZC5BY3RpdmUgPSB0cnVlCiAgICAgICAgICBiYWNrZ3JvdW5kLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigzNiwgMzYsIDM3KQogICAgICAgICAgYmFja2dyb3VuZC5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgICAgICBiYWNrZ3JvdW5kLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDIwKQogICAgICAgICAgYmFja2dyb3VuZC5TaXplID0gVURpbTIubmV3KDAsIDM2MCwgMCwgMjA1KQogICAgICAgICAgYmFja2dyb3VuZC5aSW5kZXggPSAxMAogIAogICAgICAgICAgRGlyZWN0aW9ucy5OYW1lID0gIkRpcmVjdGlvbnMiCiAgICAgICAgICBEaXJlY3Rpb25zLlBhcmVudCA9IGJhY2tncm91bmQKICAgICAgICAgIERpcmVjdGlvbnMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgIERpcmVjdGlvbnMuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICAgICAgRGlyZWN0aW9ucy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMCwgMTApCiAgICAgICAgICBEaXJlY3Rpb25zLlNpemUgPSBVRGltMi5uZXcoMCwgMzQwLCAwLCAxODUpCiAgICAgICAgICBEaXJlY3Rpb25zLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogICAgICAgICAgRGlyZWN0aW9ucy5UZXh0U2l6ZSA9IDE0CiAgICAgICAgICBEaXJlY3Rpb25zLlRleHQgPSAiVGhlcmUgd2FzIGEgcHJvYmxlbSB3cml0aW5nIGEgc2F2ZSBmaWxlIHRvIHlvdXIgUEMuXG5cblBsZWFzZSBjb250YWN0IHRoZSBkZXZlbG9wZXIvc3VwcG9ydCB0ZWFtIGZvciB5b3VyIGV4cGxvaXQgYW5kIHRlbGwgdGhlbSB3cml0ZWZpbGUgaXMgbm90IHdvcmtpbmcuXG5cbllvdXIgc2V0dGluZ3MsIGtleWJpbmRzLCB3YXlwb2ludHMsIGFuZCBhbGlhc2VzIHdpbGwgbm90IHNhdmUgaWYgeW91IGNvbnRpbnVlLlxuXG5UaGluZ3MgdG8gdHJ5OlxuPiBNYWtlIHN1cmUgYSAnd29ya3NwYWNlJyBmb2xkZXIgaXMgbG9jYXRlZCBpbiB0aGUgc2FtZSBmb2xkZXIgYXMgeW91ciBleHBsb2l0XG4+IElmIHlvdXIgZXhwbG9pdCBpcyBpbnNpZGUgb2YgYSB6aXAvcmFyIGZpbGUsIGV4dHJhY3QgaXQuXG4+IFJlam9pbiB0aGUgZ2FtZSBhbmQgdHJ5IGFnYWluIG9yIHJlc3RhcnQgeW91ciBQQyBhbmQgdHJ5IGFnYWluLiIKICAgICAgICAgIERpcmVjdGlvbnMuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICAgICAgICAgIERpcmVjdGlvbnMuVGV4dFdyYXBwZWQgPSB0cnVlCiAgICAgICAgICBEaXJlY3Rpb25zLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICAgICAgICBEaXJlY3Rpb25zLlRleHRZQWxpZ25tZW50ID0gRW51bS5UZXh0WUFsaWdubWVudC5Ub3AKICAgICAgICAgIERpcmVjdGlvbnMuWkluZGV4ID0gMTAKICAKICAgICAgICAgIHNoYWRvdy5OYW1lID0gInNoYWRvdyIKICAgICAgICAgIHNoYWRvdy5QYXJlbnQgPSBGaWxlRXJyb3IKICAgICAgICAgIHNoYWRvdy5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDYsIDQ2LCA0NykKICAgICAgICAgIHNoYWRvdy5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgICAgICBzaGFkb3cuU2l6ZSA9IFVEaW0yLm5ldygwLCAzNjAsIDAsIDIwKQogICAgICAgICAgc2hhZG93LlpJbmRleCA9IDEwCiAgCiAgICAgICAgICBQb3B1cFRleHQuTmFtZSA9ICJQb3B1cFRleHQiCiAgICAgICAgICBQb3B1cFRleHQuUGFyZW50ID0gc2hhZG93CiAgICAgICAgICBQb3B1cFRleHQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgIFBvcHVwVGV4dC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAuOTUsIDApCiAgICAgICAgICBQb3B1cFRleHQuWkluZGV4ID0gMTAKICAgICAgICAgIFBvcHVwVGV4dC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICAgICAgICAgIFBvcHVwVGV4dC5UZXh0U2l6ZSA9IDE0CiAgICAgICAgICBQb3B1cFRleHQuVGV4dCA9ICJGaWxlIEVycm9yIgogICAgICAgICAgUG9wdXBUZXh0LlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgICAgICAgICBQb3B1cFRleHQuVGV4dFdyYXBwZWQgPSB0cnVlCiAgCiAgICAgICAgICBFeGl0Lk5hbWUgPSAiRXhpdCIKICAgICAgICAgIEV4aXQuUGFyZW50ID0gc2hhZG93CiAgICAgICAgICBFeGl0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICBFeGl0LlBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0yMCwgMCwgMCkKICAgICAgICAgIEV4aXQuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMCwgMCwgMjApCiAgICAgICAgICBFeGl0LlRleHQgPSAiIgogICAgICAgICAgRXhpdC5aSW5kZXggPSAxMAogIAogICAgICAgICAgRXhpdEltYWdlLlBhcmVudCA9IEV4aXQKICAgICAgICAgIEV4aXRJbWFnZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgICAgICAgRXhpdEltYWdlLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICBFeGl0SW1hZ2UuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgNSkKICAgICAgICAgIEV4aXRJbWFnZS5TaXplID0gVURpbTIubmV3KDAsIDEwLCAwLCAxMCkKICAgICAgICAgIEV4aXRJbWFnZS5JbWFnZSA9ICJyYnhhc3NldGlkOi8vNTA1NDY2MzY1MCIKICAgICAgICAgIEV4aXRJbWFnZS5aSW5kZXggPSAxMAogIAogICAgICAgICAgRXhpdC5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgRmlsZUVycm9yOkRlc3Ryb3koKQogICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVsc2UKICAgICAgICAgIGlmIGpzb25BdHRlbXB0cyA+PSA1MCB0aGVuCiAgICAgICAgICAgICAgbm9zYXZlcyA9IHRydWUKICAgICAgICAgICAgICB1c2VGYWN0b3J5U2V0dGluZ3MoKQogIAogICAgICAgICAgICAgIGxvY2FsIEZpbGVFcnJvciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgICAgICAgIGxvY2FsIGJhY2tncm91bmQgPSBJbnN0YW5jZS5uZXcoIkZyYW1lIikKICAgICAgICAgICAgICBsb2NhbCBEaXJlY3Rpb25zID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgICAgICAgIGxvY2FsIHNoYWRvdyA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgICAgICAgIGxvY2FsIFBvcHVwVGV4dCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgICAgICAgICBsb2NhbCBFeGl0ID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICAgICAgICBsb2NhbCBFeGl0SW1hZ2UgPSBJbnN0YW5jZS5uZXcoIkltYWdlTGFiZWwiKQogIAogICAgICAgICAgICAgIEZpbGVFcnJvci5OYW1lID0gcmFuZG9tU3RyaW5nKCkKICAgICAgICAgICAgICBGaWxlRXJyb3IuUGFyZW50ID0gUEFSRU5UCiAgICAgICAgICAgICAgRmlsZUVycm9yLkFjdGl2ZSA9IHRydWUKICAgICAgICAgICAgICBGaWxlRXJyb3IuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICBGaWxlRXJyb3IuUG9zaXRpb24gPSBVRGltMi5uZXcoMC41LCAtMTgwLCAwLCAyOTApCiAgICAgICAgICAgICAgRmlsZUVycm9yLlNpemUgPSBVRGltMi5uZXcoMCwgMzYwLCAwLCAyMCkKICAgICAgICAgICAgICBGaWxlRXJyb3IuWkluZGV4ID0gMTAKICAKICAgICAgICAgICAgICBiYWNrZ3JvdW5kLk5hbWUgPSAiYmFja2dyb3VuZCIKICAgICAgICAgICAgICBiYWNrZ3JvdW5kLlBhcmVudCA9IEZpbGVFcnJvcgogICAgICAgICAgICAgIGJhY2tncm91bmQuQWN0aXZlID0gdHJ1ZQogICAgICAgICAgICAgIGJhY2tncm91bmQuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDM2LCAzNiwgMzcpCiAgICAgICAgICAgICAgYmFja2dyb3VuZC5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgICAgICAgICAgYmFja2dyb3VuZC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAyMCkKICAgICAgICAgICAgICBiYWNrZ3JvdW5kLlNpemUgPSBVRGltMi5uZXcoMCwgMzYwLCAwLCAyMDUpCiAgICAgICAgICAgICAgYmFja2dyb3VuZC5aSW5kZXggPSAxMAogIAogICAgICAgICAgICAgIERpcmVjdGlvbnMuTmFtZSA9ICJEaXJlY3Rpb25zIgogICAgICAgICAgICAgIERpcmVjdGlvbnMuUGFyZW50ID0gYmFja2dyb3VuZAogICAgICAgICAgICAgIERpcmVjdGlvbnMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgICAgICBEaXJlY3Rpb25zLkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgICAgICAgICBEaXJlY3Rpb25zLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCAxMCkKICAgICAgICAgICAgICBEaXJlY3Rpb25zLlNpemUgPSBVRGltMi5uZXcoMCwgMzQwLCAwLCAxODUpCiAgICAgICAgICAgICAgRGlyZWN0aW9ucy5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICAgICAgICAgICAgICBEaXJlY3Rpb25zLlRleHRTaXplID0gMTQKICAgICAgICAgICAgICBEaXJlY3Rpb25zLlRleHQgPSAiU29ycnksIGJ1dCB3ZSBoYXZlIGF0dGVtcHRlZCB0byBwYXJzZSB5b3VyIGRhdGEsIGJ1dCBpdCBpcyB1bnJlYWRhYmxlIVxuXG5JbmZpbml0ZSBZaWVsZCBpcyBub3cgdXNpbmcgZmFjdG9yeSBzZXR0aW5ncyB1bnRpbCB5b3VyIGV4ZWN1dG9yIGZpeGVzIGl0cyBmaWxlIHN5c3RlbS5cblxuWW91ciBkYXRhIGhhcyBub3QgYmVlbiBkZWxldGVkLiIKICAgICAgICAgICAgICBEaXJlY3Rpb25zLlRleHRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgICAgICAgICAgICAgRGlyZWN0aW9ucy5UZXh0V3JhcHBlZCA9IHRydWUKICAgICAgICAgICAgICBEaXJlY3Rpb25zLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICAgICAgICAgICAgRGlyZWN0aW9ucy5UZXh0WUFsaWdubWVudCA9IEVudW0uVGV4dFlBbGlnbm1lbnQuVG9wCiAgICAgICAgICAgICAgRGlyZWN0aW9ucy5aSW5kZXggPSAxMAogIAogICAgICAgICAgICAgIHNoYWRvdy5OYW1lID0gInNoYWRvdyIKICAgICAgICAgICAgICBzaGFkb3cuUGFyZW50ID0gRmlsZUVycm9yCiAgICAgICAgICAgICAgc2hhZG93LkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig0NiwgNDYsIDQ3KQogICAgICAgICAgICAgIHNoYWRvdy5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgICAgICAgICAgc2hhZG93LlNpemUgPSBVRGltMi5uZXcoMCwgMzYwLCAwLCAyMCkKICAgICAgICAgICAgICBzaGFkb3cuWkluZGV4ID0gMTAKICAKICAgICAgICAgICAgICBQb3B1cFRleHQuTmFtZSA9ICJQb3B1cFRleHQiCiAgICAgICAgICAgICAgUG9wdXBUZXh0LlBhcmVudCA9IHNoYWRvdwogICAgICAgICAgICAgIFBvcHVwVGV4dC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgIFBvcHVwVGV4dC5TaXplID0gVURpbTIubmV3KDEsIDAsIDAuOTUsIDApCiAgICAgICAgICAgICAgUG9wdXBUZXh0LlpJbmRleCA9IDEwCiAgICAgICAgICAgICAgUG9wdXBUZXh0LkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogICAgICAgICAgICAgIFBvcHVwVGV4dC5UZXh0U2l6ZSA9IDE0CiAgICAgICAgICAgICAgUG9wdXBUZXh0LlRleHQgPSAiRmlsZSBFcnJvciIKICAgICAgICAgICAgICBQb3B1cFRleHQuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICAgICAgICAgICAgICBQb3B1cFRleHQuVGV4dFdyYXBwZWQgPSB0cnVlCiAgCiAgICAgICAgICAgICAgRXhpdC5OYW1lID0gIkV4aXQiCiAgICAgICAgICAgICAgRXhpdC5QYXJlbnQgPSBzaGFkb3cKICAgICAgICAgICAgICBFeGl0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgRXhpdC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtMjAsIDAsIDApCiAgICAgICAgICAgICAgRXhpdC5TaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCkKICAgICAgICAgICAgICBFeGl0LlRleHQgPSAiIgogICAgICAgICAgICAgIEV4aXQuWkluZGV4ID0gMTAKICAKICAgICAgICAgICAgICBFeGl0SW1hZ2UuUGFyZW50ID0gRXhpdAogICAgICAgICAgICAgIEV4aXRJbWFnZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgICAgICAgICAgIEV4aXRJbWFnZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgICAgICAgIEV4aXRJbWFnZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCA1KQogICAgICAgICAgICAgIEV4aXRJbWFnZS5TaXplID0gVURpbTIubmV3KDAsIDEwLCAwLCAxMCkKICAgICAgICAgICAgICBFeGl0SW1hZ2UuSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzUwNTQ2NjM2NTAiCiAgICAgICAgICAgICAgRXhpdEltYWdlLlpJbmRleCA9IDEwCiAgCiAgICAgICAgICAgICAgRXhpdC5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICAgICAgRmlsZUVycm9yOkRlc3Ryb3koKQogICAgICAgICAgICAgIGVuZCkKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICB1c2VGYWN0b3J5U2V0dGluZ3MoKQogICAgICAgICAgZW5kCiAgICBlbmQKICBlbmQKICAKICBzYXZlcygpCiAgCiAgZnVuY3Rpb24gdXBkYXRlc2F2ZXMoKQogICAgaWYgbm9zYXZlcyA9PSBmYWxzZSBhbmQgd3JpdGVmaWxlRXhwbG9pdCgpIHRoZW4KICAgICAgbG9jYWwgdXBkYXRlID0gewogICAgICAgIHByZWZpeCA9IHByZWZpeDsKICAgICAgICBTdGF5T3BlbiA9IFN0YXlPcGVuOwogICAgICAgIGtlZXBJWSA9IEtlZXBJbmZZaWVsZDsKICAgICAgICBlc3BUcmFuc3BhcmVuY3kgPSBlc3BUcmFuc3BhcmVuY3k7CiAgICAgICAgbG9nc0VuYWJsZWQgPSBsb2dzRW5hYmxlZDsKICAgICAgICBqTG9nc0VuYWJsZWQgPSBqTG9nc0VuYWJsZWQ7CiAgICAgICAgYWxpYXNlcyA9IGFsaWFzZXM7CiAgICAgICAgYmluZHMgPSBiaW5kcyBvciB7fTsKICAgICAgICBXYXlQb2ludHMgPSBBbGxXYXlwb2ludHM7CiAgICAgICAgUGx1Z2luc1RhYmxlID0gUGx1Z2luc1RhYmxlOwogICAgICAgIGN1cnJlbnRTaGFkZTEgPSB7Y3VycmVudFNoYWRlMS5SLGN1cnJlbnRTaGFkZTEuRyxjdXJyZW50U2hhZGUxLkJ9OwogICAgICAgIGN1cnJlbnRTaGFkZTIgPSB7Y3VycmVudFNoYWRlMi5SLGN1cnJlbnRTaGFkZTIuRyxjdXJyZW50U2hhZGUyLkJ9OwogICAgICAgIGN1cnJlbnRTaGFkZTMgPSB7Y3VycmVudFNoYWRlMy5SLGN1cnJlbnRTaGFkZTMuRyxjdXJyZW50U2hhZGUzLkJ9OwogICAgICAgIGN1cnJlbnRUZXh0MSA9IHtjdXJyZW50VGV4dDEuUixjdXJyZW50VGV4dDEuRyxjdXJyZW50VGV4dDEuQn07CiAgICAgICAgY3VycmVudFRleHQyID0ge2N1cnJlbnRUZXh0Mi5SLGN1cnJlbnRUZXh0Mi5HLGN1cnJlbnRUZXh0Mi5CfTsKICAgICAgICBjdXJyZW50U2Nyb2xsID0ge2N1cnJlbnRTY3JvbGwuUixjdXJyZW50U2Nyb2xsLkcsY3VycmVudFNjcm9sbC5CfTsKICAgICAgICBldmVudEJpbmRzID0gZXZlbnRFZGl0b3IuU2F2ZURhdGEoKQogICAgICB9CiAgICAgIHdyaXRlZmlsZUNvb2xkb3duKCJJWV9GRS5peSIsIEh0dHBTZXJ2aWNlOkpTT05FbmNvZGUodXBkYXRlKSkKICAgIGVuZAogIGVuZAogIAogIGV2ZW50RWRpdG9yLlNldE9uRWRpdGVkKHVwZGF0ZXNhdmVzKQogIAogIHBXYXlQb2ludHMgPSB7fQogIFdheVBvaW50cyA9IHt9CiAgCiAgaWYgI0FsbFdheXBvaW50cyA+IDAgdGhlbgogICAgZm9yIGkgPSAxLCAjQWxsV2F5cG9pbnRzIGRvCiAgICAgIGlmIG5vdCBBbGxXYXlwb2ludHNbaV0uR0FNRSBvciBBbGxXYXlwb2ludHNbaV0uR0FNRSA9PSBQbGFjZUlkIHRoZW4KICAgICAgICBXYXlQb2ludHNbI1dheVBvaW50cyArIDFdID0ge05BTUUgPSBBbGxXYXlwb2ludHNbaV0uTkFNRSwgQ09PUkQgPSB7QWxsV2F5cG9pbnRzW2ldLkNPT1JEWzFdLCBBbGxXYXlwb2ludHNbaV0uQ09PUkRbMl0sIEFsbFdheXBvaW50c1tpXS5DT09SRFszXX0sIEdBTUUgPSBBbGxXYXlwb2ludHNbaV0uR0FNRX0KICAgICAgZW5kCiAgICBlbmQKICBlbmQKICAKICBpZiB0eXBlKGJpbmRzKSB+PSAidGFibGUiIHRoZW4gYmluZHMgPSB7fSBlbmQKICAKICBmdW5jdGlvbiBUaW1lKCkKICAgIGxvY2FsIEhPVVIgPSBtYXRoLmZsb29yKCh0aWNrKCkgJSA4NjQwMCkgLyAzNjAwKQogICAgbG9jYWwgTUlOVVRFID0gbWF0aC5mbG9vcigodGljaygpICUgMzYwMCkgLyA2MCkKICAgIGxvY2FsIFNFQ09ORCA9IG1hdGguZmxvb3IodGljaygpICUgNjApCiAgICBsb2NhbCBBUCA9IEhPVVIgPiAxMSBhbmQgJ1BNJyBvciAnQU0nCiAgICBIT1VSID0gKEhPVVIgJSAxMiA9PSAwIGFuZCAxMiBvciBIT1VSICUgMTIpCiAgICBIT1VSID0gSE9VUiA8IDEwIGFuZCAnMCcgLi4gSE9VUiBvciBIT1VSCiAgICBNSU5VVEUgPSBNSU5VVEUgPCAxMCBhbmQgJzAnIC4uIE1JTlVURSBvciBNSU5VVEUKICAgIFNFQ09ORCA9IFNFQ09ORCA8IDEwIGFuZCAnMCcgLi4gU0VDT05EIG9yIFNFQ09ORAogICAgcmV0dXJuIEhPVVIgLi4gJzonIC4uIE1JTlVURSAuLiAnOicgLi4gU0VDT05EIC4uICcgJyAuLiBBUAogIGVuZAogIAogIFByZWZpeEJveC5UZXh0ID0gcHJlZml4CiAgbG9jYWwgU2V0dGluZ3NPcGVuID0gZmFsc2UKICBsb2NhbCBpc0hpZGRlbiA9IGZhbHNlCiAgCiAgaWYgU3RheU9wZW4gPT0gZmFsc2UgdGhlbgogICAgT24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICBlbHNlCiAgICBPbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMAogIGVuZAogIAogIGlmIGxvZ3NFbmFibGVkIHRoZW4KICAgIFRvZ2dsZS5UZXh0ID0gJ0VuYWJsZWQnCiAgZWxzZQogICAgVG9nZ2xlLlRleHQgPSAnRGlzYWJsZWQnCiAgZW5kCiAgCiAgaWYgakxvZ3NFbmFibGVkIHRoZW4KICAgIFRvZ2dsZV8yLlRleHQgPSAnRW5hYmxlZCcKICBlbHNlCiAgICBUb2dnbGVfMi5UZXh0ID0gJ0Rpc2FibGVkJwogIGVuZAogIAogIGZ1bmN0aW9uIG1heGltaXplSG9sZGVyKCkKICAgIGlmIFN0YXlPcGVuID09IGZhbHNlIHRoZW4KICAgICAgSG9sZGVyOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDEsIEhvbGRlci5Qb3NpdGlvbi5YLk9mZnNldCwgMSwgLTIyMCksICJJbk91dCIsICJRdWFydCIsIDAuMiwgdHJ1ZSwgbmlsKQogICAgZW5kCiAgZW5kCiAgCiAgbG9jYWwgbWluaW1pemVOdW0gPSAtMjAKICBmdW5jdGlvbiBtaW5pbWl6ZUhvbGRlcigpCiAgICBpZiBTdGF5T3BlbiA9PSBmYWxzZSB0aGVuCiAgICAgIEhvbGRlcjpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygxLCBIb2xkZXIuUG9zaXRpb24uWC5PZmZzZXQsIDEsIG1pbmltaXplTnVtKSwgIkluT3V0IiwgIlF1YXJ0IiwgMC41LCB0cnVlLCBuaWwpCiAgICBlbmQKICBlbmQKICAKICBmdW5jdGlvbiBjbWRiYXJIb2xkZXIoKQogICAgaWYgU3RheU9wZW4gPT0gZmFsc2UgdGhlbgogICAgICBIb2xkZXI6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMSwgSG9sZGVyLlBvc2l0aW9uLlguT2Zmc2V0LCAxLCAtNDUpLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkKICAgIGVuZAogIGVuZAogIAogIHBpbk5vdGlmaWNhdGlvbiA9IG5pbAogIGxvY2FsIG5vdGlmeUNvdW50ID0gMAogIGZ1bmN0aW9uIG5vdGlmeSh0ZXh0LHRleHQyLGxlbmd0aCkKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICBsb2NhbCBMbm90aWZ5Q291bnQgPSBub3RpZnlDb3VudCsxCiAgICAgIGxvY2FsIG5vdGlmaWNhdGlvblBpbm5lZCA9IGZhbHNlCiAgICAgIG5vdGlmeUNvdW50ID0gbm90aWZ5Q291bnQrMQogICAgICBpZiBwaW5Ob3RpZmljYXRpb24gdGhlbiBwaW5Ob3RpZmljYXRpb246RGlzY29ubmVjdCgpIGVuZAogICAgICBwaW5Ob3RpZmljYXRpb24gPSBQaW5CdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICBwaW5Ob3RpZmljYXRpb246RGlzY29ubmVjdCgpCiAgICAgICAgICBub3RpZmljYXRpb25QaW5uZWQgPSB0cnVlCiAgICAgICAgICBUaXRsZV8yLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICB3YWl0KDAuNSkKICAgICAgICAgIFRpdGxlXzIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAKICAgICAgICBlbmQpCiAgICAgIGVuZCkKICAgICAgTm90aWZpY2F0aW9uOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDEsIE5vdGlmaWNhdGlvbi5Qb3NpdGlvbi5YLk9mZnNldCwgMSwgMCksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKQogICAgICB3YWl0KDAuNikKICAgICAgbG9jYWwgY2xvc2VwcmVzc2VkID0gZmFsc2UKICAgICAgaWYgdGV4dDIgdGhlbgogICAgICAgIFRpdGxlXzIuVGV4dCA9IHRleHQKICAgICAgICBUZXh0XzIuVGV4dCA9IHRleHQyCiAgICAgIGVsc2UKICAgICAgICBUaXRsZV8yLlRleHQgPSAnTm90aWZpY2F0aW9uJwogICAgICAgIFRleHRfMi5UZXh0ID0gdGV4dAogICAgICBlbmQKICAgICAgTm90aWZpY2F0aW9uOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDEsIE5vdGlmaWNhdGlvbi5Qb3NpdGlvbi5YLk9mZnNldCwgMSwgLTEwMCksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKQogICAgICBDbG9zZUJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBOb3RpZmljYXRpb246VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMSwgTm90aWZpY2F0aW9uLlBvc2l0aW9uLlguT2Zmc2V0LCAxLCAwKSwgIkluT3V0IiwgIlF1YXJ0IiwgMC41LCB0cnVlLCBuaWwpCiAgICAgICAgY2xvc2VwcmVzc2VkID0gdHJ1ZQogICAgICAgIHBpbk5vdGlmaWNhdGlvbjpEaXNjb25uZWN0KCkKICAgICAgZW5kKQogICAgICBpZiBsZW5ndGggYW5kIGlzTnVtYmVyKGxlbmd0aCkgdGhlbgogICAgICAgIHdhaXQobGVuZ3RoKQogICAgICBlbHNlCiAgICAgICAgd2FpdCgxMCkKICAgICAgZW5kCiAgICAgIGlmIExub3RpZnlDb3VudCA9PSBub3RpZnlDb3VudCB0aGVuCiAgICAgICAgaWYgY2xvc2VwcmVzc2VkID09IGZhbHNlIGFuZCBub3RpZmljYXRpb25QaW5uZWQgPT0gZmFsc2UgdGhlbgogICAgICAgICAgcGluTm90aWZpY2F0aW9uOkRpc2Nvbm5lY3QoKQogICAgICAgICAgTm90aWZpY2F0aW9uOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDEsIE5vdGlmaWNhdGlvbi5Qb3NpdGlvbi5YLk9mZnNldCwgMSwgMCksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKQogICAgICAgIGVuZAogICAgICAgIG5vdGlmeUNvdW50ID0gMAogICAgICBlbmQKICAgIGVuZCkKICBlbmQKICAKICBsb2NhbCBsYXN0TWVzc2FnZSA9IG5pbAogIGxvY2FsIGxhc3RMYWJlbCA9IG5pbAogIGxvY2FsIGR1cGVDb3VudCA9IDEKICBmdW5jdGlvbiBDcmVhdGVMYWJlbChOYW1lLCBUZXh0KQogICAgaWYgbGFzdE1lc3NhZ2UgPT0gTmFtZS4uVGV4dCB0aGVuCiAgICAgIGR1cGVDb3VudCA9IGR1cGVDb3VudCsxCiAgICAgIGxhc3RMYWJlbC5UZXh0ID0gVGltZSgpLi4nIC0gWycuLk5hbWUuLiddOiAnLi5UZXh0Li4nICh4Jy4uZHVwZUNvdW50Li4nKScKICAgIGVsc2UKICAgICAgaWYgZHVwZUNvdW50ID4gMSB0aGVuIGR1cGVDb3VudCA9IDEgZW5kCiAgICAgIGlmICNzY3JvbGxfMjpHZXRDaGlsZHJlbigpID49IDI1NDYgdGhlbgogICAgICAgIHNjcm9sbF8yOkNsZWFyQWxsQ2hpbGRyZW4oKQogICAgICBlbmQKICAgICAgbG9jYWwgYWxscyA9IDAKICAgICAgZm9yIGksdiBpbiBwYWlycyhzY3JvbGxfMjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHYgdGhlbgogICAgICAgICAgYWxscyA9IHYuU2l6ZS5ZLk9mZnNldCArIGFsbHMKICAgICAgICBlbmQKICAgICAgICBpZiBub3QgdiB0aGVuCiAgICAgICAgICBhbGxzID0gMAogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgbG9jYWwgdGwgPSBJbnN0YW5jZS5uZXcoJ1RleHRMYWJlbCcpCiAgICAgIGxhc3RNZXNzYWdlID0gTmFtZS4uVGV4dAogICAgICBsYXN0TGFiZWwgPSB0bAogICAgICB0bC5OYW1lID0gTmFtZQogICAgICB0bC5QYXJlbnQgPSBzY3JvbGxfMgogICAgICB0bC5aSW5kZXggPSAxMAogICAgICB0bC5UZXh0ID0gVGltZSgpLi4iIC0gWyIuLk5hbWUuLiJdOiAiLi5UZXh0CiAgICAgIHRsLlNpemUgPSBVRGltMi5uZXcoMCwzMjIsMCw4NCkKICAgICAgdGwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgdGwuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICB0bC5Gb250ID0gIlNvdXJjZVNhbnMiCiAgICAgIHRsLlBvc2l0aW9uID0gVURpbTIubmV3KC0xLDAsMCxhbGxzKQogICAgICB0bC5UZXh0VHJhbnNwYXJlbmN5ID0gMQogICAgICB0bC5UZXh0U2NhbGVkID0gZmFsc2UKICAgICAgdGwuVGV4dFNpemUgPSAxNAogICAgICB0bC5UZXh0V3JhcHBlZCA9IHRydWUKICAgICAgdGwuVGV4dFhBbGlnbm1lbnQgPSAiTGVmdCIKICAgICAgdGwuVGV4dFlBbGlnbm1lbnQgPSAiVG9wIgogICAgICB0bC5UZXh0Q29sb3IzID0gY3VycmVudFRleHQxCiAgICAgIHRsLlNpemUgPSBVRGltMi5uZXcoMCwzMjIsMCx0bC5UZXh0Qm91bmRzLlkpCiAgICAgIHRhYmxlLmluc2VydCh0ZXh0MSx0bCkKICAgICAgc2Nyb2xsXzIuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLDAsMCxhbGxzK3RsLlRleHRCb3VuZHMuWSkKICAgICAgc2Nyb2xsXzIuQ2FudmFzUG9zaXRpb24gPSBWZWN0b3IyLm5ldygwLHNjcm9sbF8yLkNhbnZhc1Bvc2l0aW9uLlkrdGwuVGV4dEJvdW5kcy5ZKQogICAgICB0bDpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLDMsMCxhbGxzKSwgJ0luJywgJ1F1aW50JywgMC41KQogICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKHRsLCBUd2VlbkluZm8ubmV3KDEuMjUsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKSwgeyBUZXh0VHJhbnNwYXJlbmN5ID0gMCB9KTpQbGF5KCkKICAgIGVuZAogIGVuZAogIAogIGZ1bmN0aW9uIENyZWF0ZUpvaW5MYWJlbChwbHIsSUQpCiAgICBpZiAjc2Nyb2xsXzM6R2V0Q2hpbGRyZW4oKSA+PSAyNTQ2IHRoZW4KICAgICAgc2Nyb2xsXzM6Q2xlYXJBbGxDaGlsZHJlbigpCiAgICBlbmQKICAgIGxvY2FsIGluZm9GcmFtZSA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgbG9jYWwgaW5mbzEgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICBsb2NhbCBpbmZvMiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgIGxvY2FsIEltYWdlTGFiZWxfMyA9IEluc3RhbmNlLm5ldygiSW1hZ2VMYWJlbCIpCiAgICBpbmZvRnJhbWUuTmFtZSA9IHJhbmRvbVN0cmluZygpCiAgICBpbmZvRnJhbWUuUGFyZW50ID0gc2Nyb2xsXzMKICAgIGluZm9GcmFtZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgaW5mb0ZyYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBpbmZvRnJhbWUuQm9yZGVyQ29sb3IzID0gQ29sb3IzLm5ldygwLjEwNTg4MiwgMC4xNjQ3MDYsIDAuMjA3ODQzKQogICAgaW5mb0ZyYW1lLlNpemUgPSBVRGltMi5uZXcoMSwgMCwgMCwgNTApCiAgICBpbmZvMS5OYW1lID0gcmFuZG9tU3RyaW5nKCkKICAgIGluZm8xLlBhcmVudCA9IGluZm9GcmFtZQogICAgaW5mbzEuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgIGluZm8xLkJvcmRlclNpemVQaXhlbCA9IDAKICAgIGluZm8xLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDQ1LCAwLCAwKQogICAgaW5mbzEuU2l6ZSA9IFVEaW0yLm5ldygwLCAxMzUsIDEsIDApCiAgICBpbmZvMS5aSW5kZXggPSAxMAogICAgaW5mbzEuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgICBpbmZvMS5Gb250U2l6ZSA9IEVudW0uRm9udFNpemUuU2l6ZTE0CiAgICBpbmZvMS5UZXh0ID0gIlVzZXJuYW1lOiAiLi5wbHIuTmFtZS4uIlxuSm9pbmVkIFNlcnZlcjogIi4uVGltZSgpCiAgICBpbmZvMS5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgaW5mbzEuVGV4dFdyYXBwZWQgPSB0cnVlCiAgICBpbmZvMS5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgaW5mbzIuTmFtZSA9IHJhbmRvbVN0cmluZygpCiAgICBpbmZvMi5QYXJlbnQgPSBpbmZvRnJhbWUKICAgIGluZm8yLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBpbmZvMi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICBpbmZvMi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxODUsIDAsIDApCiAgICBpbmZvMi5TaXplID0gVURpbTIubmV3KDAsIDE0MCwgMSwgLTUpCiAgICBpbmZvMi5aSW5kZXggPSAxMAogICAgaW5mbzIuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgICBpbmZvMi5Gb250U2l6ZSA9IEVudW0uRm9udFNpemUuU2l6ZTE0CiAgICBpbmZvMi5UZXh0ID0gIlVzZXIgSUQ6ICIuLklELi4iXG5BY2NvdW50IEFnZTogIi4ucGxyLkFjY291bnRBZ2UuLiJcbkpvaW5lZCBSb2Jsb3g6IExvYWRpbmcuLi4iCiAgICBpbmZvMi5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgaW5mbzIuVGV4dFdyYXBwZWQgPSB0cnVlCiAgICBpbmZvMi5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgaW5mbzIuVGV4dFlBbGlnbm1lbnQgPSBFbnVtLlRleHRZQWxpZ25tZW50LkNlbnRlcgogICAgSW1hZ2VMYWJlbF8zLlBhcmVudCA9IGluZm9GcmFtZQogICAgSW1hZ2VMYWJlbF8zLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBJbWFnZUxhYmVsXzMuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgSW1hZ2VMYWJlbF8zLlNpemUgPSBVRGltMi5uZXcoMCwgNDUsIDEsIDApCiAgICBJbWFnZUxhYmVsXzMuSW1hZ2UgPSBQbGF5ZXJzOkdldFVzZXJUaHVtYm5haWxBc3luYyhJRCwgRW51bS5UaHVtYm5haWxUeXBlLkF2YXRhclRodW1ibmFpbCwgRW51bS5UaHVtYm5haWxTaXplLlNpemU0MjB4NDIwKQogICAgc2Nyb2xsXzMuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCBsaXN0bGF5b3V0LkFic29sdXRlQ29udGVudFNpemUuWSkKICAgIHNjcm9sbF8zLkNhbnZhc1Bvc2l0aW9uID0gVmVjdG9yMi5uZXcoMCxzY3JvbGxfMi5DYW52YXNQb3NpdGlvbi5ZK2luZm9GcmFtZS5BYnNvbHV0ZVNpemUuWSkKICAgIHdhaXQoKQogICAgbG9jYWwgdXNlciA9IGdhbWU6SHR0cEdldCgiaHR0cHM6Ly91c2Vycy5yb2Jsb3guY29tL3YxL3VzZXJzLyIuLklEKQogICAgbG9jYWwganNvbiA9IEh0dHBTZXJ2aWNlOkpTT05EZWNvZGUodXNlcikKICAgIGxvY2FsIGRhdGUgPSBqc29uWyJjcmVhdGVkIl06c3ViKDEsMTApCiAgICBsb2NhbCBzcGxpdERhdGVzID0gc3RyaW5nLnNwbGl0KGRhdGUsIi0iKQogICAgaW5mbzIuVGV4dCA9IHN0cmluZy5nc3ViKGluZm8yLlRleHQsICJMb2FkaW5nLi4uIixzcGxpdERhdGVzWzJdLi4iLyIuLnNwbGl0RGF0ZXNbM10uLiIvIi4uc3BsaXREYXRlc1sxXSkKICBlbmQKICAKICBJWU1vdXNlLktleURvd246Q29ubmVjdChmdW5jdGlvbihLZXkpCiAgICBpZiAoS2V5PT1wcmVmaXgpIHRoZW4KICAgICAgQ21kYmFyOkNhcHR1cmVGb2N1cygpCiAgICAgIHNwYXduKGZ1bmN0aW9uKCkKICAgICAgICByZXBlYXQgQ21kYmFyLlRleHQgPSAnJyB1bnRpbCBDbWRiYXIuVGV4dCA9PSAnJwogICAgICBlbmQpCiAgICAgIG1heGltaXplSG9sZGVyKCkKICAgIGVuZAogIGVuZCkKICAKICBsb2NhbCBsYXN0TWluaW1pemVSZXEgPSAwCiAgSG9sZGVyLk1vdXNlRW50ZXI6Q29ubmVjdChmdW5jdGlvbigpCiAgICBsYXN0TWluaW1pemVSZXEgPSAwCiAgICBtYXhpbWl6ZUhvbGRlcigpCiAgZW5kKQogIAogIEhvbGRlci5Nb3VzZUxlYXZlOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgaWYgbm90IENtZGJhcjpJc0ZvY3VzZWQoKSB0aGVuCiAgICAgIGxvY2FsIHJlcVRpbWUgPSB0aWNrKCkKICAgICAgbGFzdE1pbmltaXplUmVxID0gcmVxVGltZQogICAgICB3YWl0KDEpCiAgICAgIGlmIGxhc3RNaW5pbWl6ZVJlcSB+PSByZXFUaW1lIHRoZW4gcmV0dXJuIGVuZAogICAgICBpZiBub3QgQ21kYmFyOklzRm9jdXNlZCgpIHRoZW4KICAgICAgICBtaW5pbWl6ZUhvbGRlcigpCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGZ1bmN0aW9uIHVwZGF0ZUNvbG9ycyhjb2xvcixjdHlwZSkKICAgIGlmIGN0eXBlID09IHNoYWRlMSB0aGVuCiAgICAgIGZvciBpLHYgaW4gcGFpcnMoc2hhZGUxKSBkbwogICAgICAgIHYuQmFja2dyb3VuZENvbG9yMyA9IGNvbG9yCiAgICAgIGVuZAogICAgICBjdXJyZW50U2hhZGUxID0gY29sb3IKICAgIGVsc2VpZiBjdHlwZSA9PSBzaGFkZTIgdGhlbgogICAgICBmb3IgaSx2IGluIHBhaXJzKHNoYWRlMikgZG8KICAgICAgICB2LkJhY2tncm91bmRDb2xvcjMgPSBjb2xvcgogICAgICBlbmQKICAgICAgY3VycmVudFNoYWRlMiA9IGNvbG9yCiAgICBlbHNlaWYgY3R5cGUgPT0gc2hhZGUzIHRoZW4KICAgICAgZm9yIGksdiBpbiBwYWlycyhzaGFkZTMpIGRvCiAgICAgICAgdi5CYWNrZ3JvdW5kQ29sb3IzID0gY29sb3IKICAgICAgZW5kCiAgICAgIGN1cnJlbnRTaGFkZTMgPSBjb2xvcgogICAgZWxzZWlmIGN0eXBlID09IHRleHQxIHRoZW4KICAgICAgZm9yIGksdiBpbiBwYWlycyh0ZXh0MSkgZG8KICAgICAgICB2LlRleHRDb2xvcjMgPSBjb2xvcgogICAgICAgIGlmIHY6SXNBKCJUZXh0Qm94IikgdGhlbgogICAgICAgICAgdi5QbGFjZWhvbGRlckNvbG9yMyA9IGNvbG9yCQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgY3VycmVudFRleHQxID0gY29sb3IKICAgIGVsc2VpZiBjdHlwZSA9PSB0ZXh0MiB0aGVuCiAgICAgIGZvciBpLHYgaW4gcGFpcnModGV4dDIpIGRvCiAgICAgICAgdi5UZXh0Q29sb3IzID0gY29sb3IKICAgICAgZW5kCiAgICAgIGN1cnJlbnRUZXh0MiA9IGNvbG9yCiAgICBlbHNlaWYgY3R5cGUgPT0gc2Nyb2xsIHRoZW4KICAgICAgZm9yIGksdiBpbiBwYWlycyhzY3JvbGwpIGRvCiAgICAgICAgdi5TY3JvbGxCYXJJbWFnZUNvbG9yMyA9IGNvbG9yCiAgICAgIGVuZAogICAgICBjdXJyZW50U2Nyb2xsID0gY29sb3IKICAgIGVuZAogIGVuZAogIAogIGxvY2FsIGNvbG9ycGlja2VyT3BlbiA9IGZhbHNlCiAgQ29sb3JzQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgY2FjaGVfY3VycmVudFNoYWRlMSA9IGN1cnJlbnRTaGFkZTEKICAgIGNhY2hlX2N1cnJlbnRTaGFkZTIgPSBjdXJyZW50U2hhZGUyCiAgICBjYWNoZV9jdXJyZW50U2hhZGUzID0gY3VycmVudFNoYWRlMwogICAgY2FjaGVfY3VycmVudFRleHQxID0gY3VycmVudFRleHQxCiAgICBjYWNoZV9jdXJyZW50VGV4dDIgPSBjdXJyZW50VGV4dDIKICAgIGNhY2hlX2N1cnJlbnRTY3JvbGwgPSBjdXJyZW50U2Nyb2xsCiAgICBpZiBub3QgY29sb3JwaWNrZXJPcGVuIHRoZW4KICAgICAgY29sb3JwaWNrZXJPcGVuID0gdHJ1ZQogICAgICBwaWNrZXIgPSBnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly80OTA4NDY1MzE4IilbMV0KICAgICAgcGlja2VyLk5hbWUgPSByYW5kb21TdHJpbmcoKQogICAgICBwaWNrZXIuUGFyZW50ID0gUEFSRU5UCiAgCiAgICAgIGxvY2FsIENvbG9yUGlja2VyIGRvCiAgICAgICAgQ29sb3JQaWNrZXIgPSB7fQogIAogICAgICAgIENvbG9yUGlja2VyLm5ldyA9IGZ1bmN0aW9uKCkKICAgICAgICAgIGxvY2FsIG5ld010ID0gc2V0bWV0YXRhYmxlKHt9LHt9KQogIAogICAgICAgICAgbG9jYWwgcGlja2VyR3VpID0gcGlja2VyLkNvbG9yUGlja2VyCiAgICAgICAgICBsb2NhbCBwaWNrZXJUb3BCYXIgPSBwaWNrZXJHdWkuVG9wQmFyCiAgICAgICAgICBsb2NhbCBwaWNrZXJFeGl0ID0gcGlja2VyVG9wQmFyLkV4aXQKICAgICAgICAgIGxvY2FsIHBpY2tlckZyYW1lID0gcGlja2VyR3VpLkNvbnRlbnQKICAgICAgICAgIGxvY2FsIGNvbG9yU3BhY2UgPSBwaWNrZXJGcmFtZS5Db2xvclNwYWNlRnJhbWUuQ29sb3JTcGFjZQogICAgICAgICAgbG9jYWwgY29sb3JTdHJpcCA9IHBpY2tlckZyYW1lLkNvbG9yU3RyaXAKICAgICAgICAgIGxvY2FsIHByZXZpZXdGcmFtZSA9IHBpY2tlckZyYW1lLlByZXZpZXcKICAgICAgICAgIGxvY2FsIGJhc2ljQ29sb3JzRnJhbWUgPSBwaWNrZXJGcmFtZS5CYXNpY0NvbG9ycwogICAgICAgICAgbG9jYWwgY3VzdG9tQ29sb3JzRnJhbWUgPSBwaWNrZXJGcmFtZS5DdXN0b21Db2xvcnMKICAgICAgICAgIGxvY2FsIGRlZmF1bHRCdXR0b24gPSBwaWNrZXJGcmFtZS5EZWZhdWx0CiAgICAgICAgICBsb2NhbCBjYW5jZWxCdXR0b24gPSBwaWNrZXJGcmFtZS5DYW5jZWwKICAgICAgICAgIGxvY2FsIHNoYWRlMUJ1dHRvbiA9IHBpY2tlckZyYW1lLlNoYWRlMQogICAgICAgICAgbG9jYWwgc2hhZGUyQnV0dG9uID0gcGlja2VyRnJhbWUuU2hhZGUyCiAgICAgICAgICBsb2NhbCBzaGFkZTNCdXR0b24gPSBwaWNrZXJGcmFtZS5TaGFkZTMKICAgICAgICAgIGxvY2FsIHRleHQxQnV0dG9uID0gcGlja2VyRnJhbWUuVGV4dDEKICAgICAgICAgIGxvY2FsIHRleHQyQnV0dG9uID0gcGlja2VyRnJhbWUuVGV4dDIKICAgICAgICAgIGxvY2FsIHNjcm9sbEJ1dHRvbiA9IHBpY2tlckZyYW1lLlNjcm9sbAogIAogICAgICAgICAgbG9jYWwgY29sb3JTY29wZSA9IGNvbG9yU3BhY2UuU2NvcGUKICAgICAgICAgIGxvY2FsIGNvbG9yQXJyb3cgPSBwaWNrZXJGcmFtZS5BcnJvd0ZyYW1lLkFycm93CiAgCiAgICAgICAgICBsb2NhbCBodWVJbnB1dCA9IHBpY2tlckZyYW1lLkh1ZS5JbnB1dAogICAgICAgICAgbG9jYWwgc2F0SW5wdXQgPSBwaWNrZXJGcmFtZS5TYXQuSW5wdXQKICAgICAgICAgIGxvY2FsIHZhbElucHV0ID0gcGlja2VyRnJhbWUuVmFsLklucHV0CiAgCiAgICAgICAgICBsb2NhbCByZWRJbnB1dCA9IHBpY2tlckZyYW1lLlJlZC5JbnB1dAogICAgICAgICAgbG9jYWwgZ3JlZW5JbnB1dCA9IHBpY2tlckZyYW1lLkdyZWVuLklucHV0CiAgICAgICAgICBsb2NhbCBibHVlSW5wdXQgPSBwaWNrZXJGcmFtZS5CbHVlLklucHV0CiAgCiAgICAgICAgICBsb2NhbCBtb3VzZSA9IElZTW91c2UKICAKICAgICAgICAgIGxvY2FsIGh1ZSxzYXQsdmFsID0gMCwwLDEKICAgICAgICAgIGxvY2FsIHJlZCxncmVlbixibHVlID0gMSwxLDEKICAgICAgICAgIGxvY2FsIGNob3NlbkNvbG9yID0gQ29sb3IzLm5ldygwLDAsMCkKICAKICAgICAgICAgIGxvY2FsIGJhc2ljQ29sb3JzID0ge0NvbG9yMy5uZXcoMCwwLDApLENvbG9yMy5uZXcoMC42NjY2NjY2ODY1MzQ4OCwwLDApLENvbG9yMy5uZXcoMCwwLjMzMzMzMzM0MzI2NzQ0LDApLENvbG9yMy5uZXcoMC42NjY2NjY2ODY1MzQ4OCwwLjMzMzMzMzM0MzI2NzQ0LDApLENvbG9yMy5uZXcoMCwwLjY2NjY2NjY4NjUzNDg4LDApLENvbG9yMy5uZXcoMC42NjY2NjY2ODY1MzQ4OCwwLjY2NjY2NjY4NjUzNDg4LDApLENvbG9yMy5uZXcoMCwxLDApLENvbG9yMy5uZXcoMC42NjY2NjY2ODY1MzQ4OCwxLDApLENvbG9yMy5uZXcoMCwwLDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMC42NjY2NjY2ODY1MzQ4OCwwLDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMCwwLjMzMzMzMzM0MzI2NzQ0LDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMC42NjY2NjY2ODY1MzQ4OCwwLjMzMzMzMzM0MzI2NzQ0LDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMCwwLjY2NjY2NjY4NjUzNDg4LDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMC42NjY2NjY2ODY1MzQ4OCwwLjY2NjY2NjY4NjUzNDg4LDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMCwxLDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMC42NjY2NjY2ODY1MzQ4OCwxLDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMCwwLDEpLENvbG9yMy5uZXcoMC42NjY2NjY2ODY1MzQ4OCwwLDEpLENvbG9yMy5uZXcoMCwwLjMzMzMzMzM0MzI2NzQ0LDEpLENvbG9yMy5uZXcoMC42NjY2NjY2ODY1MzQ4OCwwLjMzMzMzMzM0MzI2NzQ0LDEpLENvbG9yMy5uZXcoMCwwLjY2NjY2NjY4NjUzNDg4LDEpLENvbG9yMy5uZXcoMC42NjY2NjY2ODY1MzQ4OCwwLjY2NjY2NjY4NjUzNDg4LDEpLENvbG9yMy5uZXcoMCwxLDEpLENvbG9yMy5uZXcoMC42NjY2NjY2ODY1MzQ4OCwxLDEpLENvbG9yMy5uZXcoMC4zMzMzMzMzNDMyNjc0NCwwLDApLENvbG9yMy5uZXcoMSwwLDApLENvbG9yMy5uZXcoMC4zMzMzMzMzNDMyNjc0NCwwLjMzMzMzMzM0MzI2NzQ0LDApLENvbG9yMy5uZXcoMSwwLjMzMzMzMzM0MzI2NzQ0LDApLENvbG9yMy5uZXcoMC4zMzMzMzMzNDMyNjc0NCwwLjY2NjY2NjY4NjUzNDg4LDApLENvbG9yMy5uZXcoMSwwLjY2NjY2NjY4NjUzNDg4LDApLENvbG9yMy5uZXcoMC4zMzMzMzMzNDMyNjc0NCwxLDApLENvbG9yMy5uZXcoMSwxLDApLENvbG9yMy5uZXcoMC4zMzMzMzMzNDMyNjc0NCwwLDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMSwwLDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMC4zMzMzMzMzNDMyNjc0NCwwLjMzMzMzMzM0MzI2NzQ0LDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMSwwLjMzMzMzMzM0MzI2NzQ0LDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMC4zMzMzMzMzNDMyNjc0NCwwLjY2NjY2NjY4NjUzNDg4LDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMSwwLjY2NjY2NjY4NjUzNDg4LDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMC4zMzMzMzMzNDMyNjc0NCwxLDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMSwxLDAuNDk4MDM5MjQ1NjA1NDcpLENvbG9yMy5uZXcoMC4zMzMzMzMzNDMyNjc0NCwwLDEpLENvbG9yMy5uZXcoMSwwLDEpLENvbG9yMy5uZXcoMC4zMzMzMzMzNDMyNjc0NCwwLjMzMzMzMzM0MzI2NzQ0LDEpLENvbG9yMy5uZXcoMSwwLjMzMzMzMzM0MzI2NzQ0LDEpLENvbG9yMy5uZXcoMC4zMzMzMzMzNDMyNjc0NCwwLjY2NjY2NjY4NjUzNDg4LDEpLENvbG9yMy5uZXcoMSwwLjY2NjY2NjY4NjUzNDg4LDEpLENvbG9yMy5uZXcoMC4zMzMzMzMzNDMyNjc0NCwxLDEpLENvbG9yMy5uZXcoMSwxLDEpfQogICAgICAgICAgbG9jYWwgY3VzdG9tQ29sb3JzID0ge30KICAKICAgICAgICAgIGRyYWdHVUkocGlja2VyKQogIAogICAgICAgICAgbG9jYWwgZnVuY3Rpb24gdXBkYXRlQ29sb3Iobm91cGRhdGUpCiAgICAgICAgICAgIGxvY2FsIHJlbGF0aXZlWCxyZWxhdGl2ZVkscmVsYXRpdmVTdHJpcFkgPSAyMTkgLSBodWUqMjE5LCAxOTkgLSBzYXQqMTk5LCAxOTkgLSB2YWwqMTk5CiAgICAgICAgICAgIGxvY2FsIGhzdkNvbG9yID0gQ29sb3IzLmZyb21IU1YoaHVlLHNhdCx2YWwpCiAgCiAgICAgICAgICAgIGlmIG5vdXBkYXRlID09IDIgb3Igbm90IG5vdXBkYXRlIHRoZW4KICAgICAgICAgICAgICBodWVJbnB1dC5UZXh0ID0gdG9zdHJpbmcobWF0aC5jZWlsKDM1OSpodWUpKQogICAgICAgICAgICAgIHNhdElucHV0LlRleHQgPSB0b3N0cmluZyhtYXRoLmNlaWwoMjU1KnNhdCkpCiAgICAgICAgICAgICAgdmFsSW5wdXQuVGV4dCA9IHRvc3RyaW5nKG1hdGguZmxvb3IoMjU1KnZhbCkpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpZiBub3VwZGF0ZSA9PSAxIG9yIG5vdCBub3VwZGF0ZSB0aGVuCiAgICAgICAgICAgICAgcmVkSW5wdXQuVGV4dCA9IHRvc3RyaW5nKG1hdGguZmxvb3IoMjU1KnJlZCkpCiAgICAgICAgICAgICAgZ3JlZW5JbnB1dC5UZXh0ID0gdG9zdHJpbmcobWF0aC5mbG9vcigyNTUqZ3JlZW4pKQogICAgICAgICAgICAgIGJsdWVJbnB1dC5UZXh0ID0gdG9zdHJpbmcobWF0aC5mbG9vcigyNTUqYmx1ZSkpCiAgICAgICAgICAgIGVuZAogIAogICAgICAgICAgICBjaG9zZW5Db2xvciA9IENvbG9yMy5uZXcocmVkLGdyZWVuLGJsdWUpCiAgCiAgICAgICAgICAgIGNvbG9yU2NvcGUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCxyZWxhdGl2ZVgtOSwwLHJlbGF0aXZlWS05KQogICAgICAgICAgICBjb2xvclN0cmlwLkltYWdlQ29sb3IzID0gQ29sb3IzLmZyb21IU1YoaHVlLHNhdCwxKQogICAgICAgICAgICBjb2xvckFycm93LlBvc2l0aW9uID0gVURpbTIubmV3KDAsLTIsMCxyZWxhdGl2ZVN0cmlwWS00KQogICAgICAgICAgICBwcmV2aWV3RnJhbWUuQmFja2dyb3VuZENvbG9yMyA9IGNob3NlbkNvbG9yCiAgCiAgICAgICAgICAgIG5ld010LkNvbG9yID0gY2hvc2VuQ29sb3IKICAgICAgICAgICAgaWYgbmV3TXQuQ2hhbmdlZCB0aGVuIG5ld010OkNoYW5nZWQoY2hvc2VuQ29sb3IpIGVuZAogICAgICAgICAgZW5kCiAgCiAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBjb2xvclNwYWNlSW5wdXQoKQogICAgICAgICAgICBsb2NhbCByZWxhdGl2ZVggPSBtb3VzZS5YIC0gY29sb3JTcGFjZS5BYnNvbHV0ZVBvc2l0aW9uLlgKICAgICAgICAgICAgbG9jYWwgcmVsYXRpdmVZID0gbW91c2UuWSAtIGNvbG9yU3BhY2UuQWJzb2x1dGVQb3NpdGlvbi5ZCiAgCiAgICAgICAgICAgIGlmIHJlbGF0aXZlWCA8IDAgdGhlbiByZWxhdGl2ZVggPSAwIGVsc2VpZiByZWxhdGl2ZVggPiAyMTkgdGhlbiByZWxhdGl2ZVggPSAyMTkgZW5kCiAgICAgICAgICAgIGlmIHJlbGF0aXZlWSA8IDAgdGhlbiByZWxhdGl2ZVkgPSAwIGVsc2VpZiByZWxhdGl2ZVkgPiAxOTkgdGhlbiByZWxhdGl2ZVkgPSAxOTkgZW5kCiAgCiAgICAgICAgICAgIGh1ZSA9ICgyMTkgLSByZWxhdGl2ZVgpLzIxOQogICAgICAgICAgICBzYXQgPSAoMTk5IC0gcmVsYXRpdmVZKS8xOTkKICAKICAgICAgICAgICAgbG9jYWwgaHN2Q29sb3IgPSBDb2xvcjMuZnJvbUhTVihodWUsc2F0LHZhbCkKICAgICAgICAgICAgcmVkLGdyZWVuLGJsdWUgPSBoc3ZDb2xvci5yLGhzdkNvbG9yLmcsaHN2Q29sb3IuYgogIAogICAgICAgICAgICB1cGRhdGVDb2xvcigpCiAgICAgICAgICBlbmQKICAKICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIGNvbG9yU3RyaXBJbnB1dCgpCiAgICAgICAgICAgIGxvY2FsIHJlbGF0aXZlWSA9IG1vdXNlLlkgLSBjb2xvclN0cmlwLkFic29sdXRlUG9zaXRpb24uWQogIAogICAgICAgICAgICBpZiByZWxhdGl2ZVkgPCAwIHRoZW4gcmVsYXRpdmVZID0gMCBlbHNlaWYgcmVsYXRpdmVZID4gMTk5IHRoZW4gcmVsYXRpdmVZID0gMTk5IGVuZAkKICAKICAgICAgICAgICAgdmFsID0gKDE5OSAtIHJlbGF0aXZlWSkvMTk5CiAgCiAgICAgICAgICAgIGxvY2FsIGhzdkNvbG9yID0gQ29sb3IzLmZyb21IU1YoaHVlLHNhdCx2YWwpCiAgICAgICAgICAgIHJlZCxncmVlbixibHVlID0gaHN2Q29sb3Iucixoc3ZDb2xvci5nLGhzdkNvbG9yLmIKICAKICAgICAgICAgICAgdXBkYXRlQ29sb3IoKQogICAgICAgICAgZW5kCiAgCiAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBob29rQnV0dG9ucyhmcmFtZSxmdW5jKQogICAgICAgICAgICBmcmFtZS5BcnJvd0ZyYW1lLlVwLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCkKICAgICAgICAgICAgICBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZU1vdmVtZW50IHRoZW4KICAgICAgICAgICAgICAgIGZyYW1lLkFycm93RnJhbWUuVXAuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuNQogICAgICAgICAgICAgIGVsc2VpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZUJ1dHRvbjEgdGhlbgogICAgICAgICAgICAgICAgbG9jYWwgcmVsZWFzZUV2ZW50LHJ1bkV2ZW50CiAgCiAgICAgICAgICAgICAgICBsb2NhbCBzdGFydFRpbWUgPSB0aWNrKCkKICAgICAgICAgICAgICAgIGxvY2FsIHByZXNzaW5nID0gdHJ1ZQogICAgICAgICAgICAgICAgbG9jYWwgc3RhcnROdW0gPSB0b251bWJlcihmcmFtZS5UZXh0KQogIAogICAgICAgICAgICAgICAgaWYgbm90IHN0YXJ0TnVtIHRoZW4gcmV0dXJuIGVuZAogIAogICAgICAgICAgICAgICAgcmVsZWFzZUV2ZW50ID0gVXNlcklucHV0U2VydmljZS5JbnB1dEVuZGVkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgICAgICAgICAgIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgfj0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMSB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgICAgICAgcmVsZWFzZUV2ZW50OkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgICBwcmVzc2luZyA9IGZhbHNlCiAgICAgICAgICAgICAgICBlbmQpCiAgCiAgICAgICAgICAgICAgICBzdGFydE51bSA9IHN0YXJ0TnVtICsgMQogICAgICAgICAgICAgICAgZnVuYyhzdGFydE51bSkKICAgICAgICAgICAgICAgIHdoaWxlIHByZXNzaW5nIGRvCiAgICAgICAgICAgICAgICAgIGlmIHRpY2soKS1zdGFydFRpbWUgPiAwLjMgdGhlbgogICAgICAgICAgICAgICAgICAgIHN0YXJ0TnVtID0gc3RhcnROdW0gKyAxCiAgICAgICAgICAgICAgICAgICAgZnVuYyhzdGFydE51bSkKICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICAgIHdhaXQoMC4xKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAKICAgICAgICAgICAgZnJhbWUuQXJyb3dGcmFtZS5VcC5JbnB1dEVuZGVkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VNb3ZlbWVudCB0aGVuCiAgICAgICAgICAgICAgICBmcmFtZS5BcnJvd0ZyYW1lLlVwLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAKICAgICAgICAgICAgZnJhbWUuQXJyb3dGcmFtZS5Eb3duLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCkKICAgICAgICAgICAgICBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZU1vdmVtZW50IHRoZW4KICAgICAgICAgICAgICAgIGZyYW1lLkFycm93RnJhbWUuRG93bi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC41CiAgICAgICAgICAgICAgZWxzZWlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCByZWxlYXNlRXZlbnQscnVuRXZlbnQKICAKICAgICAgICAgICAgICAgIGxvY2FsIHN0YXJ0VGltZSA9IHRpY2soKQogICAgICAgICAgICAgICAgbG9jYWwgcHJlc3NpbmcgPSB0cnVlCiAgICAgICAgICAgICAgICBsb2NhbCBzdGFydE51bSA9IHRvbnVtYmVyKGZyYW1lLlRleHQpCiAgCiAgICAgICAgICAgICAgICBpZiBub3Qgc3RhcnROdW0gdGhlbiByZXR1cm4gZW5kCiAgCiAgICAgICAgICAgICAgICByZWxlYXNlRXZlbnQgPSBVc2VySW5wdXRTZXJ2aWNlLklucHV0RW5kZWQ6Q29ubmVjdChmdW5jdGlvbihpbnB1dCkKICAgICAgICAgICAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSB+PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIHRoZW4gcmV0dXJuIGVuZAogICAgICAgICAgICAgICAgICByZWxlYXNlRXZlbnQ6RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgICAgIHByZXNzaW5nID0gZmFsc2UKICAgICAgICAgICAgICAgIGVuZCkKICAKICAgICAgICAgICAgICAgIHN0YXJ0TnVtID0gc3RhcnROdW0gLSAxCiAgICAgICAgICAgICAgICBmdW5jKHN0YXJ0TnVtKQogICAgICAgICAgICAgICAgd2hpbGUgcHJlc3NpbmcgZG8KICAgICAgICAgICAgICAgICAgaWYgdGljaygpLXN0YXJ0VGltZSA+IDAuMyB0aGVuCiAgICAgICAgICAgICAgICAgICAgc3RhcnROdW0gPSBzdGFydE51bSAtIDEKICAgICAgICAgICAgICAgICAgICBmdW5jKHN0YXJ0TnVtKQogICAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICAgICAgd2FpdCgwLjEpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogIAogICAgICAgICAgICBmcmFtZS5BcnJvd0ZyYW1lLkRvd24uSW5wdXRFbmRlZDpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KQogICAgICAgICAgICAgIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlTW92ZW1lbnQgdGhlbgogICAgICAgICAgICAgICAgZnJhbWUuQXJyb3dGcmFtZS5Eb3duLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZCkKICAgICAgICAgIGVuZAogIAogICAgICAgICAgY29sb3JTcGFjZS5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgICAgIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMSB0aGVuCiAgICAgICAgICAgICAgbG9jYWwgcmVsZWFzZUV2ZW50LG1vdXNlRXZlbnQKICAKICAgICAgICAgICAgICByZWxlYXNlRXZlbnQgPSBVc2VySW5wdXRTZXJ2aWNlLklucHV0RW5kZWQ6Q29ubmVjdChmdW5jdGlvbihpbnB1dCkKICAgICAgICAgICAgICAgIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgfj0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMSB0aGVuIHJldHVybiBlbmQKICAgICAgICAgICAgICAgIHJlbGVhc2VFdmVudDpEaXNjb25uZWN0KCkKICAgICAgICAgICAgICAgIG1vdXNlRXZlbnQ6RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgZW5kKQogIAogICAgICAgICAgICAgIG1vdXNlRXZlbnQgPSBVc2VySW5wdXRTZXJ2aWNlLklucHV0Q2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KQogICAgICAgICAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VNb3ZlbWVudCB0aGVuCiAgICAgICAgICAgICAgICAgIGNvbG9yU3BhY2VJbnB1dCgpCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICBlbmQpCiAgCiAgICAgICAgICAgICAgY29sb3JTcGFjZUlucHV0KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmQpCiAgCiAgICAgICAgICBjb2xvclN0cmlwLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCkKICAgICAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIHRoZW4KICAgICAgICAgICAgICBsb2NhbCByZWxlYXNlRXZlbnQsbW91c2VFdmVudAogIAogICAgICAgICAgICAgIHJlbGVhc2VFdmVudCA9IFVzZXJJbnB1dFNlcnZpY2UuSW5wdXRFbmRlZDpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KQogICAgICAgICAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSB+PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIHRoZW4gcmV0dXJuIGVuZAogICAgICAgICAgICAgICAgcmVsZWFzZUV2ZW50OkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgICAgbW91c2VFdmVudDpEaXNjb25uZWN0KCkKICAgICAgICAgICAgICBlbmQpCiAgCiAgICAgICAgICAgICAgbW91c2VFdmVudCA9IFVzZXJJbnB1dFNlcnZpY2UuSW5wdXRDaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgICAgICAgICBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZU1vdmVtZW50IHRoZW4KICAgICAgICAgICAgICAgICAgY29sb3JTdHJpcElucHV0KCkKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgIGVuZCkKICAKICAgICAgICAgICAgICBjb2xvclN0cmlwSW5wdXQoKQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZCkKICAKICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIHVwZGF0ZUh1ZShzdHIpCiAgICAgICAgICAgIGxvY2FsIG51bSA9IHRvbnVtYmVyKHN0cikKICAgICAgICAgICAgaWYgbnVtIHRoZW4KICAgICAgICAgICAgICBodWUgPSBtYXRoLmNsYW1wKG1hdGguZmxvb3IobnVtKSwwLDM1OSkvMzU5CiAgICAgICAgICAgICAgbG9jYWwgaHN2Q29sb3IgPSBDb2xvcjMuZnJvbUhTVihodWUsc2F0LHZhbCkKICAgICAgICAgICAgICByZWQsZ3JlZW4sYmx1ZSA9IGhzdkNvbG9yLnIsaHN2Q29sb3IuZyxoc3ZDb2xvci5iCiAgICAgICAgICAgICAgaHVlSW5wdXQuVGV4dCA9IHRvc3RyaW5nKGh1ZSozNTkpCiAgICAgICAgICAgICAgdXBkYXRlQ29sb3IoMSkKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmQKICAgICAgICAgIGh1ZUlucHV0LkZvY3VzTG9zdDpDb25uZWN0KGZ1bmN0aW9uKCkgdXBkYXRlSHVlKGh1ZUlucHV0LlRleHQpIGVuZCkgaG9va0J1dHRvbnMoaHVlSW5wdXQsdXBkYXRlSHVlKQogIAogICAgICAgICAgbG9jYWwgZnVuY3Rpb24gdXBkYXRlU2F0KHN0cikKICAgICAgICAgICAgbG9jYWwgbnVtID0gdG9udW1iZXIoc3RyKQogICAgICAgICAgICBpZiBudW0gdGhlbgogICAgICAgICAgICAgIHNhdCA9IG1hdGguY2xhbXAobWF0aC5mbG9vcihudW0pLDAsMjU1KS8yNTUKICAgICAgICAgICAgICBsb2NhbCBoc3ZDb2xvciA9IENvbG9yMy5mcm9tSFNWKGh1ZSxzYXQsdmFsKQogICAgICAgICAgICAgIHJlZCxncmVlbixibHVlID0gaHN2Q29sb3Iucixoc3ZDb2xvci5nLGhzdkNvbG9yLmIKICAgICAgICAgICAgICBzYXRJbnB1dC5UZXh0ID0gdG9zdHJpbmcoc2F0KjI1NSkKICAgICAgICAgICAgICB1cGRhdGVDb2xvcigxKQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZAogICAgICAgICAgc2F0SW5wdXQuRm9jdXNMb3N0OkNvbm5lY3QoZnVuY3Rpb24oKSB1cGRhdGVTYXQoc2F0SW5wdXQuVGV4dCkgZW5kKSBob29rQnV0dG9ucyhzYXRJbnB1dCx1cGRhdGVTYXQpCiAgCiAgICAgICAgICBsb2NhbCBmdW5jdGlvbiB1cGRhdGVWYWwoc3RyKQogICAgICAgICAgICBsb2NhbCBudW0gPSB0b251bWJlcihzdHIpCiAgICAgICAgICAgIGlmIG51bSB0aGVuCiAgICAgICAgICAgICAgdmFsID0gbWF0aC5jbGFtcChtYXRoLmZsb29yKG51bSksMCwyNTUpLzI1NQogICAgICAgICAgICAgIGxvY2FsIGhzdkNvbG9yID0gQ29sb3IzLmZyb21IU1YoaHVlLHNhdCx2YWwpCiAgICAgICAgICAgICAgcmVkLGdyZWVuLGJsdWUgPSBoc3ZDb2xvci5yLGhzdkNvbG9yLmcsaHN2Q29sb3IuYgogICAgICAgICAgICAgIHZhbElucHV0LlRleHQgPSB0b3N0cmluZyh2YWwqMjU1KQogICAgICAgICAgICAgIHVwZGF0ZUNvbG9yKDEpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgICB2YWxJbnB1dC5Gb2N1c0xvc3Q6Q29ubmVjdChmdW5jdGlvbigpIHVwZGF0ZVZhbCh2YWxJbnB1dC5UZXh0KSBlbmQpIGhvb2tCdXR0b25zKHZhbElucHV0LHVwZGF0ZVZhbCkKICAKICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIHVwZGF0ZVJlZChzdHIpCiAgICAgICAgICAgIGxvY2FsIG51bSA9IHRvbnVtYmVyKHN0cikKICAgICAgICAgICAgaWYgbnVtIHRoZW4KICAgICAgICAgICAgICByZWQgPSBtYXRoLmNsYW1wKG1hdGguZmxvb3IobnVtKSwwLDI1NSkvMjU1CiAgICAgICAgICAgICAgbG9jYWwgbmV3Q29sb3IgPSBDb2xvcjMubmV3KHJlZCxncmVlbixibHVlKQogICAgICAgICAgICAgIGh1ZSxzYXQsdmFsID0gQ29sb3IzLnRvSFNWKG5ld0NvbG9yKQogICAgICAgICAgICAgIHJlZElucHV0LlRleHQgPSB0b3N0cmluZyhyZWQqMjU1KQogICAgICAgICAgICAgIHVwZGF0ZUNvbG9yKDIpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgICByZWRJbnB1dC5Gb2N1c0xvc3Q6Q29ubmVjdChmdW5jdGlvbigpIHVwZGF0ZVJlZChyZWRJbnB1dC5UZXh0KSBlbmQpIGhvb2tCdXR0b25zKHJlZElucHV0LHVwZGF0ZVJlZCkKICAKICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIHVwZGF0ZUdyZWVuKHN0cikKICAgICAgICAgICAgbG9jYWwgbnVtID0gdG9udW1iZXIoc3RyKQogICAgICAgICAgICBpZiBudW0gdGhlbgogICAgICAgICAgICAgIGdyZWVuID0gbWF0aC5jbGFtcChtYXRoLmZsb29yKG51bSksMCwyNTUpLzI1NQogICAgICAgICAgICAgIGxvY2FsIG5ld0NvbG9yID0gQ29sb3IzLm5ldyhyZWQsZ3JlZW4sYmx1ZSkKICAgICAgICAgICAgICBodWUsc2F0LHZhbCA9IENvbG9yMy50b0hTVihuZXdDb2xvcikKICAgICAgICAgICAgICBncmVlbklucHV0LlRleHQgPSB0b3N0cmluZyhncmVlbioyNTUpCiAgICAgICAgICAgICAgdXBkYXRlQ29sb3IoMikKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmQKICAgICAgICAgIGdyZWVuSW5wdXQuRm9jdXNMb3N0OkNvbm5lY3QoZnVuY3Rpb24oKSB1cGRhdGVHcmVlbihncmVlbklucHV0LlRleHQpIGVuZCkgaG9va0J1dHRvbnMoZ3JlZW5JbnB1dCx1cGRhdGVHcmVlbikKICAKICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIHVwZGF0ZUJsdWUoc3RyKQogICAgICAgICAgICBsb2NhbCBudW0gPSB0b251bWJlcihzdHIpCiAgICAgICAgICAgIGlmIG51bSB0aGVuCiAgICAgICAgICAgICAgYmx1ZSA9IG1hdGguY2xhbXAobWF0aC5mbG9vcihudW0pLDAsMjU1KS8yNTUKICAgICAgICAgICAgICBsb2NhbCBuZXdDb2xvciA9IENvbG9yMy5uZXcocmVkLGdyZWVuLGJsdWUpCiAgICAgICAgICAgICAgaHVlLHNhdCx2YWwgPSBDb2xvcjMudG9IU1YobmV3Q29sb3IpCiAgICAgICAgICAgICAgYmx1ZUlucHV0LlRleHQgPSB0b3N0cmluZyhibHVlKjI1NSkKICAgICAgICAgICAgICB1cGRhdGVDb2xvcigyKQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZAogICAgICAgICAgYmx1ZUlucHV0LkZvY3VzTG9zdDpDb25uZWN0KGZ1bmN0aW9uKCkgdXBkYXRlQmx1ZShibHVlSW5wdXQuVGV4dCkgZW5kKSBob29rQnV0dG9ucyhibHVlSW5wdXQsdXBkYXRlQmx1ZSkKICAKICAgICAgICAgIGxvY2FsIGNvbG9yQ2hvaWNlID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKICAgICAgICAgIGNvbG9yQ2hvaWNlLk5hbWUgPSAiQ2hvaWNlIgogICAgICAgICAgY29sb3JDaG9pY2UuU2l6ZSA9IFVEaW0yLm5ldygwLDI1LDAsMTgpCiAgICAgICAgICBjb2xvckNob2ljZS5Cb3JkZXJDb2xvcjMgPSBDb2xvcjMubmV3KDk2LzI1NSw5Ni8yNTUsOTYvMjU1KQogICAgICAgICAgY29sb3JDaG9pY2UuVGV4dCA9ICIiCiAgICAgICAgICBjb2xvckNob2ljZS5BdXRvQnV0dG9uQ29sb3IgPSBmYWxzZQogICAgICAgICAgY29sb3JDaG9pY2UuWkluZGV4ID0gMTAKICAKICAgICAgICAgIGxvY2FsIHJvdyA9IDAKICAgICAgICAgIGxvY2FsIGNvbHVtbiA9IDAKICAgICAgICAgIGZvciBpLHYgaW4gcGFpcnMoYmFzaWNDb2xvcnMpIGRvCiAgICAgICAgICAgIGxvY2FsIG5ld0NvbG9yID0gY29sb3JDaG9pY2U6Q2xvbmUoKQogICAgICAgICAgICBuZXdDb2xvci5CYWNrZ3JvdW5kQ29sb3IzID0gdgogICAgICAgICAgICBuZXdDb2xvci5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLDEgKyAzMCpjb2x1bW4sMCwyMSArIDIzKnJvdykKICAKICAgICAgICAgICAgbmV3Q29sb3IuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgICAgcmVkLGdyZWVuLGJsdWUgPSB2LnIsdi5nLHYuYgogICAgICAgICAgICAgIGxvY2FsIG5ld0NvbG9yID0gQ29sb3IzLm5ldyhyZWQsZ3JlZW4sYmx1ZSkKICAgICAgICAgICAgICBodWUsc2F0LHZhbCA9IENvbG9yMy50b0hTVihuZXdDb2xvcikKICAgICAgICAgICAgICB1cGRhdGVDb2xvcigpCiAgICAgICAgICAgIGVuZCkJCiAgCiAgICAgICAgICAgIG5ld0NvbG9yLlBhcmVudCA9IGJhc2ljQ29sb3JzRnJhbWUKICAgICAgICAgICAgY29sdW1uID0gY29sdW1uICsgMQogICAgICAgICAgICBpZiBjb2x1bW4gPT0gNiB0aGVuIHJvdyA9IHJvdyArIDEgY29sdW1uID0gMCBlbmQKICAgICAgICAgIGVuZAogIAogICAgICAgICAgcm93ID0gMAogICAgICAgICAgY29sdW1uID0gMAogICAgICAgICAgZm9yIGkgPSAxLDEyIGRvCiAgICAgICAgICAgIGxvY2FsIGNvbG9yID0gY3VzdG9tQ29sb3JzW2ldIG9yIENvbG9yMy5uZXcoMCwwLDApCiAgICAgICAgICAgIGxvY2FsIG5ld0NvbG9yID0gY29sb3JDaG9pY2U6Q2xvbmUoKQogICAgICAgICAgICBuZXdDb2xvci5CYWNrZ3JvdW5kQ29sb3IzID0gY29sb3IKICAgICAgICAgICAgbmV3Q29sb3IuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwxICsgMzAqY29sdW1uLDAsMjAgKyAyMypyb3cpCiAgCiAgICAgICAgICAgIG5ld0NvbG9yLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgIGxvY2FsIGN1ckNvbG9yID0gY3VzdG9tQ29sb3JzW2ldIG9yIENvbG9yMy5uZXcoMCwwLDApCiAgICAgICAgICAgICAgcmVkLGdyZWVuLGJsdWUgPSBjdXJDb2xvci5yLGN1ckNvbG9yLmcsY3VyQ29sb3IuYgogICAgICAgICAgICAgIGh1ZSxzYXQsdmFsID0gQ29sb3IzLnRvSFNWKGN1ckNvbG9yKQogICAgICAgICAgICAgIHVwZGF0ZUNvbG9yKCkKICAgICAgICAgICAgZW5kKQogIAogICAgICAgICAgICBuZXdDb2xvci5Nb3VzZUJ1dHRvbjJDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgICBjdXN0b21Db2xvcnNbaV0gPSBjaG9zZW5Db2xvcgogICAgICAgICAgICAgIG5ld0NvbG9yLkJhY2tncm91bmRDb2xvcjMgPSBjaG9zZW5Db2xvcgogICAgICAgICAgICBlbmQpCiAgCiAgICAgICAgICAgIG5ld0NvbG9yLlBhcmVudCA9IGN1c3RvbUNvbG9yc0ZyYW1lCiAgICAgICAgICAgIGNvbHVtbiA9IGNvbHVtbiArIDEKICAgICAgICAgICAgaWYgY29sdW1uID09IDYgdGhlbiByb3cgPSByb3cgKyAxIGNvbHVtbiA9IDAgZW5kCiAgICAgICAgICBlbmQKICAKICAgICAgICAgIHNoYWRlMUJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkgaWYgbmV3TXQuQ29uZmlybSB0aGVuIG5ld010OkNvbmZpcm0oY2hvc2VuQ29sb3Isc2hhZGUxKSBlbmQgZW5kKQogICAgICAgICAgc2hhZGUxQnV0dG9uLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCkgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VNb3ZlbWVudCB0aGVuIHNoYWRlMUJ1dHRvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC40IGVuZCBlbmQpCiAgICAgICAgICBzaGFkZTFCdXR0b24uSW5wdXRFbmRlZDpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KSBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZU1vdmVtZW50IHRoZW4gc2hhZGUxQnV0dG9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwIGVuZCBlbmQpCiAgCiAgICAgICAgICBzaGFkZTJCdXR0b24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpIGlmIG5ld010LkNvbmZpcm0gdGhlbiBuZXdNdDpDb25maXJtKGNob3NlbkNvbG9yLHNoYWRlMikgZW5kIGVuZCkKICAgICAgICAgIHNoYWRlMkJ1dHRvbi5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlTW92ZW1lbnQgdGhlbiBzaGFkZTJCdXR0b24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuNCBlbmQgZW5kKQogICAgICAgICAgc2hhZGUyQnV0dG9uLklucHV0RW5kZWQ6Q29ubmVjdChmdW5jdGlvbihpbnB1dCkgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VNb3ZlbWVudCB0aGVuIHNoYWRlMkJ1dHRvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMCBlbmQgZW5kKQogIAogICAgICAgICAgc2hhZGUzQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKSBpZiBuZXdNdC5Db25maXJtIHRoZW4gbmV3TXQ6Q29uZmlybShjaG9zZW5Db2xvcixzaGFkZTMpIGVuZCBlbmQpCiAgICAgICAgICBzaGFkZTNCdXR0b24uSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KSBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZU1vdmVtZW50IHRoZW4gc2hhZGUzQnV0dG9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjQgZW5kIGVuZCkKICAgICAgICAgIHNoYWRlM0J1dHRvbi5JbnB1dEVuZGVkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlTW92ZW1lbnQgdGhlbiBzaGFkZTNCdXR0b24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAgZW5kIGVuZCkKICAKICAgICAgICAgIHRleHQxQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKSBpZiBuZXdNdC5Db25maXJtIHRoZW4gbmV3TXQ6Q29uZmlybShjaG9zZW5Db2xvcix0ZXh0MSkgZW5kIGVuZCkKICAgICAgICAgIHRleHQxQnV0dG9uLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCkgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VNb3ZlbWVudCB0aGVuIHRleHQxQnV0dG9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjQgZW5kIGVuZCkKICAgICAgICAgIHRleHQxQnV0dG9uLklucHV0RW5kZWQ6Q29ubmVjdChmdW5jdGlvbihpbnB1dCkgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VNb3ZlbWVudCB0aGVuIHRleHQxQnV0dG9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwIGVuZCBlbmQpCiAgCiAgICAgICAgICB0ZXh0MkJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkgaWYgbmV3TXQuQ29uZmlybSB0aGVuIG5ld010OkNvbmZpcm0oY2hvc2VuQ29sb3IsdGV4dDIpIGVuZCBlbmQpCiAgICAgICAgICB0ZXh0MkJ1dHRvbi5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlTW92ZW1lbnQgdGhlbiB0ZXh0MkJ1dHRvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC40IGVuZCBlbmQpCiAgICAgICAgICB0ZXh0MkJ1dHRvbi5JbnB1dEVuZGVkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlTW92ZW1lbnQgdGhlbiB0ZXh0MkJ1dHRvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMCBlbmQgZW5kKQogIAogICAgICAgICAgc2Nyb2xsQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKSBpZiBuZXdNdC5Db25maXJtIHRoZW4gbmV3TXQ6Q29uZmlybShjaG9zZW5Db2xvcixzY3JvbGwpIGVuZCBlbmQpCiAgICAgICAgICBzY3JvbGxCdXR0b24uSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KSBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZU1vdmVtZW50IHRoZW4gc2Nyb2xsQnV0dG9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjQgZW5kIGVuZCkKICAgICAgICAgIHNjcm9sbEJ1dHRvbi5JbnB1dEVuZGVkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlTW92ZW1lbnQgdGhlbiBzY3JvbGxCdXR0b24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAgZW5kIGVuZCkKICAKICAgICAgICAgIGNhbmNlbEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkgaWYgbmV3TXQuQ2FuY2VsIHRoZW4gbmV3TXQ6Q2FuY2VsKCkgZW5kIGVuZCkKICAgICAgICAgIGNhbmNlbEJ1dHRvbi5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlTW92ZW1lbnQgdGhlbiBjYW5jZWxCdXR0b24uQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDAuNCBlbmQgZW5kKQogICAgICAgICAgY2FuY2VsQnV0dG9uLklucHV0RW5kZWQ6Q29ubmVjdChmdW5jdGlvbihpbnB1dCkgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VNb3ZlbWVudCB0aGVuIGNhbmNlbEJ1dHRvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMCBlbmQgZW5kKQogIAogICAgICAgICAgZGVmYXVsdEJ1dHRvbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkgaWYgbmV3TXQuRGVmYXVsdCB0aGVuIG5ld010OkRlZmF1bHQoKSBlbmQgZW5kKQogICAgICAgICAgZGVmYXVsdEJ1dHRvbi5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpIGlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlTW92ZW1lbnQgdGhlbiBkZWZhdWx0QnV0dG9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwLjQgZW5kIGVuZCkKICAgICAgICAgIGRlZmF1bHRCdXR0b24uSW5wdXRFbmRlZDpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KSBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Nb3VzZU1vdmVtZW50IHRoZW4gZGVmYXVsdEJ1dHRvbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMCBlbmQgZW5kKQogIAogICAgICAgICAgcGlja2VyRXhpdC5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgcGlja2VyOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAuNSwgLTIxOSwgMCwgLTUwMCksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKQogICAgICAgICAgZW5kKQogIAogICAgICAgICAgdXBkYXRlQ29sb3IoKQogIAogICAgICAgICAgbmV3TXQuU2V0Q29sb3IgPSBmdW5jdGlvbihzZWxmLGNvbG9yKQogICAgICAgICAgICByZWQsZ3JlZW4sYmx1ZSA9IGNvbG9yLnIsY29sb3IuZyxjb2xvci5iCiAgICAgICAgICAgIGh1ZSxzYXQsdmFsID0gQ29sb3IzLnRvSFNWKGNvbG9yKQogICAgICAgICAgICB1cGRhdGVDb2xvcigpCiAgICAgICAgICBlbmQKICAKICAgICAgICAgIHJldHVybiBuZXdNdAogICAgICAgIGVuZAogICAgICBlbmQKICAKICAgICAgcGlja2VyOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAuNSwgLTIxOSwgMCwgMTAwKSwgIkluT3V0IiwgIlF1YXJ0IiwgMC41LCB0cnVlLCBuaWwpCiAgCiAgICAgIGxvY2FsIE5waWNrZXIgPSBDb2xvclBpY2tlci5uZXcoKQogICAgICBOcGlja2VyLkNvbmZpcm0gPSBmdW5jdGlvbihzZWxmLGNvbG9yLGN0eXBlKSB1cGRhdGVDb2xvcnMoY29sb3IsY3R5cGUpIHdhaXQoKSB1cGRhdGVzYXZlcygpIGVuZAogICAgICBOcGlja2VyLkNhbmNlbCA9IGZ1bmN0aW9uKHNlbGYpCiAgICAgICAgdXBkYXRlQ29sb3JzKGNhY2hlX2N1cnJlbnRTaGFkZTEsc2hhZGUxKQogICAgICAgIHVwZGF0ZUNvbG9ycyhjYWNoZV9jdXJyZW50U2hhZGUyLHNoYWRlMikKICAgICAgICB1cGRhdGVDb2xvcnMoY2FjaGVfY3VycmVudFNoYWRlMyxzaGFkZTMpCiAgICAgICAgdXBkYXRlQ29sb3JzKGNhY2hlX2N1cnJlbnRUZXh0MSx0ZXh0MSkKICAgICAgICB1cGRhdGVDb2xvcnMoY2FjaGVfY3VycmVudFRleHQyLHRleHQyKQogICAgICAgIHVwZGF0ZUNvbG9ycyhjYWNoZV9jdXJyZW50U2Nyb2xsLHNjcm9sbCkKICAgICAgICB3YWl0KCkKICAgICAgICB1cGRhdGVzYXZlcygpCiAgICAgIGVuZAogICAgICBOcGlja2VyLkRlZmF1bHQgPSBmdW5jdGlvbihzZWxmKQogICAgICAgIHVwZGF0ZUNvbG9ycyhDb2xvcjMuZnJvbVJHQigzNiwgMzYsIDM3KSxzaGFkZTEpCiAgICAgICAgdXBkYXRlQ29sb3JzKENvbG9yMy5mcm9tUkdCKDQ2LCA0NiwgNDcpLHNoYWRlMikKICAgICAgICB1cGRhdGVDb2xvcnMoQ29sb3IzLmZyb21SR0IoNzgsIDc4LCA3OSksc2hhZGUzKQogICAgICAgIHVwZGF0ZUNvbG9ycyhDb2xvcjMubmV3KDEsIDEsIDEpLHRleHQxKQogICAgICAgIHVwZGF0ZUNvbG9ycyhDb2xvcjMubmV3KDAsIDAsIDApLHRleHQyKQogICAgICAgIHVwZGF0ZUNvbG9ycyhDb2xvcjMuZnJvbVJHQig3OCw3OCw3OSksc2Nyb2xsKQogICAgICAgIHdhaXQoKQogICAgICAgIHVwZGF0ZXNhdmVzKCkKICAgICAgZW5kCiAgICBlbHNlCiAgICAgIHBpY2tlcjpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLjUsIC0yMTksIDAsIDEwMCksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKQogICAgZW5kCiAgZW5kKQogIAogIAogIFNldHRpbmdzQnV0dG9uLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgaWYgU2V0dGluZ3NPcGVuID09IGZhbHNlIHRoZW4gU2V0dGluZ3NPcGVuID0gdHJ1ZQogICAgICBTZXR0aW5nczpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLCAwLCAwLCA0NSksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKQogICAgICBDTURzRi5WaXNpYmxlID0gZmFsc2UKICAgIGVsc2UgU2V0dGluZ3NPcGVuID0gZmFsc2UKICAgICAgQ01Ec0YuVmlzaWJsZSA9IHRydWUKICAgICAgU2V0dGluZ3M6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMCwgMCwgMCwgMjIwKSwgIkluT3V0IiwgIlF1YXJ0IiwgMC41LCB0cnVlLCBuaWwpCiAgICBlbmQKICBlbmQpCiAgCiAgT24uTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBpZiBpc0hpZGRlbiA9PSBmYWxzZSB0aGVuCiAgICAgIGlmIFN0YXlPcGVuID09IGZhbHNlIHRoZW4KICAgICAgICBTdGF5T3BlbiA9IHRydWUKICAgICAgICBPbi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMAogICAgICBlbHNlCiAgICAgICAgU3RheU9wZW4gPSBmYWxzZQogICAgICAgIE9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgIGVuZAogICAgICB1cGRhdGVzYXZlcygpCiAgICBlbmQKICBlbmQpCiAgCiAgQ2xlYXIuTW91c2VCdXR0b24xRG93bjpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGZvciBfLCBjaGlsZCBpbiBwYWlycyhzY3JvbGxfMjpHZXRDaGlsZHJlbigpKSBkbwogICAgICBjaGlsZDpEZXN0cm95KCkKICAgIGVuZAogICAgc2Nyb2xsXzIuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLCAwLCAwLCAxMCkKICBlbmQpCiAgCiAgQ2xlYXJfMi5Nb3VzZUJ1dHRvbjFEb3duOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgZm9yIF8sIGNoaWxkIGluIHBhaXJzKHNjcm9sbF8zOkdldENoaWxkcmVuKCkpIGRvCiAgICAgIGNoaWxkOkRlc3Ryb3koKQogICAgZW5kCiAgICBzY3JvbGxfMy5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDEwKQogIGVuZCkKICAKICBUb2dnbGUuTW91c2VCdXR0b24xRG93bjpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGlmIGxvZ3NFbmFibGVkIHRoZW4KICAgICAgbG9nc0VuYWJsZWQgPSBmYWxzZQogICAgICBUb2dnbGUuVGV4dCA9ICdEaXNhYmxlZCcKICAgICAgdXBkYXRlc2F2ZXMoKQogICAgZWxzZQogICAgICBsb2dzRW5hYmxlZCA9IHRydWUKICAgICAgVG9nZ2xlLlRleHQgPSAnRW5hYmxlZCcKICAgICAgdXBkYXRlc2F2ZXMoKQogICAgZW5kCiAgZW5kKQogIAogIFRvZ2dsZV8yLk1vdXNlQnV0dG9uMURvd246Q29ubmVjdChmdW5jdGlvbigpCiAgICBpZiBqTG9nc0VuYWJsZWQgdGhlbgogICAgICBqTG9nc0VuYWJsZWQgPSBmYWxzZQogICAgICBUb2dnbGVfMi5UZXh0ID0gJ0Rpc2FibGVkJwogICAgICB1cGRhdGVzYXZlcygpCiAgICBlbHNlCiAgICAgIGpMb2dzRW5hYmxlZCA9IHRydWUKICAgICAgVG9nZ2xlXzIuVGV4dCA9ICdFbmFibGVkJwogICAgICB1cGRhdGVzYXZlcygpCiAgICBlbmQKICBlbmQpCiAgCiAgc2VsZWN0Q2hhdC5Nb3VzZUJ1dHRvbjFEb3duOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgam9pbi5WaXNpYmxlID0gZmFsc2UKICAgIGNoYXQuVmlzaWJsZSA9IHRydWUKICAgIHRhYmxlLnJlbW92ZShzaGFkZTMsdGFibGUuZmluZChzaGFkZTMsc2VsZWN0Q2hhdCkpCiAgICB0YWJsZS5yZW1vdmUoc2hhZGUyLHRhYmxlLmZpbmQoc2hhZGUyLHNlbGVjdEpvaW4pKQogICAgdGFibGUuaW5zZXJ0KHNoYWRlMixzZWxlY3RDaGF0KQogICAgdGFibGUuaW5zZXJ0KHNoYWRlMyxzZWxlY3RKb2luKQogICAgc2VsZWN0Sm9pbi5CYWNrZ3JvdW5kQ29sb3IzID0gY3VycmVudFNoYWRlMwogICAgc2VsZWN0Q2hhdC5CYWNrZ3JvdW5kQ29sb3IzID0gY3VycmVudFNoYWRlMgogIGVuZCkKICAKICBzZWxlY3RKb2luLk1vdXNlQnV0dG9uMURvd246Q29ubmVjdChmdW5jdGlvbigpCiAgICBjaGF0LlZpc2libGUgPSBmYWxzZQogICAgam9pbi5WaXNpYmxlID0gdHJ1ZQkKICAgIHRhYmxlLnJlbW92ZShzaGFkZTMsdGFibGUuZmluZChzaGFkZTMsc2VsZWN0Sm9pbikpCiAgICB0YWJsZS5yZW1vdmUoc2hhZGUyLHRhYmxlLmZpbmQoc2hhZGUyLHNlbGVjdENoYXQpKQogICAgdGFibGUuaW5zZXJ0KHNoYWRlMixzZWxlY3RKb2luKQogICAgdGFibGUuaW5zZXJ0KHNoYWRlMyxzZWxlY3RDaGF0KQogICAgc2VsZWN0Q2hhdC5CYWNrZ3JvdW5kQ29sb3IzID0gY3VycmVudFNoYWRlMwogICAgc2VsZWN0Sm9pbi5CYWNrZ3JvdW5kQ29sb3IzID0gY3VycmVudFNoYWRlMgogIGVuZCkKICAKICBpZiBub3Qgd3JpdGVmaWxlRXhwbG9pdCgpIHRoZW4KICAgICAgbm90aWZ5KCJTYXZlcyIsICJZb3VyIGV4cGxvaXQgZG9lcyBub3Qgc3VwcG9ydCByZWFkL3dyaXRlIGZpbGUuIFlvdXIgc2V0dGluZ3Mgd2lsbCBub3Qgc2F2ZS4iKQogIGVuZAogIAogIENoYXRMb2cgPSBmdW5jdGlvbihwbHIpCiAgICBwbHIuQ2hhdHRlZDpDb25uZWN0KGZ1bmN0aW9uKE1lc3NhZ2UpCiAgICAgIGlmIGxvZ3NFbmFibGVkID09IHRydWUgdGhlbgogICAgICAgIENyZWF0ZUxhYmVsKHBsci5OYW1lLE1lc3NhZ2UpCiAgICAgIGVuZAogICAgZW5kKQogIGVuZAogIAogIEpvaW5Mb2cgPSBmdW5jdGlvbihwbHIpCiAgICBpZiBqTG9nc0VuYWJsZWQgPT0gdHJ1ZSB0aGVuCiAgICAgIENyZWF0ZUpvaW5MYWJlbChwbHIscGxyLlVzZXJJZCkKICAgIGVuZAogIGVuZAogIAogIENsZWFuRmlsZU5hbWUgPSBmdW5jdGlvbihuYW1lKQogICAgICByZXR1cm4gdG9zdHJpbmcobmFtZSk6Z3N1YigiWypcXD86PD58XSsiLCAiIik6c3ViKDEsIDE3NSkKICBlbmQKICAKICBTYXZlQ2hhdGxvZ3MuTW91c2VCdXR0b24xRG93bjpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGlmIHdyaXRlZmlsZUV4cGxvaXQoKSB0aGVuCiAgICAgIGlmICNzY3JvbGxfMjpHZXRDaGlsZHJlbigpID4gMCB0aGVuCiAgICAgICAgbm90aWZ5KCJMb2FkaW5nIiwnSG9sZCBvbiBhIHNlYycpCiAgICAgICAgbG9jYWwgcGxhY2VOYW1lID0gQ2xlYW5GaWxlTmFtZShNYXJrZXRwbGFjZVNlcnZpY2U6R2V0UHJvZHVjdEluZm8oUGxhY2VJZCkuTmFtZSkKICAgICAgICBsb2NhbCB3cml0ZWxvZ3MgPSAnLS0gSW5maW5pdGUgWWllbGQgQ2hhdCBsb2dzIGZvciAiJy4ucGxhY2VOYW1lLi4nIlxuJwogICAgICAgIGZvciBfLCBjaGlsZCBpbiBwYWlycyhzY3JvbGxfMjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgd3JpdGVsb2dzID0gd3JpdGVsb2dzLi4nXG4nLi5jaGlsZC5UZXh0CiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgd3JpdGVsb2dzRmlsZSA9IHRvc3RyaW5nKHdyaXRlbG9ncykKICAgICAgICBsb2NhbCBmaWxlZXh0ID0gMAogICAgICAgIGxvY2FsIGZ1bmN0aW9uIG5hbWVGaWxlKCkKICAgICAgICAgIGxvY2FsIGZpbGUKICAgICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkgZmlsZSA9IHJlYWRmaWxlKHBsYWNlTmFtZS4uJyBDaGF0IExvZ3MgKCcuLmZpbGVleHQuLicpLnR4dCcpIGVuZCkKICAgICAgICAgIGlmIGZpbGUgdGhlbgogICAgICAgICAgICBmaWxlZXh0ID0gZmlsZWV4dCsxCiAgICAgICAgICAgIG5hbWVGaWxlKCkKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgd3JpdGVmaWxlQ29vbGRvd24ocGxhY2VOYW1lLi4nIENoYXQgTG9ncyAoJy4uZmlsZWV4dC4uJykudHh0Jywgd3JpdGVsb2dzRmlsZSkKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIG5hbWVGaWxlKCkKICAgICAgICBub3RpZnkoJ0NoYXQgTG9ncycsJ1NhdmVkIGNoYXQgbG9ncyB0byB0aGUgd29ya3NwYWNlIGZvbGRlciB3aXRoaW4geW91ciBleHBsb2l0IGZvbGRlci4nKQogICAgICBlbmQKICAgIGVsc2UKICAgICAgbm90aWZ5KCdDaGF0IExvZ3MnLCdZb3VyIGV4cGxvaXQgZG9lcyBub3Qgc3VwcG9ydCB3cml0ZSBmaWxlLiBZb3UgY2Fubm90IHNhdmUgY2hhdCBsb2dzLicpCiAgICBlbmQKICBlbmQpCiAgCiAgZm9yIF8sIHBsciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgQ2hhdExvZyhwbHIpCiAgZW5kCiAgCiAgUGxheWVycy5QbGF5ZXJSZW1vdmluZzpDb25uZWN0KGZ1bmN0aW9uKHBsYXllcikKICAgIGlmIEVTUGVuYWJsZWQgb3IgQ0hNU2VuYWJsZWQgb3IgQ09SRUdVSTpGaW5kRmlyc3RDaGlsZChwbGF5ZXIuTmFtZS4uJ19MQycpIHRoZW4KICAgICAgZm9yIGksdiBpbiBwYWlycyhDT1JFR1VJOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdi5OYW1lID09IHBsYXllci5OYW1lLi4nX0VTUCcgb3Igdi5OYW1lID09IHBsYXllci5OYW1lLi4nX0xDJyBvciB2Lk5hbWUgPT0gcGxheWVyLk5hbWUuLidfQ0hNUycgdGhlbgogICAgICAgICAgdjpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICAgIGlmIHZpZXdpbmcgfj0gbmlsIGFuZCBwbGF5ZXIgPT0gdmlld2luZyB0aGVuCiAgICAgIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNhbWVyYVN1YmplY3QgPSBQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICB2aWV3aW5nID0gbmlsCiAgICAgIGlmIHZpZXdEaWVkIHRoZW4KICAgICAgICB2aWV3RGllZDpEaXNjb25uZWN0KCkKICAgICAgICB2aWV3Q2hhbmdlZDpEaXNjb25uZWN0KCkKICAgICAgZW5kCiAgICAgIG5vdGlmeSgnU3BlY3RhdGUnLCdWaWV3IHR1cm5lZCBvZmYgKHBsYXllciBsZWZ0KScpCiAgICBlbmQKICAgIGV2ZW50RWRpdG9yLkZpcmVFdmVudCgiT25MZWF2ZSIsIHBsYXllci5OYW1lKQogIGVuZCkKICAKICBFeGl0Lk1vdXNlQnV0dG9uMURvd246Q29ubmVjdChmdW5jdGlvbigpCiAgICBsb2dzOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAsIDAsIDEsIDEwKSwgIkluT3V0IiwgIlF1YXJ0IiwgMC4zLCB0cnVlLCBuaWwpCiAgZW5kKQogIAogIEhpZGUuTW91c2VCdXR0b24xRG93bjpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGlmIGxvZ3MuUG9zaXRpb24gfj0gVURpbTIubmV3KDAsIDAsIDEsIC0yMCkgdGhlbgogICAgICBsb2dzOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAsIDAsIDEsIC0yMCksICJJbk91dCIsICJRdWFydCIsIDAuMywgdHJ1ZSwgbmlsKQogICAgZWxzZQogICAgICBsb2dzOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAsIDAsIDEsIC0yNjUpLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjMsIHRydWUsIG5pbCkKICAgIGVuZAogIGVuZCkKICAKICBFdmVudEJpbmQuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBldmVudEVkaXRvci5GcmFtZTpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLjUsLTE3NSwwLjUsLTEwMSksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKQogIGVuZCkKICAKICBLZXliaW5kcy5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIEtleWJpbmRzRnJhbWU6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMCwgMCwgMCwgMCksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKQogICAgd2FpdCgwLjUpCiAgICBTZXR0aW5nc0hvbGRlci5WaXNpYmxlID0gZmFsc2UKICBlbmQpCiAgCiAgQ2xvc2UuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBTZXR0aW5nc0hvbGRlci5WaXNpYmxlID0gdHJ1ZQogICAgS2V5YmluZHNGcmFtZTpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLCAwLCAwLCAxNzUpLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkKICBlbmQpCiAgCiAgS2V5YmluZHMuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBLZXliaW5kc0ZyYW1lOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAsIDAsIDAsIDApLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkKICAgIHdhaXQoMC41KQogICAgU2V0dGluZ3NIb2xkZXIuVmlzaWJsZSA9IGZhbHNlCiAgZW5kKQogIAogIEFkZC5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIEtleWJpbmRFZGl0b3I6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMC41LCAtMTgwLCAwLCAyNjApLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkKICBlbmQpCiAgCiAgRGVsZXRlLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgYmluZHMgPSB7fQogICAgcmVmcmVzaGJpbmRzKCkKICAgIHVwZGF0ZXNhdmVzKCkKICAgIG5vdGlmeSgnS2V5YmluZHMgVXBkYXRlZCcsJ1JlbW92ZWQgYWxsIGtleWJpbmRzJykKICBlbmQpCiAgCiAgQ2xvc2VfMi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIFNldHRpbmdzSG9sZGVyLlZpc2libGUgPSB0cnVlCiAgICBBbGlhc2VzRnJhbWU6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMCwgMCwgMCwgMTc1KSwgIkluT3V0IiwgIlF1YXJ0IiwgMC41LCB0cnVlLCBuaWwpCiAgZW5kKQogIAogIEFsaWFzZXMuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBBbGlhc2VzRnJhbWU6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMCwgMCwgMCwgMCksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKQogICAgd2FpdCgwLjUpCiAgICBTZXR0aW5nc0hvbGRlci5WaXNpYmxlID0gZmFsc2UKICBlbmQpCiAgCiAgQ2xvc2VfMy5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIFNldHRpbmdzSG9sZGVyLlZpc2libGUgPSB0cnVlCiAgICBQb3NpdGlvbnNGcmFtZTpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLCAwLCAwLCAxNzUpLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkKICBlbmQpCiAgCiAgUG9zaXRpb25zLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgUG9zaXRpb25zRnJhbWU6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMCwgMCwgMCwgMCksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKQogICAgd2FpdCgwLjUpCiAgICBTZXR0aW5nc0hvbGRlci5WaXNpYmxlID0gZmFsc2UKICBlbmQpCiAgCiAgbG9jYWwgc2VsZWN0aW9uQm94ID0gSW5zdGFuY2UubmV3KCJTZWxlY3Rpb25Cb3giKQogIHNlbGVjdGlvbkJveC5OYW1lID0gcmFuZG9tU3RyaW5nKCkKICBzZWxlY3Rpb25Cb3guQ29sb3IzID0gQ29sb3IzLm5ldygyNTUsMjU1LDI1NSkKICBzZWxlY3Rpb25Cb3guQWRvcm5lZSA9IG5pbAogIHNlbGVjdGlvbkJveC5QYXJlbnQgPSBQQVJFTlQKICAKICBsb2NhbCBzZWxlY3RlZCA9IEluc3RhbmNlLm5ldygiU2VsZWN0aW9uQm94IikKICBzZWxlY3RlZC5OYW1lID0gcmFuZG9tU3RyaW5nKCkKICBzZWxlY3RlZC5Db2xvcjMgPSBDb2xvcjMubmV3KDAsMTY2LDApCiAgc2VsZWN0ZWQuQWRvcm5lZSA9IG5pbAogIHNlbGVjdGVkLlBhcmVudCA9IFBBUkVOVAogIAogIGxvY2FsIEFjdGl2YXRlSGlnaGxpZ2h0ID0gbmlsCiAgbG9jYWwgQ2xpY2tTZWxlY3QgPSBuaWwKICBmdW5jdGlvbiBzZWxlY3RQYXJ0KCkKICAgIFRvUGFydEZyYW1lOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAuNSwgLTE4MCwgMCwgMzM1KSwgIkluT3V0IiwgIlF1YXJ0IiwgMC41LCB0cnVlLCBuaWwpCiAgICBsb2NhbCBmdW5jdGlvbiBIaWdobGlnaHRQYXJ0KCkKICAgICAgaWYgc2VsZWN0ZWQuQWRvcm5lZSB+PSBJWU1vdXNlLlRhcmdldCB0aGVuCiAgICAgICAgc2VsZWN0aW9uQm94LkFkb3JuZWUgPSBJWU1vdXNlLlRhcmdldAogICAgICBlbHNlCiAgICAgICAgc2VsZWN0aW9uQm94LkFkb3JuZWUgPSBuaWwKICAgICAgZW5kCiAgICBlbmQKICAgIEFjdGl2YXRlSGlnaGxpZ2h0ID0gSVlNb3VzZS5Nb3ZlOkNvbm5lY3QoSGlnaGxpZ2h0UGFydCkKICAgIGxvY2FsIGZ1bmN0aW9uIFNlbGVjdFBhcnQoKQogICAgICBpZiBJWU1vdXNlLlRhcmdldCB+PSBuaWwgdGhlbgogICAgICAgIHNlbGVjdGVkLkFkb3JuZWUgPSBJWU1vdXNlLlRhcmdldAogICAgICAgIFBhdGguVGV4dCA9IGdldEhpZXJhcmNoeShJWU1vdXNlLlRhcmdldCkKICAgICAgZW5kCiAgICBlbmQKICAgIENsaWNrU2VsZWN0ID0gSVlNb3VzZS5CdXR0b24xRG93bjpDb25uZWN0KFNlbGVjdFBhcnQpCiAgZW5kCiAgCiAgUGFydC5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIHNlbGVjdFBhcnQoKQogIGVuZCkKICAKICBFeGl0XzQuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBUb1BhcnRGcmFtZTpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLjUsIC0xODAsIDAsIC01MDApLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkKICAgIGlmIEFjdGl2YXRlSGlnaGxpZ2h0IHRoZW4KICAgICAgQWN0aXZhdGVIaWdobGlnaHQ6RGlzY29ubmVjdCgpCiAgICBlbmQKICAgIGlmIENsaWNrU2VsZWN0IHRoZW4KICAgICAgQ2xpY2tTZWxlY3Q6RGlzY29ubmVjdCgpCiAgICBlbmQKICAgIHNlbGVjdGlvbkJveC5BZG9ybmVlID0gbmlsCiAgICBzZWxlY3RlZC5BZG9ybmVlID0gbmlsCiAgICBQYXRoLlRleHQgPSAiIgogIGVuZCkKICAKICBDb3B5UGF0aC5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGlmIFBhdGguVGV4dCB+PSAiIiB0aGVuCiAgICAgIHRvQ2xpcGJvYXJkKFBhdGguVGV4dCkKICAgIGVsc2UKICAgICAgbm90aWZ5KCdDb3B5IFBhdGgnLCdTZWxlY3QgYSBwYXJ0IHRvIGNvcHkgaXRzIHBhdGgnKQogICAgZW5kCiAgZW5kKQogIAogIENob29zZVBhcnQuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBpZiBQYXRoLlRleHQgfj0gIiIgdGhlbgogICAgICBsb2NhbCB0cE5hbWVFeHQgPSAnJwogICAgICBsb2NhbCBmdW5jdGlvbiBoYW5kbGVXcE5hbWVzKCkKICAgICAgICBsb2NhbCBGb3VuZER1cGUgPSBmYWxzZQogICAgICAgIGZvciBpLHYgaW4gcGFpcnMocFdheVBvaW50cykgZG8KICAgICAgICAgIGlmIHYuTkFNRTpsb3dlcigpID09IHNlbGVjdGVkLkFkb3JuZWUuTmFtZTpsb3dlcigpLi50cE5hbWVFeHQgdGhlbgogICAgICAgICAgICBGb3VuZER1cGUgPSB0cnVlCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBpZiBub3QgRm91bmREdXBlIHRoZW4KICAgICAgICAgIG5vdGlmeSgnTW9kaWZpZWQgV2F5cG9pbnRzJywiQ3JlYXRlZCB3YXlwb2ludDogIi4uc2VsZWN0ZWQuQWRvcm5lZS5OYW1lLi50cE5hbWVFeHQpCiAgICAgICAgICBwV2F5UG9pbnRzWyNwV2F5UG9pbnRzICsgMV0gPSB7TkFNRSA9IHNlbGVjdGVkLkFkb3JuZWUuTmFtZS4udHBOYW1lRXh0LCBDT09SRCA9IHtzZWxlY3RlZC5BZG9ybmVlfX0KICAgICAgICBlbHNlCiAgICAgICAgICBpZiBpc051bWJlcih0cE5hbWVFeHQpIHRoZW4KICAgICAgICAgICAgdHBOYW1lRXh0ID0gdHBOYW1lRXh0KzEKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgdHBOYW1lRXh0ID0gMQogICAgICAgICAgZW5kCiAgICAgICAgICBoYW5kbGVXcE5hbWVzKCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIGhhbmRsZVdwTmFtZXMoKQogICAgICByZWZyZXNod2F5cG9pbnRzKCkKICAgIGVsc2UKICAgICAgbm90aWZ5KCdQYXJ0IFNlbGVjdGlvbicsJ1NlbGVjdCBhIHBhcnQgZmlyc3QnKQogICAgZW5kCiAgZW5kKQogIAogIGNtZHM9e30KICBjdXN0b21BbGlhcyA9IHt9CiAgRGVsZXRlXzMuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBjdXN0b21BbGlhcyA9IHt9CiAgICBhbGlhc2VzID0ge30KICAgIG5vdGlmeSgnQWxpYXNlcyBNb2RpZmllZCcsJ1JlbW92ZWQgYWxsIGFsaWFzZXMnKQogICAgdXBkYXRlc2F2ZXMoKQogICAgcmVmcmVzaGFsaWFzZXMoKQogIGVuZCkKICAKICBQcmVmaXhCb3g6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJUZXh0Iik6Q29ubmVjdChmdW5jdGlvbigpCiAgICBwcmVmaXggPSBQcmVmaXhCb3guVGV4dAogICAgQ21kYmFyLlBsYWNlaG9sZGVyVGV4dCA9ICJDb21tYW5kIEJhciAoIi4ucHJlZml4Li4iKSIKICAgIHVwZGF0ZXNhdmVzKCkKICBlbmQpCiAgCiAgZnVuY3Rpb24gQ2FtVmlld3BvcnQoKQogICAgaWYgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEgdGhlbgogICAgICByZXR1cm4gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuVmlld3BvcnRTaXplLlgKICAgIGVuZAogIGVuZAogIAogIGZ1bmN0aW9uIFVwZGF0ZVRvVmlld3BvcnQoKQogICAgaWYgSG9sZGVyLlBvc2l0aW9uLlguT2Zmc2V0IDwgLUNhbVZpZXdwb3J0KCkgdGhlbgogICAgICBIb2xkZXI6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMSwgLUNhbVZpZXdwb3J0KCksIEhvbGRlci5Qb3NpdGlvbi5ZLlNjYWxlLCBIb2xkZXIuUG9zaXRpb24uWS5PZmZzZXQpLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjA0LCB0cnVlLCBuaWwpCiAgICAgIE5vdGlmaWNhdGlvbjpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygxLCAtQ2FtVmlld3BvcnQoKSArIDI1MCwgTm90aWZpY2F0aW9uLlBvc2l0aW9uLlkuU2NhbGUsIE5vdGlmaWNhdGlvbi5Qb3NpdGlvbi5ZLk9mZnNldCksICJJbk91dCIsICJRdWFydCIsIDAuMDQsIHRydWUsIG5pbCkKICAgIGVuZAogIGVuZAogIENhbWVyYUNoYW5nZWQgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYTpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIlZpZXdwb3J0U2l6ZSIpOkNvbm5lY3QoVXBkYXRlVG9WaWV3cG9ydCkKICAKICBmdW5jdGlvbiB1cGRhdGVDYW1lcmEoY2hpbGQsIHBhcmVudCkKICAgIGlmIHBhcmVudCB+PSB3b3Jrc3BhY2UgdGhlbgogICAgICBDYW1Nb3ZlZDpEaXNjb25uZWN0KCkKICAgICAgQ2FtZXJhQ2hhbmdlZDpEaXNjb25uZWN0KCkKICAgICAgcmVwZWF0IHdhaXQoKSB1bnRpbCB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYQogICAgICBDYW1lcmFDaGFuZ2VkID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmE6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJWaWV3cG9ydFNpemUiKTpDb25uZWN0KFVwZGF0ZVRvVmlld3BvcnQpCiAgICAgIENhbU1vdmVkID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQW5jZXN0cnlDaGFuZ2VkOkNvbm5lY3QodXBkYXRlQ2FtZXJhKQogICAgZW5kCiAgZW5kCiAgQ2FtTW92ZWQgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5BbmNlc3RyeUNoYW5nZWQ6Q29ubmVjdCh1cGRhdGVDYW1lcmEpCiAgCiAgZnVuY3Rpb24gZHJhZ01haW4oZHJhZ3BvaW50LGd1aSkKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICBsb2NhbCBkcmFnZ2luZwogICAgICBsb2NhbCBkcmFnSW5wdXQKICAgICAgbG9jYWwgZHJhZ1N0YXJ0ID0gVmVjdG9yMy5uZXcoMCwwLDApCiAgICAgIGxvY2FsIHN0YXJ0UG9zCiAgICAgIGxvY2FsIGZ1bmN0aW9uIHVwZGF0ZShpbnB1dCkKICAgICAgICBsb2NhbCBwb3MgPSAtMjUwCiAgICAgICAgbG9jYWwgZGVsdGEgPSBpbnB1dC5Qb3NpdGlvbiAtIGRyYWdTdGFydAogICAgICAgIGlmIHN0YXJ0UG9zLlguT2Zmc2V0ICsgZGVsdGEuWCA8PSAtNTAwIHRoZW4KICAgICAgICAgIGxvY2FsIFBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0yNTAsIE5vdGlmaWNhdGlvbi5Qb3NpdGlvbi5ZLlNjYWxlLCBOb3RpZmljYXRpb24uUG9zaXRpb24uWS5PZmZzZXQpCiAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKE5vdGlmaWNhdGlvbiwgVHdlZW5JbmZvLm5ldyguMjApLCB7UG9zaXRpb24gPSBQb3NpdGlvbn0pOlBsYXkoKQogICAgICAgICAgcG9zID0gMjUwCiAgICAgICAgZWxzZQogICAgICAgICAgbG9jYWwgUG9zaXRpb24gPSBVRGltMi5uZXcoMSwgLTUwMCwgTm90aWZpY2F0aW9uLlBvc2l0aW9uLlkuU2NhbGUsIE5vdGlmaWNhdGlvbi5Qb3NpdGlvbi5ZLk9mZnNldCkKICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoTm90aWZpY2F0aW9uLCBUd2VlbkluZm8ubmV3KC4yMCksIHtQb3NpdGlvbiA9IFBvc2l0aW9ufSk6UGxheSgpCiAgICAgICAgICBwb3MgPSAtMjUwCiAgICAgICAgZW5kCiAgICAgICAgaWYgc3RhcnRQb3MuWC5PZmZzZXQgKyBkZWx0YS5YIDw9IC0yNTAgYW5kIC1DYW1WaWV3cG9ydCgpIDw9IHN0YXJ0UG9zLlguT2Zmc2V0ICsgZGVsdGEuWCB0aGVuCiAgICAgICAgICBsb2NhbCBQb3NpdGlvbiA9IFVEaW0yLm5ldyhzdGFydFBvcy5YLlNjYWxlLCBzdGFydFBvcy5YLk9mZnNldCArIGRlbHRhLlgsIGd1aS5Qb3NpdGlvbi5ZLlNjYWxlLCBndWkuUG9zaXRpb24uWS5PZmZzZXQpCiAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKGd1aSwgVHdlZW5JbmZvLm5ldyguMjApLCB7UG9zaXRpb24gPSBQb3NpdGlvbn0pOlBsYXkoKQogICAgICAgICAgbG9jYWwgUG9zaXRpb24yID0gVURpbTIubmV3KHN0YXJ0UG9zLlguU2NhbGUsIHN0YXJ0UG9zLlguT2Zmc2V0ICsgZGVsdGEuWCArIHBvcywgTm90aWZpY2F0aW9uLlBvc2l0aW9uLlkuU2NhbGUsIE5vdGlmaWNhdGlvbi5Qb3NpdGlvbi5ZLk9mZnNldCkKICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoTm90aWZpY2F0aW9uLCBUd2VlbkluZm8ubmV3KC4yMCksIHtQb3NpdGlvbiA9IFBvc2l0aW9uMn0pOlBsYXkoKQogICAgICAgIGVsc2VpZiBzdGFydFBvcy5YLk9mZnNldCArIGRlbHRhLlggPiAtNTAwIHRoZW4KICAgICAgICAgIGxvY2FsIFBvc2l0aW9uID0gVURpbTIubmV3KDEsIC0yNTAsIGd1aS5Qb3NpdGlvbi5ZLlNjYWxlLCBndWkuUG9zaXRpb24uWS5PZmZzZXQpCiAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKGd1aSwgVHdlZW5JbmZvLm5ldyguMjApLCB7UG9zaXRpb24gPSBQb3NpdGlvbn0pOlBsYXkoKQogICAgICAgIGVsc2VpZiAtQ2FtVmlld3BvcnQoKSA+IHN0YXJ0UG9zLlguT2Zmc2V0ICsgZGVsdGEuWCB0aGVuCiAgICAgICAgICBndWk6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMSwgLUNhbVZpZXdwb3J0KCksIGd1aS5Qb3NpdGlvbi5ZLlNjYWxlLCBndWkuUG9zaXRpb24uWS5PZmZzZXQpLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjA0LCB0cnVlLCBuaWwpCiAgICAgICAgICBsb2NhbCBQb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtQ2FtVmlld3BvcnQoKSwgZ3VpLlBvc2l0aW9uLlkuU2NhbGUsIGd1aS5Qb3NpdGlvbi5ZLk9mZnNldCkKICAgICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoZ3VpLCBUd2VlbkluZm8ubmV3KC4yMCksIHtQb3NpdGlvbiA9IFBvc2l0aW9ufSk6UGxheSgpCiAgICAgICAgICBsb2NhbCBQb3NpdGlvbjIgPSBVRGltMi5uZXcoMSwgLUNhbVZpZXdwb3J0KCkgKyAyNTAsIE5vdGlmaWNhdGlvbi5Qb3NpdGlvbi5ZLlNjYWxlLCBOb3RpZmljYXRpb24uUG9zaXRpb24uWS5PZmZzZXQpCiAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKE5vdGlmaWNhdGlvbiwgVHdlZW5JbmZvLm5ldyguMjApLCB7UG9zaXRpb24gPSBQb3NpdGlvbjJ9KTpQbGF5KCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIGRyYWdwb2ludC5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIG9yIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLlRvdWNoIHRoZW4KICAgICAgICAgIGRyYWdnaW5nID0gdHJ1ZQogICAgICAgICAgZHJhZ1N0YXJ0ID0gaW5wdXQuUG9zaXRpb24KICAgICAgICAgIHN0YXJ0UG9zID0gZ3VpLlBvc2l0aW9uCiAgCiAgICAgICAgICBpbnB1dC5DaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICBpZiBpbnB1dC5Vc2VySW5wdXRTdGF0ZSA9PSBFbnVtLlVzZXJJbnB1dFN0YXRlLkVuZCB0aGVuCiAgICAgICAgICAgICAgZHJhZ2dpbmcgPSBmYWxzZQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgICAgZW5kKQogICAgICBkcmFncG9pbnQuSW5wdXRDaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VNb3ZlbWVudCBvciBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Ub3VjaCB0aGVuCiAgICAgICAgICBkcmFnSW5wdXQgPSBpbnB1dAogICAgICAgIGVuZAogICAgICBlbmQpCiAgICAgIFVzZXJJbnB1dFNlcnZpY2UuSW5wdXRDaGFuZ2VkOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQpCiAgICAgICAgaWYgaW5wdXQgPT0gZHJhZ0lucHV0IGFuZCBkcmFnZ2luZyB0aGVuCiAgICAgICAgICB1cGRhdGUoaW5wdXQpCiAgICAgICAgZW5kCiAgICAgIGVuZCkKICAgIGVuZCkKICBlbmQKICAKICBkcmFnTWFpbihUaXRsZSxIb2xkZXIpCiAgCiAgTWF0Y2ggPSBmdW5jdGlvbihuYW1lLHN0cikKICAgIHN0ciA9IHN0cjpnc3ViKCIlVyIsICIlJSUxIikKICAgIHJldHVybiBuYW1lOmxvd2VyKCk6ZmluZChzdHI6bG93ZXIoKSkgYW5kIHRydWUKICBlbmQKICAKICBsb2NhbCBjYW52YXNQb3MgPSBWZWN0b3IyLm5ldygwLDApCiAgbG9jYWwgdG9wQ29tbWFuZCA9IG5pbAogIEluZGV4Q29udGVudHMgPSBmdW5jdGlvbihzdHIsYm9vbCxjbWRiYXIsSWFuaW0pCiAgICBDTURzRi5DYW52YXNQb3NpdGlvbiA9IFZlY3RvcjIubmV3KDAsMCkKICAgIGxvY2FsIFNpemVZID0gMAogICAgbG9jYWwgaW5kZXhudW0gPSAwCiAgICBsb2NhbCBmcmFtZSA9IENNRHNGCiAgICB0b3BDb21tYW5kID0gbmlsCiAgICBsb2NhbCBjaHVua3MgPSB7fQogICAgaWYgc3RyOnN1Yigjc3RyLCNzdHIpID09ICJcXCIgdGhlbiBzdHIgPSAiIiBlbmQKICAgIGZvciB3IGluIHN0cmluZy5nbWF0Y2goc3RyLCJbXlxcXSsiKSBkbwogICAgICB0YWJsZS5pbnNlcnQoY2h1bmtzLHcpCiAgICBlbmQKICAgIGlmICNjaHVua3MgPiAwIHRoZW4gc3RyID0gY2h1bmtzWyNjaHVua3NdIGVuZAogICAgaWYgc3RyOnN1YigxLDEpID09ICIhIiB0aGVuIHN0ciA9IHN0cjpzdWIoMikgZW5kCiAgICBmb3IgaSx2IGluIG5leHQsIGZyYW1lOkdldENoaWxkcmVuKCkgZG8KICAgICAgaWYgdjpJc0EoIlRleHRCdXR0b24iKSB0aGVuCiAgICAgICAgaWYgYm9vbCB0aGVuCiAgICAgICAgICBpZiBNYXRjaCh2LlRleHQsc3RyKSB0aGVuCiAgICAgICAgICAgIGluZGV4bnVtID0gaW5kZXhudW0gKyAxCiAgICAgICAgICAgIHYuVmlzaWJsZSA9IHRydWUKICAgICAgICAgICAgaWYgdG9wQ29tbWFuZCA9PSBuaWwgdGhlbgogICAgICAgICAgICAgIHRvcENvbW1hbmQgPSB2LlRleHQKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHYuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICB2LlZpc2libGUgPSB0cnVlCiAgICAgICAgICBpZiB0b3BDb21tYW5kID09IG5pbCB0aGVuCiAgICAgICAgICAgIHRvcENvbW1hbmQgPSB2LlRleHQKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAogICAgZnJhbWUuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLDAsMCxjbWRMaXN0TGF5b3V0LkFic29sdXRlQ29udGVudFNpemUuWSkKICAgIGlmIG5vdCBJYW5pbSB0aGVuCiAgICAgIGlmIGluZGV4bnVtID09IDAgb3Igc3RyaW5nLmZpbmQoc3RyLCAiICIpIHRoZW4KICAgICAgICBpZiBub3QgY21kYmFyIHRoZW4KICAgICAgICAgIG1pbmltaXplSG9sZGVyKCkKICAgICAgICBlbHNlaWYgY21kYmFyIHRoZW4KICAgICAgICAgIGNtZGJhckhvbGRlcigpCiAgICAgICAgZW5kCiAgICAgIGVsc2UKICAgICAgICBtYXhpbWl6ZUhvbGRlcigpCiAgICAgIGVuZAogICAgZWxzZQogICAgICBtaW5pbWl6ZUhvbGRlcigpCiAgICBlbmQKICBlbmQKICAKICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgIGlmIFRleHRDaGF0U2VydmljZS5DaGF0VmVyc2lvbiA9PSBFbnVtLkNoYXRWZXJzaW9uLlRleHRDaGF0U2VydmljZSB0aGVuIHJldHVybiBlbmQKICAgIGxvY2FsIGNoYXRib3gKICAgIGxvY2FsIHN1Y2Nlc3MsIHJlc3VsdCA9IHBjYWxsKGZ1bmN0aW9uKCkgY2hhdGJveCA9IGdhbWUuV2FpdEZvckNoaWxkKFBsYXllckd1aSwgIkNoYXQiKS5GcmFtZS5DaGF0QmFyUGFyZW50RnJhbWUuRnJhbWUuQm94RnJhbWUuRnJhbWUuQ2hhdEJhciBlbmQpCiAgICBpZiBzdWNjZXNzIHRoZW4KICAgICAgbG9jYWwgZnVuY3Rpb24gY2hhdGJveEZvY3VzZWQoKQogICAgICAgIGNhbnZhc1BvcyA9IENNRHNGLkNhbnZhc1Bvc2l0aW9uCiAgICAgIGVuZAogICAgICBsb2NhbCBjaGF0Ym94Rm9jdXNlZEMgPSBjaGF0Ym94LkZvY3VzZWQ6Q29ubmVjdChjaGF0Ym94Rm9jdXNlZCkKICAKICAgICAgbG9jYWwgZnVuY3Rpb24gSW5kZXgoKQogICAgICAgIGlmIGNoYXRib3guVGV4dDpsb3dlcigpOnN1YigxLDEpID09IHByZWZpeCB0aGVuCiAgICAgICAgICBpZiBTZXR0aW5nc09wZW4gPT0gdHJ1ZSB0aGVuCiAgICAgICAgICAgIHdhaXQoMC4yKQogICAgICAgICAgICBDTURzRi5WaXNpYmxlID0gdHJ1ZQogICAgICAgICAgICBTZXR0aW5nczpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLCAwLCAwLCAyMjApLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjIsIHRydWUsIG5pbCkKICAgICAgICAgIGVuZAogICAgICAgICAgSW5kZXhDb250ZW50cyhQbGF5ZXJHdWkuQ2hhdC5GcmFtZS5DaGF0QmFyUGFyZW50RnJhbWUuRnJhbWUuQm94RnJhbWUuRnJhbWUuQ2hhdEJhci5UZXh0Omxvd2VyKCk6c3ViKDIpLHRydWUpCiAgICAgICAgZWxzZQogICAgICAgICAgbWluaW1pemVIb2xkZXIoKQogICAgICAgICAgaWYgU2V0dGluZ3NPcGVuID09IHRydWUgdGhlbgogICAgICAgICAgICB3YWl0KDAuMikKICAgICAgICAgICAgU2V0dGluZ3M6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMCwgMCwgMCwgNDUpLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjIsIHRydWUsIG5pbCkKICAgICAgICAgICAgQ01Ec0YuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIGxvY2FsIGNoYXRib3hGdW5jID0gY2hhdGJveDpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIlRleHQiKTpDb25uZWN0KEluZGV4KQogIAogICAgICBsb2NhbCBmdW5jdGlvbiBjaGF0Ym94Rm9jdXNMb3N0KGVudGVycHJlc3NlZCkKICAgICAgICBpZiBub3QgZW50ZXJwcmVzc2VkIG9yIGNoYXRib3guVGV4dDpsb3dlcigpOnN1YigxLDEpIH49IHByZWZpeCB0aGVuCiAgICAgICAgICBJbmRleENvbnRlbnRzKCcnLHRydWUpCiAgICAgICAgZW5kCiAgICAgICAgQ01Ec0YuQ2FudmFzUG9zaXRpb24gPSBjYW52YXNQb3MKICAgICAgICBtaW5pbWl6ZUhvbGRlcigpCiAgICAgIGVuZAogICAgICBsb2NhbCBjaGF0Ym94Rm9jdXNMb3N0QyA9IGNoYXRib3guRm9jdXNMb3N0OkNvbm5lY3QoY2hhdGJveEZvY3VzTG9zdCkKICAKICAgICAgUGxheWVyR3VpOldhaXRGb3JDaGlsZCgiQ2hhdCIpLkZyYW1lLkNoYXRCYXJQYXJlbnRGcmFtZS5DaGlsZEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24obmV3YmFyKQogICAgICAgIHdhaXQoKQogICAgICAgIGlmIG5ld2JhcjpGaW5kRmlyc3RDaGlsZCgnQm94RnJhbWUnKSB0aGVuCiAgICAgICAgICBjaGF0Ym94ID0gUGxheWVyR3VpOldhaXRGb3JDaGlsZCgiQ2hhdCIpLkZyYW1lLkNoYXRCYXJQYXJlbnRGcmFtZS5GcmFtZS5Cb3hGcmFtZS5GcmFtZS5DaGF0QmFyCiAgICAgICAgICBpZiBjaGF0Ym94Rm9jdXNlZEMgdGhlbiBjaGF0Ym94Rm9jdXNlZEM6RGlzY29ubmVjdCgpIGVuZAogICAgICAgICAgY2hhdGJveEZvY3VzZWRDID0gY2hhdGJveC5Gb2N1c2VkOkNvbm5lY3QoY2hhdGJveEZvY3VzZWQpCiAgICAgICAgICBpZiBjaGF0Ym94RnVuYyB0aGVuIGNoYXRib3hGdW5jOkRpc2Nvbm5lY3QoKSBlbmQKICAgICAgICAgIGNoYXRib3hGdW5jID0gY2hhdGJveDpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIlRleHQiKTpDb25uZWN0KEluZGV4KQogICAgICAgICAgaWYgY2hhdGJveEZvY3VzTG9zdEMgdGhlbiBjaGF0Ym94Rm9jdXNMb3N0QzpEaXNjb25uZWN0KCkgZW5kCiAgICAgICAgICBjaGF0Ym94Rm9jdXNMb3N0QyA9IGNoYXRib3guRm9jdXNMb3N0OkNvbm5lY3QoY2hhdGJveEZvY3VzTG9zdCkKICAgICAgICBlbmQKICAgICAgZW5kKQogICAgICAtLWVsc2UKICAgICAgLS1wcmludCgnQ3VzdG9tIGNoYXQgZGV0ZWN0ZWQuIFdpbGwgbm90IHByb3ZpZGUgc3VnZ2VzdGlvbnMgZm9yIGNvbW1hbmRzIHR5cGVkIGluIHRoZSBjaGF0LicpCiAgICBlbmQKICBlbmQpCiAgCiAgZnVuY3Rpb24gYXV0b0NvbXBsZXRlKHN0cixjdXJUZXh0KQogICAgbG9jYWwgZW5kaW5nQ2hhciA9IHsiWyIsICIvIiwgIigiLCAiICJ9CiAgICBsb2NhbCBzdG9wID0gMAogICAgZm9yIGk9MSwjc3RyIGRvCiAgICAgIGxvY2FsIGMgPSBzdHI6c3ViKGksaSkKICAgICAgaWYgdGFibGUuZmluZChlbmRpbmdDaGFyLCBjKSB0aGVuCiAgICAgICAgc3RvcCA9IGkKICAgICAgICBicmVhawogICAgICBlbmQKICAgIGVuZAogICAgY3VyVGV4dCA9IGN1clRleHQgb3IgQ21kYmFyLlRleHQKICAgIGxvY2FsIHN1YlBvcyA9IDAKICAgIGxvY2FsIHBvcyA9IDEKICAgIGxvY2FsIGZpbmRSZXMgPSBzdHJpbmcuZmluZChjdXJUZXh0LCJcXCIscG9zKQogICAgd2hpbGUgZmluZFJlcyBkbwogICAgICBzdWJQb3MgPSBmaW5kUmVzCiAgICAgIHBvcyA9IGZpbmRSZXMrMQogICAgICBmaW5kUmVzID0gc3RyaW5nLmZpbmQoY3VyVGV4dCwiXFwiLHBvcykKICAgIGVuZAogICAgaWYgY3VyVGV4dDpzdWIoc3ViUG9zKzEsc3ViUG9zKzEpID09ICIhIiB0aGVuIHN1YlBvcyA9IHN1YlBvcyArIDEgZW5kCiAgICBDbWRiYXIuVGV4dCA9IGN1clRleHQ6c3ViKDEsc3ViUG9zKSAuLiBzdHI6c3ViKDEsIHN0b3AgLSAxKS4uJyAnCiAgICB3YWl0KCkKICAgIENtZGJhci5UZXh0ID0gQ21kYmFyLlRleHQ6Z3N1YiggJ1x0JywgJycgKQogICAgQ21kYmFyLkN1cnNvclBvc2l0aW9uID0gI0NtZGJhci5UZXh0KzEtLTEwMjAKICBlbmQKICAKICBDTURzID0ge30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdkaXNjb3JkIC8gc3VwcG9ydCAvIGhlbHAnLCBERVNDID0gJ0ludml0ZSB0byB0aGUgSW5maW5pdGUgWWllbGQgc3VwcG9ydCBzZXJ2ZXIuJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdjb25zb2xlJywgREVTQyA9ICdMb2FkcyBvbGQgUm9ibG94IGNvbnNvbGUnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2V4cGxvcmVyIC8gZGV4JywgREVTQyA9ICdPcGVucyBERVggYnkgTW9vbid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnb2xkZGV4IC8gb2RleCcsIERFU0MgPSAnT3BlbnMgT2xkIERFWCBieSBNb29uJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdyZW1vdGVzcHkgLyByc3B5JywgREVTQyA9ICdPcGVucyBTaW1wbGUgU3B5IFYzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdhdWRpb2xvZ2dlciAvIGFsb2dnZXInLCBERVNDID0gJ09wZW5zIEVkZ2VzIGF1ZGlvIGxvZ2dlcid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnc2VydmVyaW5mbyAvIGluZm8nLCBERVNDID0gJ0dpdmVzIHlvdSBpbmZvIGFib3V0IHRoZSBzZXJ2ZXInfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2pvYmlkJywgREVTQyA9ICdDb3BpZXMgdGhlIGdhbWVzIEpvYklkIHRvIHlvdXIgY2xpcGJvYXJkJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub3RpZnlqb2JpZCcsIERFU0MgPSAnTm90aWZpZXMgeW91IHRoZSBnYW1lcyBKb2JJZCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAncmVqb2luIC8gcmonLCBERVNDID0gJ01ha2VzIHlvdSByZWpvaW4gdGhlIGdhbWUnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2F1dG9yZWpvaW4gLyBhdXRvcmonLCBERVNDID0gJ0F1dG9tYXRpY2FsbHkgcmVqb2lucyB0aGUgc2VydmVyIGlmIHlvdSBnZXQga2lja2VkL2Rpc2Nvbm5lY3RlZCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnc2VydmVyaG9wIC8gc2hvcCcsIERFU0MgPSAnVGVsZXBvcnRzIHlvdSB0byBhIGRpZmZlcmVudCBzZXJ2ZXInfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2pvaW5wbGF5ZXIgW3VzZXJuYW1lIC8gSURdIFtwbGFjZSBJRF0nLCBERVNDID0gJ0pvaW5zIGEgc3BlY2lmaWMgcGxheWVycyBzZXJ2ZXInfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2dhbWV0ZWxlcG9ydCAvIGdhbWV0cCBbcGxhY2UgSURdJywgREVTQyA9ICdKb2lucyBhIGdhbWUgYnkgSUQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2FudGlpZGxlIC8gYW50aWFmaycsIERFU0MgPSAnUHJldmVudHMgdGhlIGdhbWUgZnJvbSBraWNraW5nIHlvdSBmb3IgYmVpbmcgaWRsZS9hZmsnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2RhdGFsaW1pdCBbbnVtXScsIERFU0MgPSAnU2V0IG91dGdvaW5nIEtCUFMgbGltaXQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3JlcGxpY2F0aW9ubGFnIC8gYmFja3RyYWNrIFtudW1dJywgREVTQyA9ICdTZXQgSW5jb21pbmdSZXBsaWNhdGlvbkxhZyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY3JlYXRvcmlkIC8gY3JlYXRvcicsIERFU0MgPSAnTm90aWZpZXMgeW91IHRoZSBjcmVhdG9ycyBJRCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY29weWNyZWF0b3JpZCAvIGNvcHljcmVhdG9yJywgREVTQyA9ICdDb3BpZXMgdGhlIGNyZWF0b3JzIElEIHRvIHlvdXIgY2xpcGJvYXJkJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdzZXRjcmVhdG9yaWQgLyBzZXRjcmVhdG9yJywgREVTQyA9ICdTZXRzIHlvdXIgdXNlcmlkIHRvIHRoZSBjcmVhdG9ycyBJRCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnbm9wcm9tcHRzJywgREVTQyA9ICdQcmV2ZW50cyB0aGUgZ2FtZSBmcm9tIHNob3dpbmcgeW91IHB1cmNoYXNlL3ByZW1pdW0gcHJvbXB0cyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnc2hvd3Byb21wdHMnLCBERVNDID0gJ0FsbG93cyB0aGUgZ2FtZSB0byBzaG93IHB1cmNoYXNlL3ByZW1pdW0gcHJvbXB0cyBhZ2Fpbid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZW5hYmxlIFtpbnZlbnRvcnkvcGxheWVybGlzdC9jaGF0L3Jlc2V0L2Vtb3Rlcy9hbGxdJywgREVTQyA9ICdUb2dnbGVzIHZpc2liaWxpdHkgb2YgY29yZWd1aSBpdGVtcyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZGlzYWJsZSBbaW52ZW50b3J5L3BsYXllcmxpc3QvY2hhdC9yZXNldC9lbW90ZXMvYWxsXScsIERFU0MgPSAnVG9nZ2xlcyB2aXNpYmlsaXR5IG9mIGNvcmVndWkgaXRlbXMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3Nob3dndWlzJywgREVTQyA9ICdTaG93cyBhbnkgaW52aXNpYmxlIEdVSXMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3Vuc2hvd2d1aXMnLCBERVNDID0gJ1VuZG9lcyBzaG93Z3Vpcyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnaGlkZWd1aXMnLCBERVNDID0gJ0hpZGVzIGFueSBHVUlzIGluIFBsYXllckd1aSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5oaWRlZ3VpcycsIERFU0MgPSAnVW5kb2VzIGhpZGVndWlzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdndWlkZWxldGUnLCBERVNDID0gJ0VuYWJsZXMgYmFja3NwYWNlIHRvIGRlbGV0ZSBHVUknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VuZ3VpZGVsZXRlIC8gbm9ndWlkZWxldGUnLCBERVNDID0gJ0Rpc2FibGVzIGd1aWRlbGV0ZSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnaGlkZWl5JywgREVTQyA9ICdIaWRlcyB0aGUgbWFpbiBJWSBHVUknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3Nob3dpeSAvIHVuaGlkZWl5JywgREVTQyA9ICdTaG93cyBJWSBhZ2Fpbid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAna2VlcGl5JywgREVTQyA9ICdBdXRvIGV4ZWN1dGUgSVkgd2hlbiB5b3UgdGVsZXBvcnQgdGhyb3VnaCBzZXJ2ZXJzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bmtlZXBpeScsIERFU0MgPSAnRGlzYWJsZSBrZWVwaXknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3RvZ2dsZWtlZXBpeScsIERFU0MgPSAnVG9nZ2xlIGtlZXBpeSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnc2F2ZWdhbWUgLyBzYXZlcGxhY2UnLCBERVNDID0gJ1VzZXMgc2F2ZWluc3RhbmNlIHRvIHNhdmUgdGhlIGdhbWUnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2NsZWFyZXJyb3InLCBERVNDID0gJ0NsZWFycyB0aGUgYW5ub3lpbmcgYm94IGFuZCBibHVyIHdoZW4gYSBnYW1lIGtpY2tzIHlvdSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY2xpZW50YW50aWtpY2sgLyBhbnRpa2ljayAoQ0xJRU5UKScsIERFU0MgPSAnUHJldmVudHMgbG9jYWxzY3JpcHRzIGZyb20ga2lja2luZyB5b3UnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2NsaWVudGFudGl0ZWxlcG9ydCAvIGFudGl0ZWxlcG9ydCAoQ0xJRU5UKScsIERFU0MgPSAnUHJldmVudHMgbG9jYWxzY3JpcHRzIGZyb20gdGVsZXBvcnRpbmcgeW91J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdhbGxvd3Jlam9pbiAvIGFsbG93cmogW3RydWUvZmFsc2VdIChDTElFTlQpJywgREVTQyA9ICdDaGFuZ2VzIGlmIGFudGl0ZWxlcG9ydCBhbGxvd3MgeW91IHRvIHJlam9pbiBvciBub3QnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2NhbmNlbHRlbGVwb3J0IC8gY2FuY2VsdHAnLCBERVNDID0gJ0NhbmNlbHMgdGVsZXBvcnRzIGluIHByb2dyZXNzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd2b2x1bWUgLyB2b2wgWzAtMTBdJywgREVTQyA9ICdBZGp1c3RzIHlvdXIgZ2FtZSB2b2x1bWUgb24gYSBzY2FsZSBvZiAwIHRvIDEwJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdhbnRpbGFnIC8gYm9vc3RmcHMgLyBsb3dncmFwaGljcycsIERFU0MgPSAnTG93ZXJzIGdhbWUgcXVhbGl0eSB0byBib29zdCBGUFMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3JlY29yZCAvIHJlYycsIERFU0MgPSAnU3RhcnRzIHJvYmxveCByZWNvcmRlcid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnc2NyZWVuc2hvdCAvIHNjcm5zaG90JywgREVTQyA9ICdUYWtlcyBhIHNjcmVlbnNob3QnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3RvZ2dsZWZ1bGxzY3JlZW4gLyB0b2dnbGVmcycsIERFU0MgPSAnVG9nZ2xlcyBmdWxsc2NyZWVuJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub3RpZnkgW3RleHRdJywgREVTQyA9ICdTZW5kcyB5b3UgYSBub3RpZmljYXRpb24gd2l0aCB0aGUgcHJvdmlkZWQgdGV4dCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnbGFzdGNvbW1hbmQgLyBsYXN0Y21kJywgREVTQyA9ICdFeGVjdXRlcyB0aGUgcHJldmlvdXMgY29tbWFuZCB1c2VkJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdleGl0JywgREVTQyA9ICdLaWxscyByb2Jsb3ggcHJvY2Vzcyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnJywgREVTQyA9ICcnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ25vY2xpcCcsIERFU0MgPSAnR28gdGhyb3VnaCBvYmplY3RzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bm5vY2xpcCAvIGNsaXAnLCBERVNDID0gJ0Rpc2FibGVzIG5vY2xpcCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZmx5IFtzcGVlZF0nLCBERVNDID0gJ01ha2VzIHlvdSBmbHknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VuZmx5JywgREVTQyA9ICdEaXNhYmxlcyBmbHknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2ZseXNwZWVkIFtudW1dJywgREVTQyA9ICdTZXQgZmx5IHNwZWVkIChkZWZhdWx0IGlzIDIwKSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndmVoaWNsZWZseSAvIHZmbHkgW3NwZWVkXScsIERFU0MgPSAnTWFrZXMgeW91IGZseSBpbiBhIHZlaGljbGUnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VudmVoaWNsZWZseSAvIHVudmZseScsIERFU0MgPSAnRGlzYWJsZXMgdmVoaWNsZSBmbHknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3ZlaGljbGVmbHlzcGVlZCAgLyB2Zmx5c3BlZWQgW251bV0nLCBERVNDID0gJ1NldCB2ZWhpY2xlIGZseSBzcGVlZCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY2ZyYW1lZmx5IC8gY2ZseSBbc3BlZWRdJywgREVTQyA9ICdNYWtlcyB5b3UgZmx5LCBieXBhc3Npbmcgc29tZSBhbnRpIGNoZWF0cyAod29ya3Mgb24gbW9iaWxlKSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5jZnJhbWVmbHkgLyB1bmNmbHknLCBERVNDID0gJ0Rpc2FibGVzIGNmbHknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2NmcmFtZWZseXNwZWVkICAvIGNmbHlzcGVlZCBbbnVtXScsIERFU0MgPSAnU2V0cyBjZmx5IHNwZWVkJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdxZWZseSBbdHJ1ZSAvIGZhbHNlXScsIERFU0MgPSAnZW5hYmxlcyBvciBkaXNhYmxlcyB0aGUgUSBhbmQgRSBob3RrZXlzIGZvciBmbHknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3ZlaGljbGVub2NsaXAgLyB2bm9jbGlwJywgREVTQyA9ICdUdXJucyBvZmYgdmVoaWNsZSBjb2xsaXNpb24nfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3ZlaGljbGVjbGlwIC8gdmNsaXAgLyB1bnZub2NsaXAnLCBERVNDID0gJ0VuYWJsZXMgdmVoaWNsZSBjb2xsaXNpb24nfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2Zsb2F0IC8gIHBsYXRmb3JtJywgREVTQyA9ICdTcGF3bnMgYSBwbGF0Zm9ybSBiZW5lYXRoIHlvdSBjYXVzaW5nIHlvdSB0byBmbG9hdCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5mbG9hdCAvIG5vcGxhdGZvcm0nLCBERVNDID0gJ1JlbW92ZXMgdGhlIHBsYXRmb3JtJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdzd2ltJywgREVTQyA9ICdBbGxvd3MgeW91IHRvIHN3aW0gaW4gdGhlIGFpcid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5zd2ltIC8gbm9zd2ltJywgREVTQyA9ICdTdG9wcyB5b3UgZnJvbSBzd2ltbWluZyBldmVyeXdoZXJlJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICcnLCBERVNDID0gJyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnc2V0d2F5cG9pbnQgLyBzd3AgW25hbWVdJywgREVTQyA9ICdTZXRzIGEgd2F5cG9pbnQgYXQgeW91ciBwb3NpdGlvbid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnd2F5cG9pbnRwb3MgLyB3cHAgW25hbWVdIFtYIFkgWl0nLCBERVNDID0gJ1NldHMgYSB3YXlwb2ludCB3aXRoIHNwZWNpZmllZCBjb29yZGluYXRlcyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnd2F5cG9pbnRzJywgREVTQyA9ICdTaG93cyBhIGxpc3Qgb2YgY3VycmVudGx5IGFjdGl2ZSB3YXlwb2ludHMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3Nob3d3YXlwb2ludHMgLyBzaG93d3AnLCBERVNDID0gJ1Nob3dzIGFsbCBjdXJyZW50bHkgc2V0IHdheXBvaW50cyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnaGlkZXdheXBvaW50cyAvIGhpZGV3cCcsIERFU0MgPSAnSGlkZXMgc2hvd24gd2F5cG9pbnRzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd3YXlwb2ludCAvIHdwIFtuYW1lXScsIERFU0MgPSAnVGVsZXBvcnRzIHBsYXllciB0byBhIHdheXBvaW50J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd0d2VlbndheXBvaW50IC8gdHdwIFtuYW1lXScsIERFU0MgPSAnVHdlZW5zIHBsYXllciB0byBhIHdheXBvaW50J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd3YWxrdG93YXlwb2ludCAvIHd0d3AgW25hbWVdJywgREVTQyA9ICdXYWxrcyBwbGF5ZXIgdG8gYSB3YXlwb2ludCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZGVsZXRld2F5cG9pbnQgLyBkd3AgW25hbWVdJywgREVTQyA9ICdEZWxldGVzIGEgd2F5cG9pbnQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2NsZWFyd2F5cG9pbnRzIC8gY3dwJywgREVTQyA9ICdDbGVhcnMgYWxsIHdheXBvaW50cyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY2xlYXJnYW1ld2F5cG9pbnRzIC8gY2dhbWV3cCcsIERFU0MgPSAnQ2xlYXJzIGFsbCB3YXlwb2ludHMgZm9yIHRoZSBnYW1lIHlvdSBhcmUgaW4nfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJycsIERFU0MgPSAnJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdnb3RvIFtwbGF5ZXJdJywgREVTQyA9ICdHbyB0byBhIHBsYXllcid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndHdlZW5nb3RvIC8gdGdvdG8gW3BsYXllcl0nLCBERVNDID0gJ1R3ZWVuIHRvIGEgcGxheWVyIChieXBhc3NlcyBzb21lIGFudGkgY2hlYXRzKSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndHdlZW5zcGVlZCAvIHRzcGVlZCBbbnVtXScsIERFU0MgPSAnU2V0cyBob3cgZmFzdCBhbGwgdHdlZW4gY29tbWFuZHMgZ28gKGRlZmF1bHQgaXMgMSknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3ZlaGljbGVnb3RvIC8gdmdvdG8gW3BsYXllcl0nLCBERVNDID0gJ0dvIHRvIGEgcGxheWVyIHdoaWxlIGluIGEgdmVoaWNsZSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnbG9vcGdvdG8gW3BsYXllcl0gW2Rpc3RhbmNlXSBbZGVsYXldJywgREVTQyA9ICdMb29wIHRlbGVwb3J0IHRvIGEgcGxheWVyJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bmxvb3Bnb3RvJywgREVTQyA9ICdTdG9wcyB0ZWxlcG9ydGluZyB5b3UgdG8gYSBwbGF5ZXInfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3B1bHNldHAgLyBwdHAgW3BsYXllcl0gW3NlY29uZHNdJywgREVTQyA9ICdUZWxlcG9ydHMgeW91IHRvIGEgcGxheWVyIGZvciBhIHNwZWNpZmllZCBhbW1vdW50IG9mIHRpbWUnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2NsaWVudGJyaW5nIC8gY2JyaW5nIFtwbGF5ZXJdIChDTElFTlQpJywgREVTQyA9ICdCcmluZyBhIHBsYXllcid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnbG9vcGJyaW5nIFtwbGF5ZXJdIFtkaXN0YW5jZV0gW2RlbGF5XSAoQ0xJRU5UKScsIERFU0MgPSAnTG9vcCBicmluZ3MgYSBwbGF5ZXIgdG8geW91ICh1c2VmdWwgZm9yIGtpbGxpbmcpJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bmxvb3BicmluZyBbcGxheWVyXScsIERFU0MgPSAnVW5kb2VzIGxvb3BicmluZyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZnJlZXplIC8gZnIgW3BsYXllcl0gKENMSUVOVCknLCBERVNDID0gJ0ZyZWV6ZXMgYSBwbGF5ZXInfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2ZyZWV6ZWFuaW1zJywgREVTQyA9ICdGcmVlemVzIHlvdXIgYW5pbWF0aW9ucyAvIHBhdXNlcyB5b3VyIGFuaW1hdGlvbnMgLSBEb2VzIG5vdCB3b3JrIG9uIGRlZmF1bHQgYW5pbWF0aW9ucyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5mcmVlemVhbmltcycsIERFU0MgPSAnVW5mcmVlemVzIHlvdXIgYW5pbWF0aW9ucyAvIHBsYXlzIHlvdXIgYW5pbWF0aW9ucyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndGhhdyAvIHVuZnIgW3BsYXllcl0gKENMSUVOVCknLCBERVNDID0gJ1VuZnJlZXplcyBhIHBsYXllcid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndHBwb3NpdGlvbiAvIHRwcG9zIFtYIFkgWl0nLCBERVNDID0gJ1RlbGVwb3J0cyB5b3UgdG8gY2VydGFpbiBjb29yZGluYXRlcyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndHdlZW50cHBvc2l0aW9uIC8gdHRwcG9zIFtYIFkgWl0nLCBERVNDID0gJ1R3ZWVuIHRvIGNvb3JkaW5hdGVzIChieXBhc3NlcyBzb21lIGFudGkgY2hlYXRzKSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnb2Zmc2V0IFtYIFkgWl0nLCBERVNDID0gJ09mZnNldHMgeW91IGJ5IGNlcnRhaW4gY29vcmRpbmF0ZXMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3R3ZWVub2Zmc2V0IC8gdG9mZnNldCBbWCBZIFpdJywgREVTQyA9ICdUd2VlbiBvZmZzZXQgKGJ5cGFzc2VzIHNvbWUgYW50aSBjaGVhdHMpJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub3RpZnlwb3NpdGlvbiAvIG5vdGlmeXBvcyBbcGxheWVyXScsIERFU0MgPSAnTm90aWZpZXMgeW91IHRoZSBjb29yZGluYXRlcyBvZiBhIGNoYXJhY3Rlcid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY29weXBvc2l0aW9uIC8gY29weXBvcyBbcGxheWVyXScsIERFU0MgPSAnQ29waWVzIHRoZSBjb29yZGluYXRlcyBvZiBhIGNoYXJhY3RlciB0byB5b3VyIGNsaXBib2FyZCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnd2Fsa3RvcG9zaXRpb24gLyB3YWxrdG9wb3MgW1ggWSBaXScsIERFU0MgPSAnTWFrZXMgeW91IHdhbGsgdG8gYSBjb29yZGluYXRlJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdzcGF3bnBvaW50IC8gc3Bhd24gW2RlbGF5XScsIERFU0MgPSAnU2V0cyBhIHBvc2l0aW9uIHdoZXJlIHlvdSB3aWxsIHNwYXduJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub3NwYXducG9pbnQgLyBub3NwYXduJywgREVTQyA9ICdSZW1vdmVzIHlvdXIgY3VzdG9tIHNwYXduIHBvaW50J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdmbGFzaGJhY2sgLyBkaWVkdHAnLCBERVNDID0gJ1RlbGVwb3J0cyB5b3UgdG8gd2hlcmUgeW91IGxhc3QgZGllZCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnd2FsbHRwJywgREVTQyA9ICdUZWxlcG9ydHMgeW91IGFib3ZlL292ZXIgYW55IHdhbGwgeW91IHJ1biBpbnRvJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub3dhbGx0cCAvIHVud2FsbHRwJywgREVTQyA9ICdEaXNhYmxlcyB3YWxsdHAnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3RlbGVwb3J0dG9vbCAvIHRwdG9vbCcsIERFU0MgPSAnR2l2ZXMgeW91IGEgdGVsZXBvcnQgdG9vbCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnJywgREVTQyA9ICcnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2xvZ3MnLCBERVNDID0gJ09wZW5zIHRoZSBsb2dzIEdVSSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY2hhdGxvZ3MgLyBjbG9ncycsIERFU0MgPSAnTG9nIHdoYXQgcGVvcGxlIHNheSBvciB3aGlzcGVyJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdqb2lubG9ncyAvIGpsb2dzJywgREVTQyA9ICdMb2cgd2hlbiBwZW9wbGUgam9pbid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY2hhdCAvIHNheSBbdGV4dF0nLCBERVNDID0gJ01ha2VzIHlvdSBjaGF0IGEgc3RyaW5nIChwb3NzaWJsZSBtdXRlIGJ5cGFzcyknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3NwYW0gW3RleHRdJywgREVTQyA9ICdNYWtlcyB5b3Ugc3BhbSB0aGUgY2hhdCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5zcGFtJywgREVTQyA9ICdUdXJucyBvZmYgc3BhbSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnd2hpc3BlciAvIHBtIFtwbGF5ZXJdIFt0ZXh0XScsIERFU0MgPSAnTWFrZXMgeW91IHdoaXNwZXIgYSBzdHJpbmcgdG8gc29tZW9uZSAocG9zc2libGUgbXV0ZSBieXBhc3MpJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdwbXNwYW0gW3BsYXllcl0gW3RleHRdJywgREVTQyA9ICdNYWtlcyB5b3Ugc3BhbSBhIHBsYXllcnMgd2hpc3BlcnMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VucG1zcGFtIFtwbGF5ZXJdJywgREVTQyA9ICdUdXJucyBvZmYgcG0gc3BhbSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnc3BhbXNwZWVkIFtudW1dJywgREVTQyA9ICdIb3cgcXVpY2tseSB5b3Ugc3BhbSAoZGVmYXVsdCBpcyAxKSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnYnViYmxlY2hhdCAoQ0xJRU5UKScsIERFU0MgPSAnRW5hYmxlcyBidWJibGUgY2hhdCBmb3IgeW91ciBjbGllbnQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VuYnViYmxlY2hhdCAvIG5vYnViYmxlY2hhdCcsIERFU0MgPSAnRGlzYWJsZXMgdGhlIGJ1YmJsZWNoYXQgY29tbWFuZCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnc2FmZWNoYXQnLCBERVNDID0gJ0VuYWJsZXMgc2FmZSBjaGF0J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub3NhZmVjaGF0IC8gZGlzYWJsZXNhZmVjaGF0JywgREVTQyA9ICdEaXNhYmxlcyBzYWZlY2hhdCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnJywgREVTQyA9ICcnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2VzcCcsIERFU0MgPSAnVmlldyBhbGwgcGxheWVycyBhbmQgdGhlaXIgc3RhdHVzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub2VzcCAvIHVuZXNwJywgREVTQyA9ICdSZW1vdmVzIGVzcCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZXNwdHJhbnNwYXJlbmN5IFtudW1iZXJdJywgREVTQyA9ICdDaGFuZ2VzIHRoZSB0cmFuc3BhcmVuY3kgb2YgZXNwIHJlbGF0ZWQgY29tbWFuZHMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3BhcnRlc3AgW3BhcnQgbmFtZV0nLCBERVNDID0gJ0hpZ2hsaWdodHMgYSBwYXJ0J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bnBhcnRlc3AgLyBub3BhcnRlc3AgW3BhcnQgbmFtZV0nLCBERVNDID0gJ3JlbW92ZXMgcGFydGVzcCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY2hhbXMnLCBERVNDID0gJ0VTUCBidXQgd2l0aG91dCB0ZXh0IGluIHRoZSB3YXknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ25vY2hhbXMgLyB1bmNoYW1zJywgREVTQyA9ICdSZW1vdmVzIGNoYW1zJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdsb2NhdGUgW3BsYXllcl0nLCBERVNDID0gJ1ZpZXcgYSBzaW5nbGUgcGxheWVyIGFuZCB0aGVpciBzdGF0dXMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VubG9jYXRlIC8gbm9sb2NhdGUgW3BsYXllcl0nLCBERVNDID0gJ1JlbW92ZXMgbG9jYXRlJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd4cmF5JywgREVTQyA9ICdNYWtlcyBhbGwgcGFydHMgaW4gd29ya3NwYWNlIHRyYW5zcGFyZW50J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bnhyYXkgLyBub3hyYXknLCBERVNDID0gJ1Jlc3RvcmVzIHRyYW5zcGFyZW5jeSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnbG9vcHhyYXknLCBERVNDID0gJ01ha2VzIGFsbCBwYXJ0cyBpbiB3b3Jrc3BhY2UgdHJhbnNwYXJlbnQgYnV0IGxvb3BlZCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5sb29wdW54cmF5JywgREVTQyA9ICdVbmxvb3BzIHhyYXknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJycsIERFU0MgPSAnJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdzcGVjdGF0ZSAvIHZpZXcgW3BsYXllcl0nLCBERVNDID0gJ1ZpZXcgYSBwbGF5ZXInfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3ZpZXdwYXJ0IC8gdmlld3AgW3BhcnQgbmFtZV0nLCBERVNDID0gJ1ZpZXcgYSBwYXJ0J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bnNwZWN0YXRlIC8gdW52aWV3JywgREVTQyA9ICdTdG9wcyB2aWV3aW5nIHBsYXllcid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZnJlZWNhbSAvIGZjJywgREVTQyA9ICdBbGxvd3MgeW91IHRvIGZyZWVseSBtb3ZlIGNhbWVyYSBhcm91bmQgdGhlIGdhbWUnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2ZyZWVjYW1wb3MgLyBmY3BvcyBbWCBZIFpdJywgREVTQyA9ICdNb3ZlcyAvIG9wZW5zIGZyZWVjYW0gaW4gYSBjZXJ0YWluIHBvc2l0aW9uJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdmcmVlY2Ftd2F5cG9pbnQgLyBmY3dwIFtuYW1lXScsIERFU0MgPSAnTW92ZXMgLyBvcGVucyBmcmVlY2FtIHRvIGEgd2F5cG9pbnQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2ZyZWVjYW1nb3RvIC8gZmNnb3RvIC8gZmN0cCBbcGxheWVyXScsIERFU0MgPSAnTW92ZXMgLyBvcGVucyBmcmVlY2FtIHRvIGEgcGxheWVyJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bmZyZWVjYW0gLyB1bmZjJywgREVTQyA9ICdEaXNhYmxlcyBmcmVlY2FtJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdmcmVlY2Ftc3BlZWQgLyBmY3NwZWVkIFtudW1dJywgREVTQyA9ICdBZGp1c3RzIGZyZWVjYW0gc3BlZWQgKGRlZmF1bHQgaXMgMSknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ25vdGlmeWZyZWVjYW1wb3NpdGlvbiAvIG5vdGlmeWZjcG9zJywgREVTQyA9ICdOb2l0aWZpZXMgeW91IHlvdXIgZnJlZWNhbSBjb29yZGluYXRlcyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY29weWZyZWVjYW1wb3NpdGlvbiAvIGNvcHlmY3BvcycsIERFU0MgPSAnQ29waWVzIHlvdXIgZnJlZWNhbSBjb29yZGluYXRlcyB0byB5b3VyIGNsaXBib2FyZCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZ290b2NhbWVyYSAvIGdvdG9jYW0nLCBERVNDID0gJ1RlbGVwb3J0cyB5b3UgdG8gdGhlIGxvY2F0aW9uIG9mIHlvdXIgY2FtZXJhJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd0d2VlbmdvdG9jYW0gLyB0Z290b2NhbScsIERFU0MgPSAnVHdlZW5zIHlvdSB0byB0aGUgbG9jYXRpb24gb2YgeW91ciBjYW1lcmEnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2ZpcnN0cCcsIERFU0MgPSAnRm9yY2VzIGNhbWVyYSB0byBnbyBpbnRvIGZpcnN0IHBlcnNvbid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndGhpcmRwJywgREVTQyA9ICdBbGxvd3MgY2FtZXJhIHRvIGdvIGludG8gdGhpcmQgcGVyc29uJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub2NsaXBjYW0gLyBuY2NhbScsIERFU0MgPSAnQWxsb3dzIGNhbWVyYSB0byBnbyB0aHJvdWdoIG9iamVjdHMgbGlrZSB3YWxscyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnbWF4em9vbSBbbnVtXScsIERFU0MgPSAnTWF4aW11bSBjYW1lcmEgem9vbSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnbWluem9vbSBbbnVtXScsIERFU0MgPSAnTWluaW11bSBjYW1lcmEgem9vbSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY2FtZGlzdGFuY2UgW251bV0nLCBERVNDID0gJ0NoYW5nZXMgY2FtZXJhIGRpc3RhbmNlIGZyb20geW91ciBwbGF5ZXInfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2ZvdiBbbnVtXScsIERFU0MgPSAnQWRqdXN0cyBmaWVsZCBvZiB2aWV3IChkZWZhdWx0IGlzIDcwKSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZml4Y2FtIC8gcmVzdG9yZWNhbScsIERFU0MgPSAnRml4ZXMgY2FtZXJhJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdlbmFibGVzaGlmdGxvY2sgLyBlbmFibGVzbCcsIERFU0MgPSAnRW5hYmxlcyB0aGUgc2hpZnQgbG9jayBvcHRpb24nfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2xvb2thdCBbcGxheWVyXScsIERFU0MgPSAnTW92ZXMgeW91ciBjYW1lcmEgdmlldyB0byBhIHBsYXllcid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnJywgREVTQyA9ICcnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2J0b29scyAoQ0xJRU5UKScsIERFU0MgPSAnR2l2ZXMgeW91IGJ1aWxkaW5nIHRvb2xzIChET0VTIE5PVCBSRVBMSUNBVEUpJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdmM3ggKENMSUVOVCknLCBERVNDID0gJ0dpdmVzIHlvdSBGM1ggYnVpbGRpbmcgdG9vbHMgKERPRVMgTk9UIFJFUExJQ0FURSknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3BhcnRuYW1lIC8gcGFydHBhdGgnLCBERVNDID0gJ0FsbG93cyB5b3UgdG8gY2xpY2sgYSBwYXJ0IHRvIHNlZSBpdHMgcGF0aCAmIG5hbWUnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2RlbGV0ZSBbaW5zdGFuY2UgbmFtZV0gKENMSUVOVCknLCBERVNDID0gJ1JlbW92ZXMgYW55IHBhcnQgd2l0aCBhIGNlcnRhaW4gbmFtZSBmcm9tIHRoZSB3b3Jrc3BhY2UgKERPRVMgTk9UIFJFUExJQ0FURSknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2RlbGV0ZWNsYXNzIC8gZGMgW2NsYXNzIG5hbWVdIChDTElFTlQpJywgREVTQyA9ICdSZW1vdmVzIGFueSBwYXJ0IHdpdGggYSBjZXJ0YWluIGNsYXNzbmFtZSBmcm9tIHRoZSB3b3Jrc3BhY2UgKERPRVMgTk9UIFJFUExJQ0FURSknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2xvY2t3b3Jrc3BhY2UgLyBsb2Nrd3MnLCBERVNDID0gJ0xvY2tzIHRoZSB3aG9sZSB3b3Jrc3BhY2UnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VubG9ja3dvcmtzcGFjZSAvIHVubG9ja3dzJywgREVTQyA9ICdVbmxvY2tzIHRoZSB3aG9sZSB3b3Jrc3BhY2UnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2ludmlzaWJsZXBhcnRzIC8gaW52aXNwYXJ0cyAoQ0xJRU5UKScsIERFU0MgPSAnU2hvd3MgaW52aXNpYmxlIHBhcnRzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bmludmlzaWJsZXBhcnRzIC8gdW5pbnZpc3BhcnRzIChDTElFTlQpJywgREVTQyA9ICdNYWtlcyBwYXJ0cyBhZmZlY3RlZCBieSBpbnZpc3BhcnRzIHJldHVybiB0byBub3JtYWwnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2RlbGV0ZWludmlzcGFydHMgLyBkaXAgKENMSUVOVCknLCBERVNDID0gJ0RlbGV0ZXMgaW52aXNpYmxlIHBhcnRzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdnb3RvcGFydCBbcGFydCBuYW1lXScsIERFU0MgPSAnTW92ZXMgeW91ciBjaGFyYWN0ZXIgdG8gYSBwYXJ0IG9yIG11bHRpcGxlIHBhcnRzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd0d2VlbmdvdG9wYXJ0IC8gdGdvdG9wYXJ0IFtwYXJ0IG5hbWVdJywgREVTQyA9ICdUd2VlbnMgeW91ciBjaGFyYWN0ZXIgdG8gYSBwYXJ0IG9yIG11bHRpcGxlIHBhcnRzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdnb3RvcGFydGNsYXNzIC8gZ3BjIFtjbGFzcyBuYW1lXScsIERFU0MgPSAnTW92ZXMgeW91ciBjaGFyYWN0ZXIgdG8gYSBwYXJ0IG9yIG11bHRpcGxlIHBhcnRzIGJhc2VkIG9uIGNsYXNzbmFtZSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndHdlZW5nb3RvcGFydGNsYXNzIC8gdGdwYyBbY2xhc3MgbmFtZV0nLCBERVNDID0gJ1R3ZWVucyB5b3VyIGNoYXJhY3RlciB0byBhIHBhcnQgb3IgbXVsdGlwbGUgcGFydHMgYmFzZWQgb24gY2xhc3NuYW1lJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdnb3RvbW9kZWwgW3BhcnQgbmFtZV0nLCBERVNDID0gJ01vdmVzIHlvdXIgY2hhcmFjdGVyIHRvIGEgbW9kZWwgb3IgbXVsdGlwbGUgbW9kZWxzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd0d2VlbmdvdG9tb2RlbCAvIHRnb3RvbW9kZWwgW3BhcnQgbmFtZV0nLCBERVNDID0gJ1R3ZWVucyB5b3VyIGNoYXJhY3RlciB0byBhIG1vZGVsIG9yIG11bHRpcGxlIG1vZGVscyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZ290b3BhcnRkZWxheSAvIGdvdG9tb2RlbGRlbGF5IFtudW1dJywgREVTQyA9ICdBZGp1c3RzIGhvdyBxdWlja2x5IHlvdSB0ZWxlcG9ydCB0byBlYWNoIHBhcnQgKGRlZmF1bHQgaXMgMC4xKSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnYnJpbmdwYXJ0IFtwYXJ0IG5hbWVdIChDTElFTlQpJywgREVTQyA9ICdNb3ZlcyBhIHBhcnQgb3IgbXVsdGlwbGUgcGFydHMgdG8geW91ciBjaGFyYWN0ZXInfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2JyaW5ncGFydGNsYXNzIC8gYnBjIFtjbGFzcyBuYW1lXSAoQ0xJRU5UKScsIERFU0MgPSAnTW92ZXMgYSBwYXJ0IG9yIG11bHRpcGxlIHBhcnRzIHRvIHlvdXIgY2hhcmFjdGVyIGJhc2VkIG9uIGNsYXNzbmFtZSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnbm9jbGlja2RldGVjdG9ybGltaXRzIC8gbm9jZGxpbWl0cycsIERFU0MgPSAnU2V0cyBhbGwgY2xpY2sgZGV0ZWN0b3JzIE1heEFjdGl2YXRpb25EaXN0YW5jZSB0byBtYXRoLmh1Z2UnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2ZpcmVjbGlja2RldGVjdG9ycyAvIGZpcmVjZCBbbmFtZV0nLCBERVNDID0gJ1VzZXMgYWxsIGNsaWNrIGRldGVjdG9ycyBpbiBhIGdhbWUgb3IgdXNlcyB0aGUgb3B0aW9uYWwgbmFtZSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZmlyZXRvdWNoaW50ZXJlc3RzIC8gdG91Y2hpbnRlcmVzdHMgW25hbWVdJywgREVTQyA9ICdVc2VzIGFsbCB0b3VjaGludGVyZXN0cyBpbiBhIGdhbWUgb3IgdXNlcyB0aGUgb3B0aW9uYWwgbmFtZSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnbm9wcm94aW1pdHlwcm9tcHRsaW1pdHMgLyBub3BwbGltaXRzJywgREVTQyA9ICdTZXRzIGFsbCBwcm94aW1pdHkgcHJvbXB0cyBNYXhBY3RpdmF0aW9uRGlzdGFuY2UgdG8gbWF0aC5odWdlJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdmaXJlcHJveGltaXR5cHJvbXB0cyAvIGZpcmVwcCBbbmFtZV0nLCBERVNDID0gJ1VzZXMgYWxsIHByb3hpbWl0eSBwcm9tcHRzIGluIGEgZ2FtZSBvciB1c2VzIHRoZSBvcHRpb25hbCBuYW1lJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdpbnN0YW50cHJveGltaXR5cHJvbXB0cyAvIGluc3RhbnRwcCcsIERFU0MgPSAnRGlzYWJsZSB0aGUgY29vbGRvd24gZm9yIHByb3hpbWl0eSBwcm9tcHRzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bmluc3RhbnRwcm94aW1pdHlwcm9tcHRzIC8gdW5pbnN0YW50cHAnLCBERVNDID0gJ1VuZG8gdGhlIGNvb2xkb3duIHJlbW92YWwnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3RwdW5hbmNob3JlZCAvIHRwdWEgW3BsYXllcl0nLCBERVNDID0gJ1RlbGVwb3J0cyB1bmFuY2hvcmVkIHBhcnRzIHRvIGEgcGxheWVyJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdhbmltc3VuYW5jaG9yZWQgLyBmcmVlemV1YScsIERFU0MgPSAnRnJlZXplcyB1bmFuY2hvcmVkIHBhcnRzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd0aGF3dW5hbmNob3JlZCAvIHRoYXd1YSAvIHVuZnJlZXpldWEnLCBERVNDID0gJ1RoYXdzIHVuYW5jaG9yZWQgcGFydHMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3JlbW92ZXRlcnJhaW4gLyBydGVycmFpbiAvIG5vdGVycmFpbicsIERFU0MgPSAnUmVtb3ZlcyBhbGwgdGVycmFpbid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY2xlYXJuaWxpbnN0YW5jZXMgLyBub25pbGluc3RhbmNlcyAvIGNuaScsIERFU0MgPSAnUmVtb3ZlcyBuaWwgaW5zdGFuY2VzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdkZXN0cm95aGVpZ2h0IC8gZGggW251bV0nLCBERVNDID0gJ1NldHMgRmFsbGVuUGFydHNEZXN0cm95SGVpZ2h0J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICcnLCBERVNDID0gJyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZnVsbGJyaWdodCAvIGZiIChDTElFTlQpJywgREVTQyA9ICdNYWtlcyB0aGUgbWFwIGJyaWdodGVyIC8gbW9yZSB2aXNpYmxlJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdsb29wZnVsbGJyaWdodCAvIGxvb3BmYiAoQ0xJRU5UKScsIERFU0MgPSAnTWFrZXMgdGhlIG1hcCBicmlnaHRlciAvIG1vcmUgdmlzaWJsZSBidXQgbG9vcGVkJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bmxvb3BmdWxsYnJpZ2h0IC8gdW5sb29wZmInLCBERVNDID0gJ1VubG9vcHMgZnVsbGJyaWdodCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnYW1iaWVudCBbbnVtXSBbbnVtXSBbbnVtXSAoQ0xJRU5UKScsIERFU0MgPSAnQ2hhbmdlcyBhbWJpZW50J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdkYXkgKENMSUVOVCknLCBERVNDID0gJ0NoYW5nZXMgdGhlIHRpbWUgdG8gZGF5IGZvciB0aGUgY2xpZW50J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICduaWdodCAoQ0xJRU5UKScsIERFU0MgPSAnQ2hhbmdlcyB0aGUgdGltZSB0byBuaWdodCBmb3IgdGhlIGNsaWVudCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnbm9mb2cgKENMSUVOVCknLCBERVNDID0gJ1JlbW92ZXMgZm9nJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdicmlnaHRuZXNzIFtudW1dIChDTElFTlQpJywgREVTQyA9ICdDaGFuZ2VzIHRoZSBicmlnaHRuZXNzIGxpZ2h0aW5nIHByb3BlcnR5J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdnbG9iYWxzaGFkb3dzIC8gZ3NoYWRvd3MgKENMSUVOVCknLCBERVNDID0gJ0VuYWJsZXMgZ2xvYmFsIHNoYWRvd3MnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ25vZ2xvYmFsc2hhZG93cyAvIG5vZ3NoYWRvd3MgKENMSUVOVCknLCBERVNDID0gJ0Rpc2FibGVzIGdsb2JhbCBzaGFkb3dzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdyZXN0b3JlbGlnaHRpbmcgLyBybGlnaHRpbmcnLCBERVNDID0gJ1Jlc3RvcmVzIExpZ2h0aW5nIHByb3BlcnRpZXMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2xpZ2h0IFtyYWRpdXNdIFticmlnaHRuZXNzXSAoQ0xJRU5UKScsIERFU0MgPSAnR2l2ZXMgeW91ciBwbGF5ZXIgZHluYW1pYyBsaWdodCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnbm9saWdodCAvIHVubGlnaHQnLCBERVNDID0gJ1JlbW92ZXMgZHluYW1pYyBsaWdodCBmcm9tIHlvdXIgcGxheWVyJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICcnLCBERVNDID0gJyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnaW5zcGVjdCAvIGV4YW1pbmUgW3BsYXllcl0nLCBERVNDID0gJ09wZW5zIEluc3BlY3RNZW51IGZvciBhIGNlcnRhaW4gcGxheWVyJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdhZ2UgW3BsYXllcl0nLCBERVNDID0gJ1RlbGxzIHlvdSB0aGUgYWdlIG9mIGEgcGxheWVyJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdjaGF0YWdlIFtwbGF5ZXJdJywgREVTQyA9ICdDaGF0cyB0aGUgYWdlIG9mIGEgcGxheWVyJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdqb2luZGF0ZSAvIGpkIFtwbGF5ZXJdJywgREVTQyA9ICdUZWxscyB5b3UgdGhlIGRhdGUgdGhlIHBsYXllciBqb2luZWQgUm9ibG94J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdjaGF0am9pbmRhdGUgLyBjamQgW3BsYXllcl0nLCBERVNDID0gJ0NoYXRzIHRoZSBkYXRlIHRoZSBwbGF5ZXIgam9pbmVkIFJvYmxveCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY29weW5hbWUgLyBjb3B5dXNlciBbcGxheWVyXScsIERFU0MgPSAnQ29waWVzIGEgcGxheWVycyBmdWxsIHVzZXJuYW1lIHRvIHlvdXIgY2xpcGJvYXJkJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1c2VyaWQgLyBpZCBbcGxheWVyXScsIERFU0MgPSAnTm90aWZpZXMgYSBwbGF5ZXJzIHVzZXIgSUQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2NvcHl1c2VyaWQgLyBjb3B5aWQgW3BsYXllcl0nLCBERVNDID0gJ0NvcGllcyBhIHBsYXllcnMgdXNlciBJRCB0byB5b3VyIGNsaXBib2FyZCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnYXBwZWFyYW5jZWlkIC8gYWlkIFtwbGF5ZXJdJywgREVTQyA9ICdOb3RpZmllcyBhIHBsYXllcnMgYXBwZWFyYW5jZSBJRCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY29weWFwcGVhcmFuY2VpZCAvIGNhaWQgW3BsYXllcl0nLCBERVNDID0gJ0NvcGllcyBhIHBsYXllcnMgYXBwZWFyYW5jZSBJRCB0byB5b3VyIGNsaXBib2FyZCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnYmFuZyBbcGxheWVyXSBbc3BlZWRdJywgREVTQyA9ICdvd28nfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VuYmFuZycsIERFU0MgPSAndXd1J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdjYXJwZXQgW3BsYXllcl0nLCBERVNDID0gJ0JlIHNvbWVvbmVzIGNhcnBldCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5jYXJwZXQnLCBERVNDID0gJ1VuZG9lcyBjYXJwZXQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2ZyaWVuZCBbcGxheWVyXScsIERFU0MgPSAnU2VuZHMgYSBmcmllbmQgcmVxdWVzdCB0byBjZXJ0YWluIHBsYXllcnMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VuZnJpZW5kIFtwbGF5ZXJdJywgREVTQyA9ICdVbmZyaWVuZHMgY2VydGFpbiBwbGF5ZXJzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdoZWFkc2l0IFtwbGF5ZXJdJywgREVTQyA9ICdTaXQgb24gYSBwbGF5ZXJzIGhlYWQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3dhbGt0byAvIGZvbGxvdyBbcGxheWVyXScsIERFU0MgPSAnRm9sbG93IGEgcGxheWVyJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdwYXRoZmluZHdhbGt0byAvIHBhdGhmaW5kZm9sbG93IFtwbGF5ZXJdJywgREVTQyA9ICdGb2xsb3cgYSBwbGF5ZXIgdXNpbmcgcGF0aGZpbmRpbmcnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3BhdGhmaW5kd2Fsa3Rvd2F5cG9pbnQgLyBwYXRoZmluZHdhbGt0b3dwIFt3YXlwb2ludF0nLCBERVNDID0gJ1dhbGsgdG8gYSB3YXlwb2ludCB1c2luZyBwYXRoZmluZGluZyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW53YWxrdG8gLyB1bmZvbGxvdycsIERFU0MgPSAnU3RvcHMgZm9sbG93aW5nIGEgcGxheWVyJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdzdGFyZWF0IC8gc3RhcmUgW3BsYXllcl0nLCBERVNDID0gJ1N0YXJlIC8gbG9vayBhdCBhIHBsYXllcid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5zdGFyZWF0IC8gdW5zdGFyZSBbcGxheWVyXScsIERFU0MgPSAnRGlzYWJsZXMgc3RhcmVhdCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAncm9sZXdhdGNoIFtncm91cCBpZF0gW3JvbGUgbmFtZV0nLCBERVNDID0gJ05vdGlmeSBpZiBzb21lb25lIGZyb20gYSB3YXRjaGVkIGdyb3VwIGpvaW5zIHRoZSBzZXJ2ZXInfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3JvbGV3YXRjaHN0b3AgLyB1bnJvbGV3YXRjaCcsIERFU0MgPSAnRGlzYWJsZSBSb2xld2F0Y2gnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3JvbGV3YXRjaGxlYXZlJywgREVTQyA9ICdUb2dnbGUgaWYgeW91IHNob3VsZCBsZWF2ZSB0aGUgZ2FtZSBpZiBzb21lb25lIGZyb20gYSB3YXRjaGVkIGdyb3VwIGpvaW5zIHRoZSBzZXJ2ZXInfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3N0YWZmd2F0Y2gnLCBERVNDID0gJ05vdGlmeSBpZiBhIHN0YWZmIG1lbWJlciBvZiB0aGUgZ2FtZSBqb2lucyB0aGUgc2VydmVyJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bnN0YWZmd2F0Y2gnLCBERVNDID0gJ0Rpc2FibGUgU3RhZmZ3YXRjaCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnYXR0YWNoIFtwbGF5ZXJdIChUT09MKScsIERFU0MgPSAnQXR0YWNoZXMgeW91IHRvIGEgcGxheWVyIChZT1UgTkVFRCBBIFRPT0wpJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdraWxsIFtwbGF5ZXJdIChUT09MKScsIERFU0MgPSAnS2lsbHMgYSBwbGF5ZXIgKFlPVSBORUVEIEEgVE9PTCknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2Zhc3RraWxsIFtwbGF5ZXJdIChUT09MKScsIERFU0MgPSAnS2lsbHMgYSBwbGF5ZXIgKGxlc3MgcmVsaWFibGUpIChZT1UgTkVFRCBBIFRPT0wpJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdoYW5kbGVraWxsIC8gaGtpbGwgW3BsYXllcl0gKFRPT0wpJywgREVTQyA9ICdLaWxscyBhIHBsYXllciB1c2luZyB0b29sIGRhbWFnZSAoWU9VIE5FRUQgQSBUT09MKSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnYnJpbmcgW3BsYXllcl0gKFRPT0wpJywgREVTQyA9ICdCcmluZ3MgYSBwbGF5ZXIgKFlPVSBORUVEIEEgVE9PTCknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2Zhc3RicmluZyBbcGxheWVyXSAoVE9PTCknLCBERVNDID0gJ0JyaW5ncyBhIHBsYXllciAobGVzcyByZWxpYWJsZSkgKFlPVSBORUVEIEEgVE9PTCknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3RlbGVwb3J0IC8gdHAgW3BsYXllcl0gW3BsYXllcl0gKFRPT0wpJywgREVTQyA9ICdUZWxlcG9ydHMgYSBwbGF5ZXIgdG8gYW5vdGhlciBwbGF5ZXIgKFlPVSBORUVEIEEgVE9PTCknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2Zhc3R0ZWxlcG9ydCAvIGZhc3R0cCBbcGxheWVyXSBbcGxheWVyXSAoVE9PTCknLCBERVNDID0gJ1RlbGVwb3J0cyBhIHBsYXllciB0byBhbm90aGVyIHBsYXllciAobGVzcyByZWxpYWJsZSkgKFlPVSBORUVEIEEgVE9PTCknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2ZsaW5nJywgREVTQyA9ICdGbGluZ3MgYW55b25lIHlvdSB0b3VjaCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5mbGluZycsIERFU0MgPSAnRGlzYWJsZXMgdGhlIGZsaW5nIGNvbW1hbmQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2ZseWZsaW5nJywgREVTQyA9ICdCYXNpY2FsbHkgdGhlIGludmlzZmxpbmcgY29tbWFuZCBidXQgbm90IGludmlzaWJsZSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5mbHlmbGluZycsIERFU0MgPSAnRGlzYWJsZXMgdGhlIGZseWZsaW5nIGNvbW1hbmQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2ludmlzZmxpbmcnLCBERVNDID0gJ0VuYWJsZXMgaW52aXNpYmxlIGZsaW5nJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdsb29wb29mJywgREVTQyA9ICdMb29wcyBldmVyeW9uZXMgY2hhcmFjdGVyIHNvdW5kcyAoZXZlcnlvbmUgY2FuIGhlYXIpJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bmxvb3Bvb2YnLCBERVNDID0gJ1N0b3BzIHRoZSBvb2YgY2hhb3MnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ211dGVib29tYm94IFtwbGF5ZXJdJywgREVTQyA9ICdNdXRlcyBzb21lb25lcyBib29tYm94J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bm11dGVib29tYm94IFtwbGF5ZXJdJywgREVTQyA9ICdVbm11dGVzIHNvbWVvbmVzIGJvb21ib3gnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2hpdGJveCBbcGxheWVyXSBbc2l6ZV0nLCBERVNDID0gJ0V4cGFuZHMgdGhlIGhpdGJveCBmb3IgcGxheWVycyBIdW1hbm9pZFJvb3RQYXJ0IChkZWZhdWx0IGlzIDEpJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdoZWFkc2l6ZSBbcGxheWVyXSBbc2l6ZV0nLCBERVNDID0gJ0V4cGFuZHMgdGhlIGhlYWQgc2l6ZSBmb3IgcGxheWVycyBIZWFkIChkZWZhdWx0IGlzIDEpJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICcnLCBERVNDID0gJyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAncmVzZXQnLCBERVNDID0gJ1Jlc2V0cyB5b3VyIGNoYXJhY3RlciBub3JtYWxseSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAncmVzcGF3bicsIERFU0MgPSAnUmVzcGF3bnMgeW91J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdyZWZyZXNoIC8gcmUnLCBERVNDID0gJ1Jlc3Bhd25zIGFuZCBicmluZ3MgeW91IGJhY2sgdG8gdGhlIHNhbWUgcG9zaXRpb24nfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2dvZCcsIERFU0MgPSAnTWFrZXMgeW91ciBjaGFyYWN0ZXIgZGlmZmljdWx0IHRvIGtpbGwgaW4gbW9zdCBnYW1lcyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnaW52aXNpYmxlIC8gaW52aXMnLCBERVNDID0gJ01ha2VzIHlvdSBpbnZpc2libGUgdG8gb3RoZXIgcGxheWVycyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndmlzaWJsZSAvIHZpcycsIERFU0MgPSAnTWFrZXMgeW91IHZpc2libGUgdG8gb3RoZXIgcGxheWVycyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndG9vbGludmlzaWJsZSAvIHRvb2xpbnZpcyAvIHRpbnZpcycsIERFU0MgPSAnTWFrZXMgeW91IGludmlzaWJsZSB0byBvdGhlciBwbGF5ZXJzIGFuZCBhYmxlIHRvIHVzZSB0b29scyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnc3BlZWQgLyB3cyAvIHdhbGtzcGVlZCBbbnVtXScsIERFU0MgPSAnQ2hhbmdlIHlvdXIgd2Fsa3NwZWVkJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdzcG9vZnNwZWVkIC8gc3Bvb2Z3cyBbbnVtXScsIERFU0MgPSAnU3Bvb2ZzIHlvdXIgV2Fsa1NwZWVkIG9uIHRoZSBDbGllbnQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2xvb3BzcGVlZCAvIGxvb3B3cyBbbnVtXScsIERFU0MgPSAnTG9vcHMgeW91ciB3YWxrc3BlZWQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VubG9vcHNwZWVkIC8gdW5sb29wd3MnLCBERVNDID0gJ1R1cm5zIG9mZiBsb29wc3BlZWQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2hpcGhlaWdodCAvIGhoZWlnaHQgW251bV0nLCBERVNDID0gJ0FkanVzdHMgaGlwIGhlaWdodCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnanVtcHBvd2VyIC8ganBvd2VyIC8ganAgW251bV0nLCBERVNDID0gJ0NoYW5nZSBhIHBsYXllcnMganVtcCBoZWlnaHQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3Nwb29manVtcHBvd2VyIC8gc3Bvb2ZqcCBbbnVtXScsIERFU0MgPSAnU3Bvb2ZzIHlvdXIgSnVtcFBvd2VyIG9uIHRoZSBDbGllbnQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2xvb3BqdW1wcG93ZXIgLyBsb29wanAgW251bV0nLCBERVNDID0gJ0xvb3BzIHlvdXIganVtcCBoZWlnaHQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VubG9vcGp1bXBwb3dlciAvIHVubG9vcGpwJywgREVTQyA9ICdUdXJucyBvZmYgbG9vcGp1bXBwb3dlcid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnbWF4c2xvcGVhbmdsZSAvIG1zYSBbbnVtXScsIERFU0MgPSAnQWRqdXN0cyBNYXhTbG9wZUFuZ2xlJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdncmF2aXR5IC8gZ3JhdiBbbnVtXSAoQ0xJRU5UKScsIERFU0MgPSAnQ2hhbmdlIHlvdXIgZ3Jhdml0eSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnc2l0JywgREVTQyA9ICdNYWtlcyB5b3VyIGNoYXJhY3RlciBzaXQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2xheSAvIGxheWRvd24nLCBERVNDID0gJ01ha2VzIHlvdXIgY2hhcmFjdGVyIGxheSBkb3duJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdzaXR3YWxrJywgREVTQyA9ICdNYWtlcyB5b3VyIGNoYXJhY3RlciBzaXQgd2hpbGUgc3RpbGwgYmVpbmcgYWJsZSB0byB3YWxrJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub3NpdCcsIERFU0MgPSAnUHJldmVudHMgeW91ciBjaGFyYWN0ZXIgZnJvbSBzaXR0aW5nJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bm5vc2l0JywgREVTQyA9ICdEaXNhYmxlcyBub3NpdCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnanVtcCcsIERFU0MgPSAnTWFrZXMgeW91ciBjaGFyYWN0ZXIganVtcCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnaW5maW5pdGVqdW1wIC8gaW5manVtcCcsIERFU0MgPSAnQWxsb3dzIHlvdSB0byBqdW1wIGJlZm9yZSBoaXR0aW5nIHRoZSBncm91bmQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VuaW5maW5pdGVqdW1wIC8gdW5pbmZqdW1wJywgREVTQyA9ICdEaXNhYmxlcyBpbmZqdW1wJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdmbHlqdW1wJywgREVTQyA9ICdBbGxvd3MgeW91IHRvIGhvbGQgc3BhY2UgdG8gZmx5IHVwJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bmZseWp1bXAnLCBERVNDID0gJ0Rpc2FibGVzIGZseWp1bXAnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2F1dG9qdW1wIC8gYWp1bXAnLCBERVNDID0gJ0F1dG9tYXRpY2FsbHkganVtcHMgd2hlbiB5b3UgcnVuIGludG8gYW4gb2JqZWN0J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bmF1dG9qdW1wIC8gdW5hanVtcCcsIERFU0MgPSAnRGlzYWJsZXMgYXV0b2p1bXAnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2VkZ2VqdW1wIC8gZWp1bXAnLCBERVNDID0gJ0F1dG9tYXRpY2FsbHkganVtcHMgd2hlbiB5b3UgZ2V0IHRvIHRoZSBlZGdlIG9mIGFuIG9iamVjdCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5lZGdlanVtcCAvIHVuZWp1bXAnLCBERVNDID0gJ0Rpc2FibGVzIGVkZ2VqdW1wJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdwbGF0Zm9ybXN0YW5kIC8gc3R1bicsIERFU0MgPSAnRW5hYmxlcyBQbGF0Zm9ybVN0YW5kJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bnBsYXRmb3Jtc3RhbmQgLyB1bnN0dW4nLCBERVNDID0gJ0Rpc2FibGVzIFBsYXRmb3JtU3RhbmQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ25vcm90YXRlIC8gbm9hdXRvcm90YXRlJywgREVTQyA9ICdEaXNhYmxlcyBBdXRvUm90YXRlJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bm5vcm90YXRlIC8gYXV0b3JvdGF0ZScsIERFU0MgPSAnRW5hYmxlcyBBdXRvUm90YXRlJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdlbmFibGVzdGF0ZSBbU3RhdGVUeXBlXScsIERFU0MgPSAnRW5hYmxlcyBhIGh1bWFub2lkIHN0YXRlIHR5cGUnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2Rpc2FibGVzdGF0ZSBbU3RhdGVUeXBlXScsIERFU0MgPSAnRGlzYWJsZXMgYSBodW1hbm9pZCBzdGF0ZSB0eXBlJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd0ZWFtIFt0ZWFtIG5hbWVdIChDTElFTlQpJywgREVTQyA9ICdDaGFuZ2VzIHlvdXIgdGVhbS4gU29tZXRpbWVzIGZvb2xzIGxvY2Fsc2NyaXB0cy4nfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ25vYmlsbGJvYXJkZ3VpIC8gbm9iZ3VpIC8gbm9uYW1lJywgREVTQyA9ICdSZW1vdmVzIGJpbGxib2FyZCBhbmQgc3VyZmFjZSBndWlzIGZyb20geW91ciBwbGF5ZXJzIChpLmUuIG5hbWUgZ3VpcyBhdCBjYWZlcyknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2xvb3Bub2JndWkgLyBsb29wbm9uYW1lJywgREVTQyA9ICdMb29wIHJlbW92ZXMgYmlsbGJvYXJkIGFuZCBzdXJmYWNlIGd1aXMgZnJvbSB5b3VyIHBsYXllcnMgKGkuZS4gbmFtZSBndWlzIGF0IGNhZmVzKSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5sb29wbm9iZ3VpIC8gdW5sb29wbm9uYW1lJywgREVTQyA9ICdEaXNhYmxlcyBsb29wbm9iZ3VpJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub2hlYWQgLyBoZWFkbGVzcycsIERFU0MgPSAnUmVtb3ZlcyB5b3VyIGhlYWQgKHVzZXMgc2ltdWxhdGlvbiByYWRpdXMpJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub2FybXMnLCBERVNDID0gJ1JlbW92ZXMgeW91ciBhcm1zJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub2xlZ3MnLCBERVNDID0gJ1JlbW92ZXMgeW91ciBsZWdzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub2xpbWJzJywgREVTQyA9ICdSZW1vdmVzIHlvdXIgbGltYnMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ25ha2VkIChDTElFTlQpJywgREVTQyA9ICdSZW1vdmVzIHlvdXIgY2xvdGhpbmcnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ25vZmFjZSAvIHJlbW92ZWZhY2UnLCBERVNDID0gJ1JlbW92ZXMgeW91ciBmYWNlJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdibG9ja2hlYWQnLCBERVNDID0gJ1R1cm5zIHlvdXIgaGVhZCBpbnRvIGEgYmxvY2snfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2Jsb2NraGF0cycsIERFU0MgPSAnVHVybnMgeW91ciBoYXRzIGludG8gYmxvY2tzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdibG9ja3Rvb2wnLCBERVNDID0gJ1R1cm5zIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgdG9vbCBpbnRvIGEgYmxvY2snfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2NyZWVwZXInLCBERVNDID0gJ01ha2VzIHlvdSBsb29rIGxpa2UgYSBjcmVlcGVyJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdkcm9waGF0cycsIERFU0MgPSAnRHJvcHMgeW91ciBoYXRzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub2hhdHMgLyBkZWxldGVoYXRzIC8gcmhhdHMnLCBERVNDID0gJ0RlbGV0ZXMgeW91ciBoYXRzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdoYXRzcGluIC8gc3BpbmhhdHMnLCBERVNDID0gJ1NwaW5zIHlvdXIgY2hhcmFjdGVycyBhY2Nlc3Nvcmllcyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5oYXRzcGluIC8gdW5zcGluaGF0cycsIERFU0MgPSAnVW5kb2VzIHNwaW5oYXRzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdjbGVhcmhhdHMgLyBjbGVhbmhhdHMnLCBERVNDID0gJ0NsZWFycyBoYXRzIGluIHRoZSB3b3Jrc3BhY2UnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2NoYXJkZWxldGUgLyBjZCBbaW5zdGFuY2UgbmFtZV0nLCBERVNDID0gJ1JlbW92ZXMgYW55IHBhcnQgd2l0aCBhIGNlcnRhaW4gbmFtZSBmcm9tIHlvdXIgY2hhcmFjdGVyJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdjaGFyZGVsZXRlY2xhc3MgLyBjZGMgW2NsYXNzIG5hbWVdJywgREVTQyA9ICdSZW1vdmVzIGFueSBwYXJ0IHdpdGggYSBjZXJ0YWluIGNsYXNzbmFtZSBmcm9tIHlvdXIgY2hhcmFjdGVyJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdkZWxldGV2ZWxvY2l0eSAvIGR2IC8gcmVtb3ZlZm9yY2VzJywgREVTQyA9ICdSZW1vdmVzIGFueSB2ZWxvY2l0eSAvIGZvcmNlIGluc3RhbmNlcyBpbiB5b3VyIGNoYXJhY3Rlcid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnd2Vha2VuIFtudW1dJywgREVTQyA9ICdNYWtlcyB5b3VyIGNoYXJhY3RlciBsZXNzIGRlbnNlJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bndlYWtlbicsIERFU0MgPSAnU2V0cyB5b3VyIGNoYXJhY3RlcnMgQ3VzdG9tUGh5c2ljYWxQcm9wZXJ0aWVzIHRvIGRlZmF1bHQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3N0cmVuZ3RoZW4gW251bV0nLCBERVNDID0gJ01ha2VzIHlvdXIgY2hhcmFjdGVyIG1vcmUgZGVuc2UgKEN1c3RvbVBoeXNpY2FsUHJvcGVydGllcyknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3Vuc3RyZW5ndGhlbicsIERFU0MgPSAnU2V0cyB5b3VyIGNoYXJhY3RlcnMgQ3VzdG9tUGh5c2ljYWxQcm9wZXJ0aWVzIHRvIGRlZmF1bHQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2JyZWFrdmVsb2NpdHknLCBERVNDID0gJ1NldHMgeW91ciBjaGFyYWN0ZXJzIHZlbG9jaXR5IHRvIDAnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3NwaW4gW3NwZWVkXScsIERFU0MgPSAnU3BpbnMgeW91ciBjaGFyYWN0ZXInfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3Vuc3BpbicsIERFU0MgPSAnRGlzYWJsZXMgc3Bpbid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndnInLCBERVNDID0gJ0xvYWRzIENMT1ZSIGJ5IEFiYWNheGwnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3NwbGl0JywgREVTQyA9ICdTcGxpdHMgeW91ciBjaGFyYWN0ZXIgaW4gaGFsZid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnbmlsY2hhcicsIERFU0MgPSAnU2V0cyB5b3VyIGNoYXJhY3RlcnMgcGFyZW50IHRvIG5pbCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5uaWxjaGFyIC8gbm9uaWxjaGFyJywgREVTQyA9ICdTZXRzIHlvdXIgY2hhcmFjdGVycyBwYXJlbnQgdG8gd29ya3NwYWNlJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub3Jvb3QgLyByZW1vdmVyb290IC8gcnJvb3QnLCBERVNDID0gJ1JlbW92ZXMgeW91ciBjaGFyYWN0ZXJzIEh1bWFub2lkUm9vdFBhcnQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3JlcGxhY2Vyb290JywgREVTQyA9ICdSZXBsYWNlcyB5b3VyIGNoYXJhY3RlcnMgSHVtYW5vaWRSb290UGFydCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY2xlYXJjaGFyYXBwZWFyYW5jZSAvIGNsZWFyY2hhciAvIGNscmNoYXInLCBERVNDID0gJ1JlbW92ZXMgYWxsIGFjY2Vzc29yeSwgc2hpcnQsIHBhbnRzLCBjaGFyYWN0ZXJtZXNoLCBhbmQgYm9keWNvbG9ycyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnJywgREVTQyA9ICcnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2FuaW1hdGlvbiAvIGFuaW0gW0lEXSBbc3BlZWRdJywgREVTQyA9ICdNYWtlcyB5b3VyIGNoYXJhY3RlciBwZXJmb3JtIGFuIGFuaW1hdGlvbiAobXVzdCBiZSBieSByb2Jsb3ggdG8gcmVwbGljYXRlKSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZGFuY2UnLCBERVNDID0gJ01ha2VzIHlvdSAgZCBhIG4gYyBlJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bmRhbmNlJywgREVTQyA9ICdTdG9wcyBkYW5jZSBhbmltYXRpb25zJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdzcGFzbScsIERFU0MgPSAnTWFrZXMgeW91ICBjIHIgYSB6IHknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3Vuc3Bhc20nLCBERVNDID0gJ1N0b3BzIHNwYXNtJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdoZWFkdGhyb3cnLCBERVNDID0gJ1NpbXBseSBtYWtlcyB5b3UgdGhyb3cgeW91ciBoZWFkJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdub2FuaW0nLCBERVNDID0gJ0Rpc2FibGVzIHlvdXIgYW5pbWF0aW9ucyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAncmVhbmltJywgREVTQyA9ICdSZXN0b3JlcyB5b3VyIGFuaW1hdGlvbnMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2FuaW1zcGVlZCBbbnVtXScsIERFU0MgPSAnQ2hhbmdlcyB0aGUgc3BlZWQgb2YgeW91ciBjdXJyZW50IGFuaW1hdGlvbid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnY29weWFuaW1hdGlvbiAvIGNvcHlhbmltIC8gY29weWVtb3RlIFtwbGF5ZXJdJywgREVTQyA9ICdDb3BpZXMgc29tZW9uZSBlbHNlcyBhbmltYXRpb24nfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2xvb3BhbmltYXRpb24gLyBsb29wYW5pbScsIERFU0MgPSAnTG9vcHMgeW91ciBjdXJyZW50IGFuaW1hdGlvbid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnc3RvcGFuaW1hdGlvbnMgLyBzdG9wYW5pbXMnLCBERVNDID0gJ1N0b3BzIHJ1bm5pbmcgYW5pbWF0aW9ucyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAncmVmcmVzaGFuaW1hdGlvbnMgLyByZWZyZXNoYW5pbXMnLCBERVNDID0gJ1JlZnJlc2hlcyBhbmltYXRpb25zJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdhbGxvd2N1c3RvbWFuaW0gLyBhbGxvd2N1c3RvbWFuaW1hdGlvbnMnLCBERVNDID0gJ0xldHMgeW91IHVzZSBjdXN0b20gYW5pbWF0aW9uIHBhY2tzIGluc3RlYWQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VuYWxsb3djdXN0b21hbmltIC8gdW5hbGxvd2N1c3RvbWFuaW1hdGlvbnMnLCBERVNDID0gJ0RvZXNuXCd0IGxldCB5b3UgdXNlIGN1c3RvbSBhbmltYXRpb24gcGFja3MgaW5zdGVhZCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnJywgREVTQyA9ICcnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2F1dG9jbGljayBbY2xpY2sgZGVsYXldIFtyZWxlYXNlIGRlbGF5XScsIERFU0MgPSAnQXV0b21hdGljYWxseSBjbGlja3MgeW91ciBtb3VzZSB3aXRoIGEgc2V0IGRlbGF5J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bmF1dG9jbGljayAvIG5vYXV0b2NsaWNrJywgREVTQyA9ICdUdXJucyBvZmYgYXV0b2NsaWNrJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdhdXRva2V5cHJlc3MgW2tleV0gW2Rvd24gZGVsYXldIFt1cCBkZWxheV0nLCBERVNDID0gJ0F1dG9tYXRpY2FsbHkgcHJlc3NlcyBhIGtleSB3aXRoIGEgc2V0IGRlbGF5J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bmF1dG9rZXlwcmVzcycsIERFU0MgPSAnU3RvcHMgYXV0b2tleXByZXNzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdob3Zlcm5hbWUnLCBERVNDID0gJ1Nob3dzIGEgcGxheWVycyB1c2VybmFtZSB3aGVuIHlvdXIgbW91c2UgaXMgaG92ZXJlZCBvdmVyIHRoZW0nfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VuaG92ZXJuYW1lIC8gbm9ob3Zlcm5hbWUnLCBERVNDID0gJ1R1cm5zIG9mZiBob3Zlcm5hbWUnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ21vdXNlc2Vuc2l0aXZpdHkgLyBtcyBbMC0xMF0nLCBERVNDID0gJ1NldHMgeW91ciBtb3VzZSBzZW5zaXRpdml0eSAoYWZmZWN0cyBmaXJzdCBwZXJzb24gYW5kIHJpZ2h0IGNsaWNrIGRyYWcpIChkZWZhdWx0IGlzIDEpJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdjbGlja2RlbGV0ZScsIERFU0MgPSAnR28gdG8gc2V0dGluZ3M+S2V5YmluZHM+QWRkIGZvciBjbGlja3RwJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdjbGlja3RlbGVwb3J0JywgREVTQyA9ICdHbyB0byBzZXR0aW5ncz5LZXliaW5kcz5BZGQgZm9yIGNsaWNrIHRwJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICcnLCBERVNDID0gJyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndG9vbHMnLCBERVNDID0gJ0NvcGllcyB0b29scyBmcm9tIFJlcGxpY2F0ZWRTdG9yYWdlIGFuZCBMaWdodGluZyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnbm90b29scyAvIHJlbW92ZXRvb2xzIC8gZGVsZXRldG9vbHMnLCBERVNDID0gJ1JlbW92ZXMgdG9vbHMgZnJvbSBjaGFyYWN0ZXIgYW5kIGJhY2twYWNrJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdkZWxldGVzZWxlY3RlZHRvb2wgLyBkc3QnLCBERVNDID0gJ1JlbW92ZXMgYW55IGN1cnJlbnRseSBzZWxlY3RlZCB0b29scyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZ3JhYnRvb2xzJywgREVTQyA9ICdBdXRvbWF0aWNhbGx5IGdldCB0b29scyB0aGF0IGFyZSBkcm9wcGVkJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd1bmdyYWJ0b29scyAvIG5vZ3JhYnRvb2xzJywgREVTQyA9ICdEaXNhYmxlcyBncmFidG9vbHMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2NvcHl0b29scyBbcGxheWVyXSAoQ0xJRU5UKScsIERFU0MgPSAnQ29waWVzIGEgcGxheWVycyB0b29scyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZHVwZXRvb2xzIC8gY2xvbmV0b29scyBbbnVtXScsIERFU0MgPSAnRHVwbGljYXRlcyB5b3VyIGludmVudG9yeSB0b29scyBhIHNldCBhbW1vdW50IG9mIHRpbWVzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdnaXZldG9vbCAvIGdpdmV0b29scycsIERFU0MgPSAnR2l2ZXMgYWxsIHRoZSB0b29scyB5b3VcJ3JlIGhvbGRpbmcgdG8gW3BsYXllcl0gdXNpbmcgdGhlIGF0dGFjaCBtZXRob2QuJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdkcm9wdG9vbHMnLCBERVNDID0gJ0Ryb3BzIHlvdXIgdG9vbHMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2Ryb3BwYWJsZXRvb2xzJywgREVTQyA9ICdNYWtlcyB5b3VyIHRvb2xzIGRyb3BwYWJsZSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnZXF1aXB0b29scycsIERFU0MgPSAnRXF1aXBzIGV2ZXJ5IHRvb2wgaW4geW91ciBpbnZlbnRvcnkgYXQgb25jZSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW5lcXVpcHRvb2xzJywgREVTQyA9ICdVbmVxdWlwcyBldmVyeSB0b29sIHlvdSBhcmUgY3VycmVudGx5IGhvbGRpbmcgYXQgb25jZSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAncmVtb3Zlc3BlY2lmaWN0b29sIFtuYW1lXScsIERFU0MgPSAnQXV0b21hdGljYWxseSByZW1vdmUgYSBzcGVjaWZpYyB0b29sIGZyb20geW91ciBpbnZlbnRvcnknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VucmVtb3Zlc3BlY2lmaWN0b29sIFtuYW1lXScsIERFU0MgPSAnU3RvcHMgcmVtb3ZpbmcgYSBzcGVjaWZpYyB0b29sIGZyb20geW91ciBpbnZlbnRvcnknfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2NsZWFycmVtb3Zlc3BlY2lmaWN0b29sJywgREVTQyA9ICdTdG9wIHJlbW92aW5nIGFsbCBzcGVjaWZpYyB0b29scyBmcm9tIHlvdXIgaW52ZW50b3J5J30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdyZWFjaCBbbnVtXScsIERFU0MgPSAnSW5jcmVhc2VzIHRoZSBoaXRib3ggb2YgeW91ciBoZWxkIHRvb2wnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VucmVhY2ggLyBub3JlYWNoJywgREVTQyA9ICdUdXJucyBvZmYgcmVhY2gnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2dyaXBwb3MgW1ggWSBaXScsIERFU0MgPSAnQ2hhbmdlcyB5b3VyIGN1cnJlbnQgdG9vbHMgZ3JpcCBwb3NpdGlvbid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndXNldG9vbHMgW2FtbW91bnRdIFtkZWxheV0nLCBERVNDID0gJ0FjdGl2YXRlcyBhbGwgdG9vbHMgaW4geW91ciBiYWNrcGFjayBhdCB0aGUgc2FtZSB0aW1lJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICcnLCBERVNDID0gJyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnYWRkYWxpYXMgW2NtZF0gW2FsaWFzXScsIERFU0MgPSAnQWRkcyBhbiBhbGlhcyB0byBhIGNvbW1hbmQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3JlbW92ZWFsaWFzIFthbGlhc10nLCBERVNDID0gJ1JlbW92ZXMgYSBjdXN0b20gYWxpYXMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ2NscmFsaWFzZXMnLCBERVNDID0gJ1JlbW92ZXMgYWxsIGN1c3RvbSBhbGlhc2VzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICcnLCBERVNDID0gJyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnYWRkcGx1Z2luIC8gcGx1Z2luIFtuYW1lXScsIERFU0MgPSAnQWRkIGEgcGx1Z2luIHZpYSBjb21tYW5kJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdyZW1vdmVwbHVnaW4gLyBkZWxldGVwbHVnaW4gW25hbWVdJywgREVTQyA9ICdSZW1vdmUgYSBwbHVnaW4gdmlhIGNvbW1hbmQnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3JlbG9hZHBsdWdpbiBbbmFtZV0nLCBERVNDID0gJ1JlbG9hZHMgYSBwbHVnaW4nfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJycsIERFU0MgPSAnJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdicmVha2xvb3BzIC8gYnJlYWsgKGNtZCBsb29wcyknLCBERVNDID0gJ1N0b3BzIGFueSBjbWQgbG9vcHMgKDsxMDBeMV5jbWQpJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdyZW1vdmVjbWQgLyBkZWxldGVjbWQnLCBERVNDID0gJ1JlbW92ZXMgYSBjb21tYW5kIHVudGlsIHRoZSBhZG1pbiBpcyByZWxvYWRlZCd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndHB3YWxrIC8gdGVsZXBvcnR3YWxrIFtudW1dJywgREVTQyA9ICdUZWxlcG9ydHMgeW91IHRvIHlvdXIgbW92ZSBkaXJlY3Rpb24nfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3VudHB3YWxrIC8gdW50ZWxlcG9ydHdhbGsnLCBERVNDID0gJ1VuZG9lcyB0cHdhbGsgLyB0ZWxlcG9ydHdhbGsnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ25vdGlmeXBpbmcgLyBwaW5nJywgREVTQyA9ICdOb3RpZnkgeW91cnNlbGYgeW91ciBwaW5nJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICd0cmlwJywgREVTQyA9ICdNYWtlcyB5b3VyIGNoYXJhY3RlciBmYWxsIG92ZXInfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ25vcmVuZGVyJywgREVTQyA9ICdEaXNhYmxlIDNkIFJlbmRlcmluZyB0byBkZWNyZWFzZSB0aGUgYW1vdW50IG9mIENQVSB0aGUgY2xpZW50IHVzZXMnfQogIENNRHNbI0NNRHMgKyAxXSA9IHtOQU1FID0gJ3JlbmRlcicsIERFU0MgPSAnRW5hYmxlIDNkIFJlbmRlcmluZyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndXNlMjAyMm1hdGVyaWFscyAvIDIwMjJtYXRlcmlhbHMnLCBERVNDID0gJ0VuYWJsZXMgMjAyMiBtYXRlcmlhbCB0ZXh0dXJlcyd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAndW51c2UyMDIybWF0ZXJpYWxzIC8gdW4yMDIybWF0ZXJpYWxzJywgREVTQyA9ICdEaXNhYmxlcyAyMDIyIG1hdGVyaWFsIHRleHR1cmVzJ30KICBDTURzWyNDTURzICsgMV0gPSB7TkFNRSA9ICdwcm9tcHRyNicsIERFU0MgPSAnUHJvbXB0cyB0aGUgZ2FtZSB0byBzd2l0Y2ggeW91ciByaWcgdHlwZSB0byBSNid9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAncHJvbXB0cjE1JywgREVTQyA9ICdQcm9tcHRzIHRoZSBnYW1lIHRvIHN3aXRjaCB5b3VyIHJpZyB0eXBlIHRvIFIxNSd9CiAgQ01Ec1sjQ01EcyArIDFdID0ge05BTUUgPSAnd2FsbHdhbGsgLyB3YWxrb253YWxscycsIERFU0MgPSAnV2FsayBvbiB3YWxscyd9CiAgd2FpdCgpCiAgCiAgZm9yIGkgPSAxLCAjQ01EcyBkbwogICAgbG9jYWwgbmV3Y21kID0gRXhhbXBsZTpDbG9uZSgpCiAgICBuZXdjbWQuUGFyZW50ID0gQ01Ec0YKICAgIG5ld2NtZC5WaXNpYmxlID0gZmFsc2UKICAgIG5ld2NtZC5UZXh0ID0gQ01Ec1tpXS5OQU1FCiAgICBuZXdjbWQuTmFtZSA9ICJDTUQiCiAgICB0YWJsZS5pbnNlcnQodGV4dDEsIG5ld2NtZCkKICAgIGlmIENNRHNbaV0uREVTQyB+PSAiIiB0aGVuCiAgICAgIG5ld2NtZDpTZXRBdHRyaWJ1dGUoIlRpdGxlIiwgQ01Ec1tpXS5OQU1FKQogICAgICBuZXdjbWQ6U2V0QXR0cmlidXRlKCJEZXNjIiwgQ01Ec1tpXS5ERVNDKQogICAgICBuZXdjbWQuTW91c2VCdXR0b24xRG93bjpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBpZiBub3QgSXNPbk1vYmlsZSBhbmQgbmV3Y21kLlZpc2libGUgYW5kIG5ld2NtZC5UZXh0VHJhbnNwYXJlbmN5ID09IDAgdGhlbgogICAgICAgICAgbG9jYWwgY3VycmVudFRleHQgPSBDbWRiYXIuVGV4dAogICAgICAgICAgQ21kYmFyOkNhcHR1cmVGb2N1cygpCiAgICAgICAgICBhdXRvQ29tcGxldGUobmV3Y21kLlRleHQsIGN1cnJlbnRUZXh0KQogICAgICAgICAgbWF4aW1pemVIb2xkZXIoKQogICAgICAgIGVuZAogICAgICBlbmQpCiAgICBlbmQKICBlbmQKICAKICBJbmRleENvbnRlbnRzKCIiLCB0cnVlKQogIAogIGZ1bmN0aW9uIGNoZWNrVFQoKQogICAgbG9jYWwgdAogICAgbG9jYWwgZ3Vpc0F0UG9zaXRpb24gPSBDT1JFR1VJOkdldEd1aU9iamVjdHNBdFBvc2l0aW9uKElZTW91c2UuWCwgSVlNb3VzZS5ZKQogIAogICAgZm9yIF8sIGd1aSBpbiBwYWlycyhndWlzQXRQb3NpdGlvbikgZG8KICAgICAgaWYgZ3VpLlBhcmVudCA9PSBDTURzRiB0aGVuCiAgICAgICAgdCA9IGd1aQogICAgICBlbmQKICAgIGVuZAogIAogICAgaWYgdCB+PSBuaWwgYW5kIHQ6R2V0QXR0cmlidXRlKCJUaXRsZSIpIH49IG5pbCB0aGVuCiAgICAgIGxvY2FsIHggPSBJWU1vdXNlLlgKICAgICAgbG9jYWwgeSA9IElZTW91c2UuWQogICAgICBsb2NhbCB4UAogICAgICBsb2NhbCB5UAogICAgICBpZiBJWU1vdXNlLlggPiAyMDAgdGhlbgogICAgICAgIHhQID0geCAtIDIwMQogICAgICBlbHNlCiAgICAgICAgeFAgPSB4ICsgMjEKICAgICAgZW5kCiAgICAgIGlmIElZTW91c2UuWSA+IChJWU1vdXNlLlZpZXdTaXplWS05NikgdGhlbgogICAgICAgIHlQID0geSAtIDk3CiAgICAgIGVsc2UKICAgICAgICB5UCA9IHkKICAgICAgZW5kCiAgICAgIFRvb2x0aXAuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgeFAsIDAsIHlQKQogICAgICBEZXNjcmlwdGlvbi5UZXh0ID0gdDpHZXRBdHRyaWJ1dGUoIkRlc2MiKQogICAgICBpZiB0OkdldEF0dHJpYnV0ZSgiVGl0bGUiKSB+PSBuaWwgdGhlbgogICAgICAgIFRpdGxlXzMuVGV4dCA9IHQ6R2V0QXR0cmlidXRlKCJUaXRsZSIpCiAgICAgIGVsc2UKICAgICAgICBUaXRsZV8zLlRleHQgPSAnJwogICAgICBlbmQKICAgICAgVG9vbHRpcC5WaXNpYmxlID0gdHJ1ZQogICAgZWxzZQogICAgICBUb29sdGlwLlZpc2libGUgPSBmYWxzZQogICAgZW5kCiAgZW5kCiAgCiAgZnVuY3Rpb24gRmluZEluVGFibGUodGJsLHZhbCkKICAgIGlmIHRibCA9PSBuaWwgdGhlbiByZXR1cm4gZmFsc2UgZW5kCiAgICBmb3IgXyx2IGluIHBhaXJzKHRibCkgZG8KICAgICAgaWYgdiA9PSB2YWwgdGhlbiByZXR1cm4gdHJ1ZSBlbmQKICAgIGVuZCAKICAgIHJldHVybiBmYWxzZQogIGVuZAogIAogIGZ1bmN0aW9uIEdldEluVGFibGUoVGFibGUsIE5hbWUpCiAgICBmb3IgaSA9IDEsICNUYWJsZSBkbwogICAgICBpZiBUYWJsZVtpXSA9PSBOYW1lIHRoZW4KICAgICAgICByZXR1cm4gaQogICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIGZhbHNlCiAgZW5kCiAgCiAgZnVuY3Rpb24gcmVzcGF3bihwbHIpCiAgICBpZiBpbnZpc1J1bm5pbmcgdGhlbiBUdXJuVmlzaWJsZSgpIGVuZAogICAgbG9jYWwgY2hhciA9IHBsci5DaGFyYWN0ZXIKICAgIGlmIGNoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpIHRoZW4gY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIik6Q2hhbmdlU3RhdGUoMTUpIGVuZAogICAgY2hhcjpDbGVhckFsbENoaWxkcmVuKCkKICAgIGxvY2FsIG5ld0NoYXIgPSBJbnN0YW5jZS5uZXcoIk1vZGVsIikKICAgIG5ld0NoYXIuUGFyZW50ID0gd29ya3NwYWNlCiAgICBwbHIuQ2hhcmFjdGVyID0gbmV3Q2hhcgogICAgd2FpdCgpCiAgICBwbHIuQ2hhcmFjdGVyID0gY2hhcgogICAgbmV3Q2hhcjpEZXN0cm95KCkKICBlbmQKICAKICBsb2NhbCByZWZyZXNoQ21kID0gZmFsc2UKICBmdW5jdGlvbiByZWZyZXNoKHBscikKICAgIHJlZnJlc2hDbWQgPSB0cnVlCiAgICBsb2NhbCBIdW1hbiA9IHBsci5DaGFyYWN0ZXIgYW5kIHBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIsIHRydWUpCiAgICBsb2NhbCBwb3MgPSBIdW1hbiBhbmQgSHVtYW4uUm9vdFBhcnQgYW5kIEh1bWFuLlJvb3RQYXJ0LkNGcmFtZQogICAgbG9jYWwgcG9zMSA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZQogICAgcmVzcGF3bihwbHIpCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgcGxyLkNoYXJhY3RlckFkZGVkOldhaXQoKTpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikuUm9vdFBhcnQuQ0ZyYW1lLCB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUgPSBwb3MsIHdhaXQoKSBhbmQgcG9zMQogICAgICByZWZyZXNoQ21kID0gZmFsc2UKICAgIGVuZCkKICBlbmQKICAKICBsb2NhbCBsYXN0RGVhdGgKICAKICBmdW5jdGlvbiBvbkRpZWQoKQogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgIGlmIHBjYWxsKGZ1bmN0aW9uKCkgUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpIGVuZCkgYW5kIFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKSB0aGVuCiAgICAgICAgUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLkRpZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICBpZiBnZXRSb290KFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyKSB0aGVuCiAgICAgICAgICAgIGxhc3REZWF0aCA9IGdldFJvb3QoUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIpLkNGcmFtZQogICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgICBlbHNlCiAgICAgICAgd2FpdCgyKQogICAgICAgIG9uRGllZCgpCiAgICAgIGVuZAogICAgZW5kKQogIGVuZAogIAogIENsaXAgPSB0cnVlCiAgc3BEZWxheSA9IDAuMQogIFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICBOT0ZMWSgpCiAgICBGbG9hdGluZyA9IGZhbHNlCiAgCiAgICBpZiBub3QgQ2xpcCB0aGVuCiAgICAgIGV4ZWNDbWQoJ2NsaXAnKQogICAgZW5kCiAgCiAgICByZXBlYXQgd2FpdCgpIHVudGlsIGdldFJvb3QoUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIpCiAgCiAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgIGlmIHNwYXducG9pbnQgYW5kIG5vdCByZWZyZXNoQ21kIGFuZCBzcGF3bnBvcyB+PSBuaWwgdGhlbgogICAgICAgIHdhaXQoc3BEZWxheSkKICAgICAgICBnZXRSb290KFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyKS5DRnJhbWUgPSBzcGF3bnBvcwogICAgICBlbmQKICAgIGVuZCkKICAKICAgIG9uRGllZCgpCiAgZW5kKQogIAogIG9uRGllZCgpCiAgCiAgZnVuY3Rpb24gZ2V0c3RyaW5nKGJlZ2luKQogICAgbG9jYWwgc3RhcnQgPSBiZWdpbi0xCiAgICBsb2NhbCBBQSA9ICcnIGZvciBpLHYgaW4gcGFpcnMoY2FyZ3MpIGRvCiAgICAgIGlmIGkgPiBzdGFydCB0aGVuCiAgICAgICAgaWYgQUEgfj0gJycgdGhlbgogICAgICAgICAgQUEgPSBBQSAuLiAnICcgLi4gdgogICAgICAgIGVsc2UKICAgICAgICAgIEFBID0gQUEgLi4gdgogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIEFBCiAgZW5kCiAgCiAgZmluZENtZD1mdW5jdGlvbihjbWRfbmFtZSkKICAgIGZvciBpLHYgaW4gcGFpcnMoY21kcylkbwogICAgICBpZiB2Lk5BTUU6bG93ZXIoKT09Y21kX25hbWU6bG93ZXIoKSBvciBGaW5kSW5UYWJsZSh2LkFMSUFTLGNtZF9uYW1lOmxvd2VyKCkpIHRoZW4KICAgICAgICByZXR1cm4gdgogICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIGN1c3RvbUFsaWFzW2NtZF9uYW1lOmxvd2VyKCldCiAgZW5kCiAgCiAgZnVuY3Rpb24gc3BsaXRTdHJpbmcoc3RyLGRlbGltKQogICAgbG9jYWwgYnJva2VuID0ge30KICAgIGlmIGRlbGltID09IG5pbCB0aGVuIGRlbGltID0gIiwiIGVuZAogICAgZm9yIHcgaW4gc3RyaW5nLmdtYXRjaChzdHIsIlteIi4uZGVsaW0uLiJdKyIpIGRvCiAgICAgIHRhYmxlLmluc2VydChicm9rZW4sdykKICAgIGVuZAogICAgcmV0dXJuIGJyb2tlbgogIGVuZAogIAogIGNtZEhpc3RvcnkgPSB7fQogIGxvY2FsIGxhc3RDbWRzID0ge30KICBsb2NhbCBoaXN0b3J5Q291bnQgPSAwCiAgbG9jYWwgc3BsaXQ9IiAiCiAgbG9jYWwgbGFzdEJyZWFrVGltZSA9IDAKICBmdW5jdGlvbiBleGVjQ21kKGNtZFN0cixzcGVha2VyLHN0b3JlKQogICAgY21kU3RyID0gY21kU3RyOmdzdWIoIiVzKyQiLCIiKQogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgIGxvY2FsIHJhd0NtZFN0ciA9IGNtZFN0cgogICAgICBjbWRTdHIgPSBzdHJpbmcuZ3N1YihjbWRTdHIsIlxcXFwiLCIlJUJhY2tTbGFzaCUlIikKICAgICAgbG9jYWwgY29tbWFuZHNUb1J1biA9IHNwbGl0U3RyaW5nKGNtZFN0ciwiXFwiKQogICAgICBmb3IgaSx2IGluIHBhaXJzKGNvbW1hbmRzVG9SdW4pIGRvCiAgICAgICAgdiA9IHN0cmluZy5nc3ViKHYsIiUlQmFja1NsYXNoJSUiLCJcXCIpCiAgICAgICAgbG9jYWwgeCx5LG51bSA9IHY6ZmluZCgiXiglZCspJV4iKQogICAgICAgIGxvY2FsIGNtZERlbGF5ID0gMAogICAgICAgIGxvY2FsIGluZlRpbWVzID0gZmFsc2UKICAgICAgICBpZiBudW0gdGhlbgogICAgICAgICAgdiA9IHY6c3ViKHkrMSkKICAgICAgICAgIGxvY2FsIHgseSxkZWwgPSB2OmZpbmQoIl4oWyVkJS5dKyklXiIpCiAgICAgICAgICBpZiBkZWwgdGhlbgogICAgICAgICAgICB2ID0gdjpzdWIoeSsxKQogICAgICAgICAgICBjbWREZWxheSA9IHRvbnVtYmVyKGRlbCkgb3IgMAogICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgbG9jYWwgeCx5ID0gdjpmaW5kKCJeaW5mJV4iKQogICAgICAgICAgaWYgeCB0aGVuCiAgICAgICAgICAgIGluZlRpbWVzID0gdHJ1ZQogICAgICAgICAgICB2ID0gdjpzdWIoeSsxKQogICAgICAgICAgICBsb2NhbCB4LHksZGVsID0gdjpmaW5kKCJeKFslZCUuXSspJV4iKQogICAgICAgICAgICBpZiBkZWwgdGhlbgogICAgICAgICAgICAgIHYgPSB2OnN1Yih5KzEpCiAgICAgICAgICAgICAgZGVsID0gdG9udW1iZXIoZGVsKSBvciAxCiAgICAgICAgICAgICAgY21kRGVsYXkgPSAoZGVsID4gMCBhbmQgZGVsIG9yIDEpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICBjbWREZWxheSA9IDEKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBudW0gPSB0b251bWJlcihudW0gb3IgMSkKICAKICAgICAgICBpZiB2OnN1YigxLDEpID09ICIhIiB0aGVuCiAgICAgICAgICBsb2NhbCBjaHVua3MgPSBzcGxpdFN0cmluZyh2OnN1YigyKSxzcGxpdCkKICAgICAgICAgIGlmIGNodW5rc1sxXSBhbmQgbGFzdENtZHNbY2h1bmtzWzFdXSB0aGVuIHYgPSBsYXN0Q21kc1tjaHVua3NbMV1dIGVuZAogICAgICAgIGVuZAogIAogICAgICAgIGxvY2FsIGFyZ3MgPSBzcGxpdFN0cmluZyh2LHNwbGl0KQogICAgICAgIGxvY2FsIGNtZE5hbWUgPSBhcmdzWzFdCiAgICAgICAgbG9jYWwgY21kID0gZmluZENtZChjbWROYW1lKQogICAgICAgIGlmIGNtZCB0aGVuCiAgICAgICAgICB0YWJsZS5yZW1vdmUoYXJncywxKQogICAgICAgICAgY2FyZ3MgPSBhcmdzCiAgICAgICAgICBpZiBub3Qgc3BlYWtlciB0aGVuIHNwZWFrZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyIGVuZAogICAgICAgICAgaWYgc3RvcmUgdGhlbgogICAgICAgICAgICBpZiBzcGVha2VyID09IFBsYXllcnMuTG9jYWxQbGF5ZXIgdGhlbgogICAgICAgICAgICAgIGlmIGNtZEhpc3RvcnlbMV0gfj0gcmF3Q21kU3RyIGFuZCByYXdDbWRTdHI6c3ViKDEsMTEpIH49ICdsYXN0Y29tbWFuZCcgYW5kIHJhd0NtZFN0cjpzdWIoMSw3KSB+PSAnbGFzdGNtZCcgdGhlbgogICAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGNtZEhpc3RvcnksMSxyYXdDbWRTdHIpCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBpZiAjY21kSGlzdG9yeSA+IDMwIHRoZW4gdGFibGUucmVtb3ZlKGNtZEhpc3RvcnkpIGVuZAogIAogICAgICAgICAgICBsYXN0Q21kc1tjbWROYW1lXSA9IHYKICAgICAgICAgIGVuZAogICAgICAgICAgbG9jYWwgY21kU3RhcnRUaW1lID0gdGljaygpCiAgICAgICAgICBpZiBpbmZUaW1lcyB0aGVuCiAgICAgICAgICAgIHdoaWxlIGxhc3RCcmVha1RpbWUgPCBjbWRTdGFydFRpbWUgZG8KICAgICAgICAgICAgICBsb2NhbCBzdWNjZXNzLGVyciA9IHBjYWxsKGNtZC5GVU5DLGFyZ3MsIHNwZWFrZXIpCiAgICAgICAgICAgICAgaWYgbm90IHN1Y2Nlc3MgYW5kIF9HLklZX0RFQlVHIHRoZW4KICAgICAgICAgICAgICAgIHdhcm4oIkNvbW1hbmQgRXJyb3I6IiwgY21kTmFtZSwgZXJyKQogICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgIHdhaXQoY21kRGVsYXkpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZWxzZQogICAgICAgICAgICBmb3IgcmVwID0gMSxudW0gZG8KICAgICAgICAgICAgICBpZiBsYXN0QnJlYWtUaW1lID4gY21kU3RhcnRUaW1lIHRoZW4gYnJlYWsgZW5kCiAgICAgICAgICAgICAgbG9jYWwgc3VjY2VzcyxlcnIgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgICAgICBjbWQuRlVOQyhhcmdzLCBzcGVha2VyKQogICAgICAgICAgICAgIGVuZCkKICAgICAgICAgICAgICBpZiBub3Qgc3VjY2VzcyBhbmQgX0cuSVlfREVCVUcgdGhlbgogICAgICAgICAgICAgICAgd2FybigiQ29tbWFuZCBFcnJvcjoiLCBjbWROYW1lLCBlcnIpCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgaWYgY21kRGVsYXkgfj0gMCB0aGVuIHdhaXQoY21kRGVsYXkpIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZCkKICBlbmQJCiAgCiAgZnVuY3Rpb24gYWRkY21kKG5hbWUsYWxpYXMsZnVuYyxwbGduKQogICAgY21kc1sjY21kcysxXT0KICAgICAgewogICAgICAgIE5BTUU9bmFtZTsKICAgICAgICBBTElBUz1hbGlhcyBvciB7fTsKICAgICAgICBGVU5DPWZ1bmM7CiAgICAgICAgUExVR0lOPXBsZ247CiAgICAgIH0KICBlbmQKICAKICBmdW5jdGlvbiByZW1vdmVjbWQoY21kKQogICAgaWYgY21kIH49ICIgIiB0aGVuCiAgICAgIGZvciBpID0gI2NtZHMsMSwtMSBkbwogICAgICAgIGlmIGNtZHNbaV0uTkFNRSA9PSBjbWQgb3IgRmluZEluVGFibGUoY21kc1tpXS5BTElBUyxjbWQpIHRoZW4KICAgICAgICAgIHRhYmxlLnJlbW92ZShjbWRzLCBpKQogICAgICAgICAgZm9yIGEsYyBpbiBwYWlycyhDTURzRjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiBzdHJpbmcuZmluZChjLlRleHQsICJeIi4uY21kLi4iJCIpIG9yIHN0cmluZy5maW5kKGMuVGV4dCwgIl4iLi5jbWQuLiIgIikgb3Igc3RyaW5nLmZpbmQoYy5UZXh0LCAiICIuLmNtZC4uIiQiKSBvciBzdHJpbmcuZmluZChjLlRleHQsICIgIi4uY21kLi4iICIpIHRoZW4KICAgICAgICAgICAgICBjLlRleHRUcmFuc3BhcmVuY3kgPSAwLjcKICAgICAgICAgICAgICBjLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgICAgICAgbm90aWZ5KGMuVGV4dCwgIkNvbW1hbmQgaGFzIGJlZW4gZGlzYWJsZWQgYnkgeW91IG9yIGEgcGx1Z2luIikKICAgICAgICAgICAgICBlbmQpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgZW5kCiAgCiAgZnVuY3Rpb24gYWRkYmluZChjbWQsa2V5LGlza2V5dXAsdG9nZ2xlKQogICAgaWYgdG9nZ2xlIHRoZW4KICAgICAgYmluZHNbI2JpbmRzKzFdPQogICAgICAgIHsKICAgICAgICAgIENPTU1BTkQ9Y21kOwogICAgICAgICAgS0VZPWtleTsKICAgICAgICAgIElTS0VZVVA9aXNrZXl1cDsKICAgICAgICAgIFRPR0dMRSA9IHRvZ2dsZTsKICAgICAgICB9CiAgICBlbHNlCiAgICAgIGJpbmRzWyNiaW5kcysxXT0KICAgICAgICB7CiAgICAgICAgICBDT01NQU5EPWNtZDsKICAgICAgICAgIEtFWT1rZXk7CiAgICAgICAgICBJU0tFWVVQPWlza2V5dXA7CiAgICAgICAgfQogICAgZW5kCiAgZW5kCiAgCiAgZnVuY3Rpb24gYWRkY21kdGV4dCh0ZXh0LG5hbWUsZGVzYykKICAgIGxvY2FsIG5ld2NtZCA9IEV4YW1wbGU6Q2xvbmUoKQogICAgbG9jYWwgdG9vbHRpcFRleHQgPSB0b3N0cmluZyh0ZXh0KQogICAgbG9jYWwgdG9vbHRpcERlc2MgPSB0b3N0cmluZyhkZXNjKQogICAgbmV3Y21kLlBhcmVudCA9IENNRHNGCiAgICBuZXdjbWQuVmlzaWJsZSA9IGZhbHNlCiAgICBuZXdjbWQuVGV4dCA9IHRleHQKICAgIG5ld2NtZC5OYW1lID0gJ1BMVUdJTl8nLi5uYW1lCiAgICB0YWJsZS5pbnNlcnQodGV4dDEsbmV3Y21kKQogICAgaWYgZGVzYyBhbmQgZGVzYyB+PSAnJyB0aGVuCiAgICAgIG5ld2NtZDpTZXRBdHRyaWJ1dGUoIlRpdGxlIiwgdG9vbHRpcFRleHQpCiAgICAgIG5ld2NtZDpTZXRBdHRyaWJ1dGUoIkRlc2MiLCB0b29sdGlwRGVzYykKICAgICAgbmV3Y21kLk1vdXNlQnV0dG9uMURvd246Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgbmV3Y21kLlZpc2libGUgYW5kIG5ld2NtZC5UZXh0VHJhbnNwYXJlbmN5ID09IDAgdGhlbgogICAgICAgICAgQ21kYmFyOkNhcHR1cmVGb2N1cygpCiAgICAgICAgICBhdXRvQ29tcGxldGUobmV3Y21kLlRleHQpCiAgICAgICAgICBtYXhpbWl6ZUhvbGRlcigpCiAgICAgICAgZW5kCiAgICAgIGVuZCkKICAgIGVuZAogIGVuZAogIAogIGxvY2FsIFdvcmxkVG9TY3JlZW4gPSBmdW5jdGlvbihPYmplY3QpCiAgICBsb2NhbCBPYmplY3RWZWN0b3IgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYTpXb3JsZFRvU2NyZWVuUG9pbnQoT2JqZWN0LlBvc2l0aW9uKQogICAgcmV0dXJuIFZlY3RvcjIubmV3KE9iamVjdFZlY3Rvci5YLCBPYmplY3RWZWN0b3IuWSkKICBlbmQKICAKICBsb2NhbCBNb3VzZVBvc2l0aW9uVG9WZWN0b3IyID0gZnVuY3Rpb24oKQogICAgcmV0dXJuIFZlY3RvcjIubmV3KElZTW91c2UuWCwgSVlNb3VzZS5ZKQogIGVuZAogIAogIGxvY2FsIEdldENsb3Nlc3RQbGF5ZXJGcm9tQ3Vyc29yID0gZnVuY3Rpb24oKQogICAgbG9jYWwgZm91bmQgPSBuaWwKICAgIGxvY2FsIENsb3Nlc3REaXN0YW5jZSA9IG1hdGguaHVnZQogICAgZm9yIGksIHYgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgIGlmIHYgfj0gUGxheWVycy5Mb2NhbFBsYXllciBhbmQgdi5DaGFyYWN0ZXIgYW5kIHYuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKSB0aGVuCiAgICAgICAgZm9yIGssIHggaW4gcGFpcnModi5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgIGlmIHN0cmluZy5maW5kKHguTmFtZSwgIlRvcnNvIikgdGhlbgogICAgICAgICAgICBsb2NhbCBEaXN0YW5jZSA9IChXb3JsZFRvU2NyZWVuKHgpIC0gTW91c2VQb3NpdGlvblRvVmVjdG9yMigpKS5NYWduaXR1ZGUKICAgICAgICAgICAgaWYgRGlzdGFuY2UgPCBDbG9zZXN0RGlzdGFuY2UgdGhlbgogICAgICAgICAgICAgIENsb3Nlc3REaXN0YW5jZSA9IERpc3RhbmNlCiAgICAgICAgICAgICAgZm91bmQgPSB2CiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gZm91bmQKICBlbmQKICAKICBTcGVjaWFsUGxheWVyQ2FzZXMgPSB7CiAgICBbImFsbCJdID0gZnVuY3Rpb24oc3BlYWtlcikgcmV0dXJuIFBsYXllcnM6R2V0UGxheWVycygpIGVuZCwKICAgIFsib3RoZXJzIl0gPSBmdW5jdGlvbihzcGVha2VyKQogICAgICBsb2NhbCBwbHJzID0ge30KICAgICAgZm9yIGksdiBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiB2IH49IHNwZWFrZXIgdGhlbgogICAgICAgICAgdGFibGUuaW5zZXJ0KHBscnMsdikKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIHJldHVybiBwbHJzCiAgICBlbmQsCiAgICBbIm1lIl0gPSBmdW5jdGlvbihzcGVha2VyKXJldHVybiB7c3BlYWtlcn0gZW5kLAogICAgWyIjKCVkKykiXSA9IGZ1bmN0aW9uKHNwZWFrZXIsYXJncyxjdXJyZW50TGlzdCkKICAgICAgbG9jYWwgcmV0dXJucyA9IHt9CiAgICAgIGxvY2FsIHJhbmRBbW91bnQgPSB0b251bWJlcihhcmdzWzFdKQogICAgICBsb2NhbCBwbGF5ZXJzID0ge3VucGFjayhjdXJyZW50TGlzdCl9CiAgICAgIGZvciBpID0gMSxyYW5kQW1vdW50IGRvCiAgICAgICAgaWYgI3BsYXllcnMgPT0gMCB0aGVuIGJyZWFrIGVuZAogICAgICAgIGxvY2FsIHJhbmRJbmRleCA9IG1hdGgucmFuZG9tKDEsI3BsYXllcnMpCiAgICAgICAgdGFibGUuaW5zZXJ0KHJldHVybnMscGxheWVyc1tyYW5kSW5kZXhdKQogICAgICAgIHRhYmxlLnJlbW92ZShwbGF5ZXJzLHJhbmRJbmRleCkKICAgICAgZW5kCiAgICAgIHJldHVybiByZXR1cm5zCiAgICBlbmQsCiAgICBbInJhbmRvbSJdID0gZnVuY3Rpb24oc3BlYWtlcixhcmdzLGN1cnJlbnRMaXN0KQogICAgICBsb2NhbCBwbGF5ZXJzID0gUGxheWVyczpHZXRQbGF5ZXJzKCkKICAgICAgbG9jYWwgbG9jYWxwbGF5ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCiAgICAgIHRhYmxlLnJlbW92ZShwbGF5ZXJzLCB0YWJsZS5maW5kKHBsYXllcnMsIGxvY2FscGxheWVyKSkKICAgICAgcmV0dXJuIHtwbGF5ZXJzW21hdGgucmFuZG9tKDEsI3BsYXllcnMpXX0KICAgIGVuZCwKICAgIFsiJSUoLispIl0gPSBmdW5jdGlvbihzcGVha2VyLGFyZ3MpCiAgICAgIGxvY2FsIHJldHVybnMgPSB7fQogICAgICBsb2NhbCB0ZWFtID0gYXJnc1sxXQogICAgICBmb3IgXyxwbHIgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgcGxyLlRlYW0gYW5kIHN0cmluZy5zdWIoc3RyaW5nLmxvd2VyKHBsci5UZWFtLk5hbWUpLDEsI3RlYW0pID09IHN0cmluZy5sb3dlcih0ZWFtKSB0aGVuCiAgICAgICAgICB0YWJsZS5pbnNlcnQocmV0dXJucyxwbHIpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICByZXR1cm4gcmV0dXJucwogICAgZW5kLAogICAgWyJhbGxpZXMiXSA9IGZ1bmN0aW9uKHNwZWFrZXIpCiAgICAgIGxvY2FsIHJldHVybnMgPSB7fQogICAgICBsb2NhbCB0ZWFtID0gc3BlYWtlci5UZWFtCiAgICAgIGZvciBfLHBsciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBwbHIuVGVhbSA9PSB0ZWFtIHRoZW4KICAgICAgICAgIHRhYmxlLmluc2VydChyZXR1cm5zLHBscikKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIHJldHVybiByZXR1cm5zCiAgICBlbmQsCiAgICBbImVuZW1pZXMiXSA9IGZ1bmN0aW9uKHNwZWFrZXIpCiAgICAgIGxvY2FsIHJldHVybnMgPSB7fQogICAgICBsb2NhbCB0ZWFtID0gc3BlYWtlci5UZWFtCiAgICAgIGZvciBfLHBsciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBwbHIuVGVhbSB+PSB0ZWFtIHRoZW4KICAgICAgICAgIHRhYmxlLmluc2VydChyZXR1cm5zLHBscikKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIHJldHVybiByZXR1cm5zCiAgICBlbmQsCiAgICBbInRlYW0iXSA9IGZ1bmN0aW9uKHNwZWFrZXIpCiAgICAgIGxvY2FsIHJldHVybnMgPSB7fQogICAgICBsb2NhbCB0ZWFtID0gc3BlYWtlci5UZWFtCiAgICAgIGZvciBfLHBsciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBwbHIuVGVhbSA9PSB0ZWFtIHRoZW4KICAgICAgICAgIHRhYmxlLmluc2VydChyZXR1cm5zLHBscikKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIHJldHVybiByZXR1cm5zCiAgICBlbmQsCiAgICBbIm5vbnRlYW0iXSA9IGZ1bmN0aW9uKHNwZWFrZXIpCiAgICAgIGxvY2FsIHJldHVybnMgPSB7fQogICAgICBsb2NhbCB0ZWFtID0gc3BlYWtlci5UZWFtCiAgICAgIGZvciBfLHBsciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBwbHIuVGVhbSB+PSB0ZWFtIHRoZW4KICAgICAgICAgIHRhYmxlLmluc2VydChyZXR1cm5zLHBscikKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIHJldHVybiByZXR1cm5zCiAgICBlbmQsCiAgICBbImZyaWVuZHMiXSA9IGZ1bmN0aW9uKHNwZWFrZXIsYXJncykKICAgICAgbG9jYWwgcmV0dXJucyA9IHt9CiAgICAgIGZvciBfLHBsciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBwbHI6SXNGcmllbmRzV2l0aChzcGVha2VyLlVzZXJJZCkgYW5kIHBsciB+PSBzcGVha2VyIHRoZW4KICAgICAgICAgIHRhYmxlLmluc2VydChyZXR1cm5zLHBscikKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIHJldHVybiByZXR1cm5zCiAgICBlbmQsCiAgICBbIm5vbmZyaWVuZHMiXSA9IGZ1bmN0aW9uKHNwZWFrZXIsYXJncykKICAgICAgbG9jYWwgcmV0dXJucyA9IHt9CiAgICAgIGZvciBfLHBsciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBub3QgcGxyOklzRnJpZW5kc1dpdGgoc3BlYWtlci5Vc2VySWQpIGFuZCBwbHIgfj0gc3BlYWtlciB0aGVuCiAgICAgICAgICB0YWJsZS5pbnNlcnQocmV0dXJucyxwbHIpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICByZXR1cm4gcmV0dXJucwogICAgZW5kLAogICAgWyJndWVzdHMiXSA9IGZ1bmN0aW9uKHNwZWFrZXIsYXJncykKICAgICAgbG9jYWwgcmV0dXJucyA9IHt9CiAgICAgIGZvciBfLHBsciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBwbHIuR3Vlc3QgdGhlbgogICAgICAgICAgdGFibGUuaW5zZXJ0KHJldHVybnMscGxyKQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgcmV0dXJuIHJldHVybnMKICAgIGVuZCwKICAgIFsiYmFjb25zIl0gPSBmdW5jdGlvbihzcGVha2VyLGFyZ3MpCiAgICAgIGxvY2FsIHJldHVybnMgPSB7fQogICAgICBmb3IgXyxwbHIgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnUGFsIEhhaXInKSBvciBwbHIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCdLYXRlIEhhaXInKSB0aGVuCiAgICAgICAgICB0YWJsZS5pbnNlcnQocmV0dXJucyxwbHIpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICByZXR1cm4gcmV0dXJucwogICAgZW5kLAogICAgWyJhZ2UoJWQrKSJdID0gZnVuY3Rpb24oc3BlYWtlcixhcmdzKQogICAgICBsb2NhbCByZXR1cm5zID0ge30KICAgICAgbG9jYWwgYWdlID0gdG9udW1iZXIoYXJnc1sxXSkKICAgICAgaWYgbm90IGFnZSA9PSBuaWwgdGhlbiByZXR1cm4gZW5kCiAgICAgIGZvciBfLHBsciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBwbHIuQWNjb3VudEFnZSA8PSBhZ2UgdGhlbgogICAgICAgICAgdGFibGUuaW5zZXJ0KHJldHVybnMscGxyKQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgcmV0dXJuIHJldHVybnMKICAgIGVuZCwKICAgIFsibmVhcmVzdCJdID0gZnVuY3Rpb24oc3BlYWtlcixhcmdzLGN1cnJlbnRMaXN0KQogICAgICBsb2NhbCBzcGVha2VyQ2hhciA9IHNwZWFrZXIuQ2hhcmFjdGVyCiAgICAgIGlmIG5vdCBzcGVha2VyQ2hhciBvciBub3QgZ2V0Um9vdChzcGVha2VyQ2hhcikgdGhlbiByZXR1cm4gZW5kCiAgICAgIGxvY2FsIGxvd2VzdCA9IG1hdGguaHVnZQogICAgICBsb2NhbCBOZWFyZXN0UGxheWVyID0gbmlsCiAgICAgIGZvciBfLHBsciBpbiBwYWlycyhjdXJyZW50TGlzdCkgZG8KICAgICAgICBpZiBwbHIgfj0gc3BlYWtlciBhbmQgcGxyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgICBsb2NhbCBkaXN0YW5jZSA9IHBscjpEaXN0YW5jZUZyb21DaGFyYWN0ZXIoZ2V0Um9vdChzcGVha2VyQ2hhcikuUG9zaXRpb24pCiAgICAgICAgICBpZiBkaXN0YW5jZSA8IGxvd2VzdCB0aGVuCiAgICAgICAgICAgIGxvd2VzdCA9IGRpc3RhbmNlCiAgICAgICAgICAgIE5lYXJlc3RQbGF5ZXIgPSB7cGxyfQogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICByZXR1cm4gTmVhcmVzdFBsYXllcgogICAgZW5kLAogICAgWyJmYXJ0aGVzdCJdID0gZnVuY3Rpb24oc3BlYWtlcixhcmdzLGN1cnJlbnRMaXN0KQogICAgICBsb2NhbCBzcGVha2VyQ2hhciA9IHNwZWFrZXIuQ2hhcmFjdGVyCiAgICAgIGlmIG5vdCBzcGVha2VyQ2hhciBvciBub3QgZ2V0Um9vdChzcGVha2VyQ2hhcikgdGhlbiByZXR1cm4gZW5kCiAgICAgIGxvY2FsIGhpZ2hlc3QgPSAwCiAgICAgIGxvY2FsIEZhcnRoZXN0ID0gbmlsCiAgICAgIGZvciBfLHBsciBpbiBwYWlycyhjdXJyZW50TGlzdCkgZG8KICAgICAgICBpZiBwbHIgfj0gc3BlYWtlciBhbmQgcGxyLkNoYXJhY3RlciB0aGVuCiAgICAgICAgICBsb2NhbCBkaXN0YW5jZSA9IHBscjpEaXN0YW5jZUZyb21DaGFyYWN0ZXIoZ2V0Um9vdChzcGVha2VyQ2hhcikuUG9zaXRpb24pCiAgICAgICAgICBpZiBkaXN0YW5jZSA+IGhpZ2hlc3QgdGhlbgogICAgICAgICAgICBoaWdoZXN0ID0gZGlzdGFuY2UKICAgICAgICAgICAgRmFydGhlc3QgPSB7cGxyfQogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICByZXR1cm4gRmFydGhlc3QKICAgIGVuZCwKICAgIFsiZ3JvdXAoJWQrKSJdID0gZnVuY3Rpb24oc3BlYWtlcixhcmdzKQogICAgICBsb2NhbCByZXR1cm5zID0ge30KICAgICAgbG9jYWwgZ3JvdXBJRCA9IHRvbnVtYmVyKGFyZ3NbMV0pCiAgICAgIGZvciBfLHBsciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBwbHI6SXNJbkdyb3VwKGdyb3VwSUQpIHRoZW4gIAogICAgICAgICAgdGFibGUuaW5zZXJ0KHJldHVybnMscGxyKQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgcmV0dXJuIHJldHVybnMKICAgIGVuZCwKICAgIFsiYWxpdmUiXSA9IGZ1bmN0aW9uKHNwZWFrZXIsYXJncykKICAgICAgbG9jYWwgcmV0dXJucyA9IHt9CiAgICAgIGZvciBfLHBsciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgICBpZiBwbHIuQ2hhcmFjdGVyIGFuZCBwbHIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKSBhbmQgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikuSGVhbHRoID4gMCB0aGVuCiAgICAgICAgICB0YWJsZS5pbnNlcnQocmV0dXJucyxwbHIpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICByZXR1cm4gcmV0dXJucwogICAgZW5kLAogICAgWyJkZWFkIl0gPSBmdW5jdGlvbihzcGVha2VyLGFyZ3MpCiAgICAgIGxvY2FsIHJldHVybnMgPSB7fQogICAgICBmb3IgXyxwbHIgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgKG5vdCBwbHIuQ2hhcmFjdGVyIG9yIG5vdCBwbHIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKSkgb3IgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikuSGVhbHRoIDw9IDAgdGhlbgogICAgICAgICAgdGFibGUuaW5zZXJ0KHJldHVybnMscGxyKQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgcmV0dXJuIHJldHVybnMKICAgIGVuZCwKICAgIFsicmFkKCVkKykiXSA9IGZ1bmN0aW9uKHNwZWFrZXIsYXJncykKICAgICAgbG9jYWwgcmV0dXJucyA9IHt9CiAgICAgIGxvY2FsIHJhZGl1cyA9IHRvbnVtYmVyKGFyZ3NbMV0pCiAgICAgIGxvY2FsIHNwZWFrZXJDaGFyID0gc3BlYWtlci5DaGFyYWN0ZXIKICAgICAgaWYgbm90IHNwZWFrZXJDaGFyIG9yIG5vdCBnZXRSb290KHNwZWFrZXJDaGFyKSB0aGVuIHJldHVybiBlbmQKICAgICAgZm9yIF8scGxyIGluIHBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbwogICAgICAgIGlmIHBsci5DaGFyYWN0ZXIgYW5kIGdldFJvb3QocGxyLkNoYXJhY3RlcikgdGhlbgogICAgICAgICAgbG9jYWwgbWFnbml0dWRlID0gKGdldFJvb3QocGxyLkNoYXJhY3RlcikuUG9zaXRpb24tZ2V0Um9vdChzcGVha2VyQ2hhcikuUG9zaXRpb24pLm1hZ25pdHVkZQogICAgICAgICAgaWYgbWFnbml0dWRlIDw9IHJhZGl1cyB0aGVuIHRhYmxlLmluc2VydChyZXR1cm5zLHBscikgZW5kCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICByZXR1cm4gcmV0dXJucwogICAgZW5kLAogICAgWyJjdXJzb3IiXSA9IGZ1bmN0aW9uKHNwZWFrZXIpCiAgICAgIGxvY2FsIHBscnMgPSB7fQogICAgICBsb2NhbCB2ID0gR2V0Q2xvc2VzdFBsYXllckZyb21DdXJzb3IoKQogICAgICBpZiB2IH49IG5pbCB0aGVuIHRhYmxlLmluc2VydChwbHJzLCB2KSBlbmQKICAgICAgcmV0dXJuIHBscnMKICAgIGVuZCwKICAgIFsibnBjcyJdID0gZnVuY3Rpb24oc3BlYWtlcixhcmdzKQogICAgICBsb2NhbCByZXR1cm5zID0ge30KICAgICAgZm9yIF8sIHYgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgaWYgdjpJc0EoIk1vZGVsIikgYW5kIGdldFJvb3QodikgYW5kIHY6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiSHVtYW5vaWQiKSBhbmQgUGxheWVyczpHZXRQbGF5ZXJGcm9tQ2hhcmFjdGVyKHYpID09IG5pbCB0aGVuCiAgICAgICAgICBsb2NhbCBjbG9uZSA9IEluc3RhbmNlLm5ldygiUGxheWVyIikKICAgICAgICAgIGNsb25lLk5hbWUgPSB2Lk5hbWUgLi4gIiAtICIgLi4gdjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJIdW1hbm9pZCIpLkRpc3BsYXlOYW1lCiAgICAgICAgICBjbG9uZS5DaGFyYWN0ZXIgPSB2CiAgICAgICAgICB0YWJsZS5pbnNlcnQocmV0dXJucywgY2xvbmUpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICByZXR1cm4gcmV0dXJucwogICAgZW5kLAogIH0KICAKICBmdW5jdGlvbiB0b1Rva2VucyhzdHIpCiAgICBsb2NhbCB0b2tlbnMgPSB7fQogICAgZm9yIG9wLG5hbWUgaW4gc3RyaW5nLmdtYXRjaChzdHIsIihbKy1dKShbXistXSspIikgZG8KICAgICAgdGFibGUuaW5zZXJ0KHRva2Vucyx7T3BlcmF0b3IgPSBvcCxOYW1lID0gbmFtZX0pCiAgICBlbmQKICAgIHJldHVybiB0b2tlbnMKICBlbmQKICAKICBmdW5jdGlvbiBvbmx5SW5jbHVkZUluVGFibGUodGFiLG1hdGNoZXMpCiAgICBsb2NhbCBtYXRjaFRhYmxlID0ge30KICAgIGxvY2FsIHJlc3VsdFRhYmxlID0ge30KICAgIGZvciBpLHYgaW4gcGFpcnMobWF0Y2hlcykgZG8gbWF0Y2hUYWJsZVt2Lk5hbWVdID0gdHJ1ZSBlbmQKICAgIGZvciBpLHYgaW4gcGFpcnModGFiKSBkbyBpZiBtYXRjaFRhYmxlW3YuTmFtZV0gdGhlbiB0YWJsZS5pbnNlcnQocmVzdWx0VGFibGUsdikgZW5kIGVuZAogICAgcmV0dXJuIHJlc3VsdFRhYmxlCiAgZW5kCiAgCiAgZnVuY3Rpb24gcmVtb3ZlVGFibGVNYXRjaGVzKHRhYixtYXRjaGVzKQogICAgbG9jYWwgbWF0Y2hUYWJsZSA9IHt9CiAgICBsb2NhbCByZXN1bHRUYWJsZSA9IHt9CiAgICBmb3IgaSx2IGluIHBhaXJzKG1hdGNoZXMpIGRvIG1hdGNoVGFibGVbdi5OYW1lXSA9IHRydWUgZW5kCiAgICBmb3IgaSx2IGluIHBhaXJzKHRhYikgZG8gaWYgbm90IG1hdGNoVGFibGVbdi5OYW1lXSB0aGVuIHRhYmxlLmluc2VydChyZXN1bHRUYWJsZSx2KSBlbmQgZW5kCiAgICByZXR1cm4gcmVzdWx0VGFibGUKICBlbmQKICAKICBmdW5jdGlvbiBnZXRQbGF5ZXJzQnlOYW1lKE5hbWUpCiAgICBsb2NhbCBOYW1lLExlbixGb3VuZCA9IHN0cmluZy5sb3dlcihOYW1lKSwjTmFtZSx7fQogICAgZm9yIF8sdiBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgICAgaWYgTmFtZTpzdWIoMCwxKSA9PSAnQCcgdGhlbgogICAgICAgIGlmIHN0cmluZy5zdWIoc3RyaW5nLmxvd2VyKHYuTmFtZSksMSxMZW4tMSkgPT0gTmFtZTpzdWIoMikgdGhlbgogICAgICAgICAgdGFibGUuaW5zZXJ0KEZvdW5kLHYpCiAgICAgICAgZW5kCiAgICAgIGVsc2UKICAgICAgICBpZiBzdHJpbmcuc3ViKHN0cmluZy5sb3dlcih2Lk5hbWUpLDEsTGVuKSA9PSBOYW1lIG9yIHN0cmluZy5zdWIoc3RyaW5nLmxvd2VyKHYuRGlzcGxheU5hbWUpLDEsTGVuKSA9PSBOYW1lIHRoZW4KICAgICAgICAgIHRhYmxlLmluc2VydChGb3VuZCx2KQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIEZvdW5kCiAgZW5kCiAgCiAgZnVuY3Rpb24gZ2V0UGxheWVyKGxpc3Qsc3BlYWtlcikKICAgIGlmIGxpc3QgPT0gbmlsIHRoZW4gcmV0dXJuIHtzcGVha2VyLk5hbWV9IGVuZAogICAgbG9jYWwgbmFtZUxpc3QgPSBzcGxpdFN0cmluZyhsaXN0LCIsIikKICAKICAgIGxvY2FsIGZvdW5kTGlzdCA9IHt9CiAgCiAgICBmb3IgXyxuYW1lIGluIHBhaXJzKG5hbWVMaXN0KSBkbwogICAgICBpZiBzdHJpbmcuc3ViKG5hbWUsMSwxKSB+PSAiKyIgYW5kIHN0cmluZy5zdWIobmFtZSwxLDEpIH49ICItIiB0aGVuIG5hbWUgPSAiKyIuLm5hbWUgZW5kCiAgICAgIGxvY2FsIHRva2VucyA9IHRvVG9rZW5zKG5hbWUpCiAgICAgIGxvY2FsIGluaXRpYWxQbGF5ZXJzID0gUGxheWVyczpHZXRQbGF5ZXJzKCkKICAKICAgICAgZm9yIGksdiBpbiBwYWlycyh0b2tlbnMpIGRvCiAgICAgICAgaWYgdi5PcGVyYXRvciA9PSAiKyIgdGhlbgogICAgICAgICAgbG9jYWwgdG9rZW5Db250ZW50ID0gdi5OYW1lCiAgICAgICAgICBsb2NhbCBmb3VuZENhc2UgPSBmYWxzZQogICAgICAgICAgZm9yIHJlZ2V4LGNhc2UgaW4gcGFpcnMoU3BlY2lhbFBsYXllckNhc2VzKSBkbwogICAgICAgICAgICBsb2NhbCBtYXRjaGVzID0ge3N0cmluZy5tYXRjaCh0b2tlbkNvbnRlbnQsIl4iLi5yZWdleC4uIiQiKX0KICAgICAgICAgICAgaWYgI21hdGNoZXMgPiAwIHRoZW4KICAgICAgICAgICAgICBmb3VuZENhc2UgPSB0cnVlCiAgICAgICAgICAgICAgaW5pdGlhbFBsYXllcnMgPSBvbmx5SW5jbHVkZUluVGFibGUoaW5pdGlhbFBsYXllcnMsY2FzZShzcGVha2VyLG1hdGNoZXMsaW5pdGlhbFBsYXllcnMpKQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZAogICAgICAgICAgaWYgbm90IGZvdW5kQ2FzZSB0aGVuCiAgICAgICAgICAgIGluaXRpYWxQbGF5ZXJzID0gb25seUluY2x1ZGVJblRhYmxlKGluaXRpYWxQbGF5ZXJzLGdldFBsYXllcnNCeU5hbWUodG9rZW5Db250ZW50KSkKICAgICAgICAgIGVuZAogICAgICAgIGVsc2UKICAgICAgICAgIGxvY2FsIHRva2VuQ29udGVudCA9IHYuTmFtZQogICAgICAgICAgbG9jYWwgZm91bmRDYXNlID0gZmFsc2UKICAgICAgICAgIGZvciByZWdleCxjYXNlIGluIHBhaXJzKFNwZWNpYWxQbGF5ZXJDYXNlcykgZG8KICAgICAgICAgICAgbG9jYWwgbWF0Y2hlcyA9IHtzdHJpbmcubWF0Y2godG9rZW5Db250ZW50LCJeIi4ucmVnZXguLiIkIil9CiAgICAgICAgICAgIGlmICNtYXRjaGVzID4gMCB0aGVuCiAgICAgICAgICAgICAgZm91bmRDYXNlID0gdHJ1ZQogICAgICAgICAgICAgIGluaXRpYWxQbGF5ZXJzID0gcmVtb3ZlVGFibGVNYXRjaGVzKGluaXRpYWxQbGF5ZXJzLGNhc2Uoc3BlYWtlcixtYXRjaGVzLGluaXRpYWxQbGF5ZXJzKSkKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmQKICAgICAgICAgIGlmIG5vdCBmb3VuZENhc2UgdGhlbgogICAgICAgICAgICBpbml0aWFsUGxheWVycyA9IHJlbW92ZVRhYmxlTWF0Y2hlcyhpbml0aWFsUGxheWVycyxnZXRQbGF5ZXJzQnlOYW1lKHRva2VuQ29udGVudCkpCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgCiAgICAgIGZvciBpLHYgaW4gcGFpcnMoaW5pdGlhbFBsYXllcnMpIGRvIHRhYmxlLmluc2VydChmb3VuZExpc3QsdikgZW5kCiAgICBlbmQKICAKICAgIGxvY2FsIGZvdW5kTmFtZXMgPSB7fQogICAgZm9yIGksdiBpbiBwYWlycyhmb3VuZExpc3QpIGRvIHRhYmxlLmluc2VydChmb3VuZE5hbWVzLHYuTmFtZSkgZW5kCiAgCiAgICByZXR1cm4gZm91bmROYW1lcwogIGVuZAogIAogIGZvcm1hdFVzZXJuYW1lID0gZnVuY3Rpb24ocGxheWVyKQogICAgICBpZiBwbGF5ZXIuRGlzcGxheU5hbWUgfj0gcGxheWVyLk5hbWUgdGhlbgogICAgICAgICAgcmV0dXJuIHN0cmluZy5mb3JtYXQoIiVzICglcykiLCBwbGF5ZXIuTmFtZSwgcGxheWVyLkRpc3BsYXlOYW1lKQogICAgICBlbmQKICAgICAgcmV0dXJuIHBsYXllci5OYW1lCiAgZW5kCiAgCiAgZ2V0cHJmeD1mdW5jdGlvbihzdHJuKQogICAgaWYgc3RybjpzdWIoMSxzdHJpbmcubGVuKHByZWZpeCkpPT1wcmVmaXggdGhlbiByZXR1cm57J2NtZCcsc3RyaW5nLmxlbihwcmVmaXgpKzF9CiAgICBlbmQgcmV0dXJuCiAgZW5kCiAgCiAgZnVuY3Rpb24gZG9fZXhlYyhzdHIsIHBscikKICAgIHN0ciA9IHN0cjpnc3ViKCcvZSAnLCAnJykKICAgIGxvY2FsIHQgPSBnZXRwcmZ4KHN0cikKICAgIGlmIG5vdCB0IHRoZW4gcmV0dXJuIGVuZAogICAgc3RyID0gc3RyOnN1Yih0WzJdKQogICAgaWYgdFsxXT09J2NtZCcgdGhlbgogICAgICBleGVjQ21kKHN0ciwgcGxyLCB0cnVlKQogICAgICBJbmRleENvbnRlbnRzKCcnLHRydWUsZmFsc2UsdHJ1ZSkKICAgICAgQ01Ec0YuQ2FudmFzUG9zaXRpb24gPSBjYW52YXNQb3MKICAgIGVuZAogIGVuZAogIAogIGxhc3RUZXh0Qm94U3RyaW5nLGxhc3RUZXh0Qm94Q29uLGxhc3RFbnRlcmVkU3RyaW5nID0gbmlsLG5pbCxuaWwKICAKICBVc2VySW5wdXRTZXJ2aWNlLlRleHRCb3hGb2N1c2VkOkNvbm5lY3QoZnVuY3Rpb24ob2JqKQogICAgaWYgbGFzdFRleHRCb3hDb24gdGhlbiBsYXN0VGV4dEJveENvbjpEaXNjb25uZWN0KCkgZW5kCiAgICBpZiBvYmogPT0gQ21kYmFyIHRoZW4gbGFzdFRleHRCb3hTdHJpbmcgPSBuaWwgcmV0dXJuIGVuZAogICAgbGFzdFRleHRCb3hTdHJpbmcgPSBvYmouVGV4dAogICAgbGFzdFRleHRCb3hDb24gPSBvYmo6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJUZXh0Iik6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIGlmIG5vdCAoVXNlcklucHV0U2VydmljZTpJc0tleURvd24oRW51bS5LZXlDb2RlLlJldHVybikgb3IgVXNlcklucHV0U2VydmljZTpJc0tleURvd24oRW51bS5LZXlDb2RlLktleXBhZEVudGVyKSkgdGhlbgogICAgICAgIGxhc3RUZXh0Qm94U3RyaW5nID0gb2JqLlRleHQKICAgICAgZW5kCiAgICBlbmQpCiAgZW5kKQogIAogIFVzZXJJbnB1dFNlcnZpY2UuSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0LGdhbWVQcm9jZXNzZWQpCiAgICBpZiBnYW1lUHJvY2Vzc2VkIHRoZW4KICAgICAgaWYgQ21kYmFyIGFuZCBDbWRiYXI6SXNGb2N1c2VkKCkgdGhlbgogICAgICAgIGlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlVwIHRoZW4KICAgICAgICAgIGhpc3RvcnlDb3VudCA9IGhpc3RvcnlDb3VudCArIDEKICAgICAgICAgIGlmIGhpc3RvcnlDb3VudCA+ICNjbWRIaXN0b3J5IHRoZW4gaGlzdG9yeUNvdW50ID0gI2NtZEhpc3RvcnkgZW5kCiAgICAgICAgICBDbWRiYXIuVGV4dCA9IGNtZEhpc3RvcnlbaGlzdG9yeUNvdW50XSBvciAiIgogICAgICAgICAgQ21kYmFyLkN1cnNvclBvc2l0aW9uID0gMTAyMAogICAgICAgIGVsc2VpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5Eb3duIHRoZW4KICAgICAgICAgIGhpc3RvcnlDb3VudCA9IGhpc3RvcnlDb3VudCAtIDEKICAgICAgICAgIGlmIGhpc3RvcnlDb3VudCA8IDAgdGhlbiBoaXN0b3J5Q291bnQgPSAwIGVuZAogICAgICAgICAgQ21kYmFyLlRleHQgPSBjbWRIaXN0b3J5W2hpc3RvcnlDb3VudF0gb3IgIiIKICAgICAgICAgIENtZGJhci5DdXJzb3JQb3NpdGlvbiA9IDEwMjAKICAgICAgICBlbmQKICAgICAgZWxzZWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLlJldHVybiBvciBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5LZXlwYWRFbnRlciB0aGVuCiAgICAgICAgbGFzdEVudGVyZWRTdHJpbmcgPSBsYXN0VGV4dEJveFN0cmluZwogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXR0ZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICB3YWl0KCkKICAgIGlmIGxhc3RFbnRlcmVkU3RyaW5nIHRoZW4KICAgICAgbG9jYWwgbWVzc2FnZSA9IGxhc3RFbnRlcmVkU3RyaW5nCiAgICAgIGxhc3RFbnRlcmVkU3RyaW5nID0gbmlsCiAgICAgIGRvX2V4ZWMobWVzc2FnZSwgUGxheWVycy5Mb2NhbFBsYXllcikKICAgIGVuZAogIGVuZCkKICAKICBDbWRiYXIuUGxhY2Vob2xkZXJUZXh0ID0gIkNvbW1hbmQgQmFyICgiLi5wcmVmaXguLiIpIgogIENtZGJhcjpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIlRleHQiKTpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGlmIENtZGJhcjpJc0ZvY3VzZWQoKSB0aGVuCiAgICAgIEluZGV4Q29udGVudHMoQ21kYmFyLlRleHQsdHJ1ZSx0cnVlKQogICAgZW5kCiAgZW5kKQogIAogIGxvY2FsIHRhYkNvbXBsZXRlID0gbmlsCiAgdGFiQWxsb3dlZCA9IHRydWUKICBDbWRiYXIuRm9jdXNMb3N0OkNvbm5lY3QoZnVuY3Rpb24oZW50ZXJwcmVzc2VkKQogICAgaWYgZW50ZXJwcmVzc2VkIHRoZW4KICAgICAgbG9jYWwgY21kYmFyVGV4dCA9IENtZGJhci5UZXh0OmdzdWIoIl4iLi5wcmVmaXgsIiIpCiAgICAgIGV4ZWNDbWQoY21kYmFyVGV4dCxQbGF5ZXJzLkxvY2FsUGxheWVyLHRydWUpCiAgICBlbmQKICAgIGlmIHRhYkNvbXBsZXRlIHRoZW4gdGFiQ29tcGxldGU6RGlzY29ubmVjdCgpIGVuZAogICAgd2FpdCgpCiAgICBpZiBub3QgQ21kYmFyOklzRm9jdXNlZCgpIHRoZW4KICAgICAgQ21kYmFyLlRleHQgPSAiIgogICAgICBJbmRleENvbnRlbnRzKCcnLHRydWUsZmFsc2UsdHJ1ZSkKICAgICAgaWYgU2V0dGluZ3NPcGVuID09IHRydWUgdGhlbgogICAgICAgIHdhaXQoMC4yKQogICAgICAgIFNldHRpbmdzOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAsIDAsIDAsIDQ1KSwgIkluT3V0IiwgIlF1YXJ0IiwgMC4yLCB0cnVlLCBuaWwpCiAgICAgICAgQ01Ec0YuVmlzaWJsZSA9IGZhbHNlCiAgICAgIGVuZAogICAgZW5kCiAgICBDTURzRi5DYW52YXNQb3NpdGlvbiA9IGNhbnZhc1BvcwogIGVuZCkKICAKICBDbWRiYXIuRm9jdXNlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGhpc3RvcnlDb3VudCA9IDAKICAgIGNhbnZhc1BvcyA9IENNRHNGLkNhbnZhc1Bvc2l0aW9uCiAgICBpZiBTZXR0aW5nc09wZW4gPT0gdHJ1ZSB0aGVuCiAgICAgIHdhaXQoMC4yKQogICAgICBDTURzRi5WaXNpYmxlID0gdHJ1ZQogICAgICBTZXR0aW5nczpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLCAwLCAwLCAyMjApLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjIsIHRydWUsIG5pbCkKICAgIGVuZAogICAgdGFiQ29tcGxldGUgPSBVc2VySW5wdXRTZXJ2aWNlLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCxnYW1lUHJvY2Vzc2VkKQogICAgICBpZiBDbWRiYXI6SXNGb2N1c2VkKCkgdGhlbgogICAgICAgIGlmIHRhYkFsbG93ZWQgPT0gdHJ1ZSBhbmQgaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuVGFiIGFuZCB0b3BDb21tYW5kIH49IG5pbCB0aGVuCiAgICAgICAgICBhdXRvQ29tcGxldGUodG9wQ29tbWFuZCkKICAgICAgICBlbmQKICAgICAgZWxzZQogICAgICAgIHRhYkNvbXBsZXRlOkRpc2Nvbm5lY3QoKQogICAgICBlbmQKICAgIGVuZCkKICBlbmQpCiAgCiAgRVNQZW5hYmxlZCA9IGZhbHNlCiAgQ0hNU2VuYWJsZWQgPSBmYWxzZQogIAogIGZ1bmN0aW9uIHJvdW5kKG51bSwgbnVtRGVjaW1hbFBsYWNlcykKICAgIGxvY2FsIG11bHQgPSAxMF4obnVtRGVjaW1hbFBsYWNlcyBvciAwKQogICAgcmV0dXJuIG1hdGguZmxvb3IobnVtICogbXVsdCArIDAuNSkgLyBtdWx0CiAgZW5kCiAgCiAgZnVuY3Rpb24gRVNQKHBscikKICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICBmb3IgaSx2IGluIHBhaXJzKENPUkVHVUk6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2Lk5hbWUgPT0gcGxyLk5hbWUuLidfRVNQJyB0aGVuCiAgICAgICAgICB2OkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgd2FpdCgpCiAgICAgIGlmIHBsci5DaGFyYWN0ZXIgYW5kIHBsci5OYW1lIH49IFBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZSBhbmQgbm90IENPUkVHVUk6RmluZEZpcnN0Q2hpbGQocGxyLk5hbWUuLidfRVNQJykgdGhlbgogICAgICAgIGxvY2FsIEVTUGhvbGRlciA9IEluc3RhbmNlLm5ldygiRm9sZGVyIikKICAgICAgICBFU1Bob2xkZXIuTmFtZSA9IHBsci5OYW1lLi4nX0VTUCcKICAgICAgICBFU1Bob2xkZXIuUGFyZW50ID0gQ09SRUdVSQogICAgICAgIHJlcGVhdCB3YWl0KDEpIHVudGlsIHBsci5DaGFyYWN0ZXIgYW5kIGdldFJvb3QocGxyLkNoYXJhY3RlcikgYW5kIHBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgICAgZm9yIGIsbiBpbiBwYWlycyAocGxyLkNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgaWYgKG46SXNBKCJCYXNlUGFydCIpKSB0aGVuCiAgICAgICAgICAgIGxvY2FsIGEgPSBJbnN0YW5jZS5uZXcoIkJveEhhbmRsZUFkb3JubWVudCIpCiAgICAgICAgICAgIGEuTmFtZSA9IHBsci5OYW1lCiAgICAgICAgICAgIGEuUGFyZW50ID0gRVNQaG9sZGVyCiAgICAgICAgICAgIGEuQWRvcm5lZSA9IG4KICAgICAgICAgICAgYS5BbHdheXNPblRvcCA9IHRydWUKICAgICAgICAgICAgYS5aSW5kZXggPSAxMAogICAgICAgICAgICBhLlNpemUgPSBuLlNpemUKICAgICAgICAgICAgYS5UcmFuc3BhcmVuY3kgPSBlc3BUcmFuc3BhcmVuY3kKICAgICAgICAgICAgYS5Db2xvciA9IHBsci5UZWFtQ29sb3IKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIGlmIHBsci5DaGFyYWN0ZXIgYW5kIHBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoJ0hlYWQnKSB0aGVuCiAgICAgICAgICBsb2NhbCBCaWxsYm9hcmRHdWkgPSBJbnN0YW5jZS5uZXcoIkJpbGxib2FyZEd1aSIpCiAgICAgICAgICBsb2NhbCBUZXh0TGFiZWwgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgICBCaWxsYm9hcmRHdWkuQWRvcm5lZSA9IHBsci5DaGFyYWN0ZXIuSGVhZAogICAgICAgICAgQmlsbGJvYXJkR3VpLk5hbWUgPSBwbHIuTmFtZQogICAgICAgICAgQmlsbGJvYXJkR3VpLlBhcmVudCA9IEVTUGhvbGRlcgogICAgICAgICAgQmlsbGJvYXJkR3VpLlNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAwLCAxNTApCiAgICAgICAgICBCaWxsYm9hcmRHdWkuU3R1ZHNPZmZzZXQgPSBWZWN0b3IzLm5ldygwLCAxLCAwKQogICAgICAgICAgQmlsbGJvYXJkR3VpLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgVGV4dExhYmVsLlBhcmVudCA9IEJpbGxib2FyZEd1aQogICAgICAgICAgVGV4dExhYmVsLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgICBUZXh0TGFiZWwuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMCwgMCwgLTUwKQogICAgICAgICAgVGV4dExhYmVsLlNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAwLCAxMDApCiAgICAgICAgICBUZXh0TGFiZWwuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zU2VtaWJvbGQKICAgICAgICAgIFRleHRMYWJlbC5UZXh0U2l6ZSA9IDIwCiAgICAgICAgICBUZXh0TGFiZWwuVGV4dENvbG9yMyA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICAgICAgICAgIFRleHRMYWJlbC5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMAogICAgICAgICAgVGV4dExhYmVsLlRleHRZQWxpZ25tZW50ID0gRW51bS5UZXh0WUFsaWdubWVudC5Cb3R0b20KICAgICAgICAgIFRleHRMYWJlbC5UZXh0ID0gJ05hbWU6ICcuLnBsci5OYW1lCiAgICAgICAgICBUZXh0TGFiZWwuWkluZGV4ID0gMTAKICAgICAgICAgIGxvY2FsIGVzcExvb3BGdW5jCiAgICAgICAgICBsb2NhbCB0ZWFtQ2hhbmdlCiAgICAgICAgICBsb2NhbCBhZGRlZEZ1bmMKICAgICAgICAgIGFkZGVkRnVuYyA9IHBsci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgRVNQZW5hYmxlZCB0aGVuCiAgICAgICAgICAgICAgZXNwTG9vcEZ1bmM6RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgdGVhbUNoYW5nZTpEaXNjb25uZWN0KCkKICAgICAgICAgICAgICBFU1Bob2xkZXI6RGVzdHJveSgpCiAgICAgICAgICAgICAgcmVwZWF0IHdhaXQoMSkgdW50aWwgZ2V0Um9vdChwbHIuQ2hhcmFjdGVyKSBhbmQgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICAgICAgICBFU1AocGxyKQogICAgICAgICAgICAgIGFkZGVkRnVuYzpEaXNjb25uZWN0KCkKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIHRlYW1DaGFuZ2U6RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgYWRkZWRGdW5jOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZCkKICAgICAgICAgIHRlYW1DaGFuZ2UgPSBwbHI6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJUZWFtQ29sb3IiKTpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgICAgaWYgRVNQZW5hYmxlZCB0aGVuCiAgICAgICAgICAgICAgZXNwTG9vcEZ1bmM6RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgYWRkZWRGdW5jOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgIEVTUGhvbGRlcjpEZXN0cm95KCkKICAgICAgICAgICAgICByZXBlYXQgd2FpdCgxKSB1bnRpbCBnZXRSb290KHBsci5DaGFyYWN0ZXIpIGFuZCBwbHIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgICAgICAgICAgIEVTUChwbHIpCiAgICAgICAgICAgICAgdGVhbUNoYW5nZTpEaXNjb25uZWN0KCkKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIHRlYW1DaGFuZ2U6RGlzY29ubmVjdCgpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kKQogICAgICAgICAgbG9jYWwgZnVuY3Rpb24gZXNwTG9vcCgpCiAgICAgICAgICAgIGlmIENPUkVHVUk6RmluZEZpcnN0Q2hpbGQocGxyLk5hbWUuLidfRVNQJykgdGhlbgogICAgICAgICAgICAgIGlmIHBsci5DaGFyYWN0ZXIgYW5kIGdldFJvb3QocGxyLkNoYXJhY3RlcikgYW5kIHBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpIGFuZCBQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlciBhbmQgZ2V0Um9vdChQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcikgYW5kIFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKSB0aGVuCiAgICAgICAgICAgICAgICBsb2NhbCBwb3MgPSBtYXRoLmZsb29yKChnZXRSb290KFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyKS5Qb3NpdGlvbiAtIGdldFJvb3QocGxyLkNoYXJhY3RlcikuUG9zaXRpb24pLm1hZ25pdHVkZSkKICAgICAgICAgICAgICAgIFRleHRMYWJlbC5UZXh0ID0gJ05hbWU6ICcuLnBsci5OYW1lLi4nIHwgSGVhbHRoOiAnLi5yb3VuZChwbHIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5IZWFsdGgsIDEpLi4nIHwgU3R1ZHM6ICcuLnBvcwogICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgdGVhbUNoYW5nZTpEaXNjb25uZWN0KCkKICAgICAgICAgICAgICBhZGRlZEZ1bmM6RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgZXNwTG9vcEZ1bmM6RGlzY29ubmVjdCgpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgICBlc3BMb29wRnVuYyA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGVzcExvb3ApCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kKQogIGVuZAogIAogIGZ1bmN0aW9uIENITVMocGxyKQogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgIGZvciBpLHYgaW4gcGFpcnMoQ09SRUdVSTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHYuTmFtZSA9PSBwbHIuTmFtZS4uJ19DSE1TJyB0aGVuCiAgICAgICAgICB2OkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgd2FpdCgpCiAgICAgIGlmIHBsci5DaGFyYWN0ZXIgYW5kIHBsci5OYW1lIH49IFBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZSBhbmQgbm90IENPUkVHVUk6RmluZEZpcnN0Q2hpbGQocGxyLk5hbWUuLidfQ0hNUycpIHRoZW4KICAgICAgICBsb2NhbCBFU1Bob2xkZXIgPSBJbnN0YW5jZS5uZXcoIkZvbGRlciIpCiAgICAgICAgRVNQaG9sZGVyLk5hbWUgPSBwbHIuTmFtZS4uJ19DSE1TJwogICAgICAgIEVTUGhvbGRlci5QYXJlbnQgPSBDT1JFR1VJCiAgICAgICAgcmVwZWF0IHdhaXQoMSkgdW50aWwgcGxyLkNoYXJhY3RlciBhbmQgZ2V0Um9vdChwbHIuQ2hhcmFjdGVyKSBhbmQgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICBmb3IgYixuIGluIHBhaXJzIChwbHIuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICBpZiAobjpJc0EoIkJhc2VQYXJ0IikpIHRoZW4KICAgICAgICAgICAgbG9jYWwgYSA9IEluc3RhbmNlLm5ldygiQm94SGFuZGxlQWRvcm5tZW50IikKICAgICAgICAgICAgYS5OYW1lID0gcGxyLk5hbWUKICAgICAgICAgICAgYS5QYXJlbnQgPSBFU1Bob2xkZXIKICAgICAgICAgICAgYS5BZG9ybmVlID0gbgogICAgICAgICAgICBhLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgICBhLlpJbmRleCA9IDEwCiAgICAgICAgICAgIGEuU2l6ZSA9IG4uU2l6ZQogICAgICAgICAgICBhLlRyYW5zcGFyZW5jeSA9IGVzcFRyYW5zcGFyZW5jeQogICAgICAgICAgICBhLkNvbG9yID0gcGxyLlRlYW1Db2xvcgogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgYWRkZWRGdW5jCiAgICAgICAgbG9jYWwgdGVhbUNoYW5nZQogICAgICAgIGxvY2FsIENITVNyZW1vdmVkCiAgICAgICAgYWRkZWRGdW5jID0gcGxyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgaWYgQ0hNU2VuYWJsZWQgdGhlbgogICAgICAgICAgICBFU1Bob2xkZXI6RGVzdHJveSgpCiAgICAgICAgICAgIHRlYW1DaGFuZ2U6RGlzY29ubmVjdCgpCiAgICAgICAgICAgIHJlcGVhdCB3YWl0KDEpIHVudGlsIGdldFJvb3QocGxyLkNoYXJhY3RlcikgYW5kIHBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgICAgICAgIENITVMocGxyKQogICAgICAgICAgICBhZGRlZEZ1bmM6RGlzY29ubmVjdCgpCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHRlYW1DaGFuZ2U6RGlzY29ubmVjdCgpCiAgICAgICAgICAgIGFkZGVkRnVuYzpEaXNjb25uZWN0KCkKICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgICAgICB0ZWFtQ2hhbmdlID0gcGxyOkdldFByb3BlcnR5Q2hhbmdlZFNpZ25hbCgiVGVhbUNvbG9yIik6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICBpZiBDSE1TZW5hYmxlZCB0aGVuCiAgICAgICAgICAgIEVTUGhvbGRlcjpEZXN0cm95KCkKICAgICAgICAgICAgYWRkZWRGdW5jOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICByZXBlYXQgd2FpdCgxKSB1bnRpbCBnZXRSb290KHBsci5DaGFyYWN0ZXIpIGFuZCBwbHIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgICAgICAgICBDSE1TKHBscikKICAgICAgICAgICAgdGVhbUNoYW5nZTpEaXNjb25uZWN0KCkKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgdGVhbUNoYW5nZTpEaXNjb25uZWN0KCkKICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgICAgICBDSE1TcmVtb3ZlZCA9IEVTUGhvbGRlci5BbmNlc3RyeUNoYW5nZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICB0ZWFtQ2hhbmdlOkRpc2Nvbm5lY3QoKQogICAgICAgICAgYWRkZWRGdW5jOkRpc2Nvbm5lY3QoKQogICAgICAgICAgQ0hNU3JlbW92ZWQ6RGlzY29ubmVjdCgpCiAgICAgICAgZW5kKQogICAgICBlbmQKICAgIGVuZCkKICBlbmQKICAKICBmdW5jdGlvbiBMb2NhdGUocGxyKQogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgIGZvciBpLHYgaW4gcGFpcnMoQ09SRUdVSTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHYuTmFtZSA9PSBwbHIuTmFtZS4uJ19MQycgdGhlbgogICAgICAgICAgdjpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIHdhaXQoKQogICAgICBpZiBwbHIuQ2hhcmFjdGVyIGFuZCBwbHIuTmFtZSB+PSBQbGF5ZXJzLkxvY2FsUGxheWVyLk5hbWUgYW5kIG5vdCBDT1JFR1VJOkZpbmRGaXJzdENoaWxkKHBsci5OYW1lLi4nX0xDJykgdGhlbgogICAgICAgIGxvY2FsIEVTUGhvbGRlciA9IEluc3RhbmNlLm5ldygiRm9sZGVyIikKICAgICAgICBFU1Bob2xkZXIuTmFtZSA9IHBsci5OYW1lLi4nX0xDJwogICAgICAgIEVTUGhvbGRlci5QYXJlbnQgPSBDT1JFR1VJCiAgICAgICAgcmVwZWF0IHdhaXQoMSkgdW50aWwgcGxyLkNoYXJhY3RlciBhbmQgZ2V0Um9vdChwbHIuQ2hhcmFjdGVyKSBhbmQgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICBmb3IgYixuIGluIHBhaXJzIChwbHIuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICBpZiAobjpJc0EoIkJhc2VQYXJ0IikpIHRoZW4KICAgICAgICAgICAgbG9jYWwgYSA9IEluc3RhbmNlLm5ldygiQm94SGFuZGxlQWRvcm5tZW50IikKICAgICAgICAgICAgYS5OYW1lID0gcGxyLk5hbWUKICAgICAgICAgICAgYS5QYXJlbnQgPSBFU1Bob2xkZXIKICAgICAgICAgICAgYS5BZG9ybmVlID0gbgogICAgICAgICAgICBhLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgICBhLlpJbmRleCA9IDEwCiAgICAgICAgICAgIGEuU2l6ZSA9IG4uU2l6ZQogICAgICAgICAgICBhLlRyYW5zcGFyZW5jeSA9IGVzcFRyYW5zcGFyZW5jeQogICAgICAgICAgICBhLkNvbG9yID0gcGxyLlRlYW1Db2xvcgogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgaWYgcGxyLkNoYXJhY3RlciBhbmQgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnSGVhZCcpIHRoZW4KICAgICAgICAgIGxvY2FsIEJpbGxib2FyZEd1aSA9IEluc3RhbmNlLm5ldygiQmlsbGJvYXJkR3VpIikKICAgICAgICAgIGxvY2FsIFRleHRMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgICAgIEJpbGxib2FyZEd1aS5BZG9ybmVlID0gcGxyLkNoYXJhY3Rlci5IZWFkCiAgICAgICAgICBCaWxsYm9hcmRHdWkuTmFtZSA9IHBsci5OYW1lCiAgICAgICAgICBCaWxsYm9hcmRHdWkuUGFyZW50ID0gRVNQaG9sZGVyCiAgICAgICAgICBCaWxsYm9hcmRHdWkuU2l6ZSA9IFVEaW0yLm5ldygwLCAxMDAsIDAsIDE1MCkKICAgICAgICAgIEJpbGxib2FyZEd1aS5TdHVkc09mZnNldCA9IFZlY3RvcjMubmV3KDAsIDEsIDApCiAgICAgICAgICBCaWxsYm9hcmRHdWkuQWx3YXlzT25Ub3AgPSB0cnVlCiAgICAgICAgICBUZXh0TGFiZWwuUGFyZW50ID0gQmlsbGJvYXJkR3VpCiAgICAgICAgICBUZXh0TGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICAgIFRleHRMYWJlbC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAwLCAtNTApCiAgICAgICAgICBUZXh0TGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLCAxMDAsIDAsIDEwMCkKICAgICAgICAgIFRleHRMYWJlbC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnNTZW1pYm9sZAogICAgICAgICAgVGV4dExhYmVsLlRleHRTaXplID0gMjAKICAgICAgICAgIFRleHRMYWJlbC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgICAgICAgVGV4dExhYmVsLlRleHRTdHJva2VUcmFuc3BhcmVuY3kgPSAwCiAgICAgICAgICBUZXh0TGFiZWwuVGV4dFlBbGlnbm1lbnQgPSBFbnVtLlRleHRZQWxpZ25tZW50LkJvdHRvbQogICAgICAgICAgVGV4dExhYmVsLlRleHQgPSAnTmFtZTogJy4ucGxyLk5hbWUKICAgICAgICAgIFRleHRMYWJlbC5aSW5kZXggPSAxMAogICAgICAgICAgbG9jYWwgbGNMb29wRnVuYwogICAgICAgICAgbG9jYWwgYWRkZWRGdW5jCiAgICAgICAgICBsb2NhbCB0ZWFtQ2hhbmdlCiAgICAgICAgICBhZGRlZEZ1bmMgPSBwbHIuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIEVTUGhvbGRlciB+PSBuaWwgYW5kIEVTUGhvbGRlci5QYXJlbnQgfj0gbmlsIHRoZW4KICAgICAgICAgICAgICBsY0xvb3BGdW5jOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgIHRlYW1DaGFuZ2U6RGlzY29ubmVjdCgpCiAgICAgICAgICAgICAgRVNQaG9sZGVyOkRlc3Ryb3koKQogICAgICAgICAgICAgIHJlcGVhdCB3YWl0KDEpIHVudGlsIGdldFJvb3QocGxyLkNoYXJhY3RlcikgYW5kIHBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgICAgICAgICAgTG9jYXRlKHBscikKICAgICAgICAgICAgICBhZGRlZEZ1bmM6RGlzY29ubmVjdCgpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICB0ZWFtQ2hhbmdlOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgIGFkZGVkRnVuYzpEaXNjb25uZWN0KCkKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmQpCiAgICAgICAgICB0ZWFtQ2hhbmdlID0gcGxyOkdldFByb3BlcnR5Q2hhbmdlZFNpZ25hbCgiVGVhbUNvbG9yIik6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIEVTUGhvbGRlciB+PSBuaWwgYW5kIEVTUGhvbGRlci5QYXJlbnQgfj0gbmlsIHRoZW4KICAgICAgICAgICAgICBsY0xvb3BGdW5jOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgIGFkZGVkRnVuYzpEaXNjb25uZWN0KCkKICAgICAgICAgICAgICBFU1Bob2xkZXI6RGVzdHJveSgpCiAgICAgICAgICAgICAgcmVwZWF0IHdhaXQoMSkgdW50aWwgZ2V0Um9vdChwbHIuQ2hhcmFjdGVyKSBhbmQgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgICAgICAgICBMb2NhdGUocGxyKQogICAgICAgICAgICAgIHRlYW1DaGFuZ2U6RGlzY29ubmVjdCgpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICB0ZWFtQ2hhbmdlOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZCkKICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIGxjTG9vcCgpCiAgICAgICAgICAgIGlmIENPUkVHVUk6RmluZEZpcnN0Q2hpbGQocGxyLk5hbWUuLidfTEMnKSB0aGVuCiAgICAgICAgICAgICAgaWYgcGxyLkNoYXJhY3RlciBhbmQgZ2V0Um9vdChwbHIuQ2hhcmFjdGVyKSBhbmQgcGxyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikgYW5kIFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIGFuZCBnZXRSb290KFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyKSBhbmQgUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpIHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHBvcyA9IG1hdGguZmxvb3IoKGdldFJvb3QoUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIpLlBvc2l0aW9uIC0gZ2V0Um9vdChwbHIuQ2hhcmFjdGVyKS5Qb3NpdGlvbikubWFnbml0dWRlKQogICAgICAgICAgICAgICAgVGV4dExhYmVsLlRleHQgPSAnTmFtZTogJy4ucGxyLk5hbWUuLicgfCBIZWFsdGg6ICcuLnJvdW5kKHBsci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLkhlYWx0aCwgMSkuLicgfCBTdHVkczogJy4ucG9zCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICB0ZWFtQ2hhbmdlOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICAgIGFkZGVkRnVuYzpEaXNjb25uZWN0KCkKICAgICAgICAgICAgICBsY0xvb3BGdW5jOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZAogICAgICAgICAgbGNMb29wRnVuYyA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGxjTG9vcCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQpCiAgZW5kCiAgCiAgbG9jYWwgYmluZHNHVUkgPSBLZXliaW5kRWRpdG9yCiAgbG9jYWwgYXdhaXRpbmdJbnB1dCA9IGZhbHNlCiAgbG9jYWwga2V5U2VsZWN0ZWQgPSBmYWxzZQogIAogIGZ1bmN0aW9uIHJlZnJlc2hiaW5kcygpCiAgICBpZiBIb2xkZXJfMiB0aGVuCiAgICAgIEhvbGRlcl8yOkNsZWFyQWxsQ2hpbGRyZW4oKQogICAgICBIb2xkZXJfMi5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDEwKQogICAgICBmb3IgaSA9IDEsICNiaW5kcyBkbwogICAgICAgIGxvY2FsIFlTaXplID0gMjUKICAgICAgICBsb2NhbCBQb3NpdGlvbiA9ICgoaSAqIFlTaXplKSAtIFlTaXplKQogICAgICAgIGxvY2FsIG5ld2JpbmQgPSBFeGFtcGxlXzI6Q2xvbmUoKQogICAgICAgIG5ld2JpbmQuUGFyZW50ID0gSG9sZGVyXzIKICAgICAgICBuZXdiaW5kLlZpc2libGUgPSB0cnVlCiAgICAgICAgbmV3YmluZC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLDAsMCwgUG9zaXRpb24gKyA1KQogICAgICAgIHRhYmxlLmluc2VydChzaGFkZTIsbmV3YmluZCkKICAgICAgICB0YWJsZS5pbnNlcnQoc2hhZGUyLG5ld2JpbmQuVGV4dCkKICAgICAgICB0YWJsZS5pbnNlcnQodGV4dDEsbmV3YmluZC5UZXh0KQogICAgICAgIHRhYmxlLmluc2VydChzaGFkZTMsbmV3YmluZC5UZXh0LkRlbGV0ZSkKICAgICAgICB0YWJsZS5pbnNlcnQodGV4dDIsbmV3YmluZC5UZXh0LkRlbGV0ZSkKICAgICAgICBsb2NhbCBpbnB1dCA9IHRvc3RyaW5nKGJpbmRzW2ldLktFWSkKICAgICAgICBsb2NhbCBrZXkKICAgICAgICBpZiBpbnB1dCA9PSAnUmlnaHRDbGljaycgb3IgaW5wdXQgPT0gJ0xlZnRDbGljaycgdGhlbgogICAgICAgICAga2V5ID0gaW5wdXQKICAgICAgICBlbHNlCiAgICAgICAgICBrZXkgPSBpbnB1dDpzdWIoMTQpCiAgICAgICAgZW5kCiAgICAgICAgaWYgYmluZHNbaV0uVE9HR0xFIHRoZW4KICAgICAgICAgIG5ld2JpbmQuVGV4dC5UZXh0ID0ga2V5Li4iID4gIi4uYmluZHNbaV0uQ09NTUFORC4uIiAvICIuLmJpbmRzW2ldLlRPR0dMRQogICAgICAgIGVsc2UKICAgICAgICAgIG5ld2JpbmQuVGV4dC5UZXh0ID0ga2V5Li4iID4gIi4uYmluZHNbaV0uQ09NTUFORC4uIiAgIi4uKGJpbmRzW2ldLklTS0VZVVAgYW5kICIoa2V5dXApIiBvciAiKGtleWRvd24pIikKICAgICAgICBlbmQKICAgICAgICBIb2xkZXJfMi5DYW52YXNTaXplID0gVURpbTIubmV3KDAsMCwwLCBQb3NpdGlvbiArIDMwKQogICAgICAgIG5ld2JpbmQuVGV4dC5EZWxldGUuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICB1bmtleWJpbmQoYmluZHNbaV0uQ09NTUFORCxiaW5kc1tpXS5LRVkpCiAgICAgICAgZW5kKQogICAgICBlbmQKICAgIGVuZAogIGVuZAogIAogIHJlZnJlc2hiaW5kcygpCiAgCiAgdG9nZ2xlT24gPSB7fQogIAogIGZ1bmN0aW9uIHVua2V5YmluZChjbWQsa2V5KQogICAgZm9yIGkgPSAjYmluZHMsMSwtMSBkbwogICAgICBpZiBiaW5kc1tpXS5DT01NQU5EID09IGNtZCBhbmQgYmluZHNbaV0uS0VZID09IGtleSB0aGVuCiAgICAgICAgdG9nZ2xlT25bYmluZHNbaV1dID0gbmlsCiAgICAgICAgdGFibGUucmVtb3ZlKGJpbmRzLCBpKQogICAgICBlbmQKICAgIGVuZAogICAgcmVmcmVzaGJpbmRzKCkKICAgIHVwZGF0ZXNhdmVzKCkKICAgIGlmIGtleSA9PSAnUmlnaHRDbGljaycgb3Iga2V5ID09ICdMZWZ0Q2xpY2snIHRoZW4KICAgICAgbm90aWZ5KCdLZXliaW5kcyBVcGRhdGVkJywnVW5iaW5kZWQgJy4ua2V5Li4nIGZyb20gJy4uY21kKQogICAgZWxzZQogICAgICBub3RpZnkoJ0tleWJpbmRzIFVwZGF0ZWQnLCdVbmJpbmRlZCAnLi5rZXk6c3ViKDE0KS4uJyBmcm9tICcuLmNtZCkKICAgIGVuZAogIGVuZAogIAogIFBvc2l0aW9uc0ZyYW1lLkRlbGV0ZS5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGV4ZWNDbWQoJ2Nwb3MnKQogIGVuZCkKICAKICBmdW5jdGlvbiByZWZyZXNod2F5cG9pbnRzKCkKICAgIGlmICNXYXlQb2ludHMgPiAwIG9yICNwV2F5UG9pbnRzID4gMCB0aGVuCiAgICAgIFBvc2l0aW9uc0hpbnQ6RGVzdHJveSgpCiAgICBlbmQKICAgIGlmIEhvbGRlcl80IHRoZW4KICAgICAgSG9sZGVyXzQ6Q2xlYXJBbGxDaGlsZHJlbigpCiAgICAgIEhvbGRlcl80LkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMTApCiAgICAgIGxvY2FsIFlTaXplID0gMjUKICAgICAgbG9jYWwgbnVtID0gMQogICAgICBmb3IgaSA9IDEsICNXYXlQb2ludHMgZG8KICAgICAgICBsb2NhbCBQb3NpdGlvbiA9ICgobnVtICogWVNpemUpIC0gWVNpemUpCiAgICAgICAgbG9jYWwgbmV3cG9pbnQgPSBFeGFtcGxlXzQ6Q2xvbmUoKQogICAgICAgIG5ld3BvaW50LlBhcmVudCA9IEhvbGRlcl80CiAgICAgICAgbmV3cG9pbnQuVmlzaWJsZSA9IHRydWUKICAgICAgICBuZXdwb2ludC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLDAsMCwgUG9zaXRpb24gKyA1KQogICAgICAgIG5ld3BvaW50LlRleHQuVGV4dCA9IFdheVBvaW50c1tpXS5OQU1FCiAgICAgICAgdGFibGUuaW5zZXJ0KHNoYWRlMixuZXdwb2ludCkKICAgICAgICB0YWJsZS5pbnNlcnQoc2hhZGUyLG5ld3BvaW50LlRleHQpCiAgICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLG5ld3BvaW50LlRleHQpCiAgICAgICAgdGFibGUuaW5zZXJ0KHNoYWRlMyxuZXdwb2ludC5UZXh0LkRlbGV0ZSkKICAgICAgICB0YWJsZS5pbnNlcnQodGV4dDIsbmV3cG9pbnQuVGV4dC5EZWxldGUpCiAgICAgICAgdGFibGUuaW5zZXJ0KHNoYWRlMyxuZXdwb2ludC5UZXh0LlRQKQogICAgICAgIHRhYmxlLmluc2VydCh0ZXh0MixuZXdwb2ludC5UZXh0LlRQKQogICAgICAgIEhvbGRlcl80LkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwwLDAsIFBvc2l0aW9uICsgMzApCiAgICAgICAgbmV3cG9pbnQuVGV4dC5EZWxldGUuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICBleGVjQ21kKCdkcG9zICcuLldheVBvaW50c1tpXS5OQU1FKQogICAgICAgIGVuZCkKICAgICAgICBuZXdwb2ludC5UZXh0LlRQLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgZXhlY0NtZCgibG9hZHBvcyAiLi5XYXlQb2ludHNbaV0uTkFNRSkKICAgICAgICBlbmQpCiAgICAgICAgbnVtID0gbnVtKzEKICAgICAgZW5kCiAgICAgIGZvciBpID0gMSwgI3BXYXlQb2ludHMgZG8KICAgICAgICBsb2NhbCBQb3NpdGlvbiA9ICgobnVtICogWVNpemUpIC0gWVNpemUpCiAgICAgICAgbG9jYWwgbmV3cG9pbnQgPSBFeGFtcGxlXzQ6Q2xvbmUoKQogICAgICAgIG5ld3BvaW50LlBhcmVudCA9IEhvbGRlcl80CiAgICAgICAgbmV3cG9pbnQuVmlzaWJsZSA9IHRydWUKICAgICAgICBuZXdwb2ludC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLDAsMCwgUG9zaXRpb24gKyA1KQogICAgICAgIG5ld3BvaW50LlRleHQuVGV4dCA9IHBXYXlQb2ludHNbaV0uTkFNRQogICAgICAgIHRhYmxlLmluc2VydChzaGFkZTIsbmV3cG9pbnQpCiAgICAgICAgdGFibGUuaW5zZXJ0KHNoYWRlMixuZXdwb2ludC5UZXh0KQogICAgICAgIHRhYmxlLmluc2VydCh0ZXh0MSxuZXdwb2ludC5UZXh0KQogICAgICAgIHRhYmxlLmluc2VydChzaGFkZTMsbmV3cG9pbnQuVGV4dC5EZWxldGUpCiAgICAgICAgdGFibGUuaW5zZXJ0KHRleHQyLG5ld3BvaW50LlRleHQuRGVsZXRlKQogICAgICAgIHRhYmxlLmluc2VydChzaGFkZTMsbmV3cG9pbnQuVGV4dC5UUCkKICAgICAgICB0YWJsZS5pbnNlcnQodGV4dDIsbmV3cG9pbnQuVGV4dC5UUCkKICAgICAgICBIb2xkZXJfNC5DYW52YXNTaXplID0gVURpbTIubmV3KDAsMCwwLCBQb3NpdGlvbiArIDMwKQogICAgICAgIG5ld3BvaW50LlRleHQuRGVsZXRlLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgZXhlY0NtZCgnZHBvcyAnLi5wV2F5UG9pbnRzW2ldLk5BTUUpCiAgICAgICAgZW5kKQogICAgICAgIG5ld3BvaW50LlRleHQuVFAuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICBleGVjQ21kKCJsb2FkcG9zICIuLnBXYXlQb2ludHNbaV0uTkFNRSkKICAgICAgICBlbmQpCiAgICAgICAgbnVtID0gbnVtKzEKICAgICAgZW5kCiAgICBlbmQKICBlbmQKICAKICByZWZyZXNod2F5cG9pbnRzKCkKICAKICBmdW5jdGlvbiByZWZyZXNoYWxpYXNlcygpCiAgICBpZiAjYWxpYXNlcyA+IDAgdGhlbgogICAgICBBbGlhc0hpbnQ6RGVzdHJveSgpCiAgICBlbmQKICAgIGlmIEhvbGRlcl8zIHRoZW4KICAgICAgSG9sZGVyXzM6Q2xlYXJBbGxDaGlsZHJlbigpCiAgICAgIEhvbGRlcl8zLkNhbnZhc1NpemUgPSBVRGltMi5uZXcoMCwgMCwgMCwgMTApCiAgICAgIGZvciBpID0gMSwgI2FsaWFzZXMgZG8KICAgICAgICBsb2NhbCBZU2l6ZSA9IDI1CiAgICAgICAgbG9jYWwgUG9zaXRpb24gPSAoKGkgKiBZU2l6ZSkgLSBZU2l6ZSkKICAgICAgICBsb2NhbCBuZXdhbGlhcyA9IEV4YW1wbGVfMzpDbG9uZSgpCiAgICAgICAgbmV3YWxpYXMuUGFyZW50ID0gSG9sZGVyXzMKICAgICAgICBuZXdhbGlhcy5WaXNpYmxlID0gdHJ1ZQogICAgICAgIG5ld2FsaWFzLlBvc2l0aW9uID0gVURpbTIubmV3KDAsMCwwLCBQb3NpdGlvbiArIDUpCiAgICAgICAgbmV3YWxpYXMuVGV4dC5UZXh0ID0gYWxpYXNlc1tpXS5DTUQuLiIgPiAiLi5hbGlhc2VzW2ldLkFMSUFTCiAgICAgICAgdGFibGUuaW5zZXJ0KHNoYWRlMixuZXdhbGlhcykKICAgICAgICB0YWJsZS5pbnNlcnQoc2hhZGUyLG5ld2FsaWFzLlRleHQpCiAgICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLG5ld2FsaWFzLlRleHQpCiAgICAgICAgdGFibGUuaW5zZXJ0KHNoYWRlMyxuZXdhbGlhcy5UZXh0LkRlbGV0ZSkKICAgICAgICB0YWJsZS5pbnNlcnQodGV4dDIsbmV3YWxpYXMuVGV4dC5EZWxldGUpCiAgICAgICAgSG9sZGVyXzMuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLDAsMCwgUG9zaXRpb24gKyAzMCkKICAgICAgICBuZXdhbGlhcy5UZXh0LkRlbGV0ZS5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgIGV4ZWNDbWQoJ3JlbW92ZWFsaWFzICcuLmFsaWFzZXNbaV0uQUxJQVMpCiAgICAgICAgZW5kKQogICAgICBlbmQKICAgIGVuZAogIGVuZAogIAogIGxvY2FsIGJpbmRDaG9zZW5LZXlVcCA9IGZhbHNlCiAgCiAgQmluZFRvLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgYXdhaXRpbmdJbnB1dCA9IHRydWUKICAgIEJpbmRUby5UZXh0ID0gJ1ByZXNzIHNvbWV0aGluZycKICBlbmQpCiAgCiAgQmluZFRyaWdnZXJTZWxlY3QuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBiaW5kQ2hvc2VuS2V5VXAgPSBub3QgYmluZENob3NlbktleVVwCiAgICBCaW5kVHJpZ2dlclNlbGVjdC5UZXh0ID0gYmluZENob3NlbktleVVwIGFuZCAiS2V5VXAiIG9yICJLZXlEb3duIgogIGVuZCkKICAKICBuZXdUb2dnbGUgPSBmYWxzZQogIENtZGJhcl8zLlBhcmVudC5WaXNpYmxlID0gZmFsc2UKICBPbl8yLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgaWYgbmV3VG9nZ2xlID09IGZhbHNlIHRoZW4gbmV3VG9nZ2xlID0gdHJ1ZQogICAgICBPbl8yLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwCiAgICAgIENtZGJhcl8zLlBhcmVudC5WaXNpYmxlID0gdHJ1ZQogICAgICBCaW5kVHJpZ2dlclNlbGVjdC5WaXNpYmxlID0gZmFsc2UKICAgIGVsc2UgbmV3VG9nZ2xlID0gZmFsc2UKICAgICAgT25fMi5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICBDbWRiYXJfMy5QYXJlbnQuVmlzaWJsZSA9IGZhbHNlCiAgICAgIEJpbmRUcmlnZ2VyU2VsZWN0LlZpc2libGUgPSB0cnVlCiAgICBlbmQKICBlbmQpCiAgCiAgQWRkXzIuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBpZiBrZXlTZWxlY3RlZCB0aGVuCiAgICAgIGlmIHN0cmluZy5maW5kKENtZGJhcl8yLlRleHQsICJcXFxcIikgb3Igc3RyaW5nLmZpbmQoQ21kYmFyXzMuVGV4dCwgIlxcXFwiKSB0aGVuCiAgICAgICAgbm90aWZ5KCdLZXliaW5kIEVycm9yJywnT25seSB1c2Ugb25lIGJhY2tzbGFzaCB0byBrZXliaW5kIG11bHRpcGxlIGNvbW1hbmRzIGludG8gb25lIGtleWJpbmQgb3IgY29tbWFuZCcpCiAgICAgIGVsc2UKICAgICAgICBpZiBuZXdUb2dnbGUgYW5kIENtZGJhcl8zLlRleHQgfj0gJycgYW5kIENtZGJhcl8yLnRleHQgfj0gJycgdGhlbgogICAgICAgICAgYWRkYmluZChDbWRiYXJfMi5UZXh0LGtleVByZXNzZWQsZmFsc2UsQ21kYmFyXzMuVGV4dCkKICAgICAgICBlbHNlaWYgbm90IG5ld1RvZ2dsZSBhbmQgQ21kYmFyXzIudGV4dCB+PSAnJyB0aGVuCiAgICAgICAgICBhZGRiaW5kKENtZGJhcl8yLlRleHQsa2V5UHJlc3NlZCxiaW5kQ2hvc2VuS2V5VXApCiAgICAgICAgZWxzZQogICAgICAgICAgcmV0dXJuCiAgICAgICAgZW5kCiAgICAgICAgcmVmcmVzaGJpbmRzKCkKICAgICAgICB1cGRhdGVzYXZlcygpCiAgICAgICAgaWYga2V5UHJlc3NlZCA9PSAnUmlnaHRDbGljaycgb3Iga2V5UHJlc3NlZCA9PSAnTGVmdENsaWNrJyB0aGVuCiAgICAgICAgICBub3RpZnkoJ0tleWJpbmRzIFVwZGF0ZWQnLCdCaW5kZWQgJy4ua2V5UHJlc3NlZC4uJyB0byAnLi5DbWRiYXJfMi5UZXh0Li4obmV3VG9nZ2xlIGFuZCAiIC8gIi4uQ21kYmFyXzMuVGV4dCBvciAiIikpCiAgICAgICAgZWxzZQogICAgICAgICAgbm90aWZ5KCdLZXliaW5kcyBVcGRhdGVkJywnQmluZGVkICcuLmtleVByZXNzZWQ6c3ViKDE0KS4uJyB0byAnLi5DbWRiYXJfMi5UZXh0Li4obmV3VG9nZ2xlIGFuZCAiIC8gIi4uQ21kYmFyXzMuVGV4dCBvciAiIikpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIEV4aXRfMi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIENtZGJhcl8yLlRleHQgPSAnQ29tbWFuZCcKICAgIENtZGJhcl8zLlRleHQgPSAnQ29tbWFuZCAyJwogICAgQmluZFRvLlRleHQgPSAnQ2xpY2sgdG8gYmluZCcKICAgIGJpbmRDaG9zZW5LZXlVcCA9IGZhbHNlCiAgICBCaW5kVHJpZ2dlclNlbGVjdC5UZXh0ID0gIktleURvd24iCiAgICBrZXlTZWxlY3RlZCA9IGZhbHNlCiAgICBLZXliaW5kRWRpdG9yOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAuNSwgLTE4MCwgMCwgLTUwMCksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKQogIGVuZCkKICAKICBmdW5jdGlvbiBvbklucHV0QmVnYW4oaW5wdXQsZ2FtZVByb2Nlc3NlZCkKICAgIGlmIGF3YWl0aW5nSW5wdXQgdGhlbgogICAgICBpZiBpbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5LZXlib2FyZCB0aGVuCiAgICAgICAga2V5UHJlc3NlZCA9IHRvc3RyaW5nKGlucHV0LktleUNvZGUpCiAgICAgICAgQmluZFRvLlRleHQgPSBrZXlQcmVzc2VkOnN1YigxNCkKICAgICAgZWxzZWlmIGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMSB0aGVuCiAgICAgICAga2V5UHJlc3NlZCA9ICdMZWZ0Q2xpY2snCiAgICAgICAgQmluZFRvLlRleHQgPSAnTGVmdENsaWNrJwogICAgICBlbHNlaWYgaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24yIHRoZW4KICAgICAgICBrZXlQcmVzc2VkID0gJ1JpZ2h0Q2xpY2snCiAgICAgICAgQmluZFRvLlRleHQgPSAnUmlnaHRDbGljaycKICAgICAgZW5kCiAgICAgIGF3YWl0aW5nSW5wdXQgPSBmYWxzZQogICAgICBrZXlTZWxlY3RlZCA9IHRydWUKICAgIGVuZAogICAgaWYgbm90IGdhbWVQcm9jZXNzZWQgYW5kICNiaW5kcyA+IDAgdGhlbgogICAgICBmb3IgaSx2IGluIHBhaXJzKGJpbmRzKSBkbwogICAgICAgIGlmIG5vdCB2LklTS0VZVVAgdGhlbgogICAgICAgICAgaWYgKGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLktleWJvYXJkIGFuZCB2LktFWTpsb3dlcigpPT10b3N0cmluZyhpbnB1dC5LZXlDb2RlKTpsb3dlcigpKSBvciAoaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIGFuZCB2LktFWTpsb3dlcigpPT0nbGVmdGNsaWNrJykgb3IgKGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMiBhbmQgdi5LRVk6bG93ZXIoKT09J3JpZ2h0Y2xpY2snKSB0aGVuCiAgICAgICAgICAgIGlmIHYuVE9HR0xFIHRoZW4KICAgICAgICAgICAgICBsb2NhbCBpc09uID0gdG9nZ2xlT25bdl0gPT0gdHJ1ZQogICAgICAgICAgICAgIHRvZ2dsZU9uW3ZdID0gbm90IGlzT24KICAgICAgICAgICAgICBpZiBpc09uIHRoZW4KICAgICAgICAgICAgICAgIGV4ZWNDbWQodi5UT0dHTEUsUGxheWVycy5Mb2NhbFBsYXllcikKICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBleGVjQ21kKHYuQ09NTUFORCxQbGF5ZXJzLkxvY2FsUGxheWVyKQogICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgZXhlY0NtZCh2LkNPTU1BTkQsUGxheWVycy5Mb2NhbFBsYXllcikKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQKICAKICBmdW5jdGlvbiBvbklucHV0RW5kZWQoaW5wdXQsZ2FtZVByb2Nlc3NlZCkKICAgIGlmIG5vdCBnYW1lUHJvY2Vzc2VkIGFuZCAjYmluZHMgPiAwIHRoZW4KICAgICAgZm9yIGksdiBpbiBwYWlycyhiaW5kcykgZG8KICAgICAgICBpZiB2LklTS0VZVVAgdGhlbgogICAgICAgICAgaWYgKGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLktleWJvYXJkIGFuZCB2LktFWTpsb3dlcigpPT10b3N0cmluZyhpbnB1dC5LZXlDb2RlKTpsb3dlcigpKSBvciAoaW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIGFuZCB2LktFWTpsb3dlcigpPT0nbGVmdGNsaWNrJykgb3IgKGlucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMiBhbmQgdi5LRVk6bG93ZXIoKT09J3JpZ2h0Y2xpY2snKSB0aGVuCiAgICAgICAgICAgIGV4ZWNDbWQodi5DT01NQU5ELFBsYXllcnMuTG9jYWxQbGF5ZXIpCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQKICAKICBVc2VySW5wdXRTZXJ2aWNlLklucHV0QmVnYW46Q29ubmVjdChvbklucHV0QmVnYW4pCiAgVXNlcklucHV0U2VydmljZS5JbnB1dEVuZGVkOkNvbm5lY3Qob25JbnB1dEVuZGVkKQogIAogIENsaWNrVFAuU2VsZWN0Lk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgaWYga2V5U2VsZWN0ZWQgdGhlbgogICAgICBhZGRiaW5kKCdjbGlja3RwJyxrZXlQcmVzc2VkLGJpbmRDaG9zZW5LZXlVcCkKICAgICAgcmVmcmVzaGJpbmRzKCkKICAgICAgdXBkYXRlc2F2ZXMoKQogICAgICBpZiBrZXlQcmVzc2VkID09ICdSaWdodENsaWNrJyBvciBrZXlQcmVzc2VkID09ICdMZWZ0Q2xpY2snIHRoZW4KICAgICAgICBub3RpZnkoJ0tleWJpbmRzIFVwZGF0ZWQnLCdCaW5kZWQgJy4ua2V5UHJlc3NlZC4uJyB0byBjbGljayB0cCcpCiAgICAgIGVsc2UKICAgICAgICBub3RpZnkoJ0tleWJpbmRzIFVwZGF0ZWQnLCdCaW5kZWQgJy4ua2V5UHJlc3NlZDpzdWIoMTQpLi4nIHRvIGNsaWNrIHRwJykKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgQ2xpY2tEZWxldGUuU2VsZWN0Lk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgaWYga2V5U2VsZWN0ZWQgdGhlbgogICAgICBhZGRiaW5kKCdjbGlja2RlbCcsa2V5UHJlc3NlZCxiaW5kQ2hvc2VuS2V5VXApCiAgICAgIHJlZnJlc2hiaW5kcygpCiAgICAgIHVwZGF0ZXNhdmVzKCkKICAgICAgaWYga2V5UHJlc3NlZCA9PSAnUmlnaHRDbGljaycgb3Iga2V5UHJlc3NlZCA9PSAnTGVmdENsaWNrJyB0aGVuCiAgICAgICAgbm90aWZ5KCdLZXliaW5kcyBVcGRhdGVkJywnQmluZGVkICcuLmtleVByZXNzZWQuLicgdG8gY2xpY2sgZGVsZXRlJykKICAgICAgZWxzZQogICAgICAgIG5vdGlmeSgnS2V5YmluZHMgVXBkYXRlZCcsJ0JpbmRlZCAnLi5rZXlQcmVzc2VkOnN1YigxNCkuLicgdG8gY2xpY2sgZGVsZXRlJykKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgbG9jYWwgZnVuY3Rpb24gY2xpY2t0cEZ1bmMoKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICBsb2NhbCBjaGFyYWN0ZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICBsb2NhbCBodW1hbm9pZCA9IGNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikKICAgICAgaWYgaHVtYW5vaWQgYW5kIGh1bWFub2lkLlNlYXRQYXJ0IHRoZW4KICAgICAgICBodW1hbm9pZC5TaXQgPSBmYWxzZQogICAgICAgIHdhaXQoMC4xKQogICAgICBlbmQKICAKICAgICAgbG9jYWwgaGlwSGVpZ2h0ID0gaHVtYW5vaWQgYW5kIGh1bWFub2lkLkhpcEhlaWdodCA+IDAgYW5kIChodW1hbm9pZC5IaXBIZWlnaHQgKyAxKQogICAgICBsb2NhbCByb290UGFydCA9IGdldFJvb3QoY2hhcmFjdGVyKQogICAgICBsb2NhbCByb290UGFydFBvc2l0aW9uID0gcm9vdFBhcnQuUG9zaXRpb24KICAgICAgbG9jYWwgaGl0UG9zaXRpb24gPSBJWU1vdXNlLkhpdC5Qb3NpdGlvbgogICAgICBsb2NhbCBuZXdDRnJhbWUgPSBDRnJhbWUubmV3KAogICAgICAgIGhpdFBvc2l0aW9uLCAKICAgICAgICBWZWN0b3IzLm5ldyhyb290UGFydFBvc2l0aW9uLlgsIGhpdFBvc2l0aW9uLlksIHJvb3RQYXJ0UG9zaXRpb24uWikKICAgICAgKSAqIENGcmFtZS5BbmdsZXMoMCwgbWF0aC5waSwgMCkKICAKICAgICAgcm9vdFBhcnQuQ0ZyYW1lID0gbmV3Q0ZyYW1lICsgVmVjdG9yMy5uZXcoMCwgaGlwSGVpZ2h0IG9yIDQsIDApCiAgICBlbmQpCiAgZW5kCiAgCiAgSVlNb3VzZS5CdXR0b24xRG93bjpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGZvciBpLHYgaW4gcGFpcnMoYmluZHMpIGRvCiAgICAgIGlmIHYuQ09NTUFORCA9PSAnY2xpY2t0cCcgdGhlbgogICAgICAgIGxvY2FsIGlucHV0ID0gdi5LRVkKICAgICAgICBpZiBpbnB1dCA9PSAnUmlnaHRDbGljaycgYW5kIFVzZXJJbnB1dFNlcnZpY2U6SXNNb3VzZUJ1dHRvblByZXNzZWQoRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMikgYW5kIFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIHRoZW4KICAgICAgICAgIGNsaWNrdHBGdW5jKCkKICAgICAgICBlbHNlaWYgaW5wdXQgPT0gJ0xlZnRDbGljaycgYW5kIFVzZXJJbnB1dFNlcnZpY2U6SXNNb3VzZUJ1dHRvblByZXNzZWQoRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMSkgYW5kIFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyIHRoZW4KICAgICAgICAgIGNsaWNrdHBGdW5jKCkKICAgICAgICBlbHNlaWYgVXNlcklucHV0U2VydmljZTpJc0tleURvd24oRW51bS5LZXlDb2RlW2lucHV0OnN1YigxNCldKSBhbmQgUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIgdGhlbgogICAgICAgICAgY2xpY2t0cEZ1bmMoKQogICAgICAgIGVuZAogICAgICBlbHNlaWYgdi5DT01NQU5EID09ICdjbGlja2RlbCcgdGhlbgogICAgICAgIGxvY2FsIGlucHV0ID0gdi5LRVkKICAgICAgICBpZiBpbnB1dCA9PSAnUmlnaHRDbGljaycgYW5kIFVzZXJJbnB1dFNlcnZpY2U6SXNNb3VzZUJ1dHRvblByZXNzZWQoRW51bS5Vc2VySW5wdXRUeXBlLk1vdXNlQnV0dG9uMikgdGhlbgogICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBJWU1vdXNlLlRhcmdldDpEZXN0cm95KCkgZW5kKQogICAgICAgIGVsc2VpZiBpbnB1dCA9PSAnTGVmdENsaWNrJyBhbmQgVXNlcklucHV0U2VydmljZTpJc01vdXNlQnV0dG9uUHJlc3NlZChFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xKSB0aGVuCiAgICAgICAgICBwY2FsbChmdW5jdGlvbigpIElZTW91c2UuVGFyZ2V0OkRlc3Ryb3koKSBlbmQpCiAgICAgICAgZWxzZWlmIFVzZXJJbnB1dFNlcnZpY2U6SXNLZXlEb3duKEVudW0uS2V5Q29kZVtpbnB1dDpzdWIoMTQpXSkgdGhlbgogICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBJWU1vdXNlLlRhcmdldDpEZXN0cm95KCkgZW5kKQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBQbHVnaW5zR1VJID0gUGx1Z2luRWRpdG9yLmJhY2tncm91bmQKICAKICBmdW5jdGlvbiBhZGRQbHVnaW4obmFtZSkKICAgIGlmIG5hbWU6bG93ZXIoKSA9PSAncGx1Z2luIGZpbGUgbmFtZScgb3IgbmFtZTpsb3dlcigpID09ICdpeV9mZS5peScgb3IgbmFtZSA9PSAnaXlfZmUnIHRoZW4KICAgICAgbm90aWZ5KCdQbHVnaW4gRXJyb3InLCdQbGVhc2UgZW50ZXIgYSB2YWxpZCBwbHVnaW4nKQogICAgZWxzZQogICAgICBsb2NhbCBmaWxlCiAgICAgIGxvY2FsIGZpbGVOYW1lCiAgICAgIGlmIG5hbWU6c3ViKC0zKSA9PSAnLml5JyB0aGVuCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBmaWxlID0gcmVhZGZpbGUobmFtZSkgZW5kKQogICAgICAgIGZpbGVOYW1lID0gbmFtZQogICAgICBlbHNlCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKSBmaWxlID0gcmVhZGZpbGUobmFtZS4uJy5peScpIGVuZCkKICAgICAgICBmaWxlTmFtZSA9IG5hbWUuLicuaXknCiAgICAgIGVuZAogICAgICBpZiBmaWxlIHRoZW4KICAgICAgICBpZiBub3QgRmluZEluVGFibGUoUGx1Z2luc1RhYmxlLCBmaWxlTmFtZSkgdGhlbgogICAgICAgICAgdGFibGUuaW5zZXJ0KFBsdWdpbnNUYWJsZSwgZmlsZU5hbWUpCiAgICAgICAgICBMb2FkUGx1Z2luKGZpbGVOYW1lKQogICAgICAgICAgcmVmcmVzaHBsdWdpbnMoKQogICAgICAgICAgcGNhbGwoZXZlbnRFZGl0b3IuUmVmcmVzaCkKICAgICAgICBlbHNlCiAgICAgICAgICBub3RpZnkoJ1BsdWdpbiBFcnJvcicsJ1RoaXMgcGx1Z2luIGlzIGFscmVhZHkgYWRkZWQnKQogICAgICAgIGVuZAogICAgICBlbHNlCiAgICAgICAgbm90aWZ5KCdQbHVnaW4gRXJyb3InLCdDYW5ub3QgbG9jYXRlIGZpbGUgIicuLmZpbGVOYW1lLi4nIi4gSXMgdGhlIGZpbGUgaW4gdGhlIGNvcnJlY3QgZm9sZGVyPycpCiAgICAgIGVuZAogICAgZW5kCiAgZW5kCiAgCiAgZnVuY3Rpb24gZGVsZXRlUGx1Z2luKG5hbWUpCiAgICBsb2NhbCBwTmFtZSA9IG5hbWUuLicuaXknCiAgICBpZiBuYW1lOnN1YigtMykgPT0gJy5peScgdGhlbgogICAgICBwTmFtZSA9IG5hbWUKICAgIGVuZAogICAgZm9yIGkgPSAjY21kcywxLC0xIGRvCiAgICAgIGlmIGNtZHNbaV0uUExVR0lOID09IHBOYW1lIHRoZW4KICAgICAgICB0YWJsZS5yZW1vdmUoY21kcywgaSkKICAgICAgZW5kCiAgICBlbmQKICAgIGZvciBpLHYgaW4gcGFpcnMoQ01Ec0Y6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgaWYgdi5OYW1lID09ICdQTFVHSU5fJy4ucE5hbWUgdGhlbgogICAgICAgIHY6RGVzdHJveSgpCiAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgaSx2IGluIHBhaXJzKFBsdWdpbnNUYWJsZSkgZG8KICAgICAgaWYgdiA9PSBwTmFtZSB0aGVuCiAgICAgICAgdGFibGUucmVtb3ZlKFBsdWdpbnNUYWJsZSwgaSkKICAgICAgICBub3RpZnkoJ1JlbW92ZWQgUGx1Z2luJyxwTmFtZS4uJyB3YXMgcmVtb3ZlZCcpCiAgICAgIGVuZAogICAgZW5kCiAgICBJbmRleENvbnRlbnRzKCcnLHRydWUpCiAgICByZWZyZXNocGx1Z2lucygpCiAgZW5kCiAgCiAgZnVuY3Rpb24gcmVmcmVzaHBsdWdpbnMoZG9udFNhdmUpCiAgICBpZiAjUGx1Z2luc1RhYmxlID4gMCB0aGVuCiAgICAgIFBsdWdpbnNIaW50OkRlc3Ryb3koKQogICAgZW5kCiAgICBpZiBIb2xkZXJfNSB0aGVuCiAgICAgIEhvbGRlcl81OkNsZWFyQWxsQ2hpbGRyZW4oKQogICAgICBIb2xkZXJfNS5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDEwKQogICAgICBmb3IgaSx2IGluIHBhaXJzKFBsdWdpbnNUYWJsZSkgZG8KICAgICAgICBsb2NhbCBwTmFtZSA9IHYKICAgICAgICBsb2NhbCBZU2l6ZSA9IDI1CiAgICAgICAgbG9jYWwgUG9zaXRpb24gPSAoKGkgKiBZU2l6ZSkgLSBZU2l6ZSkKICAgICAgICBsb2NhbCBuZXdwbHVnaW4gPSBFeGFtcGxlXzU6Q2xvbmUoKQogICAgICAgIG5ld3BsdWdpbi5QYXJlbnQgPSBIb2xkZXJfNQogICAgICAgIG5ld3BsdWdpbi5WaXNpYmxlID0gdHJ1ZQogICAgICAgIG5ld3BsdWdpbi5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLDAsMCwgUG9zaXRpb24gKyA1KQogICAgICAgIG5ld3BsdWdpbi5UZXh0LlRleHQgPSBwTmFtZQogICAgICAgIHRhYmxlLmluc2VydChzaGFkZTIsbmV3cGx1Z2luKQogICAgICAgIHRhYmxlLmluc2VydChzaGFkZTIsbmV3cGx1Z2luLlRleHQpCiAgICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLG5ld3BsdWdpbi5UZXh0KQogICAgICAgIHRhYmxlLmluc2VydChzaGFkZTMsbmV3cGx1Z2luLlRleHQuRGVsZXRlKQogICAgICAgIHRhYmxlLmluc2VydCh0ZXh0MixuZXdwbHVnaW4uVGV4dC5EZWxldGUpCiAgICAgICAgSG9sZGVyXzUuQ2FudmFzU2l6ZSA9IFVEaW0yLm5ldygwLDAsMCwgUG9zaXRpb24gKyAzMCkKICAgICAgICBuZXdwbHVnaW4uVGV4dC5EZWxldGUuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICBkZWxldGVQbHVnaW4ocE5hbWUpCiAgICAgICAgZW5kKQogICAgICBlbmQKICAgICAgaWYgbm90IGRvbnRTYXZlIHRoZW4KICAgICAgICB1cGRhdGVzYXZlcygpCiAgICAgIGVuZAogICAgZW5kCiAgZW5kCiAgCiAgbG9jYWwgUGx1Z2luQ2FjaGUKICBmdW5jdGlvbiBMb2FkUGx1Z2luKHZhbCxzdGFydHVwKQogICAgbG9jYWwgcGx1Z2luCiAgCiAgICBmdW5jdGlvbiBDYXRjaGVkUGx1Z2luTG9hZCgpCiAgICAgIHBsdWdpbiA9IGxvYWRmaWxlKHZhbCkoKQogICAgZW5kCiAgCiAgICBmdW5jdGlvbiBoYW5kbGVQbHVnaW5FcnJvcihwbGVycm9yKQogICAgICBub3RpZnkoJ1BsdWdpbiBFcnJvcicsJ0FuIGVycm9yIG9jY3VycmVkIHdpdGggdGhlIHBsdWdpbiwgIicuLnZhbC4uJyIgYW5kIGl0IGNvdWxkIG5vdCBiZSBsb2FkZWQnKQogICAgICBpZiBGaW5kSW5UYWJsZShQbHVnaW5zVGFibGUsdmFsKSB0aGVuCiAgICAgICAgZm9yIGksdiBpbiBwYWlycyhQbHVnaW5zVGFibGUpIGRvCiAgICAgICAgICBpZiB2ID09IHZhbCB0aGVuCiAgICAgICAgICAgIHRhYmxlLnJlbW92ZShQbHVnaW5zVGFibGUsaSkKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgdXBkYXRlc2F2ZXMoKQogIAogICAgICBwcmludCgiT3JpZ2luYWwgRXJyb3I6ICIuLnRvc3RyaW5nKHBsZXJyb3IpKQogICAgICBwcmludCgiUGx1Z2luIEVycm9yLCBzdGFjayB0cmFjZWJhY2s6ICIuLnRvc3RyaW5nKGRlYnVnLnRyYWNlYmFjaygpKSkKICAKICAgICAgcGx1Z2luID0gbmlsCiAgCiAgICAgIHJldHVybiBmYWxzZQogICAgZW5kCiAgCiAgICB4cGNhbGwoQ2F0Y2hlZFBsdWdpbkxvYWQsIGhhbmRsZVBsdWdpbkVycm9yKQogIAogICAgaWYgcGx1Z2luIH49IG5pbCB0aGVuCiAgICAgIGlmIG5vdCBzdGFydHVwIHRoZW4KICAgICAgICBub3RpZnkoJ0xvYWRlZCBQbHVnaW4nLCJOYW1lOiAiLi5wbHVnaW5bIlBsdWdpbk5hbWUiXS4uIlxuIi4uIkRlc2NyaXB0aW9uOiAiLi5wbHVnaW5bIlBsdWdpbkRlc2NyaXB0aW9uIl0pCiAgICAgIGVuZAogICAgICBhZGRjbWR0ZXh0KCcnLHZhbCkKICAgICAgYWRkY21kdGV4dChzdHJpbmcudXBwZXIoJy0tJy4ucGx1Z2luWyJQbHVnaW5OYW1lIl0pLHZhbCxwbHVnaW5bIlBsdWdpbkRlc2NyaXB0aW9uIl0pCiAgICAgIGlmIHBsdWdpblsiQ29tbWFuZHMiXSB0aGVuCiAgICAgICAgZm9yIGksdiBpbiBwYWlycyhwbHVnaW5bIkNvbW1hbmRzIl0pIGRvIAogICAgICAgICAgbG9jYWwgY21kRXh0ID0gJycKICAgICAgICAgIGxvY2FsIGNtZE5hbWUgPSBpCiAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBoYW5kbGVOYW1lcygpCiAgICAgICAgICAgIGNtZE5hbWUgPSBpCiAgICAgICAgICAgIGlmIGZpbmRDbWQoY21kTmFtZS4uY21kRXh0KSB0aGVuCiAgICAgICAgICAgICAgaWYgaXNOdW1iZXIoY21kRXh0KSB0aGVuCiAgICAgICAgICAgICAgICBjbWRFeHQgPSBjbWRFeHQrMQogICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIGNtZEV4dCA9IDEKICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICBoYW5kbGVOYW1lcygpCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICBjbWROYW1lID0gY21kTmFtZS4uY21kRXh0CiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgICBoYW5kbGVOYW1lcygpCiAgICAgICAgICBhZGRjbWQoY21kTmFtZSwgdlsiQWxpYXNlcyJdLCB2WyJGdW5jdGlvbiJdLCB2YWwpCiAgICAgICAgICBpZiB2WyJMaXN0TmFtZSJdIHRoZW4KICAgICAgICAgICAgbG9jYWwgbmV3TmFtZSA9IHYuTGlzdE5hbWUKICAgICAgICAgICAgbG9jYWwgY21kTmFtZXMgPSB7aSx1bnBhY2sodi5BbGlhc2VzKX0KICAgICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhjbWROYW1lcykgZG8KICAgICAgICAgICAgICBuZXdOYW1lID0gbmV3TmFtZTpnc3ViKHYsdi4uY21kRXh0KQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgYWRkY21kdGV4dChuZXdOYW1lLHZhbCx2WyJEZXNjcmlwdGlvbiJdKQogICAgICAgICAgZWxzZQogICAgICAgICAgICBhZGRjbWR0ZXh0KGNtZE5hbWUsdmFsLHZbIkRlc2NyaXB0aW9uIl0pCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIEluZGV4Q29udGVudHMoJycsdHJ1ZSkKICAgIGVsc2VpZiBwbHVnaW4gPT0gbmlsIHRoZW4KICAgICAgcGx1Z2luID0gbmlsCiAgICBlbmQKICBlbmQKICAKICBmdW5jdGlvbiBGaW5kUGx1Z2lucygpCiAgICBpZiBQbHVnaW5zVGFibGUgfj0gbmlsIGFuZCB0eXBlKFBsdWdpbnNUYWJsZSkgPT0gInRhYmxlIiB0aGVuCiAgICAgIGZvciBpLHYgaW4gcGFpcnMoUGx1Z2luc1RhYmxlKSBkbwogICAgICAgIExvYWRQbHVnaW4odix0cnVlKQogICAgICBlbmQKICAgICAgcmVmcmVzaHBsdWdpbnModHJ1ZSkKICAgIGVuZAogIGVuZAogIAogIEFkZFBsdWdpbi5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGFkZFBsdWdpbihQbHVnaW5zR1VJLkZpbGVOYW1lLlRleHQpCiAgZW5kKQogIAogIEV4aXRfMy5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIFBsdWdpbkVkaXRvcjpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLjUsIC0xODAsIDAsIC01MDApLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkKICAgIEZpbGVOYW1lLlRleHQgPSAnUGx1Z2luIEZpbGUgTmFtZScKICBlbmQpCiAgCiAgQWRkXzMuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICBQbHVnaW5FZGl0b3I6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMC41LCAtMTgwLCAwLCAzMTApLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkKICBlbmQpCiAgCiAgUGx1Z2lucy5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIGlmIHdyaXRlZmlsZUV4cGxvaXQoKSB0aGVuCiAgICAgIFBsdWdpbnNGcmFtZTpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLCAwLCAwLCAwKSwgIkluT3V0IiwgIlF1YXJ0IiwgMC41LCB0cnVlLCBuaWwpCiAgICAgIHdhaXQoMC41KQogICAgICBTZXR0aW5nc0hvbGRlci5WaXNpYmxlID0gZmFsc2UKICAgIGVsc2UKICAgICAgbm90aWZ5KCdJbmNvbXBhdGlibGUgRXhwbG9pdCcsJ1lvdXIgZXhwbG9pdCBpcyB1bmFibGUgdG8gdXNlIHBsdWdpbnMgKG1pc3NpbmcgcmVhZC93cml0ZWZpbGUpJykKICAgIGVuZAogIGVuZCkKICAKICBDbG9zZV80Lk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgU2V0dGluZ3NIb2xkZXIuVmlzaWJsZSA9IHRydWUKICAgIFBsdWdpbnNGcmFtZTpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLCAwLCAwLCAxNzUpLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkKICBlbmQpCiAgCiAgbG9jYWwgVGVsZXBvcnRDaGVjayA9IGZhbHNlCiAgUGxheWVycy5Mb2NhbFBsYXllci5PblRlbGVwb3J0OkNvbm5lY3QoZnVuY3Rpb24oU3RhdGUpCiAgICBpZiBLZWVwSW5mWWllbGQgYW5kIChub3QgVGVsZXBvcnRDaGVjaykgYW5kIHF1ZXVldGVsZXBvcnQgdGhlbgogICAgICBUZWxlcG9ydENoZWNrID0gdHJ1ZQogICAgICBxdWV1ZXRlbGVwb3J0KCJsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0VkZ2VJWS9pbmZpbml0ZXlpZWxkL21hc3Rlci9zb3VyY2UnKSkoKSIpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdhZGRhbGlhcycse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmICNhcmdzIDwgMiB0aGVuIHJldHVybiBlbmQKICAgIGxvY2FsIGNtZCA9IHN0cmluZy5sb3dlcihhcmdzWzFdKQogICAgbG9jYWwgYWxpYXMgPSBzdHJpbmcubG93ZXIoYXJnc1syXSkKICAgIGZvciBpLHYgaW4gcGFpcnMoY21kcykgZG8KICAgICAgaWYgdi5OQU1FOmxvd2VyKCk9PWNtZCBvciBGaW5kSW5UYWJsZSh2LkFMSUFTLGNtZCkgdGhlbgogICAgICAgIGN1c3RvbUFsaWFzW2FsaWFzXSA9IHYKICAgICAgICBhbGlhc2VzWyNhbGlhc2VzICsgMV0gPSB7Q01EID0gY21kLCBBTElBUyA9IGFsaWFzfQogICAgICAgIG5vdGlmeSgnQWxpYXNlcyBNb2RpZmllZCcsIkFkZGVkICIuLmFsaWFzLi4iIGFzIGFuIGFsaWFzIHRvICIuLmNtZCkKICAgICAgICB1cGRhdGVzYXZlcygpCiAgICAgICAgcmVmcmVzaGFsaWFzZXMoKQogICAgICAgIGJyZWFrCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgncmVtb3ZlYWxpYXMnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiAjYXJncyA8IDEgdGhlbiByZXR1cm4gZW5kCiAgICBsb2NhbCBhbGlhcyA9IHN0cmluZy5sb3dlcihhcmdzWzFdKQogICAgaWYgY3VzdG9tQWxpYXNbYWxpYXNdIHRoZW4KICAgICAgbG9jYWwgY21kID0gY3VzdG9tQWxpYXNbYWxpYXNdLk5BTUUKICAgICAgY3VzdG9tQWxpYXNbYWxpYXNdID0gbmlsCiAgICAgIGZvciBpID0gI2FsaWFzZXMsMSwtMSBkbwogICAgICAgIGlmIGFsaWFzZXNbaV0uQUxJQVMgPT0gdG9zdHJpbmcoYWxpYXMpIHRoZW4KICAgICAgICAgIHRhYmxlLnJlbW92ZShhbGlhc2VzLCBpKQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgbm90aWZ5KCdBbGlhc2VzIE1vZGlmaWVkJywiUmVtb3ZlZCB0aGUgYWxpYXMgIi4uYWxpYXMuLiIgZnJvbSAiLi5jbWQpCiAgICAgIHVwZGF0ZXNhdmVzKCkKICAgICAgcmVmcmVzaGFsaWFzZXMoKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnY2xyYWxpYXNlcycse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGN1c3RvbUFsaWFzID0ge30KICAgIGFsaWFzZXMgPSB7fQogICAgbm90aWZ5KCdBbGlhc2VzIE1vZGlmaWVkJywnUmVtb3ZlZCBhbGwgYWxpYXNlcycpCiAgICB1cGRhdGVzYXZlcygpCiAgICByZWZyZXNoYWxpYXNlcygpCiAgZW5kKQogIAogIGFkZGNtZCgnZGlzY29yZCcsIHsnc3VwcG9ydCcsICdoZWxwJ30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBldmVyeUNsaXBib2FyZCB0aGVuCiAgICAgIHRvQ2xpcGJvYXJkKCdodHRwczovL2Rpc2NvcmQuY29tL2ludml0ZS9kWUhhZzQzZWVVJykKICAgICAgbm90aWZ5KCdEaXNjb3JkIEludml0ZScsICdDb3BpZWQgdG8gY2xpcGJvYXJkIVxuZGlzY29yZC5nZy9kWUhhZzQzZWVVJykKICAgIGVsc2UKICAgICAgbm90aWZ5KCdEaXNjb3JkIEludml0ZScsICdkaXNjb3JkLmdnL2RZSGFnNDNlZVUnKQogICAgZW5kCiAgICBpZiBodHRwcmVxdWVzdCB0aGVuCiAgICAgIGh0dHByZXF1ZXN0KHsKICAgICAgICBVcmwgPSAnaHR0cDovLzEyNy4wLjAuMTo2NDYzL3JwYz92PTEnLAogICAgICAgIE1ldGhvZCA9ICdQT1NUJywKICAgICAgICBIZWFkZXJzID0gewogICAgICAgICAgWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgIE9yaWdpbiA9ICdodHRwczovL2Rpc2NvcmQuY29tJwogICAgICAgIH0sCiAgICAgICAgQm9keSA9IEh0dHBTZXJ2aWNlOkpTT05FbmNvZGUoewogICAgICAgICAgY21kID0gJ0lOVklURV9CUk9XU0VSJywKICAgICAgICAgIG5vbmNlID0gSHR0cFNlcnZpY2U6R2VuZXJhdGVHVUlEKGZhbHNlKSwKICAgICAgICAgIGFyZ3MgPSB7Y29kZSA9ICdkWUhhZzQzZWVVJ30KICAgICAgICB9KQogICAgICB9KQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgna2VlcGl5Jywge30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBxdWV1ZXRlbGVwb3J0IHRoZW4KICAgICAgS2VlcEluZllpZWxkID0gdHJ1ZQogICAgICB1cGRhdGVzYXZlcygpCiAgICBlbHNlCiAgICAgIG5vdGlmeSgnSW5jb21wYXRpYmxlIEV4cGxvaXQnLCdZb3VyIGV4cGxvaXQgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIGNvbW1hbmQgKG1pc3NpbmcgcXVldWVfb25fdGVsZXBvcnQpJykKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3Vua2VlcGl5Jywge30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBxdWV1ZXRlbGVwb3J0IHRoZW4KICAgICAgS2VlcEluZllpZWxkID0gZmFsc2UKICAgICAgdXBkYXRlc2F2ZXMoKQogICAgZWxzZQogICAgICBub3RpZnkoJ0luY29tcGF0aWJsZSBFeHBsb2l0JywnWW91ciBleHBsb2l0IGRvZXMgbm90IHN1cHBvcnQgdGhpcyBjb21tYW5kIChtaXNzaW5nIHF1ZXVlX29uX3RlbGVwb3J0KScpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd0b2dnbGVrZWVwaXknLCB7fSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIHF1ZXVldGVsZXBvcnQgdGhlbgogICAgICBLZWVwSW5mWWllbGQgPSBub3QgS2VlcEluZllpZWxkCiAgICAgIHVwZGF0ZXNhdmVzKCkKICAgIGVsc2UKICAgICAgbm90aWZ5KCdJbmNvbXBhdGlibGUgRXhwbG9pdCcsJ1lvdXIgZXhwbG9pdCBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgY29tbWFuZCAobWlzc2luZyBxdWV1ZV9vbl90ZWxlcG9ydCknKQogICAgZW5kCiAgZW5kKQogIAogIGxvY2FsIGNhbk9wZW5TZXJ2ZXJpbmZvID0gdHJ1ZQogIGFkZGNtZCgnc2VydmVyaW5mbycseydpbmZvJywnc2luZm8nfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgbm90IGNhbk9wZW5TZXJ2ZXJpbmZvIHRoZW4gcmV0dXJuIGVuZAogICAgY2FuT3BlblNlcnZlcmluZm8gPSBmYWxzZQogICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgIGxvY2FsIEZSQU1FID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgIGxvY2FsIHNoYWRvdyA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICBsb2NhbCBQb3B1cFRleHQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgIGxvY2FsIEV4aXQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICBsb2NhbCBFeGl0SW1hZ2UgPSBJbnN0YW5jZS5uZXcoIkltYWdlTGFiZWwiKQogICAgICBsb2NhbCBiYWNrZ3JvdW5kID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgIGxvY2FsIFRleHRMYWJlbCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgbG9jYWwgVGV4dExhYmVsMiA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgbG9jYWwgVGV4dExhYmVsMyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgbG9jYWwgVGltZSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgbG9jYWwgYXBwZWFyYW5jZSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgbG9jYWwgbWF4cGxheWVycyA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgbG9jYWwgbmFtZSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgbG9jYWwgcGxhY2VpZCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgICAgbG9jYWwgcGxheWVyaWQgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgIGxvY2FsIHBsYXllcnMgPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgIGxvY2FsIENvcHlBcHAgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICBsb2NhbCBDb3B5UGxySUQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICBsb2NhbCBDb3B5UGxjSUQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICBsb2NhbCBDb3B5UGxjTmFtZSA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCiAgCiAgICAgIEZSQU1FLk5hbWUgPSByYW5kb21TdHJpbmcoKQogICAgICBGUkFNRS5QYXJlbnQgPSBQQVJFTlQKICAgICAgRlJBTUUuQWN0aXZlID0gdHJ1ZQogICAgICBGUkFNRS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICBGUkFNRS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIC0xMzAsIDAsIC01MDApCiAgICAgIEZSQU1FLlNpemUgPSBVRGltMi5uZXcoMCwgMjUwLCAwLCAyMCkKICAgICAgRlJBTUUuWkluZGV4ID0gMTAKICAgICAgZHJhZ0dVSShGUkFNRSkKICAKICAgICAgc2hhZG93Lk5hbWUgPSAic2hhZG93IgogICAgICBzaGFkb3cuUGFyZW50ID0gRlJBTUUKICAgICAgc2hhZG93LkJhY2tncm91bmRDb2xvcjMgPSBjdXJyZW50U2hhZGUyCiAgICAgIHNoYWRvdy5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgIHNoYWRvdy5TaXplID0gVURpbTIubmV3KDAsIDI1MCwgMCwgMjApCiAgICAgIHNoYWRvdy5aSW5kZXggPSAxMAogICAgICB0YWJsZS5pbnNlcnQoc2hhZGUyLHNoYWRvdykKICAKICAgICAgUG9wdXBUZXh0Lk5hbWUgPSAiUG9wdXBUZXh0IgogICAgICBQb3B1cFRleHQuUGFyZW50ID0gc2hhZG93CiAgICAgIFBvcHVwVGV4dC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICBQb3B1cFRleHQuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLjk1LCAwKQogICAgICBQb3B1cFRleHQuWkluZGV4ID0gMTAKICAgICAgUG9wdXBUZXh0LkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogICAgICBQb3B1cFRleHQuVGV4dFNpemUgPSAxNAogICAgICBQb3B1cFRleHQuVGV4dCA9ICJTZXJ2ZXIiCiAgICAgIFBvcHVwVGV4dC5UZXh0Q29sb3IzID0gY3VycmVudFRleHQxCiAgICAgIFBvcHVwVGV4dC5UZXh0V3JhcHBlZCA9IHRydWUKICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLFBvcHVwVGV4dCkKICAKICAgICAgRXhpdC5OYW1lID0gIkV4aXQiCiAgICAgIEV4aXQuUGFyZW50ID0gc2hhZG93CiAgICAgIEV4aXQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgRXhpdC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtMjAsIDAsIDApCiAgICAgIEV4aXQuU2l6ZSA9IFVEaW0yLm5ldygwLCAyMCwgMCwgMjApCiAgICAgIEV4aXQuVGV4dCA9ICIiCiAgICAgIEV4aXQuWkluZGV4ID0gMTAKICAKICAgICAgRXhpdEltYWdlLlBhcmVudCA9IEV4aXQKICAgICAgRXhpdEltYWdlLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgICAgIEV4aXRJbWFnZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICBFeGl0SW1hZ2UuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgNSkKICAgICAgRXhpdEltYWdlLlNpemUgPSBVRGltMi5uZXcoMCwgMTAsIDAsIDEwKQogICAgICBFeGl0SW1hZ2UuSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzUwNTQ2NjM2NTAiCiAgICAgIEV4aXRJbWFnZS5aSW5kZXggPSAxMAogIAogICAgICBiYWNrZ3JvdW5kLk5hbWUgPSAiYmFja2dyb3VuZCIKICAgICAgYmFja2dyb3VuZC5QYXJlbnQgPSBGUkFNRQogICAgICBiYWNrZ3JvdW5kLkFjdGl2ZSA9IHRydWUKICAgICAgYmFja2dyb3VuZC5CYWNrZ3JvdW5kQ29sb3IzID0gY3VycmVudFNoYWRlMQogICAgICBiYWNrZ3JvdW5kLkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgYmFja2dyb3VuZC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAwLCAxLCAwKQogICAgICBiYWNrZ3JvdW5kLlNpemUgPSBVRGltMi5uZXcoMCwgMjUwLCAwLCAyNTApCiAgICAgIGJhY2tncm91bmQuWkluZGV4ID0gMTAKICAgICAgdGFibGUuaW5zZXJ0KHNoYWRlMSxiYWNrZ3JvdW5kKQogIAogICAgICBUZXh0TGFiZWwuTmFtZSA9ICJUZXh0IExhYmVsIgogICAgICBUZXh0TGFiZWwuUGFyZW50ID0gYmFja2dyb3VuZAogICAgICBUZXh0TGFiZWwuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgVGV4dExhYmVsLkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgVGV4dExhYmVsLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDgwKQogICAgICBUZXh0TGFiZWwuU2l6ZSA9IFVEaW0yLm5ldygwLCAxMDAsIDAsIDIwKQogICAgICBUZXh0TGFiZWwuWkluZGV4ID0gMTAKICAgICAgVGV4dExhYmVsLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2Fuc0xpZ2h0CiAgICAgIFRleHRMYWJlbC5UZXh0U2l6ZSA9IDIwCiAgICAgIFRleHRMYWJlbC5UZXh0ID0gIlJ1biBUaW1lOiIKICAgICAgVGV4dExhYmVsLlRleHRDb2xvcjMgPSBjdXJyZW50VGV4dDEKICAgICAgVGV4dExhYmVsLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICAgIHRhYmxlLmluc2VydCh0ZXh0MSxUZXh0TGFiZWwpCiAgCiAgICAgIFRleHRMYWJlbDIuTmFtZSA9ICJUZXh0IExhYmVsMiIKICAgICAgVGV4dExhYmVsMi5QYXJlbnQgPSBiYWNrZ3JvdW5kCiAgICAgIFRleHRMYWJlbDIuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgVGV4dExhYmVsMi5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgIFRleHRMYWJlbDIuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMTMwKQogICAgICBUZXh0TGFiZWwyLlNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAwLCAyMCkKICAgICAgVGV4dExhYmVsMi5aSW5kZXggPSAxMAogICAgICBUZXh0TGFiZWwyLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2Fuc0xpZ2h0CiAgICAgIFRleHRMYWJlbDIuVGV4dFNpemUgPSAyMAogICAgICBUZXh0TGFiZWwyLlRleHQgPSAiU3RhdGlzdGljczoiCiAgICAgIFRleHRMYWJlbDIuVGV4dENvbG9yMyA9IGN1cnJlbnRUZXh0MQogICAgICBUZXh0TGFiZWwyLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICAgIHRhYmxlLmluc2VydCh0ZXh0MSxUZXh0TGFiZWwyKQogIAogICAgICBUZXh0TGFiZWwzLk5hbWUgPSAiVGV4dCBMYWJlbDMiCiAgICAgIFRleHRMYWJlbDMuUGFyZW50ID0gYmFja2dyb3VuZAogICAgICBUZXh0TGFiZWwzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgIFRleHRMYWJlbDMuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICBUZXh0TGFiZWwzLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDEwKQogICAgICBUZXh0TGFiZWwzLlNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAwLCAyMCkKICAgICAgVGV4dExhYmVsMy5aSW5kZXggPSAxMAogICAgICBUZXh0TGFiZWwzLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2Fuc0xpZ2h0CiAgICAgIFRleHRMYWJlbDMuVGV4dFNpemUgPSAyMAogICAgICBUZXh0TGFiZWwzLlRleHQgPSAiTG9jYWwgUGxheWVyOiIKICAgICAgVGV4dExhYmVsMy5UZXh0Q29sb3IzID0gY3VycmVudFRleHQxCiAgICAgIFRleHRMYWJlbDMuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLFRleHRMYWJlbDMpCiAgCiAgICAgIFRpbWUuTmFtZSA9ICJUaW1lIgogICAgICBUaW1lLlBhcmVudCA9IGJhY2tncm91bmQKICAgICAgVGltZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICBUaW1lLkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgVGltZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCAxMDUpCiAgICAgIFRpbWUuU2l6ZSA9IFVEaW0yLm5ldygwLCAxMDAsIDAsIDIwKQogICAgICBUaW1lLlpJbmRleCA9IDEwCiAgICAgIFRpbWUuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgICAgIFRpbWUuRm9udFNpemUgPSBFbnVtLkZvbnRTaXplLlNpemUxNAogICAgICBUaW1lLlRleHQgPSAiTE9BRElORyIKICAgICAgVGltZS5UZXh0Q29sb3IzID0gY3VycmVudFRleHQxCiAgICAgIFRpbWUuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLFRpbWUpCiAgCiAgICAgIGFwcGVhcmFuY2UuTmFtZSA9ICJhcHBlYXJhbmNlIgogICAgICBhcHBlYXJhbmNlLlBhcmVudCA9IGJhY2tncm91bmQKICAgICAgYXBwZWFyYW5jZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICBhcHBlYXJhbmNlLkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgYXBwZWFyYW5jZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCA1NSkKICAgICAgYXBwZWFyYW5jZS5TaXplID0gVURpbTIubmV3KDAsIDEwMCwgMCwgMjApCiAgICAgIGFwcGVhcmFuY2UuWkluZGV4ID0gMTAKICAgICAgYXBwZWFyYW5jZS5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICAgICAgYXBwZWFyYW5jZS5Gb250U2l6ZSA9IEVudW0uRm9udFNpemUuU2l6ZTE0CiAgICAgIGFwcGVhcmFuY2UuVGV4dCA9ICJBcHBlYXJhbmNlOiBMT0FESU5HIgogICAgICBhcHBlYXJhbmNlLlRleHRDb2xvcjMgPSBjdXJyZW50VGV4dDEKICAgICAgYXBwZWFyYW5jZS5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICB0YWJsZS5pbnNlcnQodGV4dDEsYXBwZWFyYW5jZSkKICAKICAgICAgbWF4cGxheWVycy5OYW1lID0gIm1heHBsYXllcnMiCiAgICAgIG1heHBsYXllcnMuUGFyZW50ID0gYmFja2dyb3VuZAogICAgICBtYXhwbGF5ZXJzLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgIG1heHBsYXllcnMuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICBtYXhwbGF5ZXJzLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDE3NSkKICAgICAgbWF4cGxheWVycy5TaXplID0gVURpbTIubmV3KDAsIDEwMCwgMCwgMjApCiAgICAgIG1heHBsYXllcnMuWkluZGV4ID0gMTAKICAgICAgbWF4cGxheWVycy5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICAgICAgbWF4cGxheWVycy5Gb250U2l6ZSA9IEVudW0uRm9udFNpemUuU2l6ZTE0CiAgICAgIG1heHBsYXllcnMuVGV4dCA9ICJMT0FESU5HIgogICAgICBtYXhwbGF5ZXJzLlRleHRDb2xvcjMgPSBjdXJyZW50VGV4dDEKICAgICAgbWF4cGxheWVycy5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICB0YWJsZS5pbnNlcnQodGV4dDEsbWF4cGxheWVycykKICAKICAgICAgbmFtZS5OYW1lID0gIm5hbWUiCiAgICAgIG5hbWUuUGFyZW50ID0gYmFja2dyb3VuZAogICAgICBuYW1lLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgIG5hbWUuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICBuYW1lLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDUsIDAsIDIxNSkKICAgICAgbmFtZS5TaXplID0gVURpbTIubmV3KDAsIDI0MCwgMCwgMzApCiAgICAgIG5hbWUuWkluZGV4ID0gMTAKICAgICAgbmFtZS5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICAgICAgbmFtZS5Gb250U2l6ZSA9IEVudW0uRm9udFNpemUuU2l6ZTE0CiAgICAgIG5hbWUuVGV4dCA9ICJQbGFjZSBOYW1lOiBMT0FESU5HIgogICAgICBuYW1lLlRleHRDb2xvcjMgPSBjdXJyZW50VGV4dDEKICAgICAgbmFtZS5UZXh0V3JhcHBlZCA9IHRydWUKICAgICAgbmFtZS5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgICBuYW1lLlRleHRZQWxpZ25tZW50ID0gRW51bS5UZXh0WUFsaWdubWVudC5Ub3AKICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLG5hbWUpCiAgCiAgICAgIHBsYWNlaWQuTmFtZSA9ICJwbGFjZWlkIgogICAgICBwbGFjZWlkLlBhcmVudCA9IGJhY2tncm91bmQKICAgICAgcGxhY2VpZC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICBwbGFjZWlkLkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgcGxhY2VpZC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCAxOTUpCiAgICAgIHBsYWNlaWQuU2l6ZSA9IFVEaW0yLm5ldygwLCAxMDAsIDAsIDIwKQogICAgICBwbGFjZWlkLlpJbmRleCA9IDEwCiAgICAgIHBsYWNlaWQuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgICAgIHBsYWNlaWQuRm9udFNpemUgPSBFbnVtLkZvbnRTaXplLlNpemUxNAogICAgICBwbGFjZWlkLlRleHQgPSAiUGxhY2UgSUQ6IExPQURJTkciCiAgICAgIHBsYWNlaWQuVGV4dENvbG9yMyA9IGN1cnJlbnRUZXh0MQogICAgICBwbGFjZWlkLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICAgIHRhYmxlLmluc2VydCh0ZXh0MSxwbGFjZWlkKQogIAogICAgICBwbGF5ZXJpZC5OYW1lID0gInBsYXllcmlkIgogICAgICBwbGF5ZXJpZC5QYXJlbnQgPSBiYWNrZ3JvdW5kCiAgICAgIHBsYXllcmlkLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgIHBsYXllcmlkLkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgcGxheWVyaWQuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMzUpCiAgICAgIHBsYXllcmlkLlNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAwLCAyMCkKICAgICAgcGxheWVyaWQuWkluZGV4ID0gMTAKICAgICAgcGxheWVyaWQuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgICAgIHBsYXllcmlkLkZvbnRTaXplID0gRW51bS5Gb250U2l6ZS5TaXplMTQKICAgICAgcGxheWVyaWQuVGV4dCA9ICJQbGF5ZXIgSUQ6IExPQURJTkciCiAgICAgIHBsYXllcmlkLlRleHRDb2xvcjMgPSBjdXJyZW50VGV4dDEKICAgICAgcGxheWVyaWQuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLHBsYXllcmlkKQogIAogICAgICBwbGF5ZXJzLk5hbWUgPSAicGxheWVycyIKICAgICAgcGxheWVycy5QYXJlbnQgPSBiYWNrZ3JvdW5kCiAgICAgIHBsYXllcnMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgcGxheWVycy5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgIHBsYXllcnMuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgMTU1KQogICAgICBwbGF5ZXJzLlNpemUgPSBVRGltMi5uZXcoMCwgMTAwLCAwLCAyMCkKICAgICAgcGxheWVycy5aSW5kZXggPSAxMAogICAgICBwbGF5ZXJzLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2FucwogICAgICBwbGF5ZXJzLkZvbnRTaXplID0gRW51bS5Gb250U2l6ZS5TaXplMTQKICAgICAgcGxheWVycy5UZXh0ID0gIkxPQURJTkciCiAgICAgIHBsYXllcnMuVGV4dENvbG9yMyA9IGN1cnJlbnRUZXh0MQogICAgICBwbGF5ZXJzLlRleHRYQWxpZ25tZW50ID0gRW51bS5UZXh0WEFsaWdubWVudC5MZWZ0CiAgICAgIHRhYmxlLmluc2VydCh0ZXh0MSxwbGF5ZXJzKQogIAogICAgICBDb3B5QXBwLk5hbWUgPSAiQ29weUFwcCIKICAgICAgQ29weUFwcC5QYXJlbnQgPSBiYWNrZ3JvdW5kCiAgICAgIENvcHlBcHAuQmFja2dyb3VuZENvbG9yMyA9IGN1cnJlbnRTaGFkZTIKICAgICAgQ29weUFwcC5Cb3JkZXJTaXplUGl4ZWwgPSAwCiAgICAgIENvcHlBcHAuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjEwLCAwLCA1NSkKICAgICAgQ29weUFwcC5TaXplID0gVURpbTIubmV3KDAsIDM1LCAwLCAyMCkKICAgICAgQ29weUFwcC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICAgICAgQ29weUFwcC5UZXh0U2l6ZSA9IDE0CiAgICAgIENvcHlBcHAuVGV4dCA9ICJDb3B5IgogICAgICBDb3B5QXBwLlRleHRDb2xvcjMgPSBjdXJyZW50VGV4dDEKICAgICAgQ29weUFwcC5aSW5kZXggPSAxMAogICAgICB0YWJsZS5pbnNlcnQoc2hhZGUyLENvcHlBcHApCiAgICAgIHRhYmxlLmluc2VydCh0ZXh0MSxDb3B5QXBwKQogIAogICAgICBDb3B5UGxySUQuTmFtZSA9ICJDb3B5UGxySUQiCiAgICAgIENvcHlQbHJJRC5QYXJlbnQgPSBiYWNrZ3JvdW5kCiAgICAgIENvcHlQbHJJRC5CYWNrZ3JvdW5kQ29sb3IzID0gY3VycmVudFNoYWRlMgogICAgICBDb3B5UGxySUQuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICBDb3B5UGxySUQuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjEwLCAwLCAzNSkKICAgICAgQ29weVBscklELlNpemUgPSBVRGltMi5uZXcoMCwgMzUsIDAsIDIwKQogICAgICBDb3B5UGxySUQuRm9udCA9IEVudW0uRm9udC5Tb3VyY2VTYW5zCiAgICAgIENvcHlQbHJJRC5UZXh0U2l6ZSA9IDE0CiAgICAgIENvcHlQbHJJRC5UZXh0ID0gIkNvcHkiCiAgICAgIENvcHlQbHJJRC5UZXh0Q29sb3IzID0gY3VycmVudFRleHQxCiAgICAgIENvcHlQbHJJRC5aSW5kZXggPSAxMAogICAgICB0YWJsZS5pbnNlcnQoc2hhZGUyLENvcHlQbHJJRCkKICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLENvcHlQbHJJRCkKICAKICAgICAgQ29weVBsY0lELk5hbWUgPSAiQ29weVBsY0lEIgogICAgICBDb3B5UGxjSUQuUGFyZW50ID0gYmFja2dyb3VuZAogICAgICBDb3B5UGxjSUQuQmFja2dyb3VuZENvbG9yMyA9IGN1cnJlbnRTaGFkZTIKICAgICAgQ29weVBsY0lELkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgQ29weVBsY0lELlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDIxMCwgMCwgMTk1KQogICAgICBDb3B5UGxjSUQuU2l6ZSA9IFVEaW0yLm5ldygwLCAzNSwgMCwgMjApCiAgICAgIENvcHlQbGNJRC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICAgICAgQ29weVBsY0lELlRleHRTaXplID0gMTQKICAgICAgQ29weVBsY0lELlRleHQgPSAiQ29weSIKICAgICAgQ29weVBsY0lELlRleHRDb2xvcjMgPSBjdXJyZW50VGV4dDEKICAgICAgQ29weVBsY0lELlpJbmRleCA9IDEwCiAgICAgIHRhYmxlLmluc2VydChzaGFkZTIsQ29weVBsY0lEKQogICAgICB0YWJsZS5pbnNlcnQodGV4dDEsQ29weVBsY0lEKQogIAogICAgICBDb3B5UGxjTmFtZS5OYW1lID0gIkNvcHlQbGNOYW1lIgogICAgICBDb3B5UGxjTmFtZS5QYXJlbnQgPSBiYWNrZ3JvdW5kCiAgICAgIENvcHlQbGNOYW1lLkJhY2tncm91bmRDb2xvcjMgPSBjdXJyZW50U2hhZGUyCiAgICAgIENvcHlQbGNOYW1lLkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgQ29weVBsY05hbWUuUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgMjEwLCAwLCAyMTUpCiAgICAgIENvcHlQbGNOYW1lLlNpemUgPSBVRGltMi5uZXcoMCwgMzUsIDAsIDIwKQogICAgICBDb3B5UGxjTmFtZS5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICAgICAgQ29weVBsY05hbWUuVGV4dFNpemUgPSAxNAogICAgICBDb3B5UGxjTmFtZS5UZXh0ID0gIkNvcHkiCiAgICAgIENvcHlQbGNOYW1lLlRleHRDb2xvcjMgPSBjdXJyZW50VGV4dDEKICAgICAgQ29weVBsY05hbWUuWkluZGV4ID0gMTAKICAgICAgdGFibGUuaW5zZXJ0KHNoYWRlMixDb3B5UGxjTmFtZSkKICAgICAgdGFibGUuaW5zZXJ0KHRleHQxLENvcHlQbGNOYW1lKQogIAogICAgICBsb2NhbCBTSU5GT0dVSSA9IGJhY2tncm91bmQKICAgICAgRlJBTUU6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMC41LCAtMTMwLCAwLCAxMDApLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkgCiAgICAgIHdhaXQoMC41KQogICAgICBFeGl0Lk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIEZSQU1FOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAuNSwgLTEzMCwgMCwgLTUwMCksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKSAKICAgICAgICB3YWl0KDAuNikKICAgICAgICBGUkFNRTpEZXN0cm95KCkKICAgICAgICBjYW5PcGVuU2VydmVyaW5mbyA9IHRydWUKICAgICAgZW5kKQogICAgICBsb2NhbCBBc3NldCA9IE1hcmtldHBsYWNlU2VydmljZTpHZXRQcm9kdWN0SW5mbyhQbGFjZUlkKQogICAgICBTSU5GT0dVSS5uYW1lLlRleHQgPSAiUGxhY2UgTmFtZTogIiAuLiBBc3NldC5OYW1lCiAgICAgIFNJTkZPR1VJLnBsYXllcmlkLlRleHQgPSAiUGxheWVyIElEOiAiIC4uc3BlYWtlci5Vc2VySWQKICAgICAgU0lORk9HVUkubWF4cGxheWVycy5UZXh0ID0gUGxheWVycy5NYXhQbGF5ZXJzLi4gIiBQbGF5ZXJzIE1heCIKICAgICAgU0lORk9HVUkucGxhY2VpZC5UZXh0ID0gIlBsYWNlIElEOiAiIC4uUGxhY2VJZAogIAogICAgICBDb3B5QXBwLk1vdXNlQnV0dG9uMUNsaWNrOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIHRvQ2xpcGJvYXJkKHNwZWFrZXIuQ2hhcmFjdGVyQXBwZWFyYW5jZUlkKQogICAgICBlbmQpCiAgICAgIENvcHlQbHJJRC5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICB0b0NsaXBib2FyZChzcGVha2VyLlVzZXJJZCkKICAgICAgZW5kKQogICAgICBDb3B5UGxjSUQuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgdG9DbGlwYm9hcmQoUGxhY2VJZCkKICAgICAgZW5kKQogICAgICBDb3B5UGxjTmFtZS5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICB0b0NsaXBib2FyZChBc3NldC5OYW1lKQogICAgICBlbmQpCiAgCiAgICAgIHJlcGVhdAogICAgICAgIHBsYXllcnMgPSBQbGF5ZXJzOkdldFBsYXllcnMoKQogICAgICAgIFNJTkZPR1VJLnBsYXllcnMuVGV4dCA9ICNwbGF5ZXJzLi4gIiBQbGF5ZXIocykiCiAgICAgICAgU0lORk9HVUkuYXBwZWFyYW5jZS5UZXh0ID0gIkFwcGVhcmFuY2U6ICIgLi5zcGVha2VyLkNoYXJhY3RlckFwcGVhcmFuY2VJZAogICAgICAgIGxvY2FsIHNlY29uZHMgPSBtYXRoLmZsb29yKHdvcmtzcGFjZS5EaXN0cmlidXRlZEdhbWVUaW1lKQogICAgICAgIGxvY2FsIG1pbnV0ZXMgPSBtYXRoLmZsb29yKHdvcmtzcGFjZS5EaXN0cmlidXRlZEdhbWVUaW1lIC8gNjApCiAgICAgICAgbG9jYWwgaG91cnMgPSBtYXRoLmZsb29yKHdvcmtzcGFjZS5EaXN0cmlidXRlZEdhbWVUaW1lIC8gNjAgLyA2MCkKICAgICAgICBsb2NhbCBzZWNvbmRzID0gc2Vjb25kcyAtIChtaW51dGVzICogNjApCiAgICAgICAgbG9jYWwgbWludXRlcyA9IG1pbnV0ZXMgLSAoaG91cnMgKiA2MCkKICAgICAgICBpZiBob3VycyA8IDEgdGhlbiBpZiBtaW51dGVzIDwgMSB0aGVuCiAgICAgICAgICAgIFNJTkZPR1VJLlRpbWUuVGV4dCA9IHNlY29uZHMgLi4gIiBTZWNvbmQocykiIGVsc2UKICAgICAgICAgICAgU0lORk9HVUkuVGltZS5UZXh0ID0gbWludXRlcyAuLiAiIE1pbnV0ZShzKSwgIiAuLiBzZWNvbmRzIC4uICIgU2Vjb25kKHMpIgogICAgICAgICAgZW5kCiAgICAgICAgZWxzZQogICAgICAgICAgU0lORk9HVUkuVGltZS5UZXh0ID0gaG91cnMgLi4gIiBIb3VyKHMpLCAiIC4uIG1pbnV0ZXMgLi4gIiBNaW51dGUocyksICIgLi4gc2Vjb25kcyAuLiAiIFNlY29uZChzKSIKICAgICAgICBlbmQKICAgICAgICB3YWl0KDEpCiAgICAgIHVudGlsIFNJTkZPR1VJLlBhcmVudCA9PSBuaWwKICAgIGVuZCkKICBlbmQpCiAgCiAgYWRkY21kKCdqb2JpZCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIGpvYklkID0gJ1JvYmxveC5HYW1lTGF1bmNoZXIuam9pbkdhbWVJbnN0YW5jZSgnLi5QbGFjZUlkLi4nLCAiJy4uSm9iSWQuLiciKScKICAgIHRvQ2xpcGJvYXJkKGpvYklkKQogIGVuZCkKICAKICBhZGRjbWQoJ25vdGlmeWpvYmlkJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbm90aWZ5KCdKb2JJZCAvIFBsYWNlSWQnLEpvYklkLi4nIC8gJy4uUGxhY2VJZCkKICBlbmQpCiAgCiAgYWRkY21kKCdicmVha2xvb3BzJyx7J2JyZWFrJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxhc3RCcmVha1RpbWUgPSB0aWNrKCkKICBlbmQpCiAgCiAgYWRkY21kKCdnYW1ldHAnLHsnZ2FtZXRlbGVwb3J0J30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIFRlbGVwb3J0U2VydmljZTpUZWxlcG9ydChhcmdzWzFdKQogIGVuZCkKICAKICBhZGRjbWQoInJlam9pbiIsIHsicmoifSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmICNQbGF5ZXJzOkdldFBsYXllcnMoKSA8PSAxIHRoZW4KICAgICAgUGxheWVycy5Mb2NhbFBsYXllcjpLaWNrKCJcblJlam9pbmluZy4uLiIpCiAgICAgIHdhaXQoKQogICAgICBUZWxlcG9ydFNlcnZpY2U6VGVsZXBvcnQoUGxhY2VJZCwgUGxheWVycy5Mb2NhbFBsYXllcikKICAgIGVsc2UKICAgICAgVGVsZXBvcnRTZXJ2aWNlOlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlKFBsYWNlSWQsIEpvYklkLCBQbGF5ZXJzLkxvY2FsUGxheWVyKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgiYXV0b3Jlam9pbiIsIHsiYXV0b3JqIn0sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBHdWlTZXJ2aWNlLkVycm9yTWVzc2FnZUNoYW5nZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIGV4ZWNDbWQoInJlam9pbiIpCiAgICBlbmQpCiAgICBub3RpZnkoIkF1dG8gUmVqb2luIiwgIkF1dG8gcmVqb2luIGVuYWJsZWQiKQogIGVuZCkKICAKICBhZGRjbWQoInNlcnZlcmhvcCIsIHsic2hvcCJ9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgICAtLSB0aGFua3MgdG8gTm9vYlNwbG9pdCBmb3IgZml4aW5nCiAgICAgIGlmIGh0dHByZXF1ZXN0IHRoZW4KICAgICAgICAgIGxvY2FsIHNlcnZlcnMgPSB7fQogICAgICAgICAgbG9jYWwgcmVxID0gaHR0cHJlcXVlc3Qoe1VybCA9IHN0cmluZy5mb3JtYXQoImh0dHBzOi8vZ2FtZXMucm9ibG94LmNvbS92MS9nYW1lcy8lZC9zZXJ2ZXJzL1B1YmxpYz9zb3J0T3JkZXI9RGVzYyZsaW1pdD0xMDAmZXhjbHVkZUZ1bGxHYW1lcz10cnVlIiwgUGxhY2VJZCl9KQogICAgICAgICAgbG9jYWwgYm9keSA9IEh0dHBTZXJ2aWNlOkpTT05EZWNvZGUocmVxLkJvZHkpCiAgCiAgICAgICAgICBpZiBib2R5IGFuZCBib2R5LmRhdGEgdGhlbgogICAgICAgICAgICAgIGZvciBpLCB2IGluIG5leHQsIGJvZHkuZGF0YSBkbwogICAgICAgICAgICAgICAgICBpZiB0eXBlKHYpID09ICJ0YWJsZSIgYW5kIHRvbnVtYmVyKHYucGxheWluZykgYW5kIHRvbnVtYmVyKHYubWF4UGxheWVycykgYW5kIHYucGxheWluZyA8IHYubWF4UGxheWVycyBhbmQgdi5pZCB+PSBKb2JJZCB0aGVuCiAgICAgICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoc2VydmVycywgMSwgdi5pZCkKICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmQKICAKICAgICAgICAgIGlmICNzZXJ2ZXJzID4gMCB0aGVuCiAgICAgICAgICAgICAgVGVsZXBvcnRTZXJ2aWNlOlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlKFBsYWNlSWQsIHNlcnZlcnNbbWF0aC5yYW5kb20oMSwgI3NlcnZlcnMpXSwgUGxheWVycy5Mb2NhbFBsYXllcikKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICByZXR1cm4gbm90aWZ5KCJTZXJ2ZXJob3AiLCAiQ291bGRuJ3QgZmluZCBhIHNlcnZlci4iKQogICAgICAgICAgZW5kCiAgICAgIGVsc2UKICAgICAgICAgIG5vdGlmeSgiSW5jb21wYXRpYmxlIEV4cGxvaXQiLCAiWW91ciBleHBsb2l0IGRvZXMgbm90IHN1cHBvcnQgdGhpcyBjb21tYW5kIChtaXNzaW5nIHJlcXVlc3QpIikKICAgICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnam9pbnBsYXllcicseydqb2lucCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCByZXRyaWVzID0gMAogICAgZnVuY3Rpb24gVG9TZXJ2ZXIoVXNlcixQbGFjZSkJCiAgICAgIGlmIGFyZ3NbMl0gPT0gbmlsIHRoZW4gUGxhY2UgPSBQbGFjZUlkIGVuZAogICAgICBpZiBub3QgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgbG9jYWwgRm91bmRVc2VyLCBVc2VySWQgPSBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGlmIHRvbnVtYmVyKFVzZXIpIHRoZW4KICAgICAgICAgICAgICByZXR1cm4gdG9udW1iZXIoVXNlcikKICAgICAgICAgICAgZW5kCiAgCiAgICAgICAgICAgIHJldHVybiBQbGF5ZXJzOkdldFVzZXJJZEZyb21OYW1lQXN5bmMoVXNlcikKICAgICAgICAgIGVuZCkKICAgICAgICAgIGlmIG5vdCBGb3VuZFVzZXIgdGhlbgogICAgICAgICAgICBub3RpZnkoJ0pvaW4gRXJyb3InLCdVc2VybmFtZS9Vc2VySUQgZG9lcyBub3QgZXhpc3QnKQogICAgICAgICAgZWxzZQogICAgICAgICAgICBub3RpZnkoJ0pvaW4gUGxheWVyJywnTG9hZGluZyBzZXJ2ZXJzLiBIb2xkIG9uIGEgc2Vjb25kLicpCiAgICAgICAgICAgIGxvY2FsIFVSTDIgPSAoImh0dHBzOi8vZ2FtZXMucm9ibG94LmNvbS92MS9nYW1lcy8iLi5QbGFjZS4uIi9zZXJ2ZXJzL1B1YmxpYz9zb3J0T3JkZXI9QXNjJmxpbWl0PTEwMCIpCiAgICAgICAgICAgIGxvY2FsIEh0dHAgPSBIdHRwU2VydmljZTpKU09ORGVjb2RlKGdhbWU6SHR0cEdldChVUkwyKSkKICAgICAgICAgICAgbG9jYWwgR1VJRAogIAogICAgICAgICAgICBmdW5jdGlvbiB0YWJsZWxlbmd0aChUKQogICAgICAgICAgICAgIGxvY2FsIGNvdW50ID0gMAogICAgICAgICAgICAgIGZvciBfIGluIHBhaXJzKFQpIGRvIGNvdW50ID0gY291bnQgKyAxIGVuZAogICAgICAgICAgICAgIHJldHVybiBjb3VudAogICAgICAgICAgICBlbmQKICAKICAgICAgICAgICAgZm9yIGk9MSx0b251bWJlcih0YWJsZWxlbmd0aChIdHRwLmRhdGEpKSBkbwogICAgICAgICAgICAgIGZvciBqLGsgaW4gcGFpcnMoSHR0cC5kYXRhW2ldLnBsYXllcklkcykgZG8KICAgICAgICAgICAgICAgIGlmIGsgPT0gVXNlcklkIHRoZW4KICAgICAgICAgICAgICAgICAgR1VJRCA9IEh0dHAuZGF0YVtpXS5pZAogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogIAogICAgICAgICAgICBpZiBHVUlEIH49IG5pbCB0aGVuCiAgICAgICAgICAgICAgbm90aWZ5KCdKb2luIFBsYXllcicsJ0pvaW5pbmcgJy4uVXNlcikKICAgICAgICAgICAgICBUZWxlcG9ydFNlcnZpY2U6VGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UoUGxhY2UsR1VJRCxQbGF5ZXJzLkxvY2FsUGxheWVyKQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgbm90aWZ5KCdKb2luIEVycm9yJywnVW5hYmxlIHRvIGpvaW4gdXNlci4nKQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgICAgdGhlbgogICAgICAgIGlmIHJldHJpZXMgPCAzIHRoZW4KICAgICAgICAgIHJldHJpZXMgPSByZXRyaWVzICsgMQogICAgICAgICAgcHJpbnQoJ0VSUk9SIHJldHJ5aW5nICcuLnJldHJpZXMuLicvMycpCiAgICAgICAgICBub3RpZnkoJ0pvaW4gRXJyb3InLCdFcnJvciB3aGlsZSB0cnlpbmcgdG8gam9pbi4gUmV0cnlpbmcgJy4ucmV0cmllcy4uJy8zLicpCiAgICAgICAgICBUb1NlcnZlcihVc2VyLFBsYWNlKQogICAgICAgIGVsc2UKICAgICAgICAgIG5vdGlmeSgnSm9pbiBFcnJvcicsJ0Vycm9yIHdoaWxlIHRyeWluZyB0byBqb2luLicpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgICBUb1NlcnZlcihhcmdzWzFdLGFyZ3NbMl0pCiAgZW5kKQogIAogIGFkZGNtZCgiZXhpdCIsIHt9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgICBnYW1lOlNodXRkb3duKCkKICBlbmQpCiAgCiAgbG9jYWwgTm9jbGlwcGluZyA9IG5pbAogIGFkZGNtZCgnbm9jbGlwJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgQ2xpcCA9IGZhbHNlCiAgICB3YWl0KDAuMSkKICAgIGxvY2FsIGZ1bmN0aW9uIE5vY2xpcExvb3AoKQogICAgICBpZiBDbGlwID09IGZhbHNlIGFuZCBzcGVha2VyLkNoYXJhY3RlciB+PSBuaWwgdGhlbgogICAgICAgIGZvciBfLCBjaGlsZCBpbiBwYWlycyhzcGVha2VyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgaWYgY2hpbGQ6SXNBKCJCYXNlUGFydCIpIGFuZCBjaGlsZC5DYW5Db2xsaWRlID09IHRydWUgYW5kIGNoaWxkLk5hbWUgfj0gZmxvYXROYW1lIHRoZW4KICAgICAgICAgICAgY2hpbGQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICAgIE5vY2xpcHBpbmcgPSBSdW5TZXJ2aWNlLlN0ZXBwZWQ6Q29ubmVjdChOb2NsaXBMb29wKQogIGVuZCkKICAKICBhZGRjbWQoJ2NsaXAnLHsndW5ub2NsaXAnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgTm9jbGlwcGluZyB0aGVuCiAgICAgIE5vY2xpcHBpbmc6RGlzY29ubmVjdCgpCiAgICBlbmQKICAgIENsaXAgPSB0cnVlCiAgZW5kKQogIAogIGFkZGNtZCgndG9nZ2xlbm9jbGlwJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgQ2xpcCB0aGVuCiAgICAgIGV4ZWNDbWQoJ25vY2xpcCcpCiAgICBlbHNlCiAgICAgIGV4ZWNDbWQoJ2NsaXAnKQogICAgZW5kCiAgZW5kKQogIAogIEZMWUlORyA9IGZhbHNlCiAgUUVmbHkgPSB0cnVlCiAgaXlmbHlzcGVlZCA9IDEKICB2ZWhpY2xlZmx5c3BlZWQgPSAxCiAgZnVuY3Rpb24gc0ZMWSh2Zmx5KQogICAgcmVwZWF0IHdhaXQoKSB1bnRpbCBQbGF5ZXJzLkxvY2FsUGxheWVyIGFuZCBQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlciBhbmQgZ2V0Um9vdChQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcikgYW5kIFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgcmVwZWF0IHdhaXQoKSB1bnRpbCBJWU1vdXNlCiAgICBpZiBmbHlLZXlEb3duIG9yIGZseUtleVVwIHRoZW4gZmx5S2V5RG93bjpEaXNjb25uZWN0KCkgZmx5S2V5VXA6RGlzY29ubmVjdCgpIGVuZAogIAogICAgbG9jYWwgVCA9IGdldFJvb3QoUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIpCiAgICBsb2NhbCBDT05UUk9MID0ge0YgPSAwLCBCID0gMCwgTCA9IDAsIFIgPSAwLCBRID0gMCwgRSA9IDB9CiAgICBsb2NhbCBsQ09OVFJPTCA9IHtGID0gMCwgQiA9IDAsIEwgPSAwLCBSID0gMCwgUSA9IDAsIEUgPSAwfQogICAgbG9jYWwgU1BFRUQgPSAwCiAgCiAgICBsb2NhbCBmdW5jdGlvbiBGTFkoKQogICAgICBGTFlJTkcgPSB0cnVlCiAgICAgIGxvY2FsIEJHID0gSW5zdGFuY2UubmV3KCdCb2R5R3lybycpCiAgICAgIGxvY2FsIEJWID0gSW5zdGFuY2UubmV3KCdCb2R5VmVsb2NpdHknKQogICAgICBCRy5QID0gOWU0CiAgICAgIEJHLlBhcmVudCA9IFQKICAgICAgQlYuUGFyZW50ID0gVAogICAgICBCRy5tYXhUb3JxdWUgPSBWZWN0b3IzLm5ldyg5ZTksIDllOSwgOWU5KQogICAgICBCRy5jZnJhbWUgPSBULkNGcmFtZQogICAgICBCVi52ZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsIDAsIDApCiAgICAgIEJWLm1heEZvcmNlID0gVmVjdG9yMy5uZXcoOWU5LCA5ZTksIDllOSkKICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgcmVwZWF0IHdhaXQoKQogICAgICAgICAgaWYgbm90IHZmbHkgYW5kIFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKSB0aGVuCiAgICAgICAgICAgIFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5QbGF0Zm9ybVN0YW5kID0gdHJ1ZQogICAgICAgICAgZW5kCiAgICAgICAgICBpZiBDT05UUk9MLkwgKyBDT05UUk9MLlIgfj0gMCBvciBDT05UUk9MLkYgKyBDT05UUk9MLkIgfj0gMCBvciBDT05UUk9MLlEgKyBDT05UUk9MLkUgfj0gMCB0aGVuCiAgICAgICAgICAgIFNQRUVEID0gNTAKICAgICAgICAgIGVsc2VpZiBub3QgKENPTlRST0wuTCArIENPTlRST0wuUiB+PSAwIG9yIENPTlRST0wuRiArIENPTlRST0wuQiB+PSAwIG9yIENPTlRST0wuUSArIENPTlRST0wuRSB+PSAwKSBhbmQgU1BFRUQgfj0gMCB0aGVuCiAgICAgICAgICAgIFNQRUVEID0gMAogICAgICAgICAgZW5kCiAgICAgICAgICBpZiAoQ09OVFJPTC5MICsgQ09OVFJPTC5SKSB+PSAwIG9yIChDT05UUk9MLkYgKyBDT05UUk9MLkIpIH49IDAgb3IgKENPTlRST0wuUSArIENPTlRST0wuRSkgfj0gMCB0aGVuCiAgICAgICAgICAgIEJWLnZlbG9jaXR5ID0gKCh3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5Db29yZGluYXRlRnJhbWUubG9va1ZlY3RvciAqIChDT05UUk9MLkYgKyBDT05UUk9MLkIpKSArICgod29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ29vcmRpbmF0ZUZyYW1lICogQ0ZyYW1lLm5ldyhDT05UUk9MLkwgKyBDT05UUk9MLlIsIChDT05UUk9MLkYgKyBDT05UUk9MLkIgKyBDT05UUk9MLlEgKyBDT05UUk9MLkUpICogMC4yLCAwKS5wKSAtIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNvb3JkaW5hdGVGcmFtZS5wKSkgKiBTUEVFRAogICAgICAgICAgICBsQ09OVFJPTCA9IHtGID0gQ09OVFJPTC5GLCBCID0gQ09OVFJPTC5CLCBMID0gQ09OVFJPTC5MLCBSID0gQ09OVFJPTC5SfQogICAgICAgICAgZWxzZWlmIChDT05UUk9MLkwgKyBDT05UUk9MLlIpID09IDAgYW5kIChDT05UUk9MLkYgKyBDT05UUk9MLkIpID09IDAgYW5kIChDT05UUk9MLlEgKyBDT05UUk9MLkUpID09IDAgYW5kIFNQRUVEIH49IDAgdGhlbgogICAgICAgICAgICBCVi52ZWxvY2l0eSA9ICgod29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ29vcmRpbmF0ZUZyYW1lLmxvb2tWZWN0b3IgKiAobENPTlRST0wuRiArIGxDT05UUk9MLkIpKSArICgod29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ29vcmRpbmF0ZUZyYW1lICogQ0ZyYW1lLm5ldyhsQ09OVFJPTC5MICsgbENPTlRST0wuUiwgKGxDT05UUk9MLkYgKyBsQ09OVFJPTC5CICsgQ09OVFJPTC5RICsgQ09OVFJPTC5FKSAqIDAuMiwgMCkucCkgLSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5Db29yZGluYXRlRnJhbWUucCkpICogU1BFRUQKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgQlYudmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLCAwLCAwKQogICAgICAgICAgZW5kCiAgICAgICAgICBCRy5jZnJhbWUgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5Db29yZGluYXRlRnJhbWUKICAgICAgICB1bnRpbCBub3QgRkxZSU5HCiAgICAgICAgQ09OVFJPTCA9IHtGID0gMCwgQiA9IDAsIEwgPSAwLCBSID0gMCwgUSA9IDAsIEUgPSAwfQogICAgICAgIGxDT05UUk9MID0ge0YgPSAwLCBCID0gMCwgTCA9IDAsIFIgPSAwLCBRID0gMCwgRSA9IDB9CiAgICAgICAgU1BFRUQgPSAwCiAgICAgICAgQkc6RGVzdHJveSgpCiAgICAgICAgQlY6RGVzdHJveSgpCiAgICAgICAgaWYgUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpIHRoZW4KICAgICAgICAgIFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5QbGF0Zm9ybVN0YW5kID0gZmFsc2UKICAgICAgICBlbmQKICAgICAgZW5kKQogICAgZW5kCiAgICBmbHlLZXlEb3duID0gSVlNb3VzZS5LZXlEb3duOkNvbm5lY3QoZnVuY3Rpb24oS0VZKQogICAgICBpZiBLRVk6bG93ZXIoKSA9PSAndycgdGhlbgogICAgICAgIENPTlRST0wuRiA9ICh2Zmx5IGFuZCB2ZWhpY2xlZmx5c3BlZWQgb3IgaXlmbHlzcGVlZCkKICAgICAgZWxzZWlmIEtFWTpsb3dlcigpID09ICdzJyB0aGVuCiAgICAgICAgQ09OVFJPTC5CID0gLSAodmZseSBhbmQgdmVoaWNsZWZseXNwZWVkIG9yIGl5Zmx5c3BlZWQpCiAgICAgIGVsc2VpZiBLRVk6bG93ZXIoKSA9PSAnYScgdGhlbgogICAgICAgIENPTlRST0wuTCA9IC0gKHZmbHkgYW5kIHZlaGljbGVmbHlzcGVlZCBvciBpeWZseXNwZWVkKQogICAgICBlbHNlaWYgS0VZOmxvd2VyKCkgPT0gJ2QnIHRoZW4gCiAgICAgICAgQ09OVFJPTC5SID0gKHZmbHkgYW5kIHZlaGljbGVmbHlzcGVlZCBvciBpeWZseXNwZWVkKQogICAgICBlbHNlaWYgUUVmbHkgYW5kIEtFWTpsb3dlcigpID09ICdlJyB0aGVuCiAgICAgICAgQ09OVFJPTC5RID0gKHZmbHkgYW5kIHZlaGljbGVmbHlzcGVlZCBvciBpeWZseXNwZWVkKSoyCiAgICAgIGVsc2VpZiBRRWZseSBhbmQgS0VZOmxvd2VyKCkgPT0gJ3EnIHRoZW4KICAgICAgICBDT05UUk9MLkUgPSAtKHZmbHkgYW5kIHZlaGljbGVmbHlzcGVlZCBvciBpeWZseXNwZWVkKSoyCiAgICAgIGVuZAogICAgICBwY2FsbChmdW5jdGlvbigpIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNhbWVyYVR5cGUgPSBFbnVtLkNhbWVyYVR5cGUuVHJhY2sgZW5kKQogICAgZW5kKQogICAgZmx5S2V5VXAgPSBJWU1vdXNlLktleVVwOkNvbm5lY3QoZnVuY3Rpb24oS0VZKQogICAgICBpZiBLRVk6bG93ZXIoKSA9PSAndycgdGhlbgogICAgICAgIENPTlRST0wuRiA9IDAKICAgICAgZWxzZWlmIEtFWTpsb3dlcigpID09ICdzJyB0aGVuCiAgICAgICAgQ09OVFJPTC5CID0gMAogICAgICBlbHNlaWYgS0VZOmxvd2VyKCkgPT0gJ2EnIHRoZW4KICAgICAgICBDT05UUk9MLkwgPSAwCiAgICAgIGVsc2VpZiBLRVk6bG93ZXIoKSA9PSAnZCcgdGhlbgogICAgICAgIENPTlRST0wuUiA9IDAKICAgICAgZWxzZWlmIEtFWTpsb3dlcigpID09ICdlJyB0aGVuCiAgICAgICAgQ09OVFJPTC5RID0gMAogICAgICBlbHNlaWYgS0VZOmxvd2VyKCkgPT0gJ3EnIHRoZW4KICAgICAgICBDT05UUk9MLkUgPSAwCiAgICAgIGVuZAogICAgZW5kKQogICAgRkxZKCkKICBlbmQKICAKICBmdW5jdGlvbiBOT0ZMWSgpCiAgICBGTFlJTkcgPSBmYWxzZQogICAgaWYgZmx5S2V5RG93biBvciBmbHlLZXlVcCB0aGVuIGZseUtleURvd246RGlzY29ubmVjdCgpIGZseUtleVVwOkRpc2Nvbm5lY3QoKSBlbmQKICAgIGlmIFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKSB0aGVuCiAgICAgIFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5QbGF0Zm9ybVN0YW5kID0gZmFsc2UKICAgIGVuZAogICAgcGNhbGwoZnVuY3Rpb24oKSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DYW1lcmFUeXBlID0gRW51bS5DYW1lcmFUeXBlLkN1c3RvbSBlbmQpCiAgZW5kCiAgCiAgbG9jYWwgdmVsb2NpdHlIYW5kbGVyTmFtZSA9IHJhbmRvbVN0cmluZygpCiAgbG9jYWwgZ3lyb0hhbmRsZXJOYW1lID0gcmFuZG9tU3RyaW5nKCkKICBsb2NhbCBtZmx5MQogIGxvY2FsIG1mbHkyCiAgCiAgbG9jYWwgdW5tb2JpbGVmbHkgPSBmdW5jdGlvbihzcGVha2VyKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICBGTFlJTkcgPSBmYWxzZQogICAgICBsb2NhbCByb290ID0gZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikKICAgICAgcm9vdDpGaW5kRmlyc3RDaGlsZCh2ZWxvY2l0eUhhbmRsZXJOYW1lKTpEZXN0cm95KCkKICAgICAgcm9vdDpGaW5kRmlyc3RDaGlsZChneXJvSGFuZGxlck5hbWUpOkRlc3Ryb3koKQogICAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJIdW1hbm9pZCIpLlBsYXRmb3JtU3RhbmQgPSBmYWxzZQogICAgICBtZmx5MTpEaXNjb25uZWN0KCkKICAgICAgbWZseTI6RGlzY29ubmVjdCgpCiAgICBlbmQpCiAgZW5kCiAgCiAgbG9jYWwgbW9iaWxlZmx5ID0gZnVuY3Rpb24oc3BlYWtlciwgdmZseSkKICAgIHVubW9iaWxlZmx5KHNwZWFrZXIpCiAgICBGTFlJTkcgPSB0cnVlCiAgCiAgICBsb2NhbCByb290ID0gZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikKICAgIGxvY2FsIGNhbWVyYSA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhCiAgICBsb2NhbCB2M25vbmUgPSBWZWN0b3IzLm5ldygpCiAgICBsb2NhbCB2M3plcm8gPSBWZWN0b3IzLm5ldygwLCAwLCAwKQogICAgbG9jYWwgdjNpbmYgPSBWZWN0b3IzLm5ldyg5ZTksIDllOSwgOWU5KQogIAogICAgbG9jYWwgY29udHJvbE1vZHVsZSA9IHJlcXVpcmUoc3BlYWtlci5QbGF5ZXJTY3JpcHRzOldhaXRGb3JDaGlsZCgiUGxheWVyTW9kdWxlIik6V2FpdEZvckNoaWxkKCJDb250cm9sTW9kdWxlIikpCiAgICBsb2NhbCBidiA9IEluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5IikKICAgIGJ2Lk5hbWUgPSB2ZWxvY2l0eUhhbmRsZXJOYW1lCiAgICBidi5QYXJlbnQgPSByb290CiAgICBidi5NYXhGb3JjZSA9IHYzemVybwogICAgYnYuVmVsb2NpdHkgPSB2M3plcm8KICAKICAgIGxvY2FsIGJnID0gSW5zdGFuY2UubmV3KCJCb2R5R3lybyIpCiAgICBiZy5OYW1lID0gZ3lyb0hhbmRsZXJOYW1lCiAgICBiZy5QYXJlbnQgPSByb290CiAgICBiZy5NYXhUb3JxdWUgPSB2M2luZgogICAgYmcuUCA9IDEwMDAKICAgIGJnLkQgPSA1MAogIAogICAgbWZseTEgPSBzcGVha2VyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBsb2NhbCBidiA9IEluc3RhbmNlLm5ldygiQm9keVZlbG9jaXR5IikKICAgICAgYnYuTmFtZSA9IHZlbG9jaXR5SGFuZGxlck5hbWUKICAgICAgYnYuUGFyZW50ID0gcm9vdAogICAgICBidi5NYXhGb3JjZSA9IHYzemVybwogICAgICBidi5WZWxvY2l0eSA9IHYzemVybwogIAogICAgICBsb2NhbCBiZyA9IEluc3RhbmNlLm5ldygiQm9keUd5cm8iKQogICAgICBiZy5OYW1lID0gZ3lyb0hhbmRsZXJOYW1lCiAgICAgIGJnLlBhcmVudCA9IHJvb3QKICAgICAgYmcuTWF4VG9ycXVlID0gdjNpbmYKICAgICAgYmcuUCA9IDEwMDAKICAgICAgYmcuRCA9IDUwCiAgICBlbmQpCiAgCiAgICBtZmx5MiA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgcm9vdCA9IGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpCiAgICAgIGNhbWVyYSA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhCiAgICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIkh1bWFub2lkIikgYW5kIHJvb3QgYW5kIHJvb3Q6RmluZEZpcnN0Q2hpbGQodmVsb2NpdHlIYW5kbGVyTmFtZSkgYW5kIHJvb3Q6RmluZEZpcnN0Q2hpbGQoZ3lyb0hhbmRsZXJOYW1lKSB0aGVuCiAgICAgICAgbG9jYWwgaHVtYW5vaWQgPSBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJIdW1hbm9pZCIpCiAgICAgICAgbG9jYWwgVmVsb2NpdHlIYW5kbGVyID0gcm9vdDpGaW5kRmlyc3RDaGlsZCh2ZWxvY2l0eUhhbmRsZXJOYW1lKQogICAgICAgIGxvY2FsIEd5cm9IYW5kbGVyID0gcm9vdDpGaW5kRmlyc3RDaGlsZChneXJvSGFuZGxlck5hbWUpCiAgCiAgICAgICAgVmVsb2NpdHlIYW5kbGVyLk1heEZvcmNlID0gdjNpbmYKICAgICAgICBHeXJvSGFuZGxlci5NYXhUb3JxdWUgPSB2M2luZgogICAgICAgIGlmIG5vdCB2Zmx5IHRoZW4gaHVtYW5vaWQuUGxhdGZvcm1TdGFuZCA9IHRydWUgZW5kCiAgICAgICAgR3lyb0hhbmRsZXIuQ0ZyYW1lID0gY2FtZXJhLkNvb3JkaW5hdGVGcmFtZQogICAgICAgIFZlbG9jaXR5SGFuZGxlci5WZWxvY2l0eSA9IHYzbm9uZQogIAogICAgICAgIGxvY2FsIGRpcmVjdGlvbiA9IGNvbnRyb2xNb2R1bGU6R2V0TW92ZVZlY3RvcigpCiAgICAgICAgaWYgZGlyZWN0aW9uLlggPiAwIHRoZW4KICAgICAgICAgIFZlbG9jaXR5SGFuZGxlci5WZWxvY2l0eSA9IFZlbG9jaXR5SGFuZGxlci5WZWxvY2l0eSArIGNhbWVyYS5DRnJhbWUuUmlnaHRWZWN0b3IgKiAoZGlyZWN0aW9uLlggKiAoKHZmbHkgYW5kIHZlaGljbGVmbHlzcGVlZCBvciBpeWZseXNwZWVkKSAqIDUwKSkKICAgICAgICBlbmQKICAgICAgICBpZiBkaXJlY3Rpb24uWCA8IDAgdGhlbgogICAgICAgICAgVmVsb2NpdHlIYW5kbGVyLlZlbG9jaXR5ID0gVmVsb2NpdHlIYW5kbGVyLlZlbG9jaXR5ICsgY2FtZXJhLkNGcmFtZS5SaWdodFZlY3RvciAqIChkaXJlY3Rpb24uWCAqICgodmZseSBhbmQgdmVoaWNsZWZseXNwZWVkIG9yIGl5Zmx5c3BlZWQpICogNTApKQogICAgICAgIGVuZAogICAgICAgIGlmIGRpcmVjdGlvbi5aID4gMCB0aGVuCiAgICAgICAgICBWZWxvY2l0eUhhbmRsZXIuVmVsb2NpdHkgPSBWZWxvY2l0eUhhbmRsZXIuVmVsb2NpdHkgLSBjYW1lcmEuQ0ZyYW1lLkxvb2tWZWN0b3IgKiAoZGlyZWN0aW9uLlogKiAoKHZmbHkgYW5kIHZlaGljbGVmbHlzcGVlZCBvciBpeWZseXNwZWVkKSAqIDUwKSkKICAgICAgICBlbmQKICAgICAgICBpZiBkaXJlY3Rpb24uWiA8IDAgdGhlbgogICAgICAgICAgVmVsb2NpdHlIYW5kbGVyLlZlbG9jaXR5ID0gVmVsb2NpdHlIYW5kbGVyLlZlbG9jaXR5IC0gY2FtZXJhLkNGcmFtZS5Mb29rVmVjdG9yICogKGRpcmVjdGlvbi5aICogKCh2Zmx5IGFuZCB2ZWhpY2xlZmx5c3BlZWQgb3IgaXlmbHlzcGVlZCkgKiA1MCkpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kKQogIGVuZAogIAogIGFkZGNtZCgnZmx5Jyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgbm90IElzT25Nb2JpbGUgdGhlbgogICAgICBOT0ZMWSgpCiAgICAgIHdhaXQoKQogICAgICBzRkxZKCkKICAgIGVsc2UKICAgICAgbW9iaWxlZmx5KHNwZWFrZXIpCiAgICBlbmQKICAgIGlmIGFyZ3NbMV0gYW5kIGlzTnVtYmVyKGFyZ3NbMV0pIHRoZW4KICAgICAgaXlmbHlzcGVlZCA9IGFyZ3NbMV0KICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2ZseXNwZWVkJyx7J2ZseXNwJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHNwZWVkID0gYXJnc1sxXSBvciAxCiAgICBpZiBpc051bWJlcihzcGVlZCkgdGhlbgogICAgICBpeWZseXNwZWVkID0gc3BlZWQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3VuZmx5Jyx7J25vZmx5Jywnbm92Zmx5JywndW52ZWhpY2xlZmx5Jywnbm92ZWhpY2xlZmx5JywndW52Zmx5J30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIG5vdCBJc09uTW9iaWxlIHRoZW4gTk9GTFkoKSBlbHNlIHVubW9iaWxlZmx5KHNwZWFrZXIpIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3ZmbHknLHsndmVoaWNsZWZseSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBub3QgSXNPbk1vYmlsZSB0aGVuCiAgICAgIE5PRkxZKCkKICAgICAgd2FpdCgpCiAgICAgIHNGTFkodHJ1ZSkKICAgIGVsc2UKICAgICAgbW9iaWxlZmx5KHNwZWFrZXIsIHRydWUpCiAgICBlbmQKICAgIGlmIGFyZ3NbMV0gYW5kIGlzTnVtYmVyKGFyZ3NbMV0pIHRoZW4KICAgICAgdmVoaWNsZWZseXNwZWVkID0gYXJnc1sxXQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndG9nZ2xldmZseScse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIEZMWUlORyB0aGVuCiAgICAgIGlmIG5vdCBJc09uTW9iaWxlIHRoZW4gTk9GTFkoKSBlbHNlIHVubW9iaWxlZmx5KHNwZWFrZXIpIGVuZAogICAgZWxzZQogICAgICBpZiBub3QgSXNPbk1vYmlsZSB0aGVuIHNGTFkodHJ1ZSkgZWxzZSBtb2JpbGVmbHkoc3BlYWtlciwgdHJ1ZSkgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd2Zmx5c3BlZWQnLHsndmZseXNwJywndmVoaWNsZWZseXNwZWVkJywndmVoaWNsZWZseXNwJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHNwZWVkID0gYXJnc1sxXSBvciAxCiAgICBpZiBpc051bWJlcihzcGVlZCkgdGhlbgogICAgICB2ZWhpY2xlZmx5c3BlZWQgPSBzcGVlZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgncWVmbHknLHsnZmx5cWUnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgYXJnc1sxXSA9PSAnZmFsc2UnIHRoZW4KICAgICAgUUVmbHkgPSBmYWxzZQogICAgZWxzZQogICAgICBRRWZseSA9IHRydWUKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3RvZ2dsZWZseScse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIEZMWUlORyB0aGVuCiAgICAgIGlmIG5vdCBJc09uTW9iaWxlIHRoZW4gTk9GTFkoKSBlbHNlIHVubW9iaWxlZmx5KHNwZWFrZXIpIGVuZAogICAgZWxzZQogICAgICBpZiBub3QgSXNPbk1vYmlsZSB0aGVuIHNGTFkoKSBlbHNlIG1vYmlsZWZseShzcGVha2VyKSBlbmQKICAgIGVuZAogIGVuZCkKICAKICBDRnNwZWVkID0gNTAKICBhZGRjbWQoJ2NmcmFtZWZseScsIHsnY2ZseSd9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgLS0gRnVsbCBjcmVkaXQgdG8gcGV5dG9uIzkxNDggKGFwZXl0b24pCiAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuUGxhdGZvcm1TdGFuZCA9IHRydWUKICAgIGxvY2FsIEhlYWQgPSBzcGVha2VyLkNoYXJhY3RlcjpXYWl0Rm9yQ2hpbGQoIkhlYWQiKQogICAgSGVhZC5BbmNob3JlZCA9IHRydWUKICAgIGlmIENGbG9vcCB0aGVuIENGbG9vcDpEaXNjb25uZWN0KCkgZW5kCiAgICBDRmxvb3AgPSBSdW5TZXJ2aWNlLkhlYXJ0YmVhdDpDb25uZWN0KGZ1bmN0aW9uKGRlbHRhVGltZSkKICAgICAgbG9jYWwgbW92ZURpcmVjdGlvbiA9IHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5Nb3ZlRGlyZWN0aW9uICogKENGc3BlZWQgKiBkZWx0YVRpbWUpCiAgICAgIGxvY2FsIGhlYWRDRnJhbWUgPSBIZWFkLkNGcmFtZQogICAgICBsb2NhbCBjYW1lcmFDRnJhbWUgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUKICAgICAgbG9jYWwgY2FtZXJhT2Zmc2V0ID0gaGVhZENGcmFtZTpUb09iamVjdFNwYWNlKGNhbWVyYUNGcmFtZSkuUG9zaXRpb24KICAgICAgY2FtZXJhQ0ZyYW1lID0gY2FtZXJhQ0ZyYW1lICogQ0ZyYW1lLm5ldygtY2FtZXJhT2Zmc2V0LlgsIC1jYW1lcmFPZmZzZXQuWSwgLWNhbWVyYU9mZnNldC5aICsgMSkKICAgICAgbG9jYWwgY2FtZXJhUG9zaXRpb24gPSBjYW1lcmFDRnJhbWUuUG9zaXRpb24KICAgICAgbG9jYWwgaGVhZFBvc2l0aW9uID0gaGVhZENGcmFtZS5Qb3NpdGlvbgogIAogICAgICBsb2NhbCBvYmplY3RTcGFjZVZlbG9jaXR5ID0gQ0ZyYW1lLm5ldyhjYW1lcmFQb3NpdGlvbiwgVmVjdG9yMy5uZXcoaGVhZFBvc2l0aW9uLlgsIGNhbWVyYVBvc2l0aW9uLlksIGhlYWRQb3NpdGlvbi5aKSk6VmVjdG9yVG9PYmplY3RTcGFjZShtb3ZlRGlyZWN0aW9uKQogICAgICBIZWFkLkNGcmFtZSA9IENGcmFtZS5uZXcoaGVhZFBvc2l0aW9uKSAqIChjYW1lcmFDRnJhbWUgLSBjYW1lcmFQb3NpdGlvbikgKiBDRnJhbWUubmV3KG9iamVjdFNwYWNlVmVsb2NpdHkpCiAgICBlbmQpCiAgZW5kKQogIAogIGFkZGNtZCgndW5jZnJhbWVmbHknLHsndW5jZmx5J30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIENGbG9vcCB0aGVuCiAgICAgIENGbG9vcDpEaXNjb25uZWN0KCkKICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlBsYXRmb3JtU3RhbmQgPSBmYWxzZQogICAgICBsb2NhbCBIZWFkID0gc3BlYWtlci5DaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIZWFkIikKICAgICAgSGVhZC5BbmNob3JlZCA9IGZhbHNlCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdjZnJhbWVmbHlzcGVlZCcseydjZmx5c3BlZWQnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgaXNOdW1iZXIoYXJnc1sxXSkgdGhlbgogICAgICBDRnNwZWVkID0gYXJnc1sxXQogICAgZW5kCiAgZW5kKQogIAogIEZsb2F0aW5nID0gZmFsc2UKICBmbG9hdE5hbWUgPSByYW5kb21TdHJpbmcoKQogIGFkZGNtZCgnZmxvYXQnLCB7J3BsYXRmb3JtJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIEZsb2F0aW5nID0gdHJ1ZQogICAgbG9jYWwgcGNoYXIgPSBzcGVha2VyLkNoYXJhY3RlcgogICAgaWYgcGNoYXIgYW5kIG5vdCBwY2hhcjpGaW5kRmlyc3RDaGlsZChmbG9hdE5hbWUpIHRoZW4KICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgRmxvYXQgPSBJbnN0YW5jZS5uZXcoJ1BhcnQnKQogICAgICAgIEZsb2F0Lk5hbWUgPSBmbG9hdE5hbWUKICAgICAgICBGbG9hdC5QYXJlbnQgPSBwY2hhcgogICAgICAgIEZsb2F0LlRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBGbG9hdC5TaXplID0gVmVjdG9yMy5uZXcoMiwwLjIsMS41KQogICAgICAgIEZsb2F0LkFuY2hvcmVkID0gdHJ1ZQogICAgICAgIGxvY2FsIEZsb2F0VmFsdWUgPSAtMy4xCiAgICAgICAgRmxvYXQuQ0ZyYW1lID0gZ2V0Um9vdChwY2hhcikuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLEZsb2F0VmFsdWUsMCkKICAgICAgICBub3RpZnkoJ0Zsb2F0JywnRmxvYXQgRW5hYmxlZCAoUSA9IGRvd24gJiBFID0gdXApJykKICAgICAgICBxVXAgPSBJWU1vdXNlLktleVVwOkNvbm5lY3QoZnVuY3Rpb24oS0VZKQogICAgICAgICAgaWYgS0VZID09ICdxJyB0aGVuCiAgICAgICAgICAgIEZsb2F0VmFsdWUgPSBGbG9hdFZhbHVlICsgMC41CiAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICAgICAgZVVwID0gSVlNb3VzZS5LZXlVcDpDb25uZWN0KGZ1bmN0aW9uKEtFWSkKICAgICAgICAgIGlmIEtFWSA9PSAnZScgdGhlbgogICAgICAgICAgICBGbG9hdFZhbHVlID0gRmxvYXRWYWx1ZSAtIDAuNQogICAgICAgICAgZW5kCiAgICAgICAgZW5kKQogICAgICAgIHFEb3duID0gSVlNb3VzZS5LZXlEb3duOkNvbm5lY3QoZnVuY3Rpb24oS0VZKQogICAgICAgICAgaWYgS0VZID09ICdxJyB0aGVuCiAgICAgICAgICAgIEZsb2F0VmFsdWUgPSBGbG9hdFZhbHVlIC0gMC41CiAgICAgICAgICBlbmQKICAgICAgICBlbmQpCiAgICAgICAgZURvd24gPSBJWU1vdXNlLktleURvd246Q29ubmVjdChmdW5jdGlvbihLRVkpCiAgICAgICAgICBpZiBLRVkgPT0gJ2UnIHRoZW4KICAgICAgICAgICAgRmxvYXRWYWx1ZSA9IEZsb2F0VmFsdWUgKyAwLjUKICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgICAgICBmbG9hdERpZWQgPSBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuRGllZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICAgIEZsb2F0aW5nRnVuYzpEaXNjb25uZWN0KCkKICAgICAgICAgIEZsb2F0OkRlc3Ryb3koKQogICAgICAgICAgcVVwOkRpc2Nvbm5lY3QoKQogICAgICAgICAgZVVwOkRpc2Nvbm5lY3QoKQogICAgICAgICAgcURvd246RGlzY29ubmVjdCgpCiAgICAgICAgICBlRG93bjpEaXNjb25uZWN0KCkKICAgICAgICAgIGZsb2F0RGllZDpEaXNjb25uZWN0KCkKICAgICAgICBlbmQpCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gRmxvYXRQYWRMb29wKCkKICAgICAgICAgIGlmIHBjaGFyOkZpbmRGaXJzdENoaWxkKGZsb2F0TmFtZSkgYW5kIGdldFJvb3QocGNoYXIpIHRoZW4KICAgICAgICAgICAgRmxvYXQuQ0ZyYW1lID0gZ2V0Um9vdChwY2hhcikuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLEZsb2F0VmFsdWUsMCkKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgRmxvYXRpbmdGdW5jOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICBGbG9hdDpEZXN0cm95KCkKICAgICAgICAgICAgcVVwOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICBlVXA6RGlzY29ubmVjdCgpCiAgICAgICAgICAgIHFEb3duOkRpc2Nvbm5lY3QoKQogICAgICAgICAgICBlRG93bjpEaXNjb25uZWN0KCkKICAgICAgICAgICAgZmxvYXREaWVkOkRpc2Nvbm5lY3QoKQogICAgICAgICAgZW5kCiAgICAgICAgZW5kCQkJCiAgICAgICAgRmxvYXRpbmdGdW5jID0gUnVuU2VydmljZS5IZWFydGJlYXQ6Q29ubmVjdChGbG9hdFBhZExvb3ApCiAgICAgIGVuZCkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3VuZmxvYXQnLHsnbm9mbG9hdCcsJ3VucGxhdGZvcm0nLCdub3BsYXRmb3JtJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIEZsb2F0aW5nID0gZmFsc2UKICAgIGxvY2FsIHBjaGFyID0gc3BlYWtlci5DaGFyYWN0ZXIKICAgIG5vdGlmeSgnRmxvYXQnLCdGbG9hdCBEaXNhYmxlZCcpCiAgICBpZiBwY2hhcjpGaW5kRmlyc3RDaGlsZChmbG9hdE5hbWUpIHRoZW4KICAgICAgcGNoYXI6RmluZEZpcnN0Q2hpbGQoZmxvYXROYW1lKTpEZXN0cm95KCkKICAgIGVuZAogICAgaWYgZmxvYXREaWVkIHRoZW4KICAgICAgRmxvYXRpbmdGdW5jOkRpc2Nvbm5lY3QoKQogICAgICBxVXA6RGlzY29ubmVjdCgpCiAgICAgIGVVcDpEaXNjb25uZWN0KCkKICAgICAgcURvd246RGlzY29ubmVjdCgpCiAgICAgIGVEb3duOkRpc2Nvbm5lY3QoKQogICAgICBmbG9hdERpZWQ6RGlzY29ubmVjdCgpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd0b2dnbGVmbG9hdCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIEZsb2F0aW5nIHRoZW4KICAgICAgZXhlY0NtZCgndW5mbG9hdCcpCiAgICBlbHNlCiAgICAgIGV4ZWNDbWQoJ2Zsb2F0JykKICAgIGVuZAogIGVuZCkKICAKICBzd2ltbWluZyA9IGZhbHNlCiAgbG9jYWwgb2xkZ3JhdiA9IHdvcmtzcGFjZS5HcmF2aXR5CiAgbG9jYWwgc3dpbWJlYXQgPSBuaWwKICBhZGRjbWQoJ3N3aW0nLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBub3Qgc3dpbW1pbmcgYW5kIHNwZWFrZXIgYW5kIHNwZWFrZXIuQ2hhcmFjdGVyIGFuZCBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJIdW1hbm9pZCIpIHRoZW4KICAgICAgb2xkZ3JhdiA9IHdvcmtzcGFjZS5HcmF2aXR5CiAgICAgIHdvcmtzcGFjZS5HcmF2aXR5ID0gMAogICAgICBsb2NhbCBzd2ltRGllZCA9IGZ1bmN0aW9uKCkKICAgICAgICB3b3Jrc3BhY2UuR3Jhdml0eSA9IG9sZGdyYXYKICAgICAgICBzd2ltbWluZyA9IGZhbHNlCiAgICAgIGVuZAogICAgICBsb2NhbCBIdW1hbm9pZCA9IHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIkh1bWFub2lkIikKICAgICAgZ3JhdlJlc2V0ID0gSHVtYW5vaWQuRGllZDpDb25uZWN0KHN3aW1EaWVkKQogICAgICBsb2NhbCBlbnVtcyA9IEVudW0uSHVtYW5vaWRTdGF0ZVR5cGU6R2V0RW51bUl0ZW1zKCkKICAgICAgdGFibGUucmVtb3ZlKGVudW1zLCB0YWJsZS5maW5kKGVudW1zLCBFbnVtLkh1bWFub2lkU3RhdGVUeXBlLk5vbmUpKQogICAgICBmb3IgaSwgdiBpbiBwYWlycyhlbnVtcykgZG8KICAgICAgICBIdW1hbm9pZDpTZXRTdGF0ZUVuYWJsZWQodiwgZmFsc2UpCiAgICAgIGVuZAogICAgICBIdW1hbm9pZDpDaGFuZ2VTdGF0ZShFbnVtLkh1bWFub2lkU3RhdGVUeXBlLlN3aW1taW5nKQogICAgICBzd2ltYmVhdCA9IFJ1blNlcnZpY2UuSGVhcnRiZWF0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuVmVsb2NpdHkgPSAoKEh1bWFub2lkLk1vdmVEaXJlY3Rpb24gfj0gVmVjdG9yMy5uZXcoKSBvciBVc2VySW5wdXRTZXJ2aWNlOklzS2V5RG93bihFbnVtLktleUNvZGUuU3BhY2UpKSBhbmQgc3BlYWtlci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5WZWxvY2l0eSBvciBWZWN0b3IzLm5ldygpKQogICAgICAgIGVuZCkKICAgICAgZW5kKQogICAgICBzd2ltbWluZyA9IHRydWUKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3Vuc3dpbScseydub3N3aW0nfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgc3BlYWtlciBhbmQgc3BlYWtlci5DaGFyYWN0ZXIgYW5kIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIkh1bWFub2lkIikgdGhlbgogICAgICB3b3Jrc3BhY2UuR3Jhdml0eSA9IG9sZGdyYXYKICAgICAgc3dpbW1pbmcgPSBmYWxzZQogICAgICBpZiBncmF2UmVzZXQgdGhlbgogICAgICAgIGdyYXZSZXNldDpEaXNjb25uZWN0KCkKICAgICAgZW5kCiAgICAgIGlmIHN3aW1iZWF0IH49IG5pbCB0aGVuCiAgICAgICAgc3dpbWJlYXQ6RGlzY29ubmVjdCgpCiAgICAgICAgc3dpbWJlYXQgPSBuaWwKICAgICAgZW5kCiAgICAgIGxvY2FsIEh1bWFub2lkID0gc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiSHVtYW5vaWQiKQogICAgICBsb2NhbCBlbnVtcyA9IEVudW0uSHVtYW5vaWRTdGF0ZVR5cGU6R2V0RW51bUl0ZW1zKCkKICAgICAgdGFibGUucmVtb3ZlKGVudW1zLCB0YWJsZS5maW5kKGVudW1zLCBFbnVtLkh1bWFub2lkU3RhdGVUeXBlLk5vbmUpKQogICAgICBmb3IgaSwgdiBpbiBwYWlycyhlbnVtcykgZG8KICAgICAgICBIdW1hbm9pZDpTZXRTdGF0ZUVuYWJsZWQodiwgdHJ1ZSkKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd0b2dnbGVzd2ltJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgc3dpbW1pbmcgdGhlbgogICAgICBleGVjQ21kKCd1bnN3aW0nKQogICAgZWxzZQogICAgICBleGVjQ21kKCdzd2ltJykKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3NldHdheXBvaW50Jyx7J3N3cCcsJ3NldHdwJywnc3BvcycsJ3NhdmVwb3NpdGlvbicsJ3NhdmVwb3MnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgV1BOYW1lID0gdG9zdHJpbmcoZ2V0c3RyaW5nKDEpKQogICAgaWYgZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikgdGhlbgogICAgICBub3RpZnkoJ01vZGlmaWVkIFdheXBvaW50cycsIkNyZWF0ZWQgd2F5cG9pbnQ6ICIuLmdldHN0cmluZygxKSkKICAgICAgbG9jYWwgdG9yc28gPSBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKQogICAgICBXYXlQb2ludHNbI1dheVBvaW50cyArIDFdID0ge05BTUUgPSBXUE5hbWUsIENPT1JEID0ge21hdGguZmxvb3IodG9yc28uUG9zaXRpb24uWCksIG1hdGguZmxvb3IodG9yc28uUG9zaXRpb24uWSksIG1hdGguZmxvb3IodG9yc28uUG9zaXRpb24uWil9LCBHQU1FID0gUGxhY2VJZH0KICAgICAgaWYgQWxsV2F5cG9pbnRzIH49IG5pbCB0aGVuCiAgICAgICAgQWxsV2F5cG9pbnRzWyNBbGxXYXlwb2ludHMgKyAxXSA9IHtOQU1FID0gV1BOYW1lLCBDT09SRCA9IHttYXRoLmZsb29yKHRvcnNvLlBvc2l0aW9uLlgpLCBtYXRoLmZsb29yKHRvcnNvLlBvc2l0aW9uLlkpLCBtYXRoLmZsb29yKHRvcnNvLlBvc2l0aW9uLlopfSwgR0FNRSA9IFBsYWNlSWR9CiAgICAgIGVuZAogICAgZW5kCQogICAgcmVmcmVzaHdheXBvaW50cygpCiAgICB1cGRhdGVzYXZlcygpCiAgZW5kKQogIAogIGFkZGNtZCgnd2F5cG9pbnRwb3MnLHsnd3BwJywnc2V0d2F5cG9pbnRwb3NpdGlvbicsJ3NldHBvcycsJ3NldHdheXBvaW50Jywnc2V0d2F5cG9pbnRwb3MnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgV1BOYW1lID0gdG9zdHJpbmcoZ2V0c3RyaW5nKDEpKQogICAgaWYgZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikgdGhlbgogICAgICBub3RpZnkoJ01vZGlmaWVkIFdheXBvaW50cycsIkNyZWF0ZWQgd2F5cG9pbnQ6ICIuLmdldHN0cmluZygxKSkKICAgICAgV2F5UG9pbnRzWyNXYXlQb2ludHMgKyAxXSA9IHtOQU1FID0gV1BOYW1lLCBDT09SRCA9IHthcmdzWzJdLCBhcmdzWzNdLCBhcmdzWzRdfSwgR0FNRSA9IFBsYWNlSWR9CiAgICAgIGlmIEFsbFdheXBvaW50cyB+PSBuaWwgdGhlbgogICAgICAgIEFsbFdheXBvaW50c1sjQWxsV2F5cG9pbnRzICsgMV0gPSB7TkFNRSA9IFdQTmFtZSwgQ09PUkQgPSB7YXJnc1syXSwgYXJnc1szXSwgYXJnc1s0XX0sIEdBTUUgPSBQbGFjZUlkfQogICAgICBlbmQKICAgIGVuZAkKICAgIHJlZnJlc2h3YXlwb2ludHMoKQogICAgdXBkYXRlc2F2ZXMoKQogIGVuZCkKICAKICBhZGRjbWQoJ3dheXBvaW50cycseydwb3NpdGlvbnMnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgU2V0dGluZ3NPcGVuID09IGZhbHNlIHRoZW4gU2V0dGluZ3NPcGVuID0gdHJ1ZQogICAgICBTZXR0aW5nczpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLCAwLCAwLCA0NSksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKQogICAgICBDTURzRi5WaXNpYmxlID0gZmFsc2UKICAgIGVuZAogICAgS2V5YmluZHNGcmFtZTpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLCAwLCAwLCAxNzUpLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkKICAgIEFsaWFzZXNGcmFtZTpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLCAwLCAwLCAxNzUpLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkKICAgIFBsdWdpbnNGcmFtZTpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLCAwLCAwLCAxNzUpLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkKICAgIFBvc2l0aW9uc0ZyYW1lOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAsIDAsIDAsIDApLCAiSW5PdXQiLCAiUXVhcnQiLCAwLjUsIHRydWUsIG5pbCkKICAgIHdhaXQoMC41KQogICAgU2V0dGluZ3NIb2xkZXIuVmlzaWJsZSA9IGZhbHNlCiAgICBtYXhpbWl6ZUhvbGRlcigpCiAgZW5kKQogIAogIHdheXBvaW50UGFydHMgPSB7fQogIGFkZGNtZCgnc2hvd3dheXBvaW50cycseydzaG93d3AnLCdzaG93d3BzJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGV4ZWNDbWQoJ2hpZGV3YXlwb2ludHMnKQogICAgd2FpdCgpCiAgICBmb3IgaSxfIGluIHBhaXJzKFdheVBvaW50cykgZG8KICAgICAgbG9jYWwgeCA9IFdheVBvaW50c1tpXS5DT09SRFsxXQogICAgICBsb2NhbCB5ID0gV2F5UG9pbnRzW2ldLkNPT1JEWzJdCiAgICAgIGxvY2FsIHogPSBXYXlQb2ludHNbaV0uQ09PUkRbM10KICAgICAgbG9jYWwgcGFydCA9IEluc3RhbmNlLm5ldygiUGFydCIpCiAgICAgIHBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDUsNSw1KQogICAgICBwYXJ0LkNGcmFtZSA9IENGcmFtZS5uZXcoeCx5LHopCiAgICAgIHBhcnQuUGFyZW50ID0gd29ya3NwYWNlCiAgICAgIHBhcnQuQW5jaG9yZWQgPSB0cnVlCiAgICAgIHBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCiAgICAgIHRhYmxlLmluc2VydCh3YXlwb2ludFBhcnRzLHBhcnQpCiAgICAgIGxvY2FsIHZpZXcgPSBJbnN0YW5jZS5uZXcoIkJveEhhbmRsZUFkb3JubWVudCIpCiAgICAgIHZpZXcuQWRvcm5lZSA9IHBhcnQKICAgICAgdmlldy5BbHdheXNPblRvcCA9IHRydWUKICAgICAgdmlldy5aSW5kZXggPSAxMAogICAgICB2aWV3LlNpemUgPSBwYXJ0LlNpemUKICAgICAgdmlldy5QYXJlbnQgPSBwYXJ0CiAgICBlbmQKICAgIGZvciBpLHYgaW4gcGFpcnMocFdheVBvaW50cykgZG8KICAgICAgbG9jYWwgdmlldyA9IEluc3RhbmNlLm5ldygiQm94SGFuZGxlQWRvcm5tZW50IikKICAgICAgdmlldy5BZG9ybmVlID0gcFdheVBvaW50c1tpXS5DT09SRFsxXQogICAgICB2aWV3LkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICB2aWV3LlpJbmRleCA9IDEwCiAgICAgIHZpZXcuU2l6ZSA9IHBXYXlQb2ludHNbaV0uQ09PUkRbMV0uU2l6ZQogICAgICB2aWV3LlBhcmVudCA9IHBXYXlQb2ludHNbaV0uQ09PUkRbMV0KICAgICAgdGFibGUuaW5zZXJ0KHdheXBvaW50UGFydHMsdmlldykKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2hpZGV3YXlwb2ludHMnLHsnaGlkZXdwJywnaGlkZXdwcyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHdheXBvaW50UGFydHMpIGRvCiAgICAgIHY6RGVzdHJveSgpCiAgICBlbmQKICAgIHdheXBvaW50UGFydHMgPSB7fQogIGVuZCkKICAKICBhZGRjbWQoJ3dheXBvaW50Jyx7J3dwJywnbHBvcycsJ2xvYWRwb3NpdGlvbicsJ2xvYWRwb3MnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgV1BOYW1lID0gdG9zdHJpbmcoZ2V0c3RyaW5nKDEpKQogICAgaWYgc3BlYWtlci5DaGFyYWN0ZXIgdGhlbgogICAgICBmb3IgaSxfIGluIHBhaXJzKFdheVBvaW50cykgZG8KICAgICAgICBpZiB0b3N0cmluZyhXYXlQb2ludHNbaV0uTkFNRSk6bG93ZXIoKSA9PSB0b3N0cmluZyhXUE5hbWUpOmxvd2VyKCkgdGhlbgogICAgICAgICAgbG9jYWwgeCA9IFdheVBvaW50c1tpXS5DT09SRFsxXQogICAgICAgICAgbG9jYWwgeSA9IFdheVBvaW50c1tpXS5DT09SRFsyXQogICAgICAgICAgbG9jYWwgeiA9IFdheVBvaW50c1tpXS5DT09SRFszXQogICAgICAgICAgZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyh4LHkseikKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIGZvciBpLF8gaW4gcGFpcnMocFdheVBvaW50cykgZG8KICAgICAgICBpZiB0b3N0cmluZyhwV2F5UG9pbnRzW2ldLk5BTUUpOmxvd2VyKCkgPT0gdG9zdHJpbmcoV1BOYW1lKTpsb3dlcigpIHRoZW4KICAgICAgICAgIGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpLkNGcmFtZSA9IENGcmFtZS5uZXcocFdheVBvaW50c1tpXS5DT09SRFsxXS5Qb3NpdGlvbikKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgdHdlZW5TcGVlZCA9IDEKICBhZGRjbWQoJ3R3ZWVuc3BlZWQnLHsndHNwZWVkJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIG5ld1NwZWVkID0gYXJnc1sxXSBvciAxCiAgICBpZiB0b251bWJlcihuZXdTcGVlZCkgdGhlbgogICAgICB0d2VlblNwZWVkID0gdG9udW1iZXIobmV3U3BlZWQpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd0d2VlbndheXBvaW50Jyx7J3R3cCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBXUE5hbWUgPSB0b3N0cmluZyhnZXRzdHJpbmcoMSkpCiAgICBpZiBzcGVha2VyLkNoYXJhY3RlciB0aGVuCiAgICAgIGZvciBpLF8gaW4gcGFpcnMoV2F5UG9pbnRzKSBkbwogICAgICAgIGxvY2FsIHggPSBXYXlQb2ludHNbaV0uQ09PUkRbMV0KICAgICAgICBsb2NhbCB5ID0gV2F5UG9pbnRzW2ldLkNPT1JEWzJdCiAgICAgICAgbG9jYWwgeiA9IFdheVBvaW50c1tpXS5DT09SRFszXQogICAgICAgIGlmIHRvc3RyaW5nKFdheVBvaW50c1tpXS5OQU1FKTpsb3dlcigpID09IHRvc3RyaW5nKFdQTmFtZSk6bG93ZXIoKSB0aGVuCiAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpLCBUd2VlbkluZm8ubmV3KHR3ZWVuU3BlZWQsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKSwge0NGcmFtZSA9IENGcmFtZS5uZXcoeCx5LHopfSk6UGxheSgpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICBmb3IgaSxfIGluIHBhaXJzKHBXYXlQb2ludHMpIGRvCiAgICAgICAgaWYgdG9zdHJpbmcocFdheVBvaW50c1tpXS5OQU1FKTpsb3dlcigpID09IHRvc3RyaW5nKFdQTmFtZSk6bG93ZXIoKSB0aGVuCiAgICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpLCBUd2VlbkluZm8ubmV3KHR3ZWVuU3BlZWQsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKSwge0NGcmFtZSA9IENGcmFtZS5uZXcocFdheVBvaW50c1tpXS5DT09SRFsxXS5Qb3NpdGlvbil9KTpQbGF5KCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd3YWxrdG93YXlwb2ludCcseyd3dHdwJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIFdQTmFtZSA9IHRvc3RyaW5nKGdldHN0cmluZygxKSkKICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyIHRoZW4KICAgICAgZm9yIGksXyBpbiBwYWlycyhXYXlQb2ludHMpIGRvCiAgICAgICAgbG9jYWwgeCA9IFdheVBvaW50c1tpXS5DT09SRFsxXQogICAgICAgIGxvY2FsIHkgPSBXYXlQb2ludHNbaV0uQ09PUkRbMl0KICAgICAgICBsb2NhbCB6ID0gV2F5UG9pbnRzW2ldLkNPT1JEWzNdCiAgICAgICAgaWYgdG9zdHJpbmcoV2F5UG9pbnRzW2ldLk5BTUUpOmxvd2VyKCkgPT0gdG9zdHJpbmcoV1BOYW1lKTpsb3dlcigpIHRoZW4KICAgICAgICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKSBhbmQgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlNlYXRQYXJ0IHRoZW4KICAgICAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlNpdCA9IGZhbHNlCiAgICAgICAgICAgIHdhaXQoLjEpCiAgICAgICAgICBlbmQKICAgICAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5XYWxrVG9Qb2ludCA9IFZlY3RvcjMubmV3KHgseSx6KQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgZm9yIGksXyBpbiBwYWlycyhwV2F5UG9pbnRzKSBkbwogICAgICAgIGlmIHRvc3RyaW5nKHBXYXlQb2ludHNbaV0uTkFNRSk6bG93ZXIoKSA9PSB0b3N0cmluZyhXUE5hbWUpOmxvd2VyKCkgdGhlbgogICAgICAgICAgaWYgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpIGFuZCBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2VhdFBhcnQgdGhlbgogICAgICAgICAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2l0ID0gZmFsc2UKICAgICAgICAgICAgd2FpdCguMSkKICAgICAgICAgIGVuZAogICAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLldhbGtUb1BvaW50ID0gVmVjdG9yMy5uZXcocFdheVBvaW50c1tpXS5DT09SRFsxXS5Qb3NpdGlvbikKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdkZWxldGV3YXlwb2ludCcseydkd3AnLCdkcG9zJywnZGVsZXRlcG9zaXRpb24nLCdkZWxldGVwb3MnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhXYXlQb2ludHMpIGRvCiAgICAgIGlmIHYuTkFNRTpsb3dlcigpID09IHRvc3RyaW5nKGdldHN0cmluZygxKSk6bG93ZXIoKSB0aGVuCiAgICAgICAgbm90aWZ5KCdNb2RpZmllZCBXYXlwb2ludHMnLCJEZWxldGVkIHdheXBvaW50OiAiIC4uIHYuTkFNRSkKICAgICAgICB0YWJsZS5yZW1vdmUoV2F5UG9pbnRzLCBpKQogICAgICBlbmQKICAgIGVuZAogICAgaWYgQWxsV2F5cG9pbnRzIH49IG5pbCBhbmQgI0FsbFdheXBvaW50cyA+IDAgdGhlbgogICAgICBmb3IgaSx2IGluIHBhaXJzKEFsbFdheXBvaW50cykgZG8KICAgICAgICBpZiB2Lk5BTUU6bG93ZXIoKSA9PSB0b3N0cmluZyhnZXRzdHJpbmcoMSkpOmxvd2VyKCkgdGhlbgogICAgICAgICAgaWYgbm90IHYuR0FNRSBvciB2LkdBTUUgPT0gUGxhY2VJZCB0aGVuCiAgICAgICAgICAgIHRhYmxlLnJlbW92ZShBbGxXYXlwb2ludHMsIGkpCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICAgIGZvciBpLHYgaW4gcGFpcnMocFdheVBvaW50cykgZG8KICAgICAgaWYgdi5OQU1FOmxvd2VyKCkgPT0gdG9zdHJpbmcoZ2V0c3RyaW5nKDEpKTpsb3dlcigpIHRoZW4KICAgICAgICBub3RpZnkoJ01vZGlmaWVkIFdheXBvaW50cycsIkRlbGV0ZWQgd2F5cG9pbnQ6ICIgLi4gdi5OQU1FKQogICAgICAgIHRhYmxlLnJlbW92ZShwV2F5UG9pbnRzLCBpKQogICAgICBlbmQKICAgIGVuZAogICAgcmVmcmVzaHdheXBvaW50cygpCiAgICB1cGRhdGVzYXZlcygpCiAgZW5kKQogIAogIGFkZGNtZCgnY2xlYXJ3YXlwb2ludHMnLHsnY3dwJywnY2xlYXJwb3NpdGlvbnMnLCdjcG9zJywnY2xlYXJwb3MnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgV2F5UG9pbnRzID0ge30KICAgIHBXYXlQb2ludHMgPSB7fQogICAgcmVmcmVzaHdheXBvaW50cygpCiAgICB1cGRhdGVzYXZlcygpCiAgICBBbGxXYXlwb2ludHMgPSB7fQogICAgbm90aWZ5KCdNb2RpZmllZCBXYXlwb2ludHMnLCdSZW1vdmVkIGFsbCB3YXlwb2ludHMnKQogIGVuZCkKICAKICBhZGRjbWQoJ2NsZWFyZ2FtZXdheXBvaW50cycseydjZ2FtZXdwJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMoV2F5UG9pbnRzKSBkbwogICAgICBpZiB2LkdBTUUgPT0gUGxhY2VJZCB0aGVuCiAgICAgICAgdGFibGUucmVtb3ZlKFdheVBvaW50cywgaSkKICAgICAgZW5kCiAgICBlbmQKICAgIGlmIEFsbFdheXBvaW50cyB+PSBuaWwgYW5kICNBbGxXYXlwb2ludHMgPiAwIHRoZW4KICAgICAgZm9yIGksdiBpbiBwYWlycyhBbGxXYXlwb2ludHMpIGRvCiAgICAgICAgaWYgdi5HQU1FID09IFBsYWNlSWQgdGhlbgogICAgICAgICAgdGFibGUucmVtb3ZlKEFsbFdheXBvaW50cywgaSkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICAgIGZvciBpLHYgaW4gcGFpcnMocFdheVBvaW50cykgZG8KICAgICAgaWYgdi5HQU1FID09IFBsYWNlSWQgdGhlbgogICAgICAgIHRhYmxlLnJlbW92ZShwV2F5UG9pbnRzLCBpKQogICAgICBlbmQKICAgIGVuZAogICAgcmVmcmVzaHdheXBvaW50cygpCiAgICB1cGRhdGVzYXZlcygpCiAgICBub3RpZnkoJ01vZGlmaWVkIFdheXBvaW50cycsJ0RlbGV0ZWQgZ2FtZSB3YXlwb2ludHMnKQogIGVuZCkKICAKICAKICBsb2NhbCBjb3JlR3VpVHlwZU5hbWVzID0gewogICAgLS0gcHJlZGVmaW5lZCBhbGlhc2VzCiAgICBbImludmVudG9yeSJdID0gRW51bS5Db3JlR3VpVHlwZS5CYWNrcGFjaywKICAgIFsibGVhZGVyYm9hcmQiXSA9IEVudW0uQ29yZUd1aVR5cGUuUGxheWVyTGlzdCwKICAgIFsiZW1vdGVzIl0gPSBFbnVtLkNvcmVHdWlUeXBlLkVtb3Rlc01lbnUKICB9CiAgCiAgLS0gTG9hZCB0aGUgZnVsbCBsaXN0IG9mIGVudW1zCiAgZm9yIF8sIGVudW1JdGVtIGluIGlwYWlycyhFbnVtLkNvcmVHdWlUeXBlOkdldEVudW1JdGVtcygpKSBkbwogICAgY29yZUd1aVR5cGVOYW1lc1tlbnVtSXRlbS5OYW1lOmxvd2VyKCldID0gZW51bUl0ZW0KICBlbmQKICAKICBhZGRjbWQoJ2VuYWJsZScse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIGlucHV0ID0gYXJnc1sxXSBhbmQgYXJnc1sxXTpsb3dlcigpCiAgICBpZiBpbnB1dCB0aGVuCiAgICAgIGlmIGlucHV0ID09ICJyZXNldCIgdGhlbgogICAgICAgIFN0YXJ0ZXJHdWk6U2V0Q29yZSgiUmVzZXRCdXR0b25DYWxsYmFjayIsIHRydWUpCiAgICAgIGVsc2UKICAgICAgICBsb2NhbCBjb3JlR3VpVHlwZSA9IGNvcmVHdWlUeXBlTmFtZXNbaW5wdXRdCiAgICAgICAgaWYgY29yZUd1aVR5cGUgdGhlbgogICAgICAgICAgU3RhcnRlckd1aTpTZXRDb3JlR3VpRW5hYmxlZChjb3JlR3VpVHlwZSwgdHJ1ZSkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdkaXNhYmxlJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgaW5wdXQgPSBhcmdzWzFdIGFuZCBhcmdzWzFdOmxvd2VyKCkKICAgIGlmIGlucHV0IHRoZW4KICAgICAgaWYgaW5wdXQgPT0gInJlc2V0IiB0aGVuCiAgICAgICAgU3RhcnRlckd1aTpTZXRDb3JlKCJSZXNldEJ1dHRvbkNhbGxiYWNrIiwgZmFsc2UpCiAgICAgIGVsc2UKICAgICAgICBsb2NhbCBjb3JlR3VpVHlwZSA9IGNvcmVHdWlUeXBlTmFtZXNbaW5wdXRdCiAgICAgICAgaWYgY29yZUd1aVR5cGUgdGhlbgogICAgICAgICAgU3RhcnRlckd1aTpTZXRDb3JlR3VpRW5hYmxlZChjb3JlR3VpVHlwZSwgZmFsc2UpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIAogIGxvY2FsIGludmlzR1VJUyA9IHt9CiAgYWRkY21kKCdzaG93Z3Vpcycse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMoc3BlYWtlcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJQbGF5ZXJHdWkiKTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiAodjpJc0EoIkZyYW1lIikgb3IgdjpJc0EoIkltYWdlTGFiZWwiKSBvciB2OklzQSgiU2Nyb2xsaW5nRnJhbWUiKSkgYW5kIG5vdCB2LlZpc2libGUgdGhlbgogICAgICAgIHYuVmlzaWJsZSA9IHRydWUKICAgICAgICBpZiBub3QgRmluZEluVGFibGUoaW52aXNHVUlTLHYpIHRoZW4KICAgICAgICAgIHRhYmxlLmluc2VydChpbnZpc0dVSVMsdikKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd1bnNob3dndWlzJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhpbnZpc0dVSVMpIGRvCiAgICAgIHYuVmlzaWJsZSA9IGZhbHNlCiAgICBlbmQKICAgIGludmlzR1VJUyA9IHt9CiAgZW5kKQogIAogIGxvY2FsIGhpZGRlbkdVSVMgPSB7fQogIGFkZGNtZCgnaGlkZWd1aXMnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHNwZWFrZXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiUGxheWVyR3VpIik6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgaWYgKHY6SXNBKCJGcmFtZSIpIG9yIHY6SXNBKCJJbWFnZUxhYmVsIikgb3IgdjpJc0EoIlNjcm9sbGluZ0ZyYW1lIikpIGFuZCB2LlZpc2libGUgdGhlbgogICAgICAgIHYuVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgaWYgbm90IEZpbmRJblRhYmxlKGhpZGRlbkdVSVMsdikgdGhlbgogICAgICAgICAgdGFibGUuaW5zZXJ0KGhpZGRlbkdVSVMsdikKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd1bmhpZGVndWlzJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhoaWRkZW5HVUlTKSBkbwogICAgICB2LlZpc2libGUgPSB0cnVlCiAgICBlbmQKICAgIGhpZGRlbkdVSVMgPSB7fQogIGVuZCkKICAKICBmdW5jdGlvbiBkZWxldGVHdWlzQXRQb3MoKQogICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICBsb2NhbCBndWlzQXRQb3NpdGlvbiA9IFBsYXllcnMuTG9jYWxQbGF5ZXIuUGxheWVyR3VpOkdldEd1aU9iamVjdHNBdFBvc2l0aW9uKElZTW91c2UuWCwgSVlNb3VzZS5ZKQogICAgICBmb3IgXywgZ3VpIGluIHBhaXJzKGd1aXNBdFBvc2l0aW9uKSBkbwogICAgICAgIGlmIGd1aS5WaXNpYmxlID09IHRydWUgdGhlbgogICAgICAgICAgZ3VpOkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZCkKICBlbmQKICAKICBsb2NhbCBkZWxldGVHdWlJbnB1dAogIGFkZGNtZCgnZ3VpZGVsZXRlJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZGVsZXRlR3VpSW5wdXQgPSBVc2VySW5wdXRTZXJ2aWNlLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCwgZ2FtZVByb2Nlc3NlZEV2ZW50KQogICAgICBpZiBub3QgZ2FtZVByb2Nlc3NlZEV2ZW50IHRoZW4KICAgICAgICBpZiBpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5CYWNrc3BhY2UgdGhlbgogICAgICAgICAgZGVsZXRlR3Vpc0F0UG9zKCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQpCiAgICBub3RpZnkoJ0dVSSBEZWxldGUgRW5hYmxlZCcsJ0hvdmVyIG92ZXIgYSBHVUkgYW5kIHByZXNzIGJhY2tzcGFjZSB0byBkZWxldGUgaXQnKQogIGVuZCkKICAKICBhZGRjbWQoJ3VuZ3VpZGVsZXRlJyx7J25vZ3VpZGVsZXRlJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIGRlbGV0ZUd1aUlucHV0IHRoZW4gZGVsZXRlR3VpSW5wdXQ6RGlzY29ubmVjdCgpIGVuZAogICAgbm90aWZ5KCdHVUkgRGVsZXRlIERpc2FibGVkJywnR1VJIGJhY2tzcGFjZSBkZWxldGUgaGFzIGJlZW4gZGlzYWJsZWQnKQogIGVuZCkKICAKICBsb2NhbCB3YXNTdGF5T3BlbiA9IFN0YXlPcGVuCiAgYWRkY21kKCdoaWRlaXknLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpc0hpZGRlbiA9IHRydWUKICAgIHdhc1N0YXlPcGVuID0gU3RheU9wZW4KICAgIGlmIFN0YXlPcGVuID09IHRydWUgdGhlbgogICAgICBTdGF5T3BlbiA9IGZhbHNlCiAgICAgIE9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICBlbmQKICAgIG1pbmltaXplTnVtID0gMAogICAgbWluaW1pemVIb2xkZXIoKQogICAgaWYgbm90IChhcmdzWzFdIGFuZCB0b3N0cmluZyhhcmdzWzFdKSA9PSAnbm9ub3RpZnknKSB0aGVuIG5vdGlmeSgnSVkgSGlkZGVuJywnWW91IGNhbiBwcmVzcyB0aGUgcHJlZml4IGtleSB0byBhY2Nlc3MgdGhlIGNvbW1hbmQgYmFyJykgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnc2hvd2l5Jyx7J3VuaGlkZWl5J30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlzSGlkZGVuID0gZmFsc2UKICAgIG1pbmltaXplTnVtID0gLTIwCiAgICBpZiB3YXNTdGF5T3BlbiB0aGVuCiAgICAgIG1heGltaXplSG9sZGVyKCkKICAgICAgU3RheU9wZW4gPSB0cnVlCiAgICAgIE9uLkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAwCiAgICBlbHNlCiAgICAgIG1pbmltaXplSG9sZGVyKCkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3JlYycsIHsncmVjb3JkJ30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICByZXR1cm4gQ09SRUdVSTpUb2dnbGVSZWNvcmRpbmcoKQogIGVuZCkKICAKICBhZGRjbWQoJ3NjcmVlbnNob3QnLCB7J3Njcm5zaG90J30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICByZXR1cm4gQ09SRUdVSTpUYWtlU2NyZWVuc2hvdCgpCiAgZW5kKQogIAogIGFkZGNtZCgndG9nZ2xlZnMnLCB7J3RvZ2dsZWZ1bGxzY3JlZW4nfSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIHJldHVybiBHdWlTZXJ2aWNlOlRvZ2dsZUZ1bGxzY3JlZW4oKQogIGVuZCkKICAKICBhZGRjbWQoJ2luc3BlY3QnLCB7J2V4YW1pbmUnfSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBfLCB2IGluIGlwYWlycyhnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikpIGRvCiAgICAgIEd1aVNlcnZpY2U6Q2xvc2VJbnNwZWN0TWVudSgpCiAgICAgIEd1aVNlcnZpY2U6SW5zcGVjdFBsYXllckZyb21Vc2VySWQoUGxheWVyc1t2XS5Vc2VySWQpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCJzYXZlZ2FtZSIsIHsic2F2ZXBsYWNlIn0sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICAgIGlmIHNhdmVpbnN0YW5jZSB0aGVuCiAgICAgICAgICBub3RpZnkoIkxvYWRpbmciLCAiRG93bmxvYWRpbmcgZ2FtZS4gVGhpcyB3aWxsIHRha2UgYSB3aGlsZSIpCiAgICAgICAgICBzYXZlaW5zdGFuY2UoKQogICAgICAgICAgbm90aWZ5KCJHYW1lIFNhdmVkIiwgIlNhdmVkIHBsYWNlIHRvIHRoZSB3b3Jrc3BhY2UgZm9sZGVyIHdpdGhpbiB5b3VyIGV4cGxvaXQgZm9sZGVyLiIpCiAgICAgIGVsc2UKICAgICAgICAgIG5vdGlmeSgiSW5jb21wYXRpYmxlIEV4cGxvaXQiLCAiWW91ciBleHBsb2l0IGRvZXMgbm90IHN1cHBvcnQgdGhpcyBjb21tYW5kIChtaXNzaW5nIHNhdmVpbnN0YW5jZSkiKQogICAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdjbGVhcmVycm9yJyx7J2NsZWFyZXJyb3JzJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIEd1aVNlcnZpY2U6Q2xlYXJFcnJvcigpCiAgZW5kKQogIAogIGFkZGNtZCgnY2xpZW50YW50aWtpY2snLHsnYW50aWtpY2snfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgbm90IGhvb2ttZXRhbWV0aG9kIHRoZW4gCiAgICAgIHJldHVybiBub3RpZnkoJ0luY29tcGF0aWJsZSBFeHBsb2l0JywnWW91ciBleHBsb2l0IGRvZXMgbm90IHN1cHBvcnQgdGhpcyBjb21tYW5kIChtaXNzaW5nIGhvb2ttZXRhbWV0aG9kKScpCiAgICBlbmQKICAgIGxvY2FsIExvY2FsUGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgogICAgbG9jYWwgb2xkaG1taQogICAgbG9jYWwgb2xkaG1tbmMKICAgIG9sZGhtbWkgPSBob29rbWV0YW1ldGhvZChnYW1lLCAiX19pbmRleCIsIGZ1bmN0aW9uKHNlbGYsIG1ldGhvZCkKICAgICAgaWYgc2VsZiA9PSBMb2NhbFBsYXllciBhbmQgbWV0aG9kOmxvd2VyKCkgPT0gImtpY2siIHRoZW4KICAgICAgICByZXR1cm4gZXJyb3IoIkV4cGVjdGVkICc6JyBub3QgJy4nIGNhbGxpbmcgbWVtYmVyIGZ1bmN0aW9uIEtpY2siLCAyKQogICAgICBlbmQKICAgICAgcmV0dXJuIG9sZGhtbWkoc2VsZiwgbWV0aG9kKQogICAgZW5kKQogICAgb2xkaG1tbmMgPSBob29rbWV0YW1ldGhvZChnYW1lLCAiX19uYW1lY2FsbCIsIGZ1bmN0aW9uKHNlbGYsIC4uLikKICAgICAgaWYgc2VsZiA9PSBMb2NhbFBsYXllciBhbmQgZ2V0bmFtZWNhbGxtZXRob2QoKTpsb3dlcigpID09ICJraWNrIiB0aGVuCiAgICAgICAgcmV0dXJuCiAgICAgIGVuZAogICAgICByZXR1cm4gb2xkaG1tbmMoc2VsZiwgLi4uKQogICAgZW5kKQogIAogICAgbm90aWZ5KCdDbGllbnQgQW50aWtpY2snLCdDbGllbnQgYW50aSBraWNrIGlzIG5vdyBhY3RpdmUgKG9ubHkgZWZmZWN0aXZlIG9uIGxvY2Fsc2NyaXB0IGtpY2spJykKICBlbmQpCiAgCiAgYWxsb3dfcmogPSB0cnVlCiAgYWRkY21kKCdjbGllbnRhbnRpdGVsZXBvcnQnLHsnYW50aXRlbGVwb3J0J30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIG5vdCBob29rbWV0YW1ldGhvZCB0aGVuIAogICAgICByZXR1cm4gbm90aWZ5KCdJbmNvbXBhdGlibGUgRXhwbG9pdCcsJ1lvdXIgZXhwbG9pdCBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgY29tbWFuZCAobWlzc2luZyBob29rbWV0YW1ldGhvZCknKQogICAgZW5kCiAgICBsb2NhbCBUZWxlcG9ydFNlcnZpY2UgPSBUZWxlcG9ydFNlcnZpY2UKICAgIGxvY2FsIG9sZGhtbWkKICAgIGxvY2FsIG9sZGhtbW5jCiAgICBvbGRobW1pID0gaG9va21ldGFtZXRob2QoZ2FtZSwgIl9faW5kZXgiLCBmdW5jdGlvbihzZWxmLCBtZXRob2QpCiAgICAgIGlmIHNlbGYgPT0gVGVsZXBvcnRTZXJ2aWNlIHRoZW4KICAgICAgICBpZiBtZXRob2Q6bG93ZXIoKSA9PSAidGVsZXBvcnQiIHRoZW4KICAgICAgICAgIHJldHVybiBlcnJvcigiRXhwZWN0ZWQgJzonIG5vdCAnLicgY2FsbGluZyBtZW1iZXIgZnVuY3Rpb24gS2ljayIsIDIpCiAgICAgICAgZWxzZWlmIG1ldGhvZCA9PSAiVGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UiIHRoZW4KICAgICAgICAgIHJldHVybiBlcnJvcigiRXhwZWN0ZWQgJzonIG5vdCAnLicgY2FsbGluZyBtZW1iZXIgZnVuY3Rpb24gVGVsZXBvcnRUb1BsYWNlSW5zdGFuY2UiLCAyKQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgcmV0dXJuIG9sZGhtbWkoc2VsZiwgbWV0aG9kKQogICAgZW5kKQogICAgb2xkaG1tbmMgPSBob29rbWV0YW1ldGhvZChnYW1lLCAiX19uYW1lY2FsbCIsIGZ1bmN0aW9uKHNlbGYsIC4uLikKICAgICAgaWYgc2VsZiA9PSBUZWxlcG9ydFNlcnZpY2UgYW5kIGdldG5hbWVjYWxsbWV0aG9kKCk6bG93ZXIoKSA9PSAidGVsZXBvcnQiIG9yIGdldG5hbWVjYWxsbWV0aG9kKCkgPT0gIlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlIiB0aGVuCiAgICAgICAgcmV0dXJuCiAgICAgIGVuZAogICAgICByZXR1cm4gb2xkaG1tbmMoc2VsZiwgLi4uKQogICAgZW5kKQogIAogICAgbm90aWZ5KCdDbGllbnQgQW50aVRQJywnQ2xpZW50IGFudGkgdGVsZXBvcnQgaXMgbm93IGFjdGl2ZSAob25seSBlZmZlY3RpdmUgb24gbG9jYWxzY3JpcHQgdGVsZXBvcnQpJykKICBlbmQpCiAgCiAgYWRkY21kKCdhbGxvd3Jlam9pbicseydhbGxvd3JqJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIGFyZ3NbMV0gYW5kIGFyZ3NbMV0gPT0gJ2ZhbHNlJyB0aGVuCiAgICAgIGFsbG93X3JqID0gZmFsc2UKICAgICAgbm90aWZ5KCdDbGllbnQgQW50aVRQJywnQWxsb3cgcmVqb2luIHNldCB0byBmYWxzZScpCiAgICBlbHNlCiAgICAgIGFsbG93X3JqID0gdHJ1ZQogICAgICBub3RpZnkoJ0NsaWVudCBBbnRpVFAnLCdBbGxvdyByZWpvaW4gc2V0IHRvIHRydWUnKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnY2FuY2VsdGVsZXBvcnQnLHsnY2FuY2VsdHAnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgVGVsZXBvcnRTZXJ2aWNlOlRlbGVwb3J0Q2FuY2VsKCkKICBlbmQpCiAgCiAgYWRkY21kKCd2b2x1bWUnLHsndm9sJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIGxldmVsID0gYXJnc1sxXS8xMAogICAgVXNlclNldHRpbmdzKCk6R2V0U2VydmljZSgiVXNlckdhbWVTZXR0aW5ncyIpLk1hc3RlclZvbHVtZSA9IGxldmVsCiAgZW5kKQogIAogIGFkZGNtZCgnYW50aWxhZycseydib29zdGZwcycsJ2xvd2dyYXBoaWNzJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIFRlcnJhaW4gPSB3b3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdUZXJyYWluJykKICAgIFRlcnJhaW4uV2F0ZXJXYXZlU2l6ZSA9IDAKICAgIFRlcnJhaW4uV2F0ZXJXYXZlU3BlZWQgPSAwCiAgICBUZXJyYWluLldhdGVyUmVmbGVjdGFuY2UgPSAwCiAgICBUZXJyYWluLldhdGVyVHJhbnNwYXJlbmN5ID0gMAogICAgTGlnaHRpbmcuR2xvYmFsU2hhZG93cyA9IGZhbHNlCiAgICBMaWdodGluZy5Gb2dFbmQgPSA5ZTkKICAgIHNldHRpbmdzKCkuUmVuZGVyaW5nLlF1YWxpdHlMZXZlbCA9IDEKICAgIGZvciBpLHYgaW4gcGFpcnMoZ2FtZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiB2OklzQSgiUGFydCIpIG9yIHY6SXNBKCJVbmlvbk9wZXJhdGlvbiIpIG9yIHY6SXNBKCJNZXNoUGFydCIpIG9yIHY6SXNBKCJDb3JuZXJXZWRnZVBhcnQiKSBvciB2OklzQSgiVHJ1c3NQYXJ0IikgdGhlbgogICAgICAgIHYuTWF0ZXJpYWwgPSAiUGxhc3RpYyIKICAgICAgICB2LlJlZmxlY3RhbmNlID0gMAogICAgICBlbHNlaWYgdjpJc0EoIkRlY2FsIikgdGhlbgogICAgICAgIHYuVHJhbnNwYXJlbmN5ID0gMQogICAgICBlbHNlaWYgdjpJc0EoIlBhcnRpY2xlRW1pdHRlciIpIG9yIHY6SXNBKCJUcmFpbCIpIHRoZW4KICAgICAgICB2LkxpZmV0aW1lID0gTnVtYmVyUmFuZ2UubmV3KDApCiAgICAgIGVsc2VpZiB2OklzQSgiRXhwbG9zaW9uIikgdGhlbgogICAgICAgIHYuQmxhc3RQcmVzc3VyZSA9IDEKICAgICAgICB2LkJsYXN0UmFkaXVzID0gMQogICAgICBlbmQKICAgIGVuZAogICAgZm9yIGksdiBpbiBwYWlycyhMaWdodGluZzpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiB2OklzQSgiQmx1ckVmZmVjdCIpIG9yIHY6SXNBKCJTdW5SYXlzRWZmZWN0Iikgb3IgdjpJc0EoIkNvbG9yQ29ycmVjdGlvbkVmZmVjdCIpIG9yIHY6SXNBKCJCbG9vbUVmZmVjdCIpIG9yIHY6SXNBKCJEZXB0aE9mRmllbGRFZmZlY3QiKSB0aGVuCiAgICAgICAgdi5FbmFibGVkID0gZmFsc2UKICAgICAgZW5kCiAgICBlbmQKICAgIHdvcmtzcGFjZS5EZXNjZW5kYW50QWRkZWQ6Q29ubmVjdChmdW5jdGlvbihjaGlsZCkKICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgaWYgY2hpbGQ6SXNBKCdGb3JjZUZpZWxkJykgdGhlbgogICAgICAgICAgUnVuU2VydmljZS5IZWFydGJlYXQ6V2FpdCgpCiAgICAgICAgICBjaGlsZDpEZXN0cm95KCkKICAgICAgICBlbHNlaWYgY2hpbGQ6SXNBKCdTcGFya2xlcycpIHRoZW4KICAgICAgICAgIFJ1blNlcnZpY2UuSGVhcnRiZWF0OldhaXQoKQogICAgICAgICAgY2hpbGQ6RGVzdHJveSgpCiAgICAgICAgZWxzZWlmIGNoaWxkOklzQSgnU21va2UnKSBvciBjaGlsZDpJc0EoJ0ZpcmUnKSB0aGVuCiAgICAgICAgICBSdW5TZXJ2aWNlLkhlYXJ0YmVhdDpXYWl0KCkKICAgICAgICAgIGNoaWxkOkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgICBlbmQpCiAgICBlbmQpCiAgZW5kKQogIAogIGFkZGNtZCgnc2V0ZnBzY2FwJywgeydmcHNjYXAnLCAnbWF4ZnBzJ30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBzZXRmcHNjYXAgYW5kIHR5cGUoc2V0ZnBzY2FwKSA9PSAiZnVuY3Rpb24iIHRoZW4KICAgICAgbG9jYWwgbnVtID0gYXJnc1sxXSBvciAxZTYKICAgICAgaWYgbnVtID09ICdub25lJyB0aGVuCiAgICAgICAgcmV0dXJuIHNldGZwc2NhcCgxZTYpCiAgICAgIGVsc2VpZiBudW0gPiAwIHRoZW4KICAgICAgICByZXR1cm4gc2V0ZnBzY2FwKG51bSkKICAgICAgZWxzZQogICAgICAgIHJldHVybiBub3RpZnkoJ0ludmFsaWQgYXJndW1lbnQnLCAiUGxlYXNlIHByb3ZpZGUgYSBudW1iZXIgYWJvdmUgMCBvciAnbm9uZScuIikKICAgICAgZW5kCiAgICBlbHNlCiAgICAgIHJldHVybiBub3RpZnkoJ0luY29tcGF0aWJsZSBFeHBsb2l0JywgJ1lvdXIgZXhwbG9pdCBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgY29tbWFuZCAobWlzc2luZyBzZXRmcHNjYXApJykKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ25vdGlmeScse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIG5vdGlmeShnZXRzdHJpbmcoMSkpCiAgZW5kKQogIAogIGFkZGNtZCgnbGFzdGNvbW1hbmQnLHsnbGFzdGNtZCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBjbWRIaXN0b3J5WzFdOnN1YigxLDExKSB+PSAnbGFzdGNvbW1hbmQnIGFuZCBjbWRIaXN0b3J5WzFdOnN1YigxLDcpIH49ICdsYXN0Y21kJyB0aGVuCiAgICAgIGV4ZWNDbWQoY21kSGlzdG9yeVsxXSkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2VzcCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIG5vdCBDSE1TZW5hYmxlZCB0aGVuCiAgICAgIEVTUGVuYWJsZWQgPSB0cnVlCiAgICAgIGZvciBpLHYgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgdi5OYW1lIH49IHNwZWFrZXIuTmFtZSB0aGVuCiAgICAgICAgICBFU1AodikKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbHNlCiAgICAgIG5vdGlmeSgnRVNQJywnRGlzYWJsZSBjaGFtcyAobm9jaGFtcykgYmVmb3JlIHVzaW5nIGVzcCcpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdub2VzcCcseyd1bmVzcCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBFU1BlbmFibGVkID0gZmFsc2UKICAgIGZvciBpLGMgaW4gcGFpcnMoQ09SRUdVSTpHZXRDaGlsZHJlbigpKSBkbwogICAgICBpZiBzdHJpbmcuc3ViKGMuTmFtZSwgLTQpID09ICdfRVNQJyB0aGVuCiAgICAgICAgYzpEZXN0cm95KCkKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdlc3B0cmFuc3BhcmVuY3knLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBlc3BUcmFuc3BhcmVuY3kgPSAoYXJnc1sxXSBhbmQgaXNOdW1iZXIoYXJnc1sxXSkgYW5kIGFyZ3NbMV0pIG9yIDAuMwogICAgdXBkYXRlc2F2ZXMoKQogIGVuZCkKICAKICBsb2NhbCBlc3BQYXJ0cyA9IHt9CiAgbG9jYWwgcGFydEVzcFRyaWdnZXIgPSBuaWwKICBmdW5jdGlvbiBwYXJ0QWRkZWQocGFydCkKICAgIGlmICNlc3BQYXJ0cyA+IDAgdGhlbgogICAgICBpZiBGaW5kSW5UYWJsZShlc3BQYXJ0cyxwYXJ0Lk5hbWU6bG93ZXIoKSkgdGhlbgogICAgICAgIGxvY2FsIGEgPSBJbnN0YW5jZS5uZXcoIkJveEhhbmRsZUFkb3JubWVudCIpCiAgICAgICAgYS5OYW1lID0gcGFydC5OYW1lOmxvd2VyKCkuLiJfUEVTUCIKICAgICAgICBhLlBhcmVudCA9IHBhcnQKICAgICAgICBhLkFkb3JuZWUgPSBwYXJ0CiAgICAgICAgYS5BbHdheXNPblRvcCA9IHRydWUKICAgICAgICBhLlpJbmRleCA9IDAKICAgICAgICBhLlNpemUgPSBwYXJ0LlNpemUKICAgICAgICBhLlRyYW5zcGFyZW5jeSA9IGVzcFRyYW5zcGFyZW5jeQogICAgICAgIGEuQ29sb3IgPSBCcmlja0NvbG9yLm5ldygiTGltZSBncmVlbiIpCiAgICAgIGVuZAogICAgZWxzZQogICAgICBwYXJ0RXNwVHJpZ2dlcjpEaXNjb25uZWN0KCkKICAgICAgcGFydEVzcFRyaWdnZXIgPSBuaWwKICAgIGVuZAogIGVuZAogIAogIGFkZGNtZCgncGFydGVzcCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHBhcnRFc3BOYW1lID0gZ2V0c3RyaW5nKDEpOmxvd2VyKCkKICAgIGlmIG5vdCBGaW5kSW5UYWJsZShlc3BQYXJ0cyxwYXJ0RXNwTmFtZSkgdGhlbgogICAgICB0YWJsZS5pbnNlcnQoZXNwUGFydHMscGFydEVzcE5hbWUpCiAgICAgIGZvciBpLHYgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgYW5kIHYuTmFtZTpsb3dlcigpID09IHBhcnRFc3BOYW1lIHRoZW4KICAgICAgICAgIGxvY2FsIGEgPSBJbnN0YW5jZS5uZXcoIkJveEhhbmRsZUFkb3JubWVudCIpCiAgICAgICAgICBhLk5hbWUgPSBwYXJ0RXNwTmFtZS4uIl9QRVNQIgogICAgICAgICAgYS5QYXJlbnQgPSB2CiAgICAgICAgICBhLkFkb3JuZWUgPSB2CiAgICAgICAgICBhLkFsd2F5c09uVG9wID0gdHJ1ZQogICAgICAgICAgYS5aSW5kZXggPSAwCiAgICAgICAgICBhLlNpemUgPSB2LlNpemUKICAgICAgICAgIGEuVHJhbnNwYXJlbmN5ID0gZXNwVHJhbnNwYXJlbmN5CiAgICAgICAgICBhLkNvbG9yID0gQnJpY2tDb2xvci5uZXcoIkxpbWUgZ3JlZW4iKQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAogICAgaWYgcGFydEVzcFRyaWdnZXIgPT0gbmlsIHRoZW4KICAgICAgcGFydEVzcFRyaWdnZXIgPSB3b3Jrc3BhY2UuRGVzY2VuZGFudEFkZGVkOkNvbm5lY3QocGFydEFkZGVkKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndW5wYXJ0ZXNwJyx7J25vcGFydGVzcCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBhcmdzWzFdIHRoZW4KICAgICAgbG9jYWwgcGFydEVzcE5hbWUgPSBnZXRzdHJpbmcoMSk6bG93ZXIoKQogICAgICBpZiBGaW5kSW5UYWJsZShlc3BQYXJ0cyxwYXJ0RXNwTmFtZSkgdGhlbgogICAgICAgIHRhYmxlLnJlbW92ZShlc3BQYXJ0cywgR2V0SW5UYWJsZShlc3BQYXJ0cywgcGFydEVzcE5hbWUpKQogICAgICBlbmQKICAgICAgZm9yIGksdiBpbiBwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICBpZiB2OklzQSgiQm94SGFuZGxlQWRvcm5tZW50IikgYW5kIHYuTmFtZSA9PSBwYXJ0RXNwTmFtZS4uJ19QRVNQJyB0aGVuCiAgICAgICAgICB2OkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVsc2UKICAgICAgcGFydEVzcFRyaWdnZXI6RGlzY29ubmVjdCgpCiAgICAgIHBhcnRFc3BUcmlnZ2VyID0gbmlsCiAgICAgIGVzcFBhcnRzID0ge30KICAgICAgZm9yIGksdiBpbiBwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICBpZiB2OklzQSgiQm94SGFuZGxlQWRvcm5tZW50IikgYW5kIHYuTmFtZTpzdWIoLTUpID09ICdfUEVTUCcgdGhlbgogICAgICAgICAgdjpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdjaGFtcycse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIG5vdCBFU1BlbmFibGVkIHRoZW4KICAgICAgQ0hNU2VuYWJsZWQgPSB0cnVlCiAgICAgIGZvciBpLHYgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgdi5OYW1lIH49IHNwZWFrZXIuTmFtZSB0aGVuCiAgICAgICAgICBDSE1TKHYpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZWxzZQogICAgICBub3RpZnkoJ0NoYW1zJywnRGlzYWJsZSBFU1AgKG5vZXNwKSBiZWZvcmUgdXNpbmcgY2hhbXMnKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnbm9jaGFtcycseyd1bmNoYW1zJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIENITVNlbmFibGVkID0gZmFsc2UKICAgIGZvciBpLHYgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgIGxvY2FsIGNobXNwbHIgPSB2CiAgICAgIGZvciBpLGMgaW4gcGFpcnMoQ09SRUdVSTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIGMuTmFtZSA9PSBjaG1zcGxyLk5hbWUuLidfQ0hNUycgdGhlbgogICAgICAgICAgYzpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdsb2NhdGUnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpIGRvCiAgICAgIExvY2F0ZShQbGF5ZXJzW3ZdKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnbm9sb2NhdGUnLHsndW5sb2NhdGUnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgcGxheWVycyA9IGdldFBsYXllcihhcmdzWzFdLCBzcGVha2VyKQogICAgaWYgYXJnc1sxXSB0aGVuCiAgICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycykgZG8KICAgICAgICBmb3IgaSxjIGluIHBhaXJzKENPUkVHVUk6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgIGlmIGMuTmFtZSA9PSBQbGF5ZXJzW3ZdLk5hbWUuLidfTEMnIHRoZW4KICAgICAgICAgICAgYzpEZXN0cm95KCkKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVsc2UKICAgICAgZm9yIGksYyBpbiBwYWlycyhDT1JFR1VJOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgc3RyaW5nLnN1YihjLk5hbWUsIC0zKSA9PSAnX0xDJyB0aGVuCiAgICAgICAgICBjOkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICB2aWV3aW5nID0gbmlsCiAgYWRkY21kKCd2aWV3Jyx7J3NwZWN0YXRlJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIFN0b3BGcmVlY2FtKCkKICAgIGxvY2FsIHBsYXllcnMgPSBnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycykgZG8KICAgICAgaWYgdmlld0RpZWQgdGhlbgogICAgICAgIHZpZXdEaWVkOkRpc2Nvbm5lY3QoKQogICAgICAgIHZpZXdDaGFuZ2VkOkRpc2Nvbm5lY3QoKQogICAgICBlbmQKICAgICAgdmlld2luZyA9IFBsYXllcnNbdl0KICAgICAgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ2FtZXJhU3ViamVjdCA9IHZpZXdpbmcuQ2hhcmFjdGVyCiAgICAgIG5vdGlmeSgnU3BlY3RhdGUnLCdWaWV3aW5nICcgLi4gUGxheWVyc1t2XS5OYW1lKQogICAgICBsb2NhbCBmdW5jdGlvbiB2aWV3RGllZEZ1bmMoKQogICAgICAgIHJlcGVhdCB3YWl0KCkgdW50aWwgUGxheWVyc1t2XS5DaGFyYWN0ZXIgfj0gbmlsIGFuZCBnZXRSb290KFBsYXllcnNbdl0uQ2hhcmFjdGVyKQogICAgICAgIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNhbWVyYVN1YmplY3QgPSB2aWV3aW5nLkNoYXJhY3RlcgogICAgICBlbmQKICAgICAgdmlld0RpZWQgPSBQbGF5ZXJzW3ZdLkNoYXJhY3RlckFkZGVkOkNvbm5lY3Qodmlld0RpZWRGdW5jKQogICAgICBsb2NhbCBmdW5jdGlvbiB2aWV3Q2hhbmdlZEZ1bmMoKQogICAgICAgIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNhbWVyYVN1YmplY3QgPSB2aWV3aW5nLkNoYXJhY3RlcgogICAgICBlbmQKICAgICAgdmlld0NoYW5nZWQgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYTpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIkNhbWVyYVN1YmplY3QiKTpDb25uZWN0KHZpZXdDaGFuZ2VkRnVuYykKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3ZpZXdwYXJ0Jyx7J3ZpZXdwJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIFN0b3BGcmVlY2FtKCkKICAgIGlmIGFyZ3NbMV0gdGhlbgogICAgICBmb3IgaSx2IGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgIGlmIHYuTmFtZTpsb3dlcigpID09IGdldHN0cmluZygxKTpsb3dlcigpIGFuZCB2OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICB3YWl0KDAuMSkKICAgICAgICAgIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNhbWVyYVN1YmplY3QgPSB2CiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndW52aWV3Jyx7J3Vuc3BlY3RhdGUnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgU3RvcEZyZWVjYW0oKQogICAgaWYgdmlld2luZyB+PSBuaWwgdGhlbgogICAgICB2aWV3aW5nID0gbmlsCiAgICAgIG5vdGlmeSgnU3BlY3RhdGUnLCdWaWV3IHR1cm5lZCBvZmYnKQogICAgZW5kCiAgICBpZiB2aWV3RGllZCB0aGVuCiAgICAgIHZpZXdEaWVkOkRpc2Nvbm5lY3QoKQogICAgICB2aWV3Q2hhbmdlZDpEaXNjb25uZWN0KCkKICAgIGVuZAogICAgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ2FtZXJhU3ViamVjdCA9IHNwZWFrZXIuQ2hhcmFjdGVyCiAgZW5kKQogIAogIAogIGZjUnVubmluZyA9IGZhbHNlCiAgbG9jYWwgQ2FtZXJhID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEKICB3b3Jrc3BhY2U6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJDdXJyZW50Q2FtZXJhIik6Q29ubmVjdChmdW5jdGlvbigpCiAgICBsb2NhbCBuZXdDYW1lcmEgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYQogICAgaWYgbmV3Q2FtZXJhIHRoZW4KICAgICAgQ2FtZXJhID0gbmV3Q2FtZXJhCiAgICBlbmQKICBlbmQpCiAgCiAgbG9jYWwgSU5QVVRfUFJJT1JJVFkgPSBFbnVtLkNvbnRleHRBY3Rpb25Qcmlvcml0eS5IaWdoLlZhbHVlCiAgCiAgU3ByaW5nID0ge30gZG8KICAgIFNwcmluZy5fX2luZGV4ID0gU3ByaW5nCiAgCiAgICBmdW5jdGlvbiBTcHJpbmcubmV3KGZyZXEsIHBvcykKICAgICAgbG9jYWwgc2VsZiA9IHNldG1ldGF0YWJsZSh7fSwgU3ByaW5nKQogICAgICBzZWxmLmYgPSBmcmVxCiAgICAgIHNlbGYucCA9IHBvcwogICAgICBzZWxmLnYgPSBwb3MqMAogICAgICByZXR1cm4gc2VsZgogICAgZW5kCiAgCiAgICBmdW5jdGlvbiBTcHJpbmc6VXBkYXRlKGR0LCBnb2FsKQogICAgICBsb2NhbCBmID0gc2VsZi5mKjIqbWF0aC5waQogICAgICBsb2NhbCBwMCA9IHNlbGYucAogICAgICBsb2NhbCB2MCA9IHNlbGYudgogIAogICAgICBsb2NhbCBvZmZzZXQgPSBnb2FsIC0gcDAKICAgICAgbG9jYWwgZGVjYXkgPSBtYXRoLmV4cCgtZipkdCkKICAKICAgICAgbG9jYWwgcDEgPSBnb2FsICsgKHYwKmR0IC0gb2Zmc2V0KihmKmR0ICsgMSkpKmRlY2F5CiAgICAgIGxvY2FsIHYxID0gKGYqZHQqKG9mZnNldCpmIC0gdjApICsgdjApKmRlY2F5CiAgCiAgICAgIHNlbGYucCA9IHAxCiAgICAgIHNlbGYudiA9IHYxCiAgCiAgICAgIHJldHVybiBwMQogICAgZW5kCiAgCiAgICBmdW5jdGlvbiBTcHJpbmc6UmVzZXQocG9zKQogICAgICBzZWxmLnAgPSBwb3MKICAgICAgc2VsZi52ID0gcG9zKjAKICAgIGVuZAogIGVuZAogIAogIGxvY2FsIGNhbWVyYVBvcyA9IFZlY3RvcjMubmV3KCkKICBsb2NhbCBjYW1lcmFSb3QgPSBWZWN0b3IyLm5ldygpCiAgCiAgbG9jYWwgdmVsU3ByaW5nID0gU3ByaW5nLm5ldyg1LCBWZWN0b3IzLm5ldygpKQogIGxvY2FsIHBhblNwcmluZyA9IFNwcmluZy5uZXcoNSwgVmVjdG9yMi5uZXcoKSkKICAKICBJbnB1dCA9IHt9IGRvCiAgCiAgICBrZXlib2FyZCA9IHsKICAgICAgVyA9IDAsCiAgICAgIEEgPSAwLAogICAgICBTID0gMCwKICAgICAgRCA9IDAsCiAgICAgIEUgPSAwLAogICAgICBRID0gMCwKICAgICAgVXAgPSAwLAogICAgICBEb3duID0gMCwKICAgICAgTGVmdFNoaWZ0ID0gMCwKICAgIH0KICAKICAgIG1vdXNlID0gewogICAgICBEZWx0YSA9IFZlY3RvcjIubmV3KCksCiAgICB9CiAgCiAgICBOQVZfS0VZQk9BUkRfU1BFRUQgPSBWZWN0b3IzLm5ldygxLCAxLCAxKQogICAgUEFOX01PVVNFX1NQRUVEID0gVmVjdG9yMi5uZXcoMSwgMSkqKG1hdGgucGkvNjQpCiAgICBOQVZfQURKX1NQRUVEID0gMC43NQogICAgTkFWX1NISUZUX01VTCA9IDAuMjUKICAKICAgIG5hdlNwZWVkID0gMQogIAogICAgZnVuY3Rpb24gSW5wdXQuVmVsKGR0KQogICAgICBuYXZTcGVlZCA9IG1hdGguY2xhbXAobmF2U3BlZWQgKyBkdCooa2V5Ym9hcmQuVXAgLSBrZXlib2FyZC5Eb3duKSpOQVZfQURKX1NQRUVELCAwLjAxLCA0KQogIAogICAgICBsb2NhbCBrS2V5Ym9hcmQgPSBWZWN0b3IzLm5ldygKICAgICAgICBrZXlib2FyZC5EIC0ga2V5Ym9hcmQuQSwKICAgICAgICBrZXlib2FyZC5FIC0ga2V5Ym9hcmQuUSwKICAgICAgICBrZXlib2FyZC5TIC0ga2V5Ym9hcmQuVwogICAgICApKk5BVl9LRVlCT0FSRF9TUEVFRAogIAogICAgICBsb2NhbCBzaGlmdCA9IFVzZXJJbnB1dFNlcnZpY2U6SXNLZXlEb3duKEVudW0uS2V5Q29kZS5MZWZ0U2hpZnQpCiAgCiAgICAgIHJldHVybiAoa0tleWJvYXJkKSoobmF2U3BlZWQqKHNoaWZ0IGFuZCBOQVZfU0hJRlRfTVVMIG9yIDEpKQogICAgZW5kCiAgCiAgICBmdW5jdGlvbiBJbnB1dC5QYW4oZHQpCiAgICAgIGxvY2FsIGtNb3VzZSA9IG1vdXNlLkRlbHRhKlBBTl9NT1VTRV9TUEVFRAogICAgICBtb3VzZS5EZWx0YSA9IFZlY3RvcjIubmV3KCkKICAgICAgcmV0dXJuIGtNb3VzZQogICAgZW5kCiAgCiAgICBkbwogICAgICBmdW5jdGlvbiBLZXlwcmVzcyhhY3Rpb24sIHN0YXRlLCBpbnB1dCkKICAgICAgICBrZXlib2FyZFtpbnB1dC5LZXlDb2RlLk5hbWVdID0gc3RhdGUgPT0gRW51bS5Vc2VySW5wdXRTdGF0ZS5CZWdpbiBhbmQgMSBvciAwCiAgICAgICAgcmV0dXJuIEVudW0uQ29udGV4dEFjdGlvblJlc3VsdC5TaW5rCiAgICAgIGVuZAogIAogICAgICBmdW5jdGlvbiBNb3VzZVBhbihhY3Rpb24sIHN0YXRlLCBpbnB1dCkKICAgICAgICBsb2NhbCBkZWx0YSA9IGlucHV0LkRlbHRhCiAgICAgICAgbW91c2UuRGVsdGEgPSBWZWN0b3IyLm5ldygtZGVsdGEueSwgLWRlbHRhLngpCiAgICAgICAgcmV0dXJuIEVudW0uQ29udGV4dEFjdGlvblJlc3VsdC5TaW5rCiAgICAgIGVuZAogIAogICAgICBmdW5jdGlvbiBaZXJvKHQpCiAgICAgICAgZm9yIGssIHYgaW4gcGFpcnModCkgZG8KICAgICAgICAgIHRba10gPSB2KjAKICAgICAgICBlbmQKICAgICAgZW5kCiAgCiAgICAgIGZ1bmN0aW9uIElucHV0LlN0YXJ0Q2FwdHVyZSgpCiAgICAgICAgQ29udGV4dEFjdGlvblNlcnZpY2U6QmluZEFjdGlvbkF0UHJpb3JpdHkoIkZyZWVjYW1LZXlib2FyZCIsS2V5cHJlc3MsZmFsc2UsSU5QVVRfUFJJT1JJVFksCiAgICAgICAgICBFbnVtLktleUNvZGUuVywKICAgICAgICAgIEVudW0uS2V5Q29kZS5BLAogICAgICAgICAgRW51bS5LZXlDb2RlLlMsCiAgICAgICAgICBFbnVtLktleUNvZGUuRCwKICAgICAgICAgIEVudW0uS2V5Q29kZS5FLAogICAgICAgICAgRW51bS5LZXlDb2RlLlEsCiAgICAgICAgICBFbnVtLktleUNvZGUuVXAsCiAgICAgICAgICBFbnVtLktleUNvZGUuRG93bgogICAgICAgICkKICAgICAgICBDb250ZXh0QWN0aW9uU2VydmljZTpCaW5kQWN0aW9uQXRQcmlvcml0eSgiRnJlZWNhbU1vdXNlUGFuIixNb3VzZVBhbixmYWxzZSxJTlBVVF9QUklPUklUWSxFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VNb3ZlbWVudCkKICAgICAgZW5kCiAgCiAgICAgIGZ1bmN0aW9uIElucHV0LlN0b3BDYXB0dXJlKCkKICAgICAgICBuYXZTcGVlZCA9IDEKICAgICAgICBaZXJvKGtleWJvYXJkKQogICAgICAgIFplcm8obW91c2UpCiAgICAgICAgQ29udGV4dEFjdGlvblNlcnZpY2U6VW5iaW5kQWN0aW9uKCJGcmVlY2FtS2V5Ym9hcmQiKQogICAgICAgIENvbnRleHRBY3Rpb25TZXJ2aWNlOlVuYmluZEFjdGlvbigiRnJlZWNhbU1vdXNlUGFuIikKICAgICAgZW5kCiAgICBlbmQKICBlbmQKICAKICBmdW5jdGlvbiBHZXRGb2N1c0Rpc3RhbmNlKGNhbWVyYUZyYW1lKQogICAgbG9jYWwgem5lYXIgPSAwLjEKICAgIGxvY2FsIHZpZXdwb3J0ID0gQ2FtZXJhLlZpZXdwb3J0U2l6ZQogICAgbG9jYWwgcHJvankgPSAyKm1hdGgudGFuKGNhbWVyYUZvdi8yKQogICAgbG9jYWwgcHJvanggPSB2aWV3cG9ydC54L3ZpZXdwb3J0LnkqcHJvankKICAgIGxvY2FsIGZ4ID0gY2FtZXJhRnJhbWUucmlnaHRWZWN0b3IKICAgIGxvY2FsIGZ5ID0gY2FtZXJhRnJhbWUudXBWZWN0b3IKICAgIGxvY2FsIGZ6ID0gY2FtZXJhRnJhbWUubG9va1ZlY3RvcgogIAogICAgbG9jYWwgbWluVmVjdCA9IFZlY3RvcjMubmV3KCkKICAgIGxvY2FsIG1pbkRpc3QgPSA1MTIKICAKICAgIGZvciB4ID0gMCwgMSwgMC41IGRvCiAgICAgIGZvciB5ID0gMCwgMSwgMC41IGRvCiAgICAgICAgbG9jYWwgY3ggPSAoeCAtIDAuNSkqcHJvangKICAgICAgICBsb2NhbCBjeSA9ICh5IC0gMC41KSpwcm9qeQogICAgICAgIGxvY2FsIG9mZnNldCA9IGZ4KmN4IC0gZnkqY3kgKyBmegogICAgICAgIGxvY2FsIG9yaWdpbiA9IGNhbWVyYUZyYW1lLnAgKyBvZmZzZXQqem5lYXIKICAgICAgICBsb2NhbCBfLCBoaXQgPSB3b3Jrc3BhY2U6RmluZFBhcnRPblJheShSYXkubmV3KG9yaWdpbiwgb2Zmc2V0LnVuaXQqbWluRGlzdCkpCiAgICAgICAgbG9jYWwgZGlzdCA9IChoaXQgLSBvcmlnaW4pLm1hZ25pdHVkZQogICAgICAgIGlmIG1pbkRpc3QgPiBkaXN0IHRoZW4KICAgICAgICAgIG1pbkRpc3QgPSBkaXN0CiAgICAgICAgICBtaW5WZWN0ID0gb2Zmc2V0LnVuaXQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICAKICAgIHJldHVybiBmejpEb3QobWluVmVjdCkqbWluRGlzdAogIGVuZAogIAogIGxvY2FsIGZ1bmN0aW9uIFN0ZXBGcmVlY2FtKGR0KQogICAgbG9jYWwgdmVsID0gdmVsU3ByaW5nOlVwZGF0ZShkdCwgSW5wdXQuVmVsKGR0KSkKICAgIGxvY2FsIHBhbiA9IHBhblNwcmluZzpVcGRhdGUoZHQsIElucHV0LlBhbihkdCkpCiAgCiAgICBsb2NhbCB6b29tRmFjdG9yID0gbWF0aC5zcXJ0KG1hdGgudGFuKG1hdGgucmFkKDcwLzIpKS9tYXRoLnRhbihtYXRoLnJhZChjYW1lcmFGb3YvMikpKQogIAogICAgY2FtZXJhUm90ID0gY2FtZXJhUm90ICsgcGFuKlZlY3RvcjIubmV3KDAuNzUsIDEpKjgqKGR0L3pvb21GYWN0b3IpCiAgICBjYW1lcmFSb3QgPSBWZWN0b3IyLm5ldyhtYXRoLmNsYW1wKGNhbWVyYVJvdC54LCAtbWF0aC5yYWQoOTApLCBtYXRoLnJhZCg5MCkpLCBjYW1lcmFSb3QueSUoMiptYXRoLnBpKSkKICAKICAgIGxvY2FsIGNhbWVyYUNGcmFtZSA9IENGcmFtZS5uZXcoY2FtZXJhUG9zKSpDRnJhbWUuZnJvbU9yaWVudGF0aW9uKGNhbWVyYVJvdC54LCBjYW1lcmFSb3QueSwgMCkqQ0ZyYW1lLm5ldyh2ZWwqVmVjdG9yMy5uZXcoMSwgMSwgMSkqNjQqZHQpCiAgICBjYW1lcmFQb3MgPSBjYW1lcmFDRnJhbWUucAogIAogICAgQ2FtZXJhLkNGcmFtZSA9IGNhbWVyYUNGcmFtZQogICAgQ2FtZXJhLkZvY3VzID0gY2FtZXJhQ0ZyYW1lKkNGcmFtZS5uZXcoMCwgMCwgLUdldEZvY3VzRGlzdGFuY2UoY2FtZXJhQ0ZyYW1lKSkKICAgIENhbWVyYS5GaWVsZE9mVmlldyA9IGNhbWVyYUZvdgogIGVuZAogIAogIGxvY2FsIFBsYXllclN0YXRlID0ge30gZG8KICAgIG1vdXNlQmVoYXZpb3IgPSAiIgogICAgbW91c2VJY29uRW5hYmxlZCA9ICIiCiAgICBjYW1lcmFUeXBlID0gIiIKICAgIGNhbWVyYUZvY3VzID0gIiIKICAgIGNhbWVyYUNGcmFtZSA9ICIiCiAgICBjYW1lcmFGaWVsZE9mVmlldyA9ICIiCiAgCiAgICBmdW5jdGlvbiBQbGF5ZXJTdGF0ZS5QdXNoKCkKICAgICAgY2FtZXJhRmllbGRPZlZpZXcgPSBDYW1lcmEuRmllbGRPZlZpZXcKICAgICAgQ2FtZXJhLkZpZWxkT2ZWaWV3ID0gNzAKICAKICAgICAgY2FtZXJhVHlwZSA9IENhbWVyYS5DYW1lcmFUeXBlCiAgICAgIENhbWVyYS5DYW1lcmFUeXBlID0gRW51bS5DYW1lcmFUeXBlLkN1c3RvbQogIAogICAgICBjYW1lcmFDRnJhbWUgPSBDYW1lcmEuQ0ZyYW1lCiAgICAgIGNhbWVyYUZvY3VzID0gQ2FtZXJhLkZvY3VzCiAgCiAgICAgIG1vdXNlSWNvbkVuYWJsZWQgPSBVc2VySW5wdXRTZXJ2aWNlLk1vdXNlSWNvbkVuYWJsZWQKICAgICAgVXNlcklucHV0U2VydmljZS5Nb3VzZUljb25FbmFibGVkID0gdHJ1ZQogIAogICAgICBtb3VzZUJlaGF2aW9yID0gVXNlcklucHV0U2VydmljZS5Nb3VzZUJlaGF2aW9yCiAgICAgIFVzZXJJbnB1dFNlcnZpY2UuTW91c2VCZWhhdmlvciA9IEVudW0uTW91c2VCZWhhdmlvci5EZWZhdWx0CiAgICBlbmQKICAKICAgIGZ1bmN0aW9uIFBsYXllclN0YXRlLlBvcCgpCiAgICAgIENhbWVyYS5GaWVsZE9mVmlldyA9IDcwCiAgCiAgICAgIENhbWVyYS5DYW1lcmFUeXBlID0gY2FtZXJhVHlwZQogICAgICBjYW1lcmFUeXBlID0gbmlsCiAgCiAgICAgIENhbWVyYS5DRnJhbWUgPSBjYW1lcmFDRnJhbWUKICAgICAgY2FtZXJhQ0ZyYW1lID0gbmlsCiAgCiAgICAgIENhbWVyYS5Gb2N1cyA9IGNhbWVyYUZvY3VzCiAgICAgIGNhbWVyYUZvY3VzID0gbmlsCiAgCiAgICAgIFVzZXJJbnB1dFNlcnZpY2UuTW91c2VJY29uRW5hYmxlZCA9IG1vdXNlSWNvbkVuYWJsZWQKICAgICAgbW91c2VJY29uRW5hYmxlZCA9IG5pbAogIAogICAgICBVc2VySW5wdXRTZXJ2aWNlLk1vdXNlQmVoYXZpb3IgPSBtb3VzZUJlaGF2aW9yCiAgICAgIG1vdXNlQmVoYXZpb3IgPSBuaWwKICAgIGVuZAogIGVuZAogIAogIGZ1bmN0aW9uIFN0YXJ0RnJlZWNhbShwb3MpCiAgICBpZiBmY1J1bm5pbmcgdGhlbgogICAgICBTdG9wRnJlZWNhbSgpCiAgICBlbmQKICAgIGxvY2FsIGNhbWVyYUNGcmFtZSA9IENhbWVyYS5DRnJhbWUKICAgIGlmIHBvcyB0aGVuCiAgICAgIGNhbWVyYUNGcmFtZSA9IHBvcwogICAgZW5kCiAgICBjYW1lcmFSb3QgPSBWZWN0b3IyLm5ldygpCiAgICBjYW1lcmFQb3MgPSBjYW1lcmFDRnJhbWUucAogICAgY2FtZXJhRm92ID0gQ2FtZXJhLkZpZWxkT2ZWaWV3CiAgCiAgICB2ZWxTcHJpbmc6UmVzZXQoVmVjdG9yMy5uZXcoKSkKICAgIHBhblNwcmluZzpSZXNldChWZWN0b3IyLm5ldygpKQogIAogICAgUGxheWVyU3RhdGUuUHVzaCgpCiAgICBSdW5TZXJ2aWNlOkJpbmRUb1JlbmRlclN0ZXAoIkZyZWVjYW0iLCBFbnVtLlJlbmRlclByaW9yaXR5LkNhbWVyYS5WYWx1ZSwgU3RlcEZyZWVjYW0pCiAgICBJbnB1dC5TdGFydENhcHR1cmUoKQogICAgZmNSdW5uaW5nID0gdHJ1ZQogIGVuZAogIAogIGZ1bmN0aW9uIFN0b3BGcmVlY2FtKCkKICAgIGlmIG5vdCBmY1J1bm5pbmcgdGhlbiByZXR1cm4gZW5kCiAgICBJbnB1dC5TdG9wQ2FwdHVyZSgpCiAgICBSdW5TZXJ2aWNlOlVuYmluZEZyb21SZW5kZXJTdGVwKCJGcmVlY2FtIikKICAgIFBsYXllclN0YXRlLlBvcCgpCiAgICB3b3Jrc3BhY2UuQ2FtZXJhLkZpZWxkT2ZWaWV3ID0gNzAKICAgIGZjUnVubmluZyA9IGZhbHNlCiAgZW5kCiAgCiAgYWRkY21kKCdmcmVlY2FtJyx7J2ZjJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIFN0YXJ0RnJlZWNhbSgpCiAgZW5kKQogIAogIGFkZGNtZCgnZnJlZWNhbXBvcycseydmY3BvcycsJ2ZjcCcsJ2ZyZWVjYW1wb3NpdGlvbicsJ2ZjcG9zaXRpb24nfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgbm90IGFyZ3NbMV0gdGhlbiByZXR1cm4gZW5kCiAgICBsb2NhbCBmcmVlY2FtUG9zID0gQ0ZyYW1lLm5ldyhhcmdzWzFdLGFyZ3NbMl0sYXJnc1szXSkKICAgIFN0YXJ0RnJlZWNhbShmcmVlY2FtUG9zKQogIGVuZCkKICAKICBhZGRjbWQoJ2ZyZWVjYW13YXlwb2ludCcseydmY3dwJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIFdQTmFtZSA9IHRvc3RyaW5nKGdldHN0cmluZygxKSkKICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyIHRoZW4KICAgICAgZm9yIGksXyBpbiBwYWlycyhXYXlQb2ludHMpIGRvCiAgICAgICAgbG9jYWwgeCA9IFdheVBvaW50c1tpXS5DT09SRFsxXQogICAgICAgIGxvY2FsIHkgPSBXYXlQb2ludHNbaV0uQ09PUkRbMl0KICAgICAgICBsb2NhbCB6ID0gV2F5UG9pbnRzW2ldLkNPT1JEWzNdCiAgICAgICAgaWYgdG9zdHJpbmcoV2F5UG9pbnRzW2ldLk5BTUUpOmxvd2VyKCkgPT0gdG9zdHJpbmcoV1BOYW1lKTpsb3dlcigpIHRoZW4KICAgICAgICAgIFN0YXJ0RnJlZWNhbShDRnJhbWUubmV3KHgseSx6KSkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIGZvciBpLF8gaW4gcGFpcnMocFdheVBvaW50cykgZG8KICAgICAgICBpZiB0b3N0cmluZyhwV2F5UG9pbnRzW2ldLk5BTUUpOmxvd2VyKCkgPT0gdG9zdHJpbmcoV1BOYW1lKTpsb3dlcigpIHRoZW4KICAgICAgICAgIFN0YXJ0RnJlZWNhbShDRnJhbWUubmV3KHBXYXlQb2ludHNbaV0uQ09PUkRbMV0uUG9zaXRpb24pKQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2ZyZWVjYW1nb3RvJyx7J2ZjZ290bycsJ2ZyZWVjYW10cCcsJ2ZjdHAnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgcGxheWVycyA9IGdldFBsYXllcihhcmdzWzFdLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhwbGF5ZXJzKSBkbwogICAgICBTdGFydEZyZWVjYW0oZ2V0Um9vdChQbGF5ZXJzW3ZdLkNoYXJhY3RlcikuQ0ZyYW1lKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndW5mcmVlY2FtJyx7J25vZnJlZWNhbScsJ3VuZmMnLCdub2ZjJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIFN0b3BGcmVlY2FtKCkKICBlbmQpCiAgCiAgYWRkY21kKCdmcmVlY2Ftc3BlZWQnLHsnZmNzcGVlZCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBGQ3NwZWVkID0gYXJnc1sxXSBvciAxCiAgICBpZiBpc051bWJlcihGQ3NwZWVkKSB0aGVuCiAgICAgIE5BVl9LRVlCT0FSRF9TUEVFRCA9IFZlY3RvcjMubmV3KEZDc3BlZWQsIEZDc3BlZWQsIEZDc3BlZWQpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdub3RpZnlmcmVlY2FtcG9zaXRpb24nLHsnbm90aWZ5ZmNwb3MnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgZmNSdW5uaW5nIHRoZW4KICAgICAgbG9jYWwgWCxZLFogPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUuUG9zaXRpb24uWCx3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUuUG9zaXRpb24uWSx3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUuUG9zaXRpb24uWgogICAgICBsb2NhbCBGb3JtYXQsIFJvdW5kID0gc3RyaW5nLmZvcm1hdCwgbWF0aC5yb3VuZAogICAgICBub3RpZnkoIkN1cnJlbnQgUG9zaXRpb24iLCBGb3JtYXQoIiVzLCAlcywgJXMiLCBSb3VuZChYKSwgUm91bmQoWSksIFJvdW5kKFopKSkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2NvcHlmcmVlY2FtcG9zaXRpb24nLHsnY29weWZjcG9zJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIGZjUnVubmluZyB0aGVuCiAgICAgIGxvY2FsIFgsWSxaID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lLlBvc2l0aW9uLlgsd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lLlBvc2l0aW9uLlksd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lLlBvc2l0aW9uLloKICAgICAgbG9jYWwgRm9ybWF0LCBSb3VuZCA9IHN0cmluZy5mb3JtYXQsIG1hdGgucm91bmQKICAgICAgdG9DbGlwYm9hcmQoRm9ybWF0KCIlcywgJXMsICVzIiwgUm91bmQoWCksIFJvdW5kKFkpLCBSb3VuZChaKSkpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdnb3RvY2FtZXJhJyx7J2dvdG9jYW0nLCd0b2NhbSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKS5DRnJhbWUgPSB3b3Jrc3BhY2UuQ2FtZXJhLkNGcmFtZQogIGVuZCkKICAKICBhZGRjbWQoJ3R3ZWVuZ290b2NhbWVyYScseyd0d2VlbmdvdG9jYW0nLCd0Z290b2NhbScsJ3R0b2NhbSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpLCBUd2VlbkluZm8ubmV3KHR3ZWVuU3BlZWQsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKSwge0NGcmFtZSA9IHdvcmtzcGFjZS5DYW1lcmEuQ0ZyYW1lfSk6UGxheSgpCiAgZW5kKQogIAogIGFkZGNtZCgnZm92Jyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgZm92ID0gYXJnc1sxXSBvciA3MAogICAgaWYgaXNOdW1iZXIoZm92KSB0aGVuCiAgICAgIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkZpZWxkT2ZWaWV3ID0gZm92CiAgICBlbmQKICBlbmQpCiAgCiAgbG9jYWwgcHJlTWF4Wm9vbSA9IFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2FtZXJhTWF4Wm9vbURpc3RhbmNlCiAgbG9jYWwgcHJlTWluWm9vbSA9IFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2FtZXJhTWluWm9vbURpc3RhbmNlCiAgYWRkY21kKCdsb29rYXQnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBzcGVha2VyLkNhbWVyYU1heFpvb21EaXN0YW5jZSB+PSAwLjUgdGhlbgogICAgICBwcmVNYXhab29tID0gc3BlYWtlci5DYW1lcmFNYXhab29tRGlzdGFuY2UKICAgICAgcHJlTWluWm9vbSA9IHNwZWFrZXIuQ2FtZXJhTWluWm9vbURpc3RhbmNlCiAgICBlbmQKICAgIHNwZWFrZXIuQ2FtZXJhTWF4Wm9vbURpc3RhbmNlID0gMC41CiAgICBzcGVha2VyLkNhbWVyYU1pblpvb21EaXN0YW5jZSA9IDAuNQogICAgd2FpdCgpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpIGRvCiAgICAgIGxvY2FsIHRhcmdldCA9IFBsYXllcnNbdl0uQ2hhcmFjdGVyCiAgICAgIGlmIHRhcmdldCBhbmQgdGFyZ2V0OkZpbmRGaXJzdENoaWxkKCdIZWFkJykgdGhlbgogICAgICAgIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNGcmFtZSA9IENGcmFtZS5uZXcod29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ0ZyYW1lLnAsIHRhcmdldC5IZWFkLkNGcmFtZS5wKQogICAgICAgIHdhaXQoMC4xKQogICAgICBlbmQKICAgIGVuZAogICAgc3BlYWtlci5DYW1lcmFNYXhab29tRGlzdGFuY2UgPSBwcmVNYXhab29tCiAgICBzcGVha2VyLkNhbWVyYU1pblpvb21EaXN0YW5jZSA9IHByZU1pblpvb20KICBlbmQpCiAgCiAgYWRkY21kKCdmaXhjYW0nLHsncmVzdG9yZWNhbSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBTdG9wRnJlZWNhbSgpCiAgICBleGVjQ21kKCd1bnZpZXcnKQogICAgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmE6cmVtb3ZlKCkKICAgIHdhaXQoLjEpCiAgICByZXBlYXQgd2FpdCgpIHVudGlsIHNwZWFrZXIuQ2hhcmFjdGVyIH49IG5pbAogICAgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ2FtZXJhU3ViamVjdCA9IHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoJ0h1bWFub2lkJykKICAgIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNhbWVyYVR5cGUgPSAiQ3VzdG9tIgogICAgc3BlYWtlci5DYW1lcmFNaW5ab29tRGlzdGFuY2UgPSAwLjUKICAgIHNwZWFrZXIuQ2FtZXJhTWF4Wm9vbURpc3RhbmNlID0gNDAwCiAgICBzcGVha2VyLkNhbWVyYU1vZGUgPSAiQ2xhc3NpYyIKICAgIHNwZWFrZXIuQ2hhcmFjdGVyLkhlYWQuQW5jaG9yZWQgPSBmYWxzZQogIGVuZCkKICAKICBhZGRjbWQoJ2VuYWJsZXNoaWZ0bG9jaycseydlbmFibGVzbCcsJ3NoaWZ0bG9jayd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBzcGVha2VyLkRldkVuYWJsZU1vdXNlTG9jayA9IHRydWUKICAgIG5vdGlmeSgnU2hpZnRsb2NrJywnU2hpZnQgbG9jayBpcyBub3cgYXZhaWxhYmxlJykKICBlbmQpCiAgCiAgYWRkY21kKCdmaXJzdHAnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBzcGVha2VyLkNhbWVyYU1vZGUgPSAiTG9ja0ZpcnN0UGVyc29uIgogIGVuZCkKICAKICBhZGRjbWQoJ3RoaXJkcCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIHNwZWFrZXIuQ2FtZXJhTW9kZSA9ICJDbGFzc2ljIgogIGVuZCkKICAKICBhZGRjbWQoJ25vY2xpcGNhbScsIHsnbmNjYW0nfSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHNjID0gKGRlYnVnIGFuZCBkZWJ1Zy5zZXRjb25zdGFudCkgb3Igc2V0Y29uc3RhbnQKICAgIGxvY2FsIGdjID0gKGRlYnVnIGFuZCBkZWJ1Zy5nZXRjb25zdGFudHMpIG9yIGdldGNvbnN0YW50cwogICAgaWYgbm90IHNjIG9yIG5vdCBnZXRnYyBvciBub3QgZ2MgdGhlbgogICAgICByZXR1cm4gbm90aWZ5KCdJbmNvbXBhdGlibGUgRXhwbG9pdCcsICdZb3VyIGV4cGxvaXQgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIGNvbW1hbmQgKG1pc3Npbmcgc2V0Y29uc3RhbnQgb3IgZ2V0Y29uc3RhbnRzIG9yIGdldGdjKScpCiAgICBlbmQKICAgIGxvY2FsIHBvcCA9IHNwZWFrZXIuUGxheWVyU2NyaXB0cy5QbGF5ZXJNb2R1bGUuQ2FtZXJhTW9kdWxlLlpvb21Db250cm9sbGVyLlBvcHBlcgogICAgZm9yIF8sIHYgaW4gcGFpcnMoZ2V0Z2MoKSkgZG8KICAgICAgaWYgdHlwZSh2KSA9PSAnZnVuY3Rpb24nIGFuZCBnZXRmZW52KHYpLnNjcmlwdCA9PSBwb3AgdGhlbgogICAgICAgIGZvciBpLCB2MSBpbiBwYWlycyhnYyh2KSkgZG8KICAgICAgICAgIGlmIHRvbnVtYmVyKHYxKSA9PSAuMjUgdGhlbgogICAgICAgICAgICBzYyh2LCBpLCAwKQogICAgICAgICAgZWxzZWlmIHRvbnVtYmVyKHYxKSA9PSAwIHRoZW4KICAgICAgICAgICAgc2ModiwgaSwgLjI1KQogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnbWF4em9vbScse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIHNwZWFrZXIuQ2FtZXJhTWF4Wm9vbURpc3RhbmNlID0gYXJnc1sxXQogIGVuZCkKICAKICBhZGRjbWQoJ21pbnpvb20nLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBzcGVha2VyLkNhbWVyYU1pblpvb21EaXN0YW5jZSA9IGFyZ3NbMV0KICBlbmQpCiAgCiAgYWRkY21kKCdjYW1kaXN0YW5jZScse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIGNhbU1heCA9IHNwZWFrZXIuQ2FtZXJhTWF4Wm9vbURpc3RhbmNlCiAgICBsb2NhbCBjYW1NaW4gPSBzcGVha2VyLkNhbWVyYU1pblpvb21EaXN0YW5jZQogICAgaWYgY2FtTWF4IDwgdG9udW1iZXIoYXJnc1sxXSkgdGhlbgogICAgICBjYW1NYXggPSBhcmdzWzFdCiAgICBlbmQKICAgIHNwZWFrZXIuQ2FtZXJhTWF4Wm9vbURpc3RhbmNlID0gYXJnc1sxXQogICAgc3BlYWtlci5DYW1lcmFNaW5ab29tRGlzdGFuY2UgPSBhcmdzWzFdCiAgICB3YWl0KCkKICAgIHNwZWFrZXIuQ2FtZXJhTWF4Wm9vbURpc3RhbmNlID0gY2FtTWF4CiAgICBzcGVha2VyLkNhbWVyYU1pblpvb21EaXN0YW5jZSA9IGNhbU1pbgogIGVuZCkKICAKICBhZGRjbWQoJ3VubG9ja3dzJyx7J3VubG9ja3dvcmtzcGFjZSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgdi5Mb2NrZWQgPSBmYWxzZQogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2xvY2t3cycseydsb2Nrd29ya3NwYWNlJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikgCiAgICBmb3IgaSx2IGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgdi5Mb2NrZWQgPSB0cnVlCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnZGVsZXRlJyx7J3JlbW92ZSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiB2Lk5hbWU6bG93ZXIoKSA9PSBnZXRzdHJpbmcoMSk6bG93ZXIoKSB0aGVuCiAgICAgICAgdjpEZXN0cm95KCkKICAgICAgZW5kCiAgICBlbmQKICAgIG5vdGlmeSgnSXRlbShzKSBEZWxldGVkJywnRGVsZXRlZCAnIC4uZ2V0c3RyaW5nKDEpKQogIGVuZCkKICAKICBhZGRjbWQoJ2RlbGV0ZWNsYXNzJyx7J3JlbW92ZWNsYXNzJywnZGVsZXRlY2xhc3NuYW1lJywncmVtb3ZlY2xhc3NuYW1lJywnZGMnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgaWYgdi5DbGFzc05hbWU6bG93ZXIoKSA9PSBnZXRzdHJpbmcoMSk6bG93ZXIoKSB0aGVuCiAgICAgICAgdjpEZXN0cm95KCkKICAgICAgZW5kCiAgICBlbmQKICAgIG5vdGlmeSgnSXRlbShzKSBEZWxldGVkJywnRGVsZXRlZCBpdGVtcyB3aXRoIENsYXNzTmFtZSAnIC4uZ2V0c3RyaW5nKDEpKQogIGVuZCkKICAKICBhZGRjbWQoJ2NoYXJkZWxldGUnLHsnY2hhcnJlbW92ZScsJ2NkJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMoc3BlYWtlci5DaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgaWYgdi5OYW1lOmxvd2VyKCkgPT0gZ2V0c3RyaW5nKDEpOmxvd2VyKCkgdGhlbgogICAgICAgIHY6RGVzdHJveSgpCiAgICAgIGVuZAogICAgZW5kCiAgICBub3RpZnkoJ0l0ZW0ocykgRGVsZXRlZCcsJ0RlbGV0ZWQgJyAuLmdldHN0cmluZygxKSkKICBlbmQpCiAgCiAgYWRkY21kKCdjaGFyZGVsZXRlY2xhc3MnLHsnY2hhcnJlbW92ZWNsYXNzJywnY2hhcmRlbGV0ZWNsYXNzbmFtZScsJ2NoYXJyZW1vdmVjbGFzc25hbWUnLCdjZGMnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhzcGVha2VyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiB2LkNsYXNzTmFtZTpsb3dlcigpID09IGdldHN0cmluZygxKTpsb3dlcigpIHRoZW4KICAgICAgICB2OkRlc3Ryb3koKQogICAgICBlbmQKICAgIGVuZAogICAgbm90aWZ5KCdJdGVtKHMpIERlbGV0ZWQnLCdEZWxldGVkIGl0ZW1zIHdpdGggQ2xhc3NOYW1lICcgLi5nZXRzdHJpbmcoMSkpCiAgZW5kKQogIAogIGFkZGNtZCgnZGVsZXRldmVsb2NpdHknLHsnZHYnLCdyZW1vdmV2ZWxvY2l0eScsJ3JlbW92ZWZvcmNlcyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHNwZWFrZXIuQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgIGlmIHY6SXNBKCJCb2R5VmVsb2NpdHkiKSBvciB2OklzQSgiQm9keUd5cm8iKSBvciB2OklzQSgiUm9ja2V0UHJvcHVsc2lvbiIpIG9yIHY6SXNBKCJCb2R5VGhydXN0Iikgb3IgdjpJc0EoIkJvZHlBbmd1bGFyVmVsb2NpdHkiKSBvciB2OklzQSgiQW5ndWxhclZlbG9jaXR5Iikgb3IgdjpJc0EoIkJvZHlGb3JjZSIpIG9yIHY6SXNBKCJWZWN0b3JGb3JjZSIpIG9yIHY6SXNBKCJMaW5lRm9yY2UiKSB0aGVuCiAgICAgICAgdjpEZXN0cm95KCkKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdkZWxldGVpbnZpc3BhcnRzJyx7J2RlbGV0ZWludmlzaWJsZXBhcnRzJywnZGlwJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgIGlmIHY6SXNBKCJCYXNlUGFydCIpIGFuZCB2LlRyYW5zcGFyZW5jeSA9PSAxIGFuZCB2LkNhbkNvbGxpZGUgdGhlbgogICAgICAgIHY6RGVzdHJveSgpCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGxvY2FsIHNob3duUGFydHMgPSB7fQogIGFkZGNtZCgnaW52aXNpYmxlcGFydHMnLHsnaW52aXNwYXJ0cyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSBhbmQgdi5UcmFuc3BhcmVuY3kgPT0gMSB0aGVuCiAgICAgICAgaWYgbm90IHRhYmxlLmZpbmQoc2hvd25QYXJ0cyx2KSB0aGVuCiAgICAgICAgICB0YWJsZS5pbnNlcnQoc2hvd25QYXJ0cyx2KQogICAgICAgIGVuZAogICAgICAgIHYuVHJhbnNwYXJlbmN5ID0gMAogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3VuaW52aXNpYmxlcGFydHMnLHsndW5pbnZpc3BhcnRzJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMoc2hvd25QYXJ0cykgZG8KICAgICAgdi5UcmFuc3BhcmVuY3kgPSAxCiAgICBlbmQKICAgIHNob3duUGFydHMgPSB7fQogIGVuZCkKICAKICBhZGRjbWQoJ2J0b29scycse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpID0gMSwgNCBkbwogICAgICBsb2NhbCBUb29sID0gSW5zdGFuY2UubmV3KCJIb3BwZXJCaW4iKQogICAgICBUb29sLkJpblR5cGUgPSBpCiAgICAgIFRvb2wuTmFtZSA9IHJhbmRvbVN0cmluZygpCiAgICAgIFRvb2wuUGFyZW50ID0gc3BlYWtlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkJhY2twYWNrIikKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2YzeCcseydmZXgnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9hZHN0cmluZyhnYW1lOkdldE9iamVjdHMoInJieGFzc2V0aWQ6Ly82Njk1NjQ0Mjk5IilbMV0uU291cmNlKSgpCiAgZW5kKQogIAogIGFkZGNtZCgncGFydHBhdGgnLHsncGFydG5hbWUnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgc2VsZWN0UGFydCgpCiAgZW5kKQogIAogIGFkZGNtZCgnYW50aWFmaycseydhbnRpaWRsZSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBHQyA9IGdldGNvbm5lY3Rpb25zIG9yIGdldF9zaWduYWxfY29ucwogICAgaWYgR0MgdGhlbgogICAgICBmb3IgaSx2IGluIHBhaXJzKEdDKFBsYXllcnMuTG9jYWxQbGF5ZXIuSWRsZWQpKSBkbwogICAgICAgIGlmIHZbIkRpc2FibGUiXSB0aGVuCiAgICAgICAgICB2WyJEaXNhYmxlIl0odikKICAgICAgICBlbHNlaWYgdlsiRGlzY29ubmVjdCJdIHRoZW4KICAgICAgICAgIHZbIkRpc2Nvbm5lY3QiXSh2KQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVsc2UKICAgICAgbG9jYWwgVmlydHVhbFVzZXIgPSBjbG9uZXJlZihnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxVc2VyIikpCiAgICAgIFBsYXllcnMuTG9jYWxQbGF5ZXIuSWRsZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgVmlydHVhbFVzZXI6Q2FwdHVyZUNvbnRyb2xsZXIoKQogICAgICAgIFZpcnR1YWxVc2VyOkNsaWNrQnV0dG9uMihWZWN0b3IyLm5ldygpKQogICAgICBlbmQpCiAgICBlbmQKICAgIGlmIG5vdCAoYXJnc1sxXSBhbmQgdG9zdHJpbmcoYXJnc1sxXSkgPT0gJ25vbm90aWZ5JykgdGhlbiBub3RpZnkoJ0FudGkgSWRsZScsJ0FudGkgaWRsZSBpcyBlbmFibGVkJykgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgiZGF0YWxpbWl0Iiwge30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiB0b251bWJlcihhcmdzWzFdKSB0aGVuCiAgICAgIE5ldHdvcmtDbGllbnQ6U2V0T3V0Z29pbmdLQlBTTGltaXQoYXJnc1sxXSkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoInJlcGxpY2F0aW9ubGFnIiwgeyJiYWNrdHJhY2sifSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIHRvbnVtYmVyKGFyZ3NbMV0pIHRoZW4KICAgICAgc2V0dGluZ3MoKTpHZXRTZXJ2aWNlKCJOZXR3b3JrU2V0dGluZ3MiKS5JbmNvbWluZ1JlcGxpY2F0aW9uTGFnID0gYXJnc1sxXQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgibm9wcm9tcHRzIiwgeyJub3B1cmNoYXNlcHJvbXB0cyJ9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgQ09SRUdVSS5QdXJjaGFzZVByb21wdC5FbmFibGVkID0gZmFsc2UKICBlbmQpCiAgCiAgYWRkY21kKCJzaG93cHJvbXB0cyIsIHsic2hvd3B1cmNoYXNlcHJvbXB0cyJ9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgQ09SRUdVSS5QdXJjaGFzZVByb21wdC5FbmFibGVkID0gdHJ1ZQogIGVuZCkKICAKICBwcm9tcHROZXdSaWcgPSBmdW5jdGlvbihzcGVha2VyLCByaWcpCiAgICBsb2NhbCBodW1hbm9pZCA9IHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIkh1bWFub2lkIikKICAgIGlmIGh1bWFub2lkIHRoZW4KICAgICAgQXZhdGFyRWRpdG9yU2VydmljZTpQcm9tcHRTYXZlQXZhdGFyKGh1bWFub2lkLkh1bWFub2lkRGVzY3JpcHRpb24sIEVudW0uSHVtYW5vaWRSaWdUeXBlW3JpZ10pCiAgICAgIGxvY2FsIHJlc3VsdCA9IEF2YXRhckVkaXRvclNlcnZpY2UuUHJvbXB0U2F2ZUF2YXRhckNvbXBsZXRlZDpXYWl0KCkKICAgICAgaWYgcmVzdWx0ID09IEVudW0uQXZhdGFyUHJvbXB0UmVzdWx0LlN1Y2Nlc3MgdGhlbgogICAgICAgIGV4ZWNDbWQoInJlc2V0IikKICAgICAgZW5kCiAgICBlbmQKICBlbmQKICAKICBhZGRjbWQoInByb21wdHI2Iiwge30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBwcm9tcHROZXdSaWcoc3BlYWtlciwgIlI2IikKICBlbmQpCiAgCiAgYWRkY21kKCJwcm9tcHRyMTUiLCB7fSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIHByb21wdE5ld1JpZyhzcGVha2VyLCAiUjE1IikKICBlbmQpCiAgCiAgYWRkY21kKCJ3YWxsd2FsayIsIHsid2Fsa29ud2FsbHMifSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgICAgbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9pbmZ5aWZmL2JhY2t1cC9tYWluL3dhbGx3YWxrZXIubHVhIikpKCkKICBlbmQpCiAgCiAgYWRkY21kKCdhZ2UnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBsb2NhbCBhZ2VzID0ge30KICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycykgZG8KICAgICAgbG9jYWwgcCA9IFBsYXllcnNbdl0KICAgICAgdGFibGUuaW5zZXJ0KGFnZXMsIHAuTmFtZS4uIidzIGFnZSBpczogIi4ucC5BY2NvdW50QWdlKQogICAgZW5kCiAgICBub3RpZnkoJ0FjY291bnQgQWdlJyx0YWJsZS5jb25jYXQoYWdlcywgJyxcbicpKQogIGVuZCkKICAKICBhZGRjbWQoJ2NoYXRhZ2UnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBsb2NhbCBhZ2VzID0ge30KICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycykgZG8KICAgICAgbG9jYWwgcCA9IFBsYXllcnNbdl0KICAgICAgdGFibGUuaW5zZXJ0KGFnZXMsIHAuTmFtZS4uIidzIGFnZSBpczogIi4ucC5BY2NvdW50QWdlKQogICAgZW5kCiAgICBsb2NhbCBjaGF0U3RyaW5nID0gdGFibGUuY29uY2F0KGFnZXMsICcsICcpCiAgICBjaGF0TWVzc2FnZShjaGF0U3RyaW5nKQogIGVuZCkKICAKICBhZGRjbWQoJ2pvaW5kYXRlJyx7J2pkJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHBsYXllcnMgPSBnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgIGxvY2FsIGRhdGVzID0ge30KICAgIG5vdGlmeSgiTG9hZGluZyIsJ0hvbGQgb24gYSBzZWMnKQogICAgZm9yIGksdiBpbiBwYWlycyhwbGF5ZXJzKSBkbwogICAgICBsb2NhbCB1c2VyID0gZ2FtZTpIdHRwR2V0KCJodHRwczovL3VzZXJzLnJvYmxveC5jb20vdjEvdXNlcnMvIi4uUGxheWVyc1t2XS5Vc2VySWQpCiAgICAgIGxvY2FsIGpzb24gPSBIdHRwU2VydmljZTpKU09ORGVjb2RlKHVzZXIpCiAgICAgIGxvY2FsIGRhdGUgPSBqc29uWyJjcmVhdGVkIl06c3ViKDEsMTApCiAgICAgIGxvY2FsIHNwbGl0RGF0ZXMgPSBzdHJpbmcuc3BsaXQoZGF0ZSwiLSIpCiAgICAgIHRhYmxlLmluc2VydChkYXRlcyxQbGF5ZXJzW3ZdLk5hbWUuLiIgam9pbmVkOiAiLi5zcGxpdERhdGVzWzJdLi4iLyIuLnNwbGl0RGF0ZXNbM10uLiIvIi4uc3BsaXREYXRlc1sxXSkKICAgIGVuZAogICAgbm90aWZ5KCdKb2luIERhdGUgKE1vbnRoL0RheS9ZZWFyKScsdGFibGUuY29uY2F0KGRhdGVzLCAnLFxuJykpCiAgZW5kKQogIAogIGFkZGNtZCgnY2hhdGpvaW5kYXRlJyx7J2NqZCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBsb2NhbCBkYXRlcyA9IHt9CiAgICBub3RpZnkoIkxvYWRpbmciLCdIb2xkIG9uIGEgc2VjJykKICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycykgZG8KICAgICAgbG9jYWwgdXNlciA9IGdhbWU6SHR0cEdldCgiaHR0cHM6Ly91c2Vycy5yb2Jsb3guY29tL3YxL3VzZXJzLyIuLlBsYXllcnNbdl0uVXNlcklkKQogICAgICBsb2NhbCBqc29uID0gSHR0cFNlcnZpY2U6SlNPTkRlY29kZSh1c2VyKQogICAgICBsb2NhbCBkYXRlID0ganNvblsiY3JlYXRlZCJdOnN1YigxLDEwKQogICAgICBsb2NhbCBzcGxpdERhdGVzID0gc3RyaW5nLnNwbGl0KGRhdGUsIi0iKQogICAgICB0YWJsZS5pbnNlcnQoZGF0ZXMsUGxheWVyc1t2XS5OYW1lLi4iIGpvaW5lZDogIi4uc3BsaXREYXRlc1syXS4uIi8iLi5zcGxpdERhdGVzWzNdLi4iLyIuLnNwbGl0RGF0ZXNbMV0pCiAgICBlbmQKICAgIGxvY2FsIGNoYXRTdHJpbmcgPSB0YWJsZS5jb25jYXQoZGF0ZXMsICcsICcpCiAgICBjaGF0TWVzc2FnZShjaGF0U3RyaW5nKQogIGVuZCkKICAKICBhZGRjbWQoJ2NvcHluYW1lJyx7J2NvcHl1c2VyJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHBsYXllcnMgPSBnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycykgZG8KICAgICAgbG9jYWwgbmFtZSA9IHRvc3RyaW5nKFBsYXllcnNbdl0uTmFtZSkKICAgICAgdG9DbGlwYm9hcmQobmFtZSkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3VzZXJpZCcseydpZCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpIGRvCiAgICAgIGxvY2FsIGlkID0gdG9zdHJpbmcoUGxheWVyc1t2XS5Vc2VySWQpCiAgICAgIG5vdGlmeSgnVXNlciBJRCcsaWQpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdjb3B5aWQnLHsnY29weXVzZXJpZCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpIGRvCiAgICAgIGxvY2FsIGlkID0gdG9zdHJpbmcoUGxheWVyc1t2XS5Vc2VySWQpCiAgICAgIHRvQ2xpcGJvYXJkKGlkKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnY3JlYXRvcmlkJyx7J2NyZWF0b3InfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgZ2FtZS5DcmVhdG9yVHlwZSA9PSBFbnVtLkNyZWF0b3JUeXBlLlVzZXIgdGhlbgogICAgICBub3RpZnkoJ0NyZWF0b3IgSUQnLGdhbWUuQ3JlYXRvcklkKQogICAgZWxzZWlmIGdhbWUuQ3JlYXRvclR5cGUgPT0gRW51bS5DcmVhdG9yVHlwZS5Hcm91cCB0aGVuCiAgICAgIGxvY2FsIE93bmVySUQgPSBHcm91cFNlcnZpY2U6R2V0R3JvdXBJbmZvQXN5bmMoZ2FtZS5DcmVhdG9ySWQpLk93bmVyLklkCiAgICAgIHNwZWFrZXIuVXNlcklkID0gT3duZXJJRAogICAgICBub3RpZnkoJ0NyZWF0b3IgSUQnLE93bmVySUQpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdjb3B5Y3JlYXRvcmlkJyx7J2NvcHljcmVhdG9yJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIGdhbWUuQ3JlYXRvclR5cGUgPT0gRW51bS5DcmVhdG9yVHlwZS5Vc2VyIHRoZW4KICAgICAgdG9DbGlwYm9hcmQoZ2FtZS5DcmVhdG9ySWQpCiAgICAgIG5vdGlmeSgnQ29waWVkIElEJywnQ29waWVkIGNyZWF0b3IgSUQgdG8gY2xpcGJvYXJkJykKICAgIGVsc2VpZiBnYW1lLkNyZWF0b3JUeXBlID09IEVudW0uQ3JlYXRvclR5cGUuR3JvdXAgdGhlbgogICAgICBsb2NhbCBPd25lcklEID0gR3JvdXBTZXJ2aWNlOkdldEdyb3VwSW5mb0FzeW5jKGdhbWUuQ3JlYXRvcklkKS5Pd25lci5JZAogICAgICB0b0NsaXBib2FyZChPd25lcklEKQogICAgICBub3RpZnkoJ0NvcGllZCBJRCcsJ0NvcGllZCBjcmVhdG9yIElEIHRvIGNsaXBib2FyZCcpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdzZXRjcmVhdG9yaWQnLHsnc2V0Y3JlYXRvcid9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBnYW1lLkNyZWF0b3JUeXBlID09IEVudW0uQ3JlYXRvclR5cGUuVXNlciB0aGVuCiAgICAgIHNwZWFrZXIuVXNlcklkID0gZ2FtZS5DcmVhdG9ySWQKICAgICAgbm90aWZ5KCdTZXQgSUQnLCdTZXQgVXNlcklkIHRvICcuLmdhbWUuQ3JlYXRvcklkKQogICAgZWxzZWlmIGdhbWUuQ3JlYXRvclR5cGUgPT0gRW51bS5DcmVhdG9yVHlwZS5Hcm91cCB0aGVuCiAgICAgIGxvY2FsIE93bmVySUQgPSBHcm91cFNlcnZpY2U6R2V0R3JvdXBJbmZvQXN5bmMoZ2FtZS5DcmVhdG9ySWQpLk93bmVyLklkCiAgICAgIHNwZWFrZXIuVXNlcklkID0gT3duZXJJRAogICAgICBub3RpZnkoJ1NldCBJRCcsJ1NldCBVc2VySWQgdG8gJy4uT3duZXJJRCkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2FwcGVhcmFuY2VpZCcseydhaWQnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgcGxheWVycyA9IGdldFBsYXllcihhcmdzWzFdLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhwbGF5ZXJzKSBkbwogICAgICBsb2NhbCBhaWQgPSB0b3N0cmluZyhQbGF5ZXJzW3ZdLkNoYXJhY3RlckFwcGVhcmFuY2VJZCkKICAgICAgbm90aWZ5KCdBcHBlYXJhbmNlIElEJyxhaWQpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdjb3B5YXBwZWFyYW5jZWlkJyx7J2NhaWQnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgcGxheWVycyA9IGdldFBsYXllcihhcmdzWzFdLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhwbGF5ZXJzKSBkbwogICAgICBsb2NhbCBhaWQgPSB0b3N0cmluZyhQbGF5ZXJzW3ZdLkNoYXJhY3RlckFwcGVhcmFuY2VJZCkKICAgICAgdG9DbGlwYm9hcmQoYWlkKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnbm9yZW5kZXInLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBSdW5TZXJ2aWNlOlNldDNkUmVuZGVyaW5nRW5hYmxlZChmYWxzZSkKICBlbmQpCiAgCiAgYWRkY21kKCdyZW5kZXInLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBSdW5TZXJ2aWNlOlNldDNkUmVuZGVyaW5nRW5hYmxlZCh0cnVlKQogIGVuZCkKICAKICBhZGRjbWQoJzIwMjJtYXRlcmlhbHMnLHsndXNlMjAyMm1hdGVyaWFscyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBzZXRoaWRkZW4gdGhlbgogICAgICBzZXRoaWRkZW4oTWF0ZXJpYWxTZXJ2aWNlLCAiVXNlMjAyMk1hdGVyaWFscyIsIHRydWUpCiAgICBlbHNlCiAgICAgIG5vdGlmeSgnSW5jb21wYXRpYmxlIEV4cGxvaXQnLCdZb3VyIGV4cGxvaXQgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIGNvbW1hbmQgKG1pc3Npbmcgc2V0aGlkZGVucHJvcGVydHkpJykKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3VuMjAyMm1hdGVyaWFscycseyd1bnVzZTIwMjJtYXRlcmlhbHMnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgc2V0aGlkZGVuIHRoZW4KICAgICAgc2V0aGlkZGVuKE1hdGVyaWFsU2VydmljZSwgIlVzZTIwMjJNYXRlcmlhbHMiLCBmYWxzZSkKICAgIGVsc2UKICAgICAgbm90aWZ5KCdJbmNvbXBhdGlibGUgRXhwbG9pdCcsJ1lvdXIgZXhwbG9pdCBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgY29tbWFuZCAobWlzc2luZyBzZXRoaWRkZW5wcm9wZXJ0eSknKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnZ290bycseyd0byd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpZG8KICAgICAgaWYgUGxheWVyc1t2XS5DaGFyYWN0ZXIgfj0gbmlsIHRoZW4KICAgICAgICBpZiBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykgYW5kIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TZWF0UGFydCB0aGVuCiAgICAgICAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2l0ID0gZmFsc2UKICAgICAgICAgIHdhaXQoLjEpCiAgICAgICAgZW5kCiAgICAgICAgZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikuQ0ZyYW1lID0gZ2V0Um9vdChQbGF5ZXJzW3ZdLkNoYXJhY3RlcikuQ0ZyYW1lICsgVmVjdG9yMy5uZXcoMywxLDApCiAgICAgIGVuZAogICAgZW5kCiAgICBleGVjQ21kKCdicmVha3ZlbG9jaXR5JykKICBlbmQpCiAgCiAgYWRkY21kKCd0d2VlbmdvdG8nLHsndGdvdG8nLCd0dG8nLCd0d2VlbnRvJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHBsYXllcnMgPSBnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycylkbwogICAgICBpZiBQbGF5ZXJzW3ZdLkNoYXJhY3RlciB+PSBuaWwgdGhlbgogICAgICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKSBhbmQgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlNlYXRQYXJ0IHRoZW4KICAgICAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TaXQgPSBmYWxzZQogICAgICAgICAgd2FpdCguMSkKICAgICAgICBlbmQKICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpLCBUd2VlbkluZm8ubmV3KHR3ZWVuU3BlZWQsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKSwge0NGcmFtZSA9IGdldFJvb3QoUGxheWVyc1t2XS5DaGFyYWN0ZXIpLkNGcmFtZSArIFZlY3RvcjMubmV3KDMsMSwwKX0pOlBsYXkoKQogICAgICBlbmQKICAgIGVuZAogICAgZXhlY0NtZCgnYnJlYWt2ZWxvY2l0eScpCiAgZW5kKQogIAogIGFkZGNtZCgndmVoaWNsZWdvdG8nLHsndmdvdG8nLCd2dHAnLCd2ZWhpY2xldHAnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgcGxheWVycyA9IGdldFBsYXllcihhcmdzWzFdLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhwbGF5ZXJzKWRvCiAgICAgIGlmIFBsYXllcnNbdl0uQ2hhcmFjdGVyIH49IG5pbCB0aGVuCiAgICAgICAgbG9jYWwgc2VhdCA9IHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TZWF0UGFydAogICAgICAgIGxvY2FsIHZlaGljbGVNb2RlbCA9IHNlYXQ6RmluZEZpcnN0QW5jZXN0b3JXaGljaElzQSgiTW9kZWwiKQogICAgICAgIHZlaGljbGVNb2RlbDpNb3ZlVG8oZ2V0Um9vdChQbGF5ZXJzW3ZdLkNoYXJhY3RlcikuUG9zaXRpb24pCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgncHVsc2V0cCcseydwdHAnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgcGxheWVycyA9IGdldFBsYXllcihhcmdzWzFdLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhwbGF5ZXJzKWRvCiAgICAgIGlmIFBsYXllcnNbdl0uQ2hhcmFjdGVyIH49IG5pbCB0aGVuCiAgICAgICAgbG9jYWwgc3RhcnRQb3MgPSBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKS5DRnJhbWUKICAgICAgICBsb2NhbCBzZWNvbmRzID0gYXJnc1syXSBvciAxCiAgICAgICAgaWYgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpIGFuZCBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2VhdFBhcnQgdGhlbgogICAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlNpdCA9IGZhbHNlCiAgICAgICAgICB3YWl0KC4xKQogICAgICAgIGVuZAogICAgICAgIGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpLkNGcmFtZSA9IGdldFJvb3QoUGxheWVyc1t2XS5DaGFyYWN0ZXIpLkNGcmFtZSArIFZlY3RvcjMubmV3KDMsMSwwKQogICAgICAgIHdhaXQoc2Vjb25kcykKICAgICAgICBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKS5DRnJhbWUgPSBzdGFydFBvcwogICAgICBlbmQKICAgIGVuZAogICAgZXhlY0NtZCgnYnJlYWt2ZWxvY2l0eScpCiAgZW5kKQogIAogIGxvY2FsIHZub2NsaXBQYXJ0cyA9IHt9CiAgYWRkY21kKCd2ZWhpY2xlbm9jbGlwJyx7J3Zub2NsaXAnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgdm5vY2xpcFBhcnRzID0ge30KICAgIGxvY2FsIHNlYXQgPSBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2VhdFBhcnQKICAgIGxvY2FsIHZlaGljbGVNb2RlbCA9IHNlYXQuUGFyZW50CiAgICByZXBlYXQKICAgICAgaWYgdmVoaWNsZU1vZGVsLkNsYXNzTmFtZSB+PSAiTW9kZWwiIHRoZW4KICAgICAgICB2ZWhpY2xlTW9kZWwgPSB2ZWhpY2xlTW9kZWwuUGFyZW50CiAgICAgIGVuZAogICAgdW50aWwgdmVoaWNsZU1vZGVsLkNsYXNzTmFtZSA9PSAiTW9kZWwiCiAgICB3YWl0KDAuMSkKICAgIGV4ZWNDbWQoJ25vY2xpcCcpCiAgICBmb3IgaSx2IGluIHBhaXJzKHZlaGljbGVNb2RlbDpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSBhbmQgdi5DYW5Db2xsaWRlIHRoZW4KICAgICAgICB0YWJsZS5pbnNlcnQodm5vY2xpcFBhcnRzLHYpCiAgICAgICAgdi5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCJ2ZWhpY2xlY2xpcCIsIHsidmNsaXAiLCAidW52bm9jbGlwIiwgInVudmVoaWNsZW5vY2xpcCJ9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZXhlY0NtZCgiY2xpcCIpCiAgICBmb3IgaSwgdiBpbiBwYWlycyh2bm9jbGlwUGFydHMpIGRvCiAgICAgIHYuQ2FuQ29sbGlkZSA9IHRydWUKICAgIGVuZAogICAgdm5vY2xpcFBhcnRzID0ge30KICBlbmQpCiAgCiAgYWRkY21kKCJ0b2dnbGV2bm9jbGlwIiwge30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBleGVjQ21kKENsaXAgYW5kICJ2bm9jbGlwIiBvciAidmNsaXAiKQogIGVuZCkKICAKICBhZGRjbWQoJ2NsaWVudGJyaW5nJyx7J2NicmluZyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpZG8KICAgICAgaWYgUGxheWVyc1t2XS5DaGFyYWN0ZXIgfj0gbmlsIHRoZW4KICAgICAgICBpZiBQbGF5ZXJzW3ZdLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykgdGhlbgogICAgICAgICAgUGxheWVyc1t2XS5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlNpdCA9IGZhbHNlCiAgICAgICAgZW5kCiAgICAgICAgd2FpdCgpCiAgICAgICAgZ2V0Um9vdChQbGF5ZXJzW3ZdLkNoYXJhY3RlcikuQ0ZyYW1lID0gZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikuQ0ZyYW1lICsgVmVjdG9yMy5uZXcoMywxLDApCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGxvY2FsIGJyaW5nVCA9IHt9CiAgYWRkY21kKCdsb29wYnJpbmcnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpZG8KICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgaWYgUGxheWVyc1t2XS5OYW1lIH49IHNwZWFrZXIuTmFtZSBhbmQgbm90IEZpbmRJblRhYmxlKGJyaW5nVCwgUGxheWVyc1t2XS5OYW1lKSB0aGVuCiAgICAgICAgICB0YWJsZS5pbnNlcnQoYnJpbmdULCBQbGF5ZXJzW3ZdLk5hbWUpCiAgICAgICAgICBsb2NhbCBwbHJOYW1lID0gUGxheWVyc1t2XS5OYW1lCiAgICAgICAgICBsb2NhbCBwY2hhcj1QbGF5ZXJzW3ZdLkNoYXJhY3RlcgogICAgICAgICAgbG9jYWwgZGlzdGFuY2UgPSAzCiAgICAgICAgICBpZiBhcmdzWzJdIGFuZCBpc051bWJlcihhcmdzWzJdKSB0aGVuCiAgICAgICAgICAgIGRpc3RhbmNlID0gYXJnc1syXQogICAgICAgICAgZW5kCiAgICAgICAgICBsb2NhbCBsRGVsYXkgPSAwCiAgICAgICAgICBpZiBhcmdzWzNdIGFuZCBpc051bWJlcihhcmdzWzNdKSB0aGVuCiAgICAgICAgICAgIGxEZWxheSA9IGFyZ3NbM10KICAgICAgICAgIGVuZAogICAgICAgICAgcmVwZWF0CiAgICAgICAgICAgIGZvciBpLGMgaW4gcGFpcnMocGxheWVycykgZG8KICAgICAgICAgICAgICBpZiBQbGF5ZXJzOkZpbmRGaXJzdENoaWxkKHYpIHRoZW4KICAgICAgICAgICAgICAgIHBjaGFyID0gUGxheWVyc1t2XS5DaGFyYWN0ZXIKICAgICAgICAgICAgICAgIGlmIHBjaGFyfj0gbmlsIGFuZCBQbGF5ZXJzW3ZdLkNoYXJhY3RlciB+PSBuaWwgYW5kIGdldFJvb3QocGNoYXIpIGFuZCBzcGVha2VyLkNoYXJhY3RlciB+PSBuaWwgYW5kIGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpIHRoZW4KICAgICAgICAgICAgICAgICAgZ2V0Um9vdChwY2hhcikuQ0ZyYW1lID0gZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikuQ0ZyYW1lICsgVmVjdG9yMy5uZXcoZGlzdGFuY2UsMSwwKQogICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICB3YWl0KGxEZWxheSkKICAgICAgICAgICAgICBlbHNlIAogICAgICAgICAgICAgICAgZm9yIGEsYiBpbiBwYWlycyhicmluZ1QpIGRvIGlmIGIgPT0gcGxyTmFtZSB0aGVuIHRhYmxlLnJlbW92ZShicmluZ1QsIGEpIGVuZCBlbmQKICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kCiAgICAgICAgICB1bnRpbCBub3QgRmluZEluVGFibGUoYnJpbmdULCBwbHJOYW1lKQogICAgICAgIGVuZAogICAgICBlbmQpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd1bmxvb3BicmluZycseydub2xvb3BicmluZyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpZG8KICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgZm9yIGEsYiBpbiBwYWlycyhicmluZ1QpIGRvIGlmIGIgPT0gUGxheWVyc1t2XS5OYW1lIHRoZW4gdGFibGUucmVtb3ZlKGJyaW5nVCwgYSkgZW5kIGVuZAogICAgICBlbmQpCiAgICBlbmQKICBlbmQpCiAgCiAgbG9jYWwgd2Fsa3RvID0gZmFsc2UKICBsb2NhbCB3YXlwb2ludHdhbGt0byA9IGZhbHNlCiAgYWRkY21kKCd3YWxrdG8nLHsnZm9sbG93J30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHBsYXllcnMgPSBnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycylkbwogICAgICBpZiBQbGF5ZXJzW3ZdLkNoYXJhY3RlciB+PSBuaWwgdGhlbgogICAgICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKSBhbmQgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlNlYXRQYXJ0IHRoZW4KICAgICAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TaXQgPSBmYWxzZQogICAgICAgICAgd2FpdCguMSkKICAgICAgICBlbmQKICAgICAgICB3YWxrdG8gPSB0cnVlCiAgICAgICAgcmVwZWF0IHdhaXQoKQogICAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpOk1vdmVUbyhnZXRSb290KFBsYXllcnNbdl0uQ2hhcmFjdGVyKS5Qb3NpdGlvbikKICAgICAgICB1bnRpbCBQbGF5ZXJzW3ZdLkNoYXJhY3RlciA9PSBuaWwgb3Igbm90IGdldFJvb3QoUGxheWVyc1t2XS5DaGFyYWN0ZXIpIG9yIHdhbGt0byA9PSBmYWxzZQogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3BhdGhmaW5kd2Fsa3RvJyx7J3BhdGhmaW5kZm9sbG93J30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIHdhbGt0byA9IGZhbHNlCiAgICB3YWl0KCkKICAgIGxvY2FsIHBsYXllcnMgPSBnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgIGxvY2FsIGh1bSA9IFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgbG9jYWwgcGF0aCA9IFBhdGhTZXJ2aWNlOkNyZWF0ZVBhdGgoKQogICAgZm9yIGksdiBpbiBwYWlycyhwbGF5ZXJzKWRvCiAgICAgIGlmIFBsYXllcnNbdl0uQ2hhcmFjdGVyIH49IG5pbCB0aGVuCiAgICAgICAgaWYgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpIGFuZCBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2VhdFBhcnQgdGhlbgogICAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlNpdCA9IGZhbHNlCiAgICAgICAgICB3YWl0KC4xKQogICAgICAgIGVuZAogICAgICAgIHdhbGt0byA9IHRydWUKICAgICAgICByZXBlYXQgd2FpdCgpCiAgICAgICAgICBsb2NhbCBzdWNjZXNzLCByZXNwb25zZSA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgcGF0aDpDb21wdXRlQXN5bmMoZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikuUG9zaXRpb24sIGdldFJvb3QoUGxheWVyc1t2XS5DaGFyYWN0ZXIpLlBvc2l0aW9uKQogICAgICAgICAgICBsb2NhbCB3YXlwb2ludHMgPSBwYXRoOkdldFdheXBvaW50cygpCiAgICAgICAgICAgIGxvY2FsIGRpc3RhbmNlIAogICAgICAgICAgICBmb3Igd2F5cG9pbnRJbmRleCwgd2F5cG9pbnQgaW4gcGFpcnMod2F5cG9pbnRzKSBkbwogICAgICAgICAgICAgIGxvY2FsIHdheXBvaW50UG9zaXRpb24gPSB3YXlwb2ludC5Qb3NpdGlvbgogICAgICAgICAgICAgIGh1bTpNb3ZlVG8od2F5cG9pbnRQb3NpdGlvbikKICAgICAgICAgICAgICByZXBlYXQgCiAgICAgICAgICAgICAgICBkaXN0YW5jZSA9ICh3YXlwb2ludFBvc2l0aW9uIC0gaHVtLlBhcmVudC5QcmltYXJ5UGFydC5Qb3NpdGlvbikubWFnbml0dWRlCiAgICAgICAgICAgICAgICB3YWl0KCkKICAgICAgICAgICAgICB1bnRpbAogICAgICAgICAgICAgIGRpc3RhbmNlIDw9IDUKICAgICAgICAgICAgZW5kCSAKICAgICAgICAgIGVuZCkKICAgICAgICAgIGlmIG5vdCBzdWNjZXNzIHRoZW4KICAgICAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpOk1vdmVUbyhnZXRSb290KFBsYXllcnNbdl0uQ2hhcmFjdGVyKS5Qb3NpdGlvbikKICAgICAgICAgIGVuZAogICAgICAgIHVudGlsIFBsYXllcnNbdl0uQ2hhcmFjdGVyID09IG5pbCBvciBub3QgZ2V0Um9vdChQbGF5ZXJzW3ZdLkNoYXJhY3Rlcikgb3Igd2Fsa3RvID09IGZhbHNlCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgncGF0aGZpbmR3YWxrdG93YXlwb2ludCcseydwYXRoZmluZHdhbGt0b3dwJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIHdheXBvaW50d2Fsa3RvID0gZmFsc2UKICAgIHdhaXQoKQogICAgbG9jYWwgV1BOYW1lID0gdG9zdHJpbmcoZ2V0c3RyaW5nKDEpKQogICAgbG9jYWwgaHVtID0gUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICBsb2NhbCBwYXRoID0gUGF0aFNlcnZpY2U6Q3JlYXRlUGF0aCgpCiAgICBpZiBzcGVha2VyLkNoYXJhY3RlciB0aGVuCiAgICAgIGZvciBpLF8gaW4gcGFpcnMoV2F5UG9pbnRzKSBkbwogICAgICAgIGlmIHRvc3RyaW5nKFdheVBvaW50c1tpXS5OQU1FKTpsb3dlcigpID09IHRvc3RyaW5nKFdQTmFtZSk6bG93ZXIoKSB0aGVuCiAgICAgICAgICBpZiBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykgYW5kIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TZWF0UGFydCB0aGVuCiAgICAgICAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TaXQgPSBmYWxzZQogICAgICAgICAgICB3YWl0KC4xKQogICAgICAgICAgZW5kCiAgICAgICAgICBsb2NhbCBUcnVlQ29vcmRzID0gVmVjdG9yMy5uZXcoV2F5UG9pbnRzW2ldLkNPT1JEWzFdLCBXYXlQb2ludHNbaV0uQ09PUkRbMl0sIFdheVBvaW50c1tpXS5DT09SRFszXSkKICAgICAgICAgIHdheXBvaW50d2Fsa3RvID0gdHJ1ZQogICAgICAgICAgcmVwZWF0IHdhaXQoKQogICAgICAgICAgICBsb2NhbCBzdWNjZXNzLCByZXNwb25zZSA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICBwYXRoOkNvbXB1dGVBc3luYyhnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKS5Qb3NpdGlvbiwgVHJ1ZUNvb3JkcykKICAgICAgICAgICAgICBsb2NhbCB3YXlwb2ludHMgPSBwYXRoOkdldFdheXBvaW50cygpCiAgICAgICAgICAgICAgbG9jYWwgZGlzdGFuY2UgCiAgICAgICAgICAgICAgZm9yIHdheXBvaW50SW5kZXgsIHdheXBvaW50IGluIHBhaXJzKHdheXBvaW50cykgZG8KICAgICAgICAgICAgICAgIGxvY2FsIHdheXBvaW50UG9zaXRpb24gPSB3YXlwb2ludC5Qb3NpdGlvbgogICAgICAgICAgICAgICAgaHVtOk1vdmVUbyh3YXlwb2ludFBvc2l0aW9uKQogICAgICAgICAgICAgICAgcmVwZWF0IAogICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9ICh3YXlwb2ludFBvc2l0aW9uIC0gaHVtLlBhcmVudC5QcmltYXJ5UGFydC5Qb3NpdGlvbikubWFnbml0dWRlCiAgICAgICAgICAgICAgICAgIHdhaXQoKQogICAgICAgICAgICAgICAgdW50aWwKICAgICAgICAgICAgICAgIGRpc3RhbmNlIDw9IDUKICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBpZiBub3Qgc3VjY2VzcyB0aGVuCiAgICAgICAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpOk1vdmVUbyhUcnVlQ29vcmRzKQogICAgICAgICAgICBlbmQKICAgICAgICAgIHVudGlsIG5vdCBzcGVha2VyLkNoYXJhY3RlciBvciB3YXlwb2ludHdhbGt0byA9PSBmYWxzZQogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgZm9yIGksXyBpbiBwYWlycyhwV2F5UG9pbnRzKSBkbwogICAgICAgIGlmIHRvc3RyaW5nKHBXYXlQb2ludHNbaV0uTkFNRSk6bG93ZXIoKSA9PSB0b3N0cmluZyhXUE5hbWUpOmxvd2VyKCkgdGhlbgogICAgICAgICAgaWYgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpIGFuZCBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2VhdFBhcnQgdGhlbgogICAgICAgICAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2l0ID0gZmFsc2UKICAgICAgICAgICAgd2FpdCguMSkKICAgICAgICAgIGVuZAogICAgICAgICAgbG9jYWwgVHJ1ZUNvb3JkcyA9IHBXYXlQb2ludHNbaV0uQ09PUkRbMV0uUG9zaXRpb24KICAgICAgICAgIHdheXBvaW50d2Fsa3RvID0gdHJ1ZQogICAgICAgICAgcmVwZWF0IHdhaXQoKQogICAgICAgICAgICBsb2NhbCBzdWNjZXNzLCByZXNwb25zZSA9IHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgICAgICAgICBwYXRoOkNvbXB1dGVBc3luYyhnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKS5Qb3NpdGlvbiwgVHJ1ZUNvb3JkcykKICAgICAgICAgICAgICBsb2NhbCB3YXlwb2ludHMgPSBwYXRoOkdldFdheXBvaW50cygpCiAgICAgICAgICAgICAgbG9jYWwgZGlzdGFuY2UgCiAgICAgICAgICAgICAgZm9yIHdheXBvaW50SW5kZXgsIHdheXBvaW50IGluIHBhaXJzKHdheXBvaW50cykgZG8KICAgICAgICAgICAgICAgIGxvY2FsIHdheXBvaW50UG9zaXRpb24gPSB3YXlwb2ludC5Qb3NpdGlvbgogICAgICAgICAgICAgICAgaHVtOk1vdmVUbyh3YXlwb2ludFBvc2l0aW9uKQogICAgICAgICAgICAgICAgcmVwZWF0IAogICAgICAgICAgICAgICAgICBkaXN0YW5jZSA9ICh3YXlwb2ludFBvc2l0aW9uIC0gaHVtLlBhcmVudC5QcmltYXJ5UGFydC5Qb3NpdGlvbikubWFnbml0dWRlCiAgICAgICAgICAgICAgICAgIHdhaXQoKQogICAgICAgICAgICAgICAgdW50aWwKICAgICAgICAgICAgICAgIGRpc3RhbmNlIDw9IDUKICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZW5kKQogICAgICAgICAgICBpZiBub3Qgc3VjY2VzcyB0aGVuCiAgICAgICAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpOk1vdmVUbyhUcnVlQ29vcmRzKQogICAgICAgICAgICBlbmQKICAgICAgICAgIHVudGlsIG5vdCBzcGVha2VyLkNoYXJhY3RlciBvciB3YXlwb2ludHdhbGt0byA9PSBmYWxzZQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3Vud2Fsa3RvJyx7J25vd2Fsa3RvJywndW5mb2xsb3cnLCdub2ZvbGxvdyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICB3YWxrdG8gPSBmYWxzZQogICAgd2F5cG9pbnR3YWxrdG8gPSBmYWxzZQogIGVuZCkKICAKICBhZGRjbWQoJ2ZyZWV6ZScseydmcid9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBpZiBwbGF5ZXJzIH49IG5pbCB0aGVuCiAgICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycykgZG8KICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgIGZvciBpLCB4IGluIG5leHQsIFBsYXllcnNbdl0uQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkgZG8KICAgICAgICAgICAgaWYgeDpJc0EoIkJhc2VQYXJ0IikgYW5kIG5vdCB4LkFuY2hvcmVkIHRoZW4KICAgICAgICAgICAgICB4LkFuY2hvcmVkID0gdHJ1ZQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgCiAgYWRkY21kKCd0aGF3Jyx7J3VuZnJlZXplJywndW5mcid9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBpZiBwbGF5ZXJzIH49IG5pbCB0aGVuCiAgICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycykgZG8KICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgIGZvciBpLCB4IGluIG5leHQsIFBsYXllcnNbdl0uQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkgZG8KICAgICAgICAgICAgaWYgeC5OYW1lIH49IGZsb2F0TmFtZSBhbmQgeDpJc0EoIkJhc2VQYXJ0IikgYW5kIHguQW5jaG9yZWQgdGhlbgogICAgICAgICAgICAgIHguQW5jaG9yZWQgPSBmYWxzZQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgb29maW5nID0gZmFsc2UKICBhZGRjbWQoJ2xvb3Bvb2YnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBvb2ZpbmcgPSB0cnVlCiAgICByZXBlYXQgd2FpdCgwLjEpCiAgICAgIGZvciBpLHYgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgaWYgdi5DaGFyYWN0ZXIgfj0gbmlsIGFuZCB2LkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCdIZWFkJyB0aGVuCiAgICAgICAgICBmb3IgXyx4IGluIHBhaXJzKHYuQ2hhcmFjdGVyLkhlYWQ6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgICAgaWYgeDpJc0EnU291bmQnIHRoZW4geC5QbGF5aW5nID0gdHJ1ZSBlbmQKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICBlbmQKICAgIHVudGlsIG9vZmluZyA9PSBmYWxzZQogIGVuZCkKICAKICBhZGRjbWQoJ3VubG9vcG9vZicse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIG9vZmluZyA9IGZhbHNlCiAgZW5kKQogIAogIGxvY2FsIG5vdGlmaWVkUmVzcGVjdEZpbHRlcmluZyA9IGZhbHNlCiAgYWRkY21kKCdtdXRlYm9vbWJveCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIG5vdCBub3RpZmllZFJlc3BlY3RGaWx0ZXJpbmcgYW5kIFNvdW5kU2VydmljZS5SZXNwZWN0RmlsdGVyaW5nRW5hYmxlZCB0aGVuIG5vdGlmaWVkUmVzcGVjdEZpbHRlcmluZyA9IHRydWUgbm90aWZ5KCdSZXNwZWN0RmlsdGVyaW5nRW5hYmxlZCcsJ1Jlc3BlY3RGaWx0ZXJpbmdFbmFibGVkIGlzIHNldCB0byB0cnVlICh0aGUgY29tbWFuZCB3aWxsIHN0aWxsIHdvcmsgYnV0IG1heSBvbmx5IGJlIGNsaWVudHNpZGVkKScpIGVuZAogICAgbG9jYWwgcGxheWVycyA9IGdldFBsYXllcihhcmdzWzFdLCBzcGVha2VyKQogICAgaWYgcGxheWVycyB+PSBuaWwgdGhlbgogICAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpIGRvCiAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICBmb3IgaSwgeCBpbiBuZXh0LCBQbGF5ZXJzW3ZdLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpIGRvCiAgICAgICAgICAgIGlmIHg6SXNBKCJTb3VuZCIpIGFuZCB4LlBsYXlpbmcgPT0gdHJ1ZSB0aGVuCiAgICAgICAgICAgICAgeC5QbGF5aW5nID0gZmFsc2UKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmQKICAgICAgICAgIGZvciBpLCB4IGluIG5leHQsIFBsYXllcnNbdl06RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJCYWNrcGFjayIpOkdldERlc2NlbmRhbnRzKCkgZG8KICAgICAgICAgICAgaWYgeDpJc0EoIlNvdW5kIikgYW5kIHguUGxheWluZyA9PSB0cnVlIHRoZW4KICAgICAgICAgICAgICB4LlBsYXlpbmcgPSBmYWxzZQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd1bm11dGVib29tYm94Jyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgbm90IG5vdGlmaWVkUmVzcGVjdEZpbHRlcmluZyBhbmQgU291bmRTZXJ2aWNlLlJlc3BlY3RGaWx0ZXJpbmdFbmFibGVkIHRoZW4gbm90aWZpZWRSZXNwZWN0RmlsdGVyaW5nID0gdHJ1ZSBub3RpZnkoJ1Jlc3BlY3RGaWx0ZXJpbmdFbmFibGVkJywnUmVzcGVjdEZpbHRlcmluZ0VuYWJsZWQgaXMgc2V0IHRvIHRydWUgKHRoZSBjb21tYW5kIHdpbGwgc3RpbGwgd29yayBidXQgbWF5IG9ubHkgYmUgY2xpZW50c2lkZWQpJykgZW5kCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBpZiBwbGF5ZXJzIH49IG5pbCB0aGVuCiAgICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycykgZG8KICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgIGZvciBpLCB4IGluIG5leHQsIFBsYXllcnNbdl0uQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkgZG8KICAgICAgICAgICAgaWYgeDpJc0EoIlNvdW5kIikgYW5kIHguUGxheWluZyA9PSBmYWxzZSB0aGVuCiAgICAgICAgICAgICAgeC5QbGF5aW5nID0gdHJ1ZQogICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZAogICAgICAgIGVuZCkKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdyZXNldCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKTpDaGFuZ2VTdGF0ZShFbnVtLkh1bWFub2lkU3RhdGVUeXBlLkRlYWQpCiAgZW5kKQogIAogIGFkZGNtZCgnZnJlZXplYW5pbXMnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBIdW1hbm9pZCA9IHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKSBvciBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkFuaW1hdGlvbkNvbnRyb2xsZXIiKQogICAgbG9jYWwgQWN0aXZlVHJhY2tzID0gSHVtYW5vaWQ6R2V0UGxheWluZ0FuaW1hdGlvblRyYWNrcygpCiAgICBmb3IgXywgdiBpbiBwYWlycyhBY3RpdmVUcmFja3MpIGRvCiAgICAgIHY6QWRqdXN0U3BlZWQoMCkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3VuZnJlZXplYW5pbXMnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBIdW1hbm9pZCA9IHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKSBvciBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkFuaW1hdGlvbkNvbnRyb2xsZXIiKQogICAgbG9jYWwgQWN0aXZlVHJhY2tzID0gSHVtYW5vaWQ6R2V0UGxheWluZ0FuaW1hdGlvblRyYWNrcygpCiAgICBmb3IgXywgdiBpbiBwYWlycyhBY3RpdmVUcmFja3MpIGRvCiAgICAgIHY6QWRqdXN0U3BlZWQoMSkKICAgIGVuZAogIGVuZCkKICAKICAKICAKICAKICBhZGRjbWQoJ3Jlc3Bhd24nLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICByZXNwYXduKHNwZWFrZXIpCiAgZW5kKQogIAogIGFkZGNtZCgncmVmcmVzaCcseydyZSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICByZWZyZXNoKHNwZWFrZXIpCiAgZW5kKQogIAogIGFkZGNtZCgnZ29kJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgQ2FtID0gd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEKICAgIGxvY2FsIFBvcywgQ2hhciA9IENhbS5DRnJhbWUsIHNwZWFrZXIuQ2hhcmFjdGVyCiAgICBsb2NhbCBIdW1hbiA9IENoYXIgYW5kIENoYXIuRmluZEZpcnN0Q2hpbGRXaGljaElzQShDaGFyLCAiSHVtYW5vaWQiKQogICAgbG9jYWwgbkh1bWFuID0gSHVtYW4uQ2xvbmUoSHVtYW4pCiAgICBuSHVtYW4uUGFyZW50LCBzcGVha2VyLkNoYXJhY3RlciA9IENoYXIsIG5pbAogICAgbkh1bWFuLlNldFN0YXRlRW5hYmxlZChuSHVtYW4sIDE1LCBmYWxzZSkKICAgIG5IdW1hbi5TZXRTdGF0ZUVuYWJsZWQobkh1bWFuLCAxLCBmYWxzZSkKICAgIG5IdW1hbi5TZXRTdGF0ZUVuYWJsZWQobkh1bWFuLCAwLCBmYWxzZSkKICAgIG5IdW1hbi5CcmVha0pvaW50c09uRGVhdGgsIEh1bWFuID0gdHJ1ZSwgSHVtYW4uRGVzdHJveShIdW1hbikKICAgIHNwZWFrZXIuQ2hhcmFjdGVyLCBDYW0uQ2FtZXJhU3ViamVjdCwgQ2FtLkNGcmFtZSA9IENoYXIsIG5IdW1hbiwgd2FpdCgpIGFuZCBQb3MKICAgIG5IdW1hbi5EaXNwbGF5RGlzdGFuY2VUeXBlID0gRW51bS5IdW1hbm9pZERpc3BsYXlEaXN0YW5jZVR5cGUuTm9uZQogICAgbG9jYWwgU2NyaXB0ID0gQ2hhci5GaW5kRmlyc3RDaGlsZChDaGFyLCAiQW5pbWF0ZSIpCiAgICBpZiBTY3JpcHQgdGhlbgogICAgICBTY3JpcHQuRGlzYWJsZWQgPSB0cnVlCiAgICAgIHdhaXQoKQogICAgICBTY3JpcHQuRGlzYWJsZWQgPSBmYWxzZQogICAgZW5kCiAgICBuSHVtYW4uSGVhbHRoID0gbkh1bWFuLk1heEhlYWx0aAogIGVuZCkKICAKICBpbnZpc1J1bm5pbmcgPSBmYWxzZQogIGFkZGNtZCgnaW52aXNpYmxlJyx7J2ludmlzJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIGludmlzUnVubmluZyB0aGVuIHJldHVybiBlbmQKICAgIGludmlzUnVubmluZyA9IHRydWUKICAgIC0tIEZ1bGwgY3JlZGl0IHRvIEFtb2thaEZveCBAVjNybWlsbGlvbgogICAgbG9jYWwgUGxheWVyID0gc3BlYWtlcgogICAgcmVwZWF0IHdhaXQoLjEpIHVudGlsIFBsYXllci5DaGFyYWN0ZXIKICAgIGxvY2FsIENoYXJhY3RlciA9IFBsYXllci5DaGFyYWN0ZXIKICAgIENoYXJhY3Rlci5BcmNoaXZhYmxlID0gdHJ1ZQogICAgbG9jYWwgSXNJbnZpcyA9IGZhbHNlCiAgICBsb2NhbCBJc1J1bm5pbmcgPSB0cnVlCiAgICBsb2NhbCBJbnZpc2libGVDaGFyYWN0ZXIgPSBDaGFyYWN0ZXI6Q2xvbmUoKQogICAgSW52aXNpYmxlQ2hhcmFjdGVyLlBhcmVudCA9IExpZ2h0aW5nCiAgICBsb2NhbCBWb2lkID0gd29ya3NwYWNlLkZhbGxlblBhcnRzRGVzdHJveUhlaWdodAogICAgSW52aXNpYmxlQ2hhcmFjdGVyLk5hbWUgPSAiIgogICAgbG9jYWwgQ0YKICAKICAgIGxvY2FsIGludmlzRml4ID0gUnVuU2VydmljZS5TdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgSXNJbnRlZ2VyCiAgICAgICAgaWYgdG9zdHJpbmcoVm9pZCk6ZmluZCctJyB0aGVuCiAgICAgICAgICBJc0ludGVnZXIgPSB0cnVlCiAgICAgICAgZWxzZQogICAgICAgICAgSXNJbnRlZ2VyID0gZmFsc2UKICAgICAgICBlbmQKICAgICAgICBsb2NhbCBQb3MgPSBQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuUG9zaXRpb24KICAgICAgICBsb2NhbCBQb3NfU3RyaW5nID0gdG9zdHJpbmcoUG9zKQogICAgICAgIGxvY2FsIFBvc19TZXBlcmF0ZSA9IFBvc19TdHJpbmc6c3BsaXQoJywgJykKICAgICAgICBsb2NhbCBYID0gdG9udW1iZXIoUG9zX1NlcGVyYXRlWzFdKQogICAgICAgIGxvY2FsIFkgPSB0b251bWJlcihQb3NfU2VwZXJhdGVbMl0pCiAgICAgICAgbG9jYWwgWiA9IHRvbnVtYmVyKFBvc19TZXBlcmF0ZVszXSkKICAgICAgICBpZiBJc0ludGVnZXIgPT0gdHJ1ZSB0aGVuCiAgICAgICAgICBpZiBZIDw9IFZvaWQgdGhlbgogICAgICAgICAgICBSZXNwYXduKCkKICAgICAgICAgIGVuZAogICAgICAgIGVsc2VpZiBJc0ludGVnZXIgPT0gZmFsc2UgdGhlbgogICAgICAgICAgaWYgWSA+PSBWb2lkIHRoZW4KICAgICAgICAgICAgUmVzcGF3bigpCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kKQogICAgZW5kKQogIAogICAgZm9yIGksdiBpbiBwYWlycyhJbnZpc2libGVDaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSlkbwogICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgaWYgdi5OYW1lID09ICJIdW1hbm9pZFJvb3RQYXJ0IiB0aGVuCiAgICAgICAgICB2LlRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBlbHNlCiAgICAgICAgICB2LlRyYW5zcGFyZW5jeSA9IC41CiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgCiAgICBmdW5jdGlvbiBSZXNwYXduKCkKICAgICAgSXNSdW5uaW5nID0gZmFsc2UKICAgICAgaWYgSXNJbnZpcyA9PSB0cnVlIHRoZW4KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICBQbGF5ZXIuQ2hhcmFjdGVyID0gQ2hhcmFjdGVyCiAgICAgICAgICB3YWl0KCkKICAgICAgICAgIENoYXJhY3Rlci5QYXJlbnQgPSB3b3Jrc3BhY2UKICAgICAgICAgIENoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBJ0h1bWFub2lkJzpEZXN0cm95KCkKICAgICAgICAgIElzSW52aXMgPSBmYWxzZQogICAgICAgICAgSW52aXNpYmxlQ2hhcmFjdGVyLlBhcmVudCA9IG5pbAogICAgICAgICAgaW52aXNSdW5uaW5nID0gZmFsc2UKICAgICAgICBlbmQpCiAgICAgIGVsc2VpZiBJc0ludmlzID09IGZhbHNlIHRoZW4KICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICBQbGF5ZXIuQ2hhcmFjdGVyID0gQ2hhcmFjdGVyCiAgICAgICAgICB3YWl0KCkKICAgICAgICAgIENoYXJhY3Rlci5QYXJlbnQgPSB3b3Jrc3BhY2UKICAgICAgICAgIENoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBJ0h1bWFub2lkJzpEZXN0cm95KCkKICAgICAgICAgIFR1cm5WaXNpYmxlKCkKICAgICAgICBlbmQpCiAgICAgIGVuZAogICAgZW5kCiAgCiAgICBsb2NhbCBpbnZpc0RpZWQKICAgIGludmlzRGllZCA9IEludmlzaWJsZUNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MnSHVtYW5vaWQnLkRpZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgIFJlc3Bhd24oKQogICAgICBpbnZpc0RpZWQ6RGlzY29ubmVjdCgpCiAgICBlbmQpCiAgCiAgICBpZiBJc0ludmlzID09IHRydWUgdGhlbiByZXR1cm4gZW5kCiAgICBJc0ludmlzID0gdHJ1ZQogICAgQ0YgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUKICAgIGxvY2FsIENGXzEgPSBQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lCiAgICBDaGFyYWN0ZXI6TW92ZVRvKFZlY3RvcjMubmV3KDAsbWF0aC5waSoxMDAwMDAwLDApKQogICAgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ2FtZXJhVHlwZSA9IEVudW0uQ2FtZXJhVHlwZS5TY3JpcHRhYmxlCiAgICB3YWl0KC4yKQogICAgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ2FtZXJhVHlwZSA9IEVudW0uQ2FtZXJhVHlwZS5DdXN0b20KICAgIEludmlzaWJsZUNoYXJhY3RlciA9IEludmlzaWJsZUNoYXJhY3RlcgogICAgQ2hhcmFjdGVyLlBhcmVudCA9IExpZ2h0aW5nCiAgICBJbnZpc2libGVDaGFyYWN0ZXIuUGFyZW50ID0gd29ya3NwYWNlCiAgICBJbnZpc2libGVDaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUgPSBDRl8xCiAgICBQbGF5ZXIuQ2hhcmFjdGVyID0gSW52aXNpYmxlQ2hhcmFjdGVyCiAgICBleGVjQ21kKCdmaXhjYW0nKQogICAgUGxheWVyLkNoYXJhY3Rlci5BbmltYXRlLkRpc2FibGVkID0gdHJ1ZQogICAgUGxheWVyLkNoYXJhY3Rlci5BbmltYXRlLkRpc2FibGVkID0gZmFsc2UKICAKICAgIGZ1bmN0aW9uIFR1cm5WaXNpYmxlKCkKICAgICAgaWYgSXNJbnZpcyA9PSBmYWxzZSB0aGVuIHJldHVybiBlbmQKICAgICAgaW52aXNGaXg6RGlzY29ubmVjdCgpCiAgICAgIGludmlzRGllZDpEaXNjb25uZWN0KCkKICAgICAgQ0YgPSB3b3Jrc3BhY2UuQ3VycmVudENhbWVyYS5DRnJhbWUKICAgICAgQ2hhcmFjdGVyID0gQ2hhcmFjdGVyCiAgICAgIGxvY2FsIENGXzEgPSBQbGF5ZXIuQ2hhcmFjdGVyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lCiAgICAgIENoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LkNGcmFtZSA9IENGXzEKICAgICAgSW52aXNpYmxlQ2hhcmFjdGVyOkRlc3Ryb3koKQogICAgICBQbGF5ZXIuQ2hhcmFjdGVyID0gQ2hhcmFjdGVyCiAgICAgIENoYXJhY3Rlci5QYXJlbnQgPSB3b3Jrc3BhY2UKICAgICAgSXNJbnZpcyA9IGZhbHNlCiAgICAgIFBsYXllci5DaGFyYWN0ZXIuQW5pbWF0ZS5EaXNhYmxlZCA9IHRydWUKICAgICAgUGxheWVyLkNoYXJhY3Rlci5BbmltYXRlLkRpc2FibGVkID0gZmFsc2UKICAgICAgaW52aXNEaWVkID0gQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcydIdW1hbm9pZCcuRGllZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBSZXNwYXduKCkKICAgICAgICBpbnZpc0RpZWQ6RGlzY29ubmVjdCgpCiAgICAgIGVuZCkKICAgICAgaW52aXNSdW5uaW5nID0gZmFsc2UKICAgIGVuZAogICAgbm90aWZ5KCdJbnZpc2libGUnLCdZb3Ugbm93IGFwcGVhciBpbnZpc2libGUgdG8gb3RoZXIgcGxheWVycycpCiAgZW5kKQogIAogIGFkZGNtZCgidmlzaWJsZSIsIHsidmlzIn0sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBUdXJuVmlzaWJsZSgpCiAgZW5kKQogIAogIGFkZGNtZCgidG9nZ2xlaW52aXMiLCB7fSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGV4ZWNDbWQoaW52aXNSdW5uaW5nIGFuZCAidmlzaWJsZSIgb3IgImludmlzaWJsZSIpCiAgZW5kKQogIAogIGFkZGNtZCgndG9vbGludmlzaWJsZScseyd0b29saW52aXMnLCd0aW52aXMnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgQ2hhciAgPSBQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgbG9jYWwgdG91Y2hlZCA9IGZhbHNlCiAgICBsb2NhbCB0cGRiYWNrID0gZmFsc2UKICAgIGxvY2FsIGJveCA9IEluc3RhbmNlLm5ldygnUGFydCcpCiAgICBib3guQW5jaG9yZWQgPSB0cnVlCiAgICBib3guQ2FuQ29sbGlkZSA9IHRydWUKICAgIGJveC5TaXplID0gVmVjdG9yMy5uZXcoMTAsMSwxMCkKICAgIGJveC5Qb3NpdGlvbiA9IFZlY3RvcjMubmV3KDAsMTAwMDAsMCkKICAgIGJveC5QYXJlbnQgPSB3b3Jrc3BhY2UKICAgIGxvY2FsIGJveFRvdWNoZWQgPSBib3guVG91Y2hlZDpjb25uZWN0KGZ1bmN0aW9uKHBhcnQpCiAgICAgIGlmIChwYXJ0LlBhcmVudC5OYW1lID09IFBsYXllcnMuTG9jYWxQbGF5ZXIuTmFtZSkgdGhlbgogICAgICAgIGlmIHRvdWNoZWQgPT0gZmFsc2UgdGhlbgogICAgICAgICAgdG91Y2hlZCA9IHRydWUKICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIGFwcGx5KCkKICAgICAgICAgICAgbG9jYWwgbm8gPSBDaGFyLkh1bWFub2lkUm9vdFBhcnQ6Q2xvbmUoKQogICAgICAgICAgICB3YWl0KC4yNSkKICAgICAgICAgICAgQ2hhci5IdW1hbm9pZFJvb3RQYXJ0OkRlc3Ryb3koKQogICAgICAgICAgICBuby5QYXJlbnQgPSBDaGFyCiAgICAgICAgICAgIENoYXI6TW92ZVRvKGxvYykKICAgICAgICAgICAgdG91Y2hlZCA9IGZhbHNlCiAgICAgICAgICBlbmQKICAgICAgICAgIGlmIENoYXIgdGhlbgogICAgICAgICAgICBhcHBseSgpCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQpCiAgICByZXBlYXQgd2FpdCgpIHVudGlsIENoYXIKICAgIGxvY2FsIGNsZWFuVXAKICAgIGNsZWFuVXAgPSBQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlckFkZGVkOmNvbm5lY3QoZnVuY3Rpb24oY2hhcikKICAgICAgYm94VG91Y2hlZDpEaXNjb25uZWN0KCkKICAgICAgYm94OkRlc3Ryb3koKQogICAgICBjbGVhblVwOkRpc2Nvbm5lY3QoKQogICAgZW5kKQogICAgbG9jID0gQ2hhci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uCiAgICBDaGFyOk1vdmVUbyhib3guUG9zaXRpb24gKyBWZWN0b3IzLm5ldygwLC41LDApKQogIGVuZCkKICAKICBhZGRjbWQoInN0cmVuZ3RoZW4iLCB7fSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBfLCBjaGlsZCBpbiBwYWlycyhzcGVha2VyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiBjaGlsZC5DbGFzc05hbWUgPT0gIlBhcnQiIHRoZW4KICAgICAgICBpZiBhcmdzWzFdIHRoZW4KICAgICAgICAgIGNoaWxkLkN1c3RvbVBoeXNpY2FsUHJvcGVydGllcyA9IFBoeXNpY2FsUHJvcGVydGllcy5uZXcoYXJnc1sxXSwgMC4zLCAwLjUpCiAgICAgICAgZWxzZQogICAgICAgICAgY2hpbGQuQ3VzdG9tUGh5c2ljYWxQcm9wZXJ0aWVzID0gUGh5c2ljYWxQcm9wZXJ0aWVzLm5ldygxMDAsIDAuMywgMC41KQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoIndlYWtlbiIsIHt9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZm9yIF8sIGNoaWxkIGluIHBhaXJzKHNwZWFrZXIuQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgIGlmIGNoaWxkLkNsYXNzTmFtZSA9PSAiUGFydCIgdGhlbgogICAgICAgIGlmIGFyZ3NbMV0gdGhlbgogICAgICAgICAgY2hpbGQuQ3VzdG9tUGh5c2ljYWxQcm9wZXJ0aWVzID0gUGh5c2ljYWxQcm9wZXJ0aWVzLm5ldygtYXJnc1sxXSwgMC4zLCAwLjUpCiAgICAgICAgZWxzZQogICAgICAgICAgY2hpbGQuQ3VzdG9tUGh5c2ljYWxQcm9wZXJ0aWVzID0gUGh5c2ljYWxQcm9wZXJ0aWVzLm5ldygwLCAwLjMsIDAuNSkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCJ1bndlYWtlbiIsIHsidW5zdHJlbmd0aGVuIn0sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBmb3IgXywgY2hpbGQgaW4gcGFpcnMoc3BlYWtlci5DaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgaWYgY2hpbGQuQ2xhc3NOYW1lID09ICJQYXJ0IiB0aGVuCiAgICAgICAgY2hpbGQuQ3VzdG9tUGh5c2ljYWxQcm9wZXJ0aWVzID0gUGh5c2ljYWxQcm9wZXJ0aWVzLm5ldygwLjcsIDAuMywgMC41KQogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoImJyZWFrdmVsb2NpdHkiLCB7fSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIEJlZW5BU2Vjb25kLCBWMyA9IGZhbHNlLCBWZWN0b3IzLm5ldygwLCAwLCAwKQogICAgZGVsYXkoMSwgZnVuY3Rpb24oKQogICAgICBCZWVuQVNlY29uZCA9IHRydWUKICAgIGVuZCkKICAgIHdoaWxlIG5vdCBCZWVuQVNlY29uZCBkbwogICAgICBmb3IgXywgdiBpbiBpcGFpcnMoc3BlYWtlci5DaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICB2LlZlbG9jaXR5LCB2LlJvdFZlbG9jaXR5ID0gVjMsIFYzCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICB3YWl0KCkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2pwb3dlcicseydqdW1wcG93ZXInLCdqcCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBqcG93ZXIgPSBhcmdzWzFdIG9yIDUwCiAgICBpZiBpc051bWJlcihqcG93ZXIpIHRoZW4KICAgICAgaWYgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlVzZUp1bXBQb3dlciB0aGVuCiAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLkp1bXBQb3dlciA9IGpwb3dlcgogICAgICBlbHNlCiAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLkp1bXBIZWlnaHQgID0ganBvd2VyCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgibWF4c2xvcGVhbmdsZSIsIHsibXNhIn0sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBzYW5nbGUgPSBhcmdzWzFdIG9yIDg5CiAgICBpZiBpc051bWJlcihzYW5nbGUpIHRoZW4KICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiSHVtYW5vaWQiKS5NYXhTbG9wZUFuZ2xlID0gc2FuZ2xlCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCJncmF2aXR5IiwgeyJncmF2In0sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBncmF2ID0gYXJnc1sxXSBvciAxOTYuMgogICAgaWYgaXNOdW1iZXIoZ3JhdikgdGhlbgogICAgICB3b3Jrc3BhY2UuR3Jhdml0eSA9IGdyYXYKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoImhpcGhlaWdodCIsIHsiaGhlaWdodCJ9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiSHVtYW5vaWQiKS5IaXBIZWlnaHQgPSBhcmdzWzFdIG9yIChyMTUoc3BlYWtlcikgYW5kIDIuMSBvciAwKQogIGVuZCkKICAKICBhZGRjbWQoImRhbmNlIiwge30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBwY2FsbChleGVjQ21kLCAidW5kYW5jZSIpCiAgICBsb2NhbCBkYW5jZXMgPSB7IjI3Nzg5MzU5IiwgIjMwMTk2MTE0IiwgIjI0ODI2MzI2MCIsICI0NTgzNDkyNCIsICIzMzc5NjA1OSIsICIyODQ4ODI1NCIsICI1MjE1NTcyOCJ9CiAgICBpZiByMTUoc3BlYWtlcikgdGhlbgogICAgICBkYW5jZXMgPSB7IjMzMzM0MzI0NTQiLCAiNDU1NTgwODIyMCIsICI0MDQ5MDM3NjA0IiwgIjQ1NTU3ODI4OTMiLCAiMTAyMTQzMTEyODIiLCAiMTA3MTQwMTAzMzciLCAiMTA3MTM5ODE3MjMiLCAiMTA3MTQzNzI1MjYiLCAiMTA3MTQwNzY5ODEiLCAiMTA3MTQzOTIxNTEiLCAiMTE0NDQ0NDM1NzYifQogICAgZW5kCiAgICBsb2NhbCBhbmltYXRpb24gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpCiAgICBhbmltYXRpb24uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLyIgLi4gZGFuY2VzW21hdGgucmFuZG9tKDEsICNkYW5jZXMpXQogICAgZGFuY2VUcmFjayA9IHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIkh1bWFub2lkIik6TG9hZEFuaW1hdGlvbihhbmltYXRpb24pCiAgICBkYW5jZVRyYWNrLkxvb3BlZCA9IHRydWUKICAgIGRhbmNlVHJhY2s6UGxheSgpCiAgZW5kKQogIAogIGFkZGNtZCgidW5kYW5jZSIsIHsibm9kYW5jZSJ9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZGFuY2VUcmFjazpTdG9wKCkKICAgIGRhbmNlVHJhY2s6RGVzdHJveSgpCiAgZW5kKQogIAogIGFkZGNtZCgnbm9saW1icycseydybGltYnMnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgcjE1KHNwZWFrZXIpIHRoZW4KICAgICAgZm9yIGksdiBpbiBwYWlycyhzcGVha2VyLkNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY6SXNBKCJCYXNlUGFydCIpIGFuZAogICAgICAgICAgdi5OYW1lID09ICJSaWdodFVwcGVyTGVnIiBvcgogICAgICAgICAgdi5OYW1lID09ICJMZWZ0VXBwZXJMZWciIG9yCiAgICAgICAgICB2Lk5hbWUgPT0gIlJpZ2h0VXBwZXJBcm0iIG9yCiAgICAgICAgICB2Lk5hbWUgPT0gIkxlZnRVcHBlckFybSIgdGhlbgogICAgICAgICAgdjpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbHNlCiAgICAgIGZvciBpLHYgaW4gcGFpcnMoc3BlYWtlci5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSBhbmQKICAgICAgICAgIHYuTmFtZSA9PSAiUmlnaHQgTGVnIiBvcgogICAgICAgICAgdi5OYW1lID09ICJMZWZ0IExlZyIgb3IKICAgICAgICAgIHYuTmFtZSA9PSAiUmlnaHQgQXJtIiBvcgogICAgICAgICAgdi5OYW1lID09ICJMZWZ0IEFybSIgdGhlbgogICAgICAgICAgdjpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdub2hlYWQnLHsncmhlYWQnLCdoZWFkbGVzcyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBzZXRoaWRkZW4gdGhlbgogICAgICAtLSBGdWxsIGNyZWRpdCB0byBUaG9tYXNfQ29ybmV6IzAyNzIgQERpc2NvcmQKICAgICAgbG9jYWwgbHBsciA9IFBsYXllcnMuTG9jYWxQbGF5ZXIKICAgICAgbG9jYWwgY2hhciA9IGxwbHIuQ2hhcmFjdGVyCiAgICAgIGxvY2FsIHJpZ1R5cGUgPSB0b3N0cmluZyhjaGFyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5SaWdUeXBlKSA9PSAiRW51bS5IdW1hbm9pZFJpZ1R5cGUuUjYiIGFuZCAxIG9yIHRvc3RyaW5nKGNoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlJpZ1R5cGUpID09ICJFbnVtLkh1bWFub2lkUmlnVHlwZS5SMTUiIGFuZCAyCiAgCiAgICAgIGxvY2FsIHNwZWFrZXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyCiAgCiAgCiAgICAgIGxvY2FsIHRlc3QgPSBJbnN0YW5jZS5uZXcoIk1vZGVsIikKICAgICAgbG9jYWwgaHVtICA9IEluc3RhbmNlLm5ldygiSHVtYW5vaWQiKQogICAgICBsb2NhbCBhbmltYXRpb24gPSBJbnN0YW5jZS5uZXcoIk1vZGVsIikKICAgICAgbG9jYWwgaHVtYW5vaWRhbmltYXRpb24gPSBJbnN0YW5jZS5uZXcoIkh1bWFub2lkIikKICAgICAgdGVzdC5QYXJlbnQgPSB3b3Jrc3BhY2UKICAgICAgaHVtLlBhcmVudCA9IHRlc3QKICAgICAgYW5pbWF0aW9uLlBhcmVudCA9IHdvcmtzcGFjZQogICAgICBodW1hbm9pZGFuaW1hdGlvbi5QYXJlbnQgPSBhbmltYXRpb24KICAKICAgICAgbHBsci5DaGFyYWN0ZXIgPSB0ZXN0CiAgICAgIHdhaXQoMikKICAgICAgY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuQW5pbWF0b3IuUGFyZW50ID0gaHVtYW5vaWRhbmltYXRpb24KICAgICAgY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJyk6RGVzdHJveSgpCiAgCiAgICAgIGNoYXIuSGVhZDpEZXN0cm95KCkKICAgICAgd2FpdCg1KQogICAgICBQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlciA9IGNoYXIKICAKICAgICAgbG9jYWwgaHVtMiA9IEluc3RhbmNlLm5ldygiSHVtYW5vaWQiKQogICAgICBodW0yLlBhcmVudCA9IGNoYXIKICAgICAgY2hhcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikuSnVtcCA9IHRydWUKICAKICAgICAgaHVtYW5vaWRhbmltYXRpb24uQW5pbWF0b3IuUGFyZW50ID0gaHVtMgogICAgICBjaGFyLkFuaW1hdGUuRGlzYWJsZWQgPSB0cnVlCiAgICAgIHdhaXQoKQogICAgICBjaGFyLkFuaW1hdGUuRGlzYWJsZWQgPSBmYWxzZQogICAgICB3YWl0KCkKICAKICAgICAgaWYgcmlnID09IDEgdGhlbgogICAgICAgIGh1bTIuSGlwSGVpZ2h0ID0gMAogICAgICBlbHNlaWYgcmlnID09IDIgdGhlbgogICAgICAgIGh1bTIuSGlwSGVpZ2h0ID0gMi4xOQogICAgICBlbmQKICAgIGVsc2UKICAgICAgbm90aWZ5KCdJbmNvbXBhdGlibGUgRXhwbG9pdCcsJ1lvdXIgZXhwbG9pdCBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgY29tbWFuZCAobWlzc2luZyBzZXRoaWRkZW5wcm9wZXJ0eSknKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnbm9hcm1zJyx7J3Jhcm1zJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIHIxNShzcGVha2VyKSB0aGVuCiAgICAgIGZvciBpLHYgaW4gcGFpcnMoc3BlYWtlci5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSBhbmQKICAgICAgICAgIHYuTmFtZSA9PSAiUmlnaHRVcHBlckFybSIgb3IKICAgICAgICAgIHYuTmFtZSA9PSAiTGVmdFVwcGVyQXJtIiB0aGVuCiAgICAgICAgICB2OkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVsc2UKICAgICAgZm9yIGksdiBpbiBwYWlycyhzcGVha2VyLkNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIHY6SXNBKCJCYXNlUGFydCIpIGFuZAogICAgICAgICAgdi5OYW1lID09ICJSaWdodCBBcm0iIG9yCiAgICAgICAgICB2Lk5hbWUgPT0gIkxlZnQgQXJtIiB0aGVuCiAgICAgICAgICB2OkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ25vbGVncycseydybGVncyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiByMTUoc3BlYWtlcikgdGhlbgogICAgICBmb3IgaSx2IGluIHBhaXJzKHNwZWFrZXIuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgYW5kCiAgICAgICAgICB2Lk5hbWUgPT0gIlJpZ2h0VXBwZXJMZWciIG9yCiAgICAgICAgICB2Lk5hbWUgPT0gIkxlZnRVcHBlckxlZyIgdGhlbgogICAgICAgICAgdjpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbHNlCiAgICAgIGZvciBpLHYgaW4gcGFpcnMoc3BlYWtlci5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2OklzQSgiQmFzZVBhcnQiKSBhbmQKICAgICAgICAgIHYuTmFtZSA9PSAiUmlnaHQgTGVnIiBvcgogICAgICAgICAgdi5OYW1lID09ICJMZWZ0IExlZyIgdGhlbgogICAgICAgICAgdjpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCJzaXQiLCB7fSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIkh1bWFub2lkIikuU2l0ID0gdHJ1ZQogIGVuZCkKICAKICBhZGRjbWQoImxheSIsIHsibGF5ZG93biJ9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgaHVtYW5vaWQgPSBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJIdW1hbm9pZCIpCiAgICBodW1hbm9pZC5TaXQgPSB0cnVlCiAgICB0YXNrLndhaXQoMC4xKQogICAgaHVtYW5vaWQuUm9vdFBhcnQuQ0ZyYW1lID0gaHVtYW5vaWQuUm9vdFBhcnQuQ0ZyYW1lICogQ0ZyYW1lLkFuZ2xlcyhtYXRoLnBpICogMC41LCAwLCAwKQogICAgZm9yIF8sIHYgaW4gaXBhaXJzKGh1bWFub2lkOkdldFBsYXlpbmdBbmltYXRpb25UcmFja3MoKSkgZG8KICAgICAgdjpTdG9wKCkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoInNpdHdhbGsiLCB7fSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIGFuaW1zID0gc3BlYWtlci5DaGFyYWN0ZXIuQW5pbWF0ZQogICAgbG9jYWwgc2l0ID0gYW5pbXMuc2l0OkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIkFuaW1hdGlvbiIpLkFuaW1hdGlvbklkCiAgICBhbmltcy5pZGxlOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIkFuaW1hdGlvbiIpLkFuaW1hdGlvbklkID0gc2l0CiAgICBhbmltcy53YWxrOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIkFuaW1hdGlvbiIpLkFuaW1hdGlvbklkID0gc2l0CiAgICBhbmltcy5ydW46RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiQW5pbWF0aW9uIikuQW5pbWF0aW9uSWQgPSBzaXQKICAgIGFuaW1zLmp1bXA6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiQW5pbWF0aW9uIikuQW5pbWF0aW9uSWQgPSBzaXQKICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIkh1bWFub2lkIikuSGlwSGVpZ2h0ID0gbm90IHIxNShzcGVha2VyKSBhbmQgLTEuNSBvciAwLjUKICBlbmQpCiAgCiAgZnVuY3Rpb24gbm9TaXRGdW5jKCkKICAgIHdhaXQoKQogICAgaWYgUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiSHVtYW5vaWQiKS5TaXQgdGhlbgogICAgICBQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJIdW1hbm9pZCIpLlNpdCA9IGZhbHNlCiAgICBlbmQKICBlbmQKICBhZGRjbWQoIm5vc2l0Iiwge30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBub1NpdCB0aGVuIG5vU2l0OkRpc2Nvbm5lY3QoKSBub3NpdERpZWQ6RGlzY29ubmVjdCgpIGVuZAogICAgbm9TaXQgPSBQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJyk6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJTaXQiKTpDb25uZWN0KG5vU2l0RnVuYykKICAgIGxvY2FsIGZ1bmN0aW9uIG5vc2l0RGllZEZ1bmMoKQogICAgICByZXBlYXQgd2FpdCgpIHVudGlsIHNwZWFrZXIuQ2hhcmFjdGVyIH49IG5pbCBhbmQgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgIG5vU2l0OkRpc2Nvbm5lY3QoKQogICAgICBub1NpdCA9IFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKTpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIlNpdCIpOkNvbm5lY3Qobm9TaXRGdW5jKQogICAgZW5kCiAgICBub3NpdERpZWQgPSBzcGVha2VyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3Qobm9zaXREaWVkRnVuYykKICBlbmQpCiAgCiAgYWRkY21kKCJ1bm5vc2l0Iiwge30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBub1NpdCB0aGVuIG5vU2l0OkRpc2Nvbm5lY3QoKSBub3NpdERpZWQ6RGlzY29ubmVjdCgpIGVuZAogIGVuZCkKICAKICBhZGRjbWQoImp1bXAiLCB7fSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIkh1bWFub2lkIik6Q2hhbmdlU3RhdGUoRW51bS5IdW1hbm9pZFN0YXRlVHlwZS5KdW1waW5nKQogIGVuZCkKICAKICBsb2NhbCBpbmZKdW1wCiAgaW5mSnVtcERlYm91bmNlID0gZmFsc2UKICBhZGRjbWQoImluZmp1bXAiLCB7ImluZmluaXRlanVtcCJ9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgaW5mSnVtcCB0aGVuIGluZkp1bXA6RGlzY29ubmVjdCgpIGVuZAogICAgaW5mSnVtcERlYm91bmNlID0gZmFsc2UKICAgIGluZkp1bXAgPSBVc2VySW5wdXRTZXJ2aWNlLkp1bXBSZXF1ZXN0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBpZiBub3QgaW5mSnVtcERlYm91bmNlIHRoZW4KICAgICAgICBpbmZKdW1wRGVib3VuY2UgPSB0cnVlCiAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiSHVtYW5vaWQiKTpDaGFuZ2VTdGF0ZShFbnVtLkh1bWFub2lkU3RhdGVUeXBlLkp1bXBpbmcpCiAgICAgICAgd2FpdCgpCiAgICAgICAgaW5mSnVtcERlYm91bmNlID0gZmFsc2UKICAgICAgZW5kCiAgICBlbmQpCiAgZW5kKQogIAogIGFkZGNtZCgidW5pbmZqdW1wIiwgeyJ1bmluZmluaXRlanVtcCIsICJub2luZmp1bXAiLCAibm9pbmZpbml0ZWp1bXAifSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIGluZkp1bXAgdGhlbiBpbmZKdW1wOkRpc2Nvbm5lY3QoKSBlbmQKICAgIGluZkp1bXBEZWJvdW5jZSA9IGZhbHNlCiAgZW5kKQogIAogIGxvY2FsIGZseWp1bXAKICBhZGRjbWQoImZseWp1bXAiLCB7fSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIGZseWp1bXAgdGhlbiBmbHlqdW1wOkRpc2Nvbm5lY3QoKSBlbmQKICAgIGZseWp1bXAgPSBVc2VySW5wdXRTZXJ2aWNlLkp1bXBSZXF1ZXN0OkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJIdW1hbm9pZCIpOkNoYW5nZVN0YXRlKEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuSnVtcGluZykKICAgIGVuZCkKICBlbmQpCiAgCiAgYWRkY21kKCJ1bmZseWp1bXAiLCB7Im5vZmx5anVtcCJ9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgZmx5anVtcCB0aGVuIGZseWp1bXA6RGlzY29ubmVjdCgpIGVuZAogIGVuZCkKICAKICBsb2NhbCBIdW1hbk1vZENvbnMgPSB7fQogIGFkZGNtZCgnYXV0b2p1bXAnLHsnYWp1bXAnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgQ2hhciA9IHNwZWFrZXIuQ2hhcmFjdGVyCiAgICBsb2NhbCBIdW1hbiA9IENoYXIgYW5kIENoYXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiSHVtYW5vaWQiKQogICAgbG9jYWwgZnVuY3Rpb24gYXV0b0p1bXAoKQogICAgICBpZiBDaGFyIGFuZCBIdW1hbiB0aGVuCiAgICAgICAgbG9jYWwgY2hlY2sxID0gd29ya3NwYWNlOkZpbmRQYXJ0T25SYXkoUmF5Lm5ldyhIdW1hbi5Sb290UGFydC5Qb3NpdGlvbi1WZWN0b3IzLm5ldygwLDEuNSwwKSwgSHVtYW4uUm9vdFBhcnQuQ0ZyYW1lLmxvb2tWZWN0b3IqMyksIEh1bWFuLlBhcmVudCkKICAgICAgICBsb2NhbCBjaGVjazIgPSB3b3Jrc3BhY2U6RmluZFBhcnRPblJheShSYXkubmV3KEh1bWFuLlJvb3RQYXJ0LlBvc2l0aW9uK1ZlY3RvcjMubmV3KDAsMS41LDApLCBIdW1hbi5Sb290UGFydC5DRnJhbWUubG9va1ZlY3RvciozKSwgSHVtYW4uUGFyZW50KQogICAgICAgIGlmIGNoZWNrMSBvciBjaGVjazIgdGhlbgogICAgICAgICAgSHVtYW4uSnVtcCA9IHRydWUKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICAgIGF1dG9KdW1wKCkKICAgIEh1bWFuTW9kQ29ucy5hakxvb3AgPSAoSHVtYW5Nb2RDb25zLmFqTG9vcCBhbmQgSHVtYW5Nb2RDb25zLmFqTG9vcDpEaXNjb25uZWN0KCkgYW5kIGZhbHNlKSBvciBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChhdXRvSnVtcCkKICAgIEh1bWFuTW9kQ29ucy5hakNBID0gKEh1bWFuTW9kQ29ucy5hakNBIGFuZCBIdW1hbk1vZENvbnMuYWpDQTpEaXNjb25uZWN0KCkgYW5kIGZhbHNlKSBvciBzcGVha2VyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24obkNoYXIpCiAgICAgIENoYXIsIEh1bWFuID0gbkNoYXIsIG5DaGFyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKQogICAgICBhdXRvSnVtcCgpCiAgICAgIEh1bWFuTW9kQ29ucy5hakxvb3AgPSAoSHVtYW5Nb2RDb25zLmFqTG9vcCBhbmQgSHVtYW5Nb2RDb25zLmFqTG9vcDpEaXNjb25uZWN0KCkgYW5kIGZhbHNlKSBvciBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChhdXRvSnVtcCkKICAgIGVuZCkKICBlbmQpCiAgCiAgYWRkY21kKCd1bmF1dG9qdW1wJyx7J25vYXV0b2p1bXAnLCAnbm9hanVtcCcsICd1bmFqdW1wJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIEh1bWFuTW9kQ29ucy5hakxvb3AgPSAoSHVtYW5Nb2RDb25zLmFqTG9vcCBhbmQgSHVtYW5Nb2RDb25zLmFqTG9vcDpEaXNjb25uZWN0KCkgYW5kIGZhbHNlKSBvciBuaWwKICAgIEh1bWFuTW9kQ29ucy5hakNBID0gKEh1bWFuTW9kQ29ucy5hakNBIGFuZCBIdW1hbk1vZENvbnMuYWpDQTpEaXNjb25uZWN0KCkgYW5kIGZhbHNlKSBvciBuaWwKICBlbmQpCiAgCiAgYWRkY21kKCdlZGdlanVtcCcseydlanVtcCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBDaGFyID0gc3BlYWtlci5DaGFyYWN0ZXIKICAgIGxvY2FsIEh1bWFuID0gQ2hhciBhbmQgQ2hhcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJIdW1hbm9pZCIpCiAgICAtLSBGdWxsIGNyZWRpdCB0byBOb2VsR2FtZXIwNiBAVjNybWlsbGlvbgogICAgbG9jYWwgc3RhdGUKICAgIGxvY2FsIGxhc3RzdGF0ZQogICAgbG9jYWwgbGFzdGNmCiAgICBsb2NhbCBmdW5jdGlvbiBlZGdlanVtcCgpCiAgICAgIGlmIENoYXIgYW5kIEh1bWFuIHRoZW4KICAgICAgICBsYXN0c3RhdGUgPSBzdGF0ZQogICAgICAgIHN0YXRlID0gSHVtYW46R2V0U3RhdGUoKQogICAgICAgIGlmIGxhc3RzdGF0ZSB+PSBzdGF0ZSBhbmQgc3RhdGUgPT0gRW51bS5IdW1hbm9pZFN0YXRlVHlwZS5GcmVlZmFsbCBhbmQgbGFzdHN0YXRlIH49IEVudW0uSHVtYW5vaWRTdGF0ZVR5cGUuSnVtcGluZyB0aGVuCiAgICAgICAgICBDaGFyLkh1bWFub2lkUm9vdFBhcnQuQ0ZyYW1lID0gbGFzdGNmCiAgICAgICAgICBDaGFyLkh1bWFub2lkUm9vdFBhcnQuVmVsb2NpdHkgPSBWZWN0b3IzLm5ldyhDaGFyLkh1bWFub2lkUm9vdFBhcnQuVmVsb2NpdHkuWCwgSHVtYW4uSnVtcFBvd2VyIG9yIEh1bWFuLkp1bXBIZWlnaHQsIENoYXIuSHVtYW5vaWRSb290UGFydC5WZWxvY2l0eS5aKQogICAgICAgIGVuZAogICAgICAgIGxhc3RjZiA9IENoYXIuSHVtYW5vaWRSb290UGFydC5DRnJhbWUKICAgICAgZW5kCiAgICBlbmQKICAgIGVkZ2VqdW1wKCkKICAgIEh1bWFuTW9kQ29ucy5lakxvb3AgPSAoSHVtYW5Nb2RDb25zLmVqTG9vcCBhbmQgSHVtYW5Nb2RDb25zLmVqTG9vcDpEaXNjb25uZWN0KCkgYW5kIGZhbHNlKSBvciBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChlZGdlanVtcCkKICAgIEh1bWFuTW9kQ29ucy5lakNBID0gKEh1bWFuTW9kQ29ucy5lakNBIGFuZCBIdW1hbk1vZENvbnMuZWpDQTpEaXNjb25uZWN0KCkgYW5kIGZhbHNlKSBvciBzcGVha2VyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24obkNoYXIpCiAgICAgIENoYXIsIEh1bWFuID0gbkNoYXIsIG5DaGFyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKQogICAgICBlZGdlanVtcCgpCiAgICAgIEh1bWFuTW9kQ29ucy5lakxvb3AgPSAoSHVtYW5Nb2RDb25zLmVqTG9vcCBhbmQgSHVtYW5Nb2RDb25zLmVqTG9vcDpEaXNjb25uZWN0KCkgYW5kIGZhbHNlKSBvciBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChlZGdlanVtcCkKICAgIGVuZCkKICBlbmQpCiAgCiAgYWRkY21kKCd1bmVkZ2VqdW1wJyx7J25vZWRnZWp1bXAnLCAnbm9lanVtcCcsICd1bmVqdW1wJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIEh1bWFuTW9kQ29ucy5lakxvb3AgPSAoSHVtYW5Nb2RDb25zLmVqTG9vcCBhbmQgSHVtYW5Nb2RDb25zLmVqTG9vcDpEaXNjb25uZWN0KCkgYW5kIGZhbHNlKSBvciBuaWwKICAgIEh1bWFuTW9kQ29ucy5lakNBID0gKEh1bWFuTW9kQ29ucy5lakNBIGFuZCBIdW1hbk1vZENvbnMuZWpDQTpEaXNjb25uZWN0KCkgYW5kIGZhbHNlKSBvciBuaWwKICBlbmQpCiAgCiAgYWRkY21kKCd0ZWFtJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgdGVhbW5hbWUgPSBuaWwKICAgIGZvciBhLGIgaW4gcGFpcnMoVGVhbXM6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgbG9jYWwgTF9uYW1lID0gYi5OYW1lOmxvd2VyKCkKICAgICAgbG9jYWwgRiA9IExfbmFtZTpmaW5kKGdldHN0cmluZygxKSkKICAgICAgaWYgRiA9PSAxIHRoZW4KICAgICAgICB0ZWFtbmFtZSA9IGIgCiAgICAgIGVuZAogICAgZW5kCiAgICBzcGVha2VyLlRlYW0gPSB0ZWFtbmFtZQogIGVuZCkKICAKICBhZGRjbWQoJ25vYmd1aScseyd1bmJndWknLCdub2JpbGxib2FyZGd1aScsJ3VuYmlsbGJvYXJkZ3VpJywnbm9uYW1lJywncm9oZyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHNwZWFrZXIuQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpZG8KICAgICAgaWYgdjpJc0EoIkJpbGxib2FyZEd1aSIpIG9yIHY6SXNBKCJTdXJmYWNlR3VpIikgdGhlbgogICAgICAgIHY6RGVzdHJveSgpCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnbG9vcG5vYmd1aScseydsb29wdW5iZ3VpJywnbG9vcG5vYmlsbGJvYXJkZ3VpJywnbG9vcHVuYmlsbGJvYXJkZ3VpJywnbG9vcG5vbmFtZScsJ2xvb3Byb2hnJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMoc3BlYWtlci5DaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSlkbwogICAgICBpZiB2OklzQSgiQmlsbGJvYXJkR3VpIikgb3IgdjpJc0EoIlN1cmZhY2VHdWkiKSB0aGVuCiAgICAgICAgdjpEZXN0cm95KCkKICAgICAgZW5kCiAgICBlbmQKICAgIGxvY2FsIGZ1bmN0aW9uIGNoYXJQYXJ0QWRkZWQocGFydCkKICAgICAgaWYgcGFydDpJc0EoIkJpbGxib2FyZEd1aSIpIG9yIHBhcnQ6SXNBKCJTdXJmYWNlR3VpIikgdGhlbgogICAgICAgIHdhaXQoKQogICAgICAgIHBhcnQ6RGVzdHJveSgpCiAgICAgIGVuZAogICAgZW5kCiAgICBjaGFyUGFydFRyaWdnZXIgPSBzcGVha2VyLkNoYXJhY3Rlci5EZXNjZW5kYW50QWRkZWQ6Q29ubmVjdChjaGFyUGFydEFkZGVkKQogIGVuZCkKICAKICBhZGRjbWQoJ3VubG9vcG5vYmd1aScseyd1bmxvb3B1bmJndWknLCd1bmxvb3Bub2JpbGxib2FyZGd1aScsJ3VubG9vcHVuYmlsbGJvYXJkZ3VpJywndW5sb29wbm9uYW1lJywndW5sb29wcm9oZyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBjaGFyUGFydFRyaWdnZXIgdGhlbgogICAgICBjaGFyUGFydFRyaWdnZXI6RGlzY29ubmVjdCgpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdzcGFzbScse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIG5vdCByMTUoc3BlYWtlcikgdGhlbgogICAgICBsb2NhbCBwY2hhcj1zcGVha2VyLkNoYXJhY3RlcgogICAgICBsb2NhbCBBbmltYXRpb25JZCA9ICIzMzc5NjA1OSIKICAgICAgU3Bhc21BbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQogICAgICBTcGFzbUFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLyIuLkFuaW1hdGlvbklkCiAgICAgIFNwYXNtID0gcGNoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpOkxvYWRBbmltYXRpb24oU3Bhc21BbmltKQogICAgICBTcGFzbTpQbGF5KCkKICAgICAgU3Bhc206QWRqdXN0U3BlZWQoOTkpCiAgICBlbHNlCiAgICAgIG5vdGlmeSgnUjYgUmVxdWlyZWQnLCdUaGlzIGNvbW1hbmQgcmVxdWlyZXMgdGhlIHI2IHJpZyB0eXBlJykKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3Vuc3Bhc20nLHsnbm9zcGFzbSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBTcGFzbTpTdG9wKCkKICAgIFNwYXNtQW5pbTpEZXN0cm95KCkKICBlbmQpCiAgCiAgYWRkY21kKCdoZWFkdGhyb3cnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBub3QgcjE1KHNwZWFrZXIpIHRoZW4KICAgICAgbG9jYWwgQW5pbWF0aW9uSWQgPSAiMzUxNTQ5NjEiCiAgICAgIGxvY2FsIEFuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpCiAgICAgIEFuaW0uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLyIuLkFuaW1hdGlvbklkCiAgICAgIGxvY2FsIGsgPSBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJyk6TG9hZEFuaW1hdGlvbihBbmltKQogICAgICBrOlBsYXkoMCkKICAgICAgazpBZGp1c3RTcGVlZCgxKQogICAgZWxzZQogICAgICBub3RpZnkoJ1I2IFJlcXVpcmVkJywnVGhpcyBjb21tYW5kIHJlcXVpcmVzIHRoZSByNiByaWcgdHlwZScpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdhbmltYXRpb24nLHsnYW5pbSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBub3QgcjE1KHNwZWFrZXIpIHRoZW4KICAgICAgbG9jYWwgcGNoYXI9c3BlYWtlci5DaGFyYWN0ZXIKICAgICAgbG9jYWwgQW5pbWF0aW9uSWQgPSB0b3N0cmluZyhhcmdzWzFdKQogICAgICBsb2NhbCBBbmltID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQogICAgICBBbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8iLi5BbmltYXRpb25JZAogICAgICBsb2NhbCBrID0gcGNoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpOkxvYWRBbmltYXRpb24oQW5pbSkKICAgICAgazpQbGF5KCkKICAgICAgaWYgYXJnc1syXSB0aGVuCiAgICAgICAgazpBZGp1c3RTcGVlZCh0b3N0cmluZyhhcmdzWzJdKSkKICAgICAgZW5kCiAgICBlbHNlCiAgICAgIG5vdGlmeSgnUjYgUmVxdWlyZWQnLCdUaGlzIGNvbW1hbmQgcmVxdWlyZXMgdGhlIHI2IHJpZyB0eXBlJykKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ25vYW5pbScse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIHNwZWFrZXIuQ2hhcmFjdGVyLkFuaW1hdGUuRGlzYWJsZWQgPSB0cnVlCiAgZW5kKQogIAogIGFkZGNtZCgncmVhbmltJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgc3BlYWtlci5DaGFyYWN0ZXIuQW5pbWF0ZS5EaXNhYmxlZCA9IGZhbHNlCiAgZW5kKQogIAogIGFkZGNtZCgnYW5pbXNwZWVkJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgQ2hhciA9IHNwZWFrZXIuQ2hhcmFjdGVyCiAgICBsb2NhbCBIdW0gPSBDaGFyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKSBvciBDaGFyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiQW5pbWF0aW9uQ29udHJvbGxlciIpCiAgCiAgICBmb3IgaSx2IGluIG5leHQsIEh1bTpHZXRQbGF5aW5nQW5pbWF0aW9uVHJhY2tzKCkgZG8KICAgICAgdjpBZGp1c3RTcGVlZCh0b251bWJlcihhcmdzWzFdIG9yIDEpKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnY29weWFuaW1hdGlvbicseydjb3B5YW5pbScsJ2NvcHllbW90ZSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgXyx2IGluIGlwYWlycyhwbGF5ZXJzKWRvCiAgICAgIGxvY2FsIGNoYXIgPSBQbGF5ZXJzW3ZdLkNoYXJhY3RlcgogICAgICBmb3IgXywgdjEgaW4gcGFpcnMoc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpOkdldFBsYXlpbmdBbmltYXRpb25UcmFja3MoKSkgZG8KICAgICAgICB2MTpTdG9wKCkKICAgICAgZW5kCiAgICAgIGZvciBfLCB2MSBpbiBwYWlycyhQbGF5ZXJzW3ZdLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJyk6R2V0UGxheWluZ0FuaW1hdGlvblRyYWNrcygpKSBkbwogICAgICAgIGlmIG5vdCBzdHJpbmcuZmluZCh2MS5BbmltYXRpb24uQW5pbWF0aW9uSWQsICI1MDc3NjgzNzUiKSB0aGVuCiAgICAgICAgICBsb2NhbCBBTklNID0gc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpOkxvYWRBbmltYXRpb24odjEuQW5pbWF0aW9uKQogICAgICAgICAgQU5JTTpQbGF5KC4xLCAxLCB2MS5TcGVlZCkKICAgICAgICAgIEFOSU0uVGltZVBvc2l0aW9uID0gdjEuVGltZVBvc2l0aW9uCiAgICAgICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICAgICAgdjEuU3RvcHBlZDpXYWl0KCkKICAgICAgICAgICAgQU5JTTpTdG9wKCkKICAgICAgICAgICAgQU5JTTpEZXN0cm95KCkKICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdzdG9wYW5pbWF0aW9ucycseydzdG9wYW5pbXMnLCdzdG9wYW5pbSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBDaGFyID0gc3BlYWtlci5DaGFyYWN0ZXIKICAgIGxvY2FsIEh1bSA9IENoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpIG9yIENoYXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJBbmltYXRpb25Db250cm9sbGVyIikKICAKICAgIGZvciBpLHYgaW4gbmV4dCwgSHVtOkdldFBsYXlpbmdBbmltYXRpb25UcmFja3MoKSBkbwogICAgICB2OlN0b3AoKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgncmVmcmVzaGFuaW1hdGlvbnMnLCB7J3JlZnJlc2hhbmltYXRpb24nLCAncmVmcmVzaGFuaW1zJywgJ3JlZnJlc2hhbmltJ30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBDaGFyID0gc3BlYWtlci5DaGFyYWN0ZXIgb3Igc3BlYWtlci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCkKICAgIGxvY2FsIEh1bWFuID0gQ2hhciBhbmQgQ2hhcjpXYWl0Rm9yQ2hpbGQoJ0h1bWFub2lkJywgMTUpCiAgICBsb2NhbCBBbmltYXRlID0gQ2hhciBhbmQgQ2hhcjpXYWl0Rm9yQ2hpbGQoJ0FuaW1hdGUnLCAxNSkKICAgIGlmIG5vdCBIdW1hbiBvciBub3QgQW5pbWF0ZSB0aGVuCiAgICAgIHJldHVybiBub3RpZnkoJ1JlZnJlc2ggQW5pbWF0aW9ucycsICdGYWlsZWQgdG8gZ2V0IEFuaW1hdGUvSHVtYW5vaWQnKQogICAgZW5kCiAgICBBbmltYXRlLkRpc2FibGVkID0gdHJ1ZQogICAgZm9yIF8sIHYgaW4gaXBhaXJzKEh1bWFuOkdldFBsYXlpbmdBbmltYXRpb25UcmFja3MoKSkgZG8KICAgICAgdjpTdG9wKCkKICAgIGVuZAogICAgQW5pbWF0ZS5EaXNhYmxlZCA9IGZhbHNlCiAgZW5kKQogIAogIGFkZGNtZCgnYWxsb3djdXN0b21hbmltJywgeydhbGxvd2N1c3RvbWFuaW1hdGlvbnMnfSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIFN0YXJ0ZXJQbGF5ZXIuQWxsb3dDdXN0b21BbmltYXRpb25zID0gdHJ1ZQogICAgZXhlY0NtZCgncmVmcmVzaGFuaW1hdGlvbnMnKQogIGVuZCkKICAKICBhZGRjbWQoJ3VuYWxsb3djdXN0b21hbmltJywgeyd1bmFsbG93Y3VzdG9tYW5pbWF0aW9ucyd9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgU3RhcnRlclBsYXllci5BbGxvd0N1c3RvbUFuaW1hdGlvbnMgPSBmYWxzZQogICAgZXhlY0NtZCgncmVmcmVzaGFuaW1hdGlvbnMnKQogIGVuZCkKICAKICBhZGRjbWQoJ2xvb3BhbmltYXRpb24nLCB7J2xvb3BhbmltJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIENoYXIgPSBzcGVha2VyLkNoYXJhY3RlcgogICAgbG9jYWwgSHVtYW4gPSBDaGFyIGFuZCBDaGFyLkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoQ2hhciwgIkh1bWFub2lkIikKICAgIGZvciBfLCB2IGluIGlwYWlycyhIdW1hbi5HZXRQbGF5aW5nQW5pbWF0aW9uVHJhY2tzKEh1bWFuKSkgZG8KICAgICAgdi5Mb29wZWQgPSB0cnVlCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd0cHBvc2l0aW9uJyx7J3RwcG9zJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmICNhcmdzIDwgMyB0aGVuIHJldHVybiBlbmQKICAgIGxvY2FsIHRwWCx0cFksdHBaID0gdG9udW1iZXIoYXJnc1sxXSksdG9udW1iZXIoYXJnc1syXSksdG9udW1iZXIoYXJnc1szXSkKICAgIGxvY2FsIGNoYXIgPSBzcGVha2VyLkNoYXJhY3RlcgogICAgaWYgY2hhciBhbmQgZ2V0Um9vdChjaGFyKSB0aGVuCiAgICAgIGdldFJvb3QoY2hhcikuQ0ZyYW1lID0gQ0ZyYW1lLm5ldyh0cFgsdHBZLHRwWikKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3R3ZWVudHBwb3NpdGlvbicseyd0dHBwb3MnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgI2FyZ3MgPCAzIHRoZW4gcmV0dXJuIGVuZAogICAgbG9jYWwgdHBYLHRwWSx0cFogPSB0b251bWJlcihhcmdzWzFdKSx0b251bWJlcihhcmdzWzJdKSx0b251bWJlcihhcmdzWzNdKQogICAgbG9jYWwgY2hhciA9IHNwZWFrZXIuQ2hhcmFjdGVyCiAgICBpZiBjaGFyIGFuZCBnZXRSb290KGNoYXIpIHRoZW4KICAgICAgVHdlZW5TZXJ2aWNlOkNyZWF0ZShnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKSwgVHdlZW5JbmZvLm5ldyh0d2VlblNwZWVkLCBFbnVtLkVhc2luZ1N0eWxlLkxpbmVhciksIHtDRnJhbWUgPSBDRnJhbWUubmV3KHRwWCx0cFksdHBaKX0pOlBsYXkoKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnb2Zmc2V0Jyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgI2FyZ3MgPCAzIHRoZW4KICAgICAgcmV0dXJuIAogICAgZW5kCiAgICBpZiBzcGVha2VyLkNoYXJhY3RlciB0aGVuCiAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyOlRyYW5zbGF0ZUJ5KFZlY3RvcjMubmV3KHRvbnVtYmVyKGFyZ3NbMV0pIG9yIDAsIHRvbnVtYmVyKGFyZ3NbMl0pIG9yIDAsIHRvbnVtYmVyKGFyZ3NbM10pIG9yIDApKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndHdlZW5vZmZzZXQnLHsndG9mZnNldCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiAjYXJncyA8IDMgdGhlbiByZXR1cm4gZW5kCiAgICBsb2NhbCB0cFgsdHBZLHRwWiA9IHRvbnVtYmVyKGFyZ3NbMV0pLHRvbnVtYmVyKGFyZ3NbMl0pLHRvbnVtYmVyKGFyZ3NbM10pCiAgICBsb2NhbCBjaGFyID0gc3BlYWtlci5DaGFyYWN0ZXIKICAgIGlmIGNoYXIgYW5kIGdldFJvb3QoY2hhcikgdGhlbgogICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpLCBUd2VlbkluZm8ubmV3KHR3ZWVuU3BlZWQsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKSwge0NGcmFtZSA9IENGcmFtZS5uZXcodHBYLHRwWSx0cFopfSk6UGxheSgpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdjbGlja3RlbGVwb3J0Jyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgc3BlYWtlciA9PSBQbGF5ZXJzLkxvY2FsUGxheWVyIHRoZW4KICAgICAgbm90aWZ5KCdDbGljayBUUCcsJ0dvIHRvIFNldHRpbmdzPktleWJpbmRzPkFkZCB0byBzZXQgdXAgY2xpY2sgdHAnKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndHB0b29sJywgeyd0ZWxlcG9ydHRvb2wnfSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIFRwVG9vbCA9IEluc3RhbmNlLm5ldygiVG9vbCIpCiAgICBUcFRvb2wuTmFtZSA9ICJUZWxlcG9ydCBUb29sIgogICAgVHBUb29sLlJlcXVpcmVzSGFuZGxlID0gZmFsc2UKICAgIFRwVG9vbC5QYXJlbnQgPSBzcGVha2VyLkJhY2twYWNrCiAgICBUcFRvb2wuQWN0aXZhdGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICBsb2NhbCBDaGFyID0gc3BlYWtlci5DaGFyYWN0ZXIgb3Igd29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKHNwZWFrZXIuTmFtZSkKICAgICAgbG9jYWwgSFJQID0gQ2hhciBhbmQgQ2hhcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpCiAgICAgIGlmIG5vdCBDaGFyIG9yIG5vdCBIUlAgdGhlbgogICAgICAgIHJldHVybiB3YXJuKCJGYWlsZWQgdG8gZmluZCBIdW1hbm9pZFJvb3RQYXJ0IikKICAgICAgZW5kCiAgICAgIEhSUC5DRnJhbWUgPSBDRnJhbWUubmV3KElZTW91c2UuSGl0LlgsIElZTW91c2UuSGl0LlkgKyAzLCBJWU1vdXNlLkhpdC5aLCBzZWxlY3QoNCwgSFJQLkNGcmFtZTpjb21wb25lbnRzKCkpKQogICAgZW5kKQogIGVuZCkKICAKICBhZGRjbWQoJ2NsaWNrZGVsZXRlJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgc3BlYWtlciA9PSBQbGF5ZXJzLkxvY2FsUGxheWVyIHRoZW4KICAgICAgbm90aWZ5KCdDbGljayBEZWxldGUnLCdHbyB0byBTZXR0aW5ncz5LZXliaW5kcz5BZGQgdG8gc2V0IHVwIGNsaWNrIGRlbGV0ZScpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdnZXRwb3NpdGlvbicseydnZXRwb3MnLCdub3RpZnlwb3MnLCdub3RpZnlwb3NpdGlvbid9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpZG8KICAgICAgbG9jYWwgY2hhciA9IFBsYXllcnNbdl0uQ2hhcmFjdGVyCiAgICAgIGxvY2FsIHBvcyA9IGNoYXIgYW5kIChnZXRSb290KGNoYXIpIG9yIGNoYXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiQmFzZVBhcnQiKSkKICAgICAgcG9zID0gcG9zIGFuZCBwb3MuUG9zaXRpb24KICAgICAgaWYgbm90IHBvcyB0aGVuCiAgICAgICAgcmV0dXJuIG5vdGlmeSgnR2V0cG9zaXRpb24gRXJyb3InLCdNaXNzaW5nIGNoYXJhY3RlcicpCiAgICAgIGVuZAogICAgICBsb2NhbCByb3VuZGVkUG9zID0gbWF0aC5yb3VuZChwb3MuWCkgLi4gIiwgIiAuLiBtYXRoLnJvdW5kKHBvcy5ZKSAuLiAiLCAiIC4uIG1hdGgucm91bmQocG9zLlopCiAgICAgIG5vdGlmeSgnQ3VycmVudCBQb3NpdGlvbicscm91bmRlZFBvcykKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2NvcHlwb3NpdGlvbicseydjb3B5cG9zJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHBsYXllcnMgPSBnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycylkbwogICAgICBsb2NhbCBjaGFyID0gUGxheWVyc1t2XS5DaGFyYWN0ZXIKICAgICAgbG9jYWwgcG9zID0gY2hhciBhbmQgKGdldFJvb3QoY2hhcikgb3IgY2hhcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJCYXNlUGFydCIpKQogICAgICBwb3MgPSBwb3MgYW5kIHBvcy5Qb3NpdGlvbgogICAgICBpZiBub3QgcG9zIHRoZW4KICAgICAgICByZXR1cm4gbm90aWZ5KCdHZXRwb3NpdGlvbiBFcnJvcicsJ01pc3NpbmcgY2hhcmFjdGVyJykKICAgICAgZW5kCiAgICAgIGxvY2FsIHJvdW5kZWRQb3MgPSBtYXRoLnJvdW5kKHBvcy5YKSAuLiAiLCAiIC4uIG1hdGgucm91bmQocG9zLlkpIC4uICIsICIgLi4gbWF0aC5yb3VuZChwb3MuWikKICAgICAgdG9DbGlwYm9hcmQocm91bmRlZFBvcykKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3dhbGt0b3Bvcycseyd3YWxrdG9wb3NpdGlvbid9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykgYW5kIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TZWF0UGFydCB0aGVuCiAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TaXQgPSBmYWxzZQogICAgICB3YWl0KC4xKQogICAgZW5kCiAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuV2Fsa1RvUG9pbnQgPSBWZWN0b3IzLm5ldyhhcmdzWzFdLGFyZ3NbMl0sYXJnc1szXSkKICBlbmQpCiAgCiAgYWRkY21kKCdzcGVlZCcseyd3cycsJ3dhbGtzcGVlZCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBhcmdzWzJdIHRoZW4KICAgICAgbG9jYWwgc3BlZWQgPSBhcmdzWzJdIG9yIDE2CiAgICAgIGlmIGlzTnVtYmVyKHNwZWVkKSB0aGVuCiAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLldhbGtTcGVlZCA9IHNwZWVkCiAgICAgIGVuZAogICAgZWxzZQogICAgICBsb2NhbCBzcGVlZCA9IGFyZ3NbMV0gb3IgMTYKICAgICAgaWYgaXNOdW1iZXIoc3BlZWQpIHRoZW4KICAgICAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuV2Fsa1NwZWVkID0gc3BlZWQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdzcG9vZnNwZWVkJyx7J3Nwb29md3MnLCdzcG9vZndhbGtzcGVlZCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBhcmdzWzFdIGFuZCBpc051bWJlcihhcmdzWzFdKSB0aGVuCiAgICAgIGlmIGhvb2ttZXRhbWV0aG9kIHRoZW4KICAgICAgICBsb2NhbCBjaGFyID0gc3BlYWtlci5DaGFyYWN0ZXIKICAgICAgICBsb2NhbCBzZXRzcGVlZDsKICAgICAgICBsb2NhbCBpbmRleDsgaW5kZXggPSBob29rbWV0YW1ldGhvZChnYW1lLCAiX19pbmRleCIsIGZ1bmN0aW9uKHNlbGYsIGtleSkKICAgICAgICAgIGxvY2FsIGtleWNsZWFuID0ga2V5OmdzdWIoIlwwIiwgIiIpCiAgICAgICAgICBpZiAoa2V5Y2xlYW4gPT0gIldhbGtTcGVlZCIgb3Iga2V5Y2xlYW4gPT0gIndhbGtTcGVlZCIpIGFuZCBzZWxmOklzQSgiSHVtYW5vaWQiKSBhbmQgc2VsZjpJc0Rlc2NlbmRhbnRPZihjaGFyKSBhbmQgbm90IGNoZWNrY2FsbGVyKCkgdGhlbgogICAgICAgICAgICByZXR1cm4gc2V0c3BlZWQgb3IgYXJnc1sxXQogICAgICAgICAgZW5kCiAgICAgICAgICByZXR1cm4gaW5kZXgoc2VsZiwga2V5KQogICAgICAgIGVuZCkKICAgICAgICBsb2NhbCBuZXdpbmRleDsgbmV3aW5kZXggPSBob29rbWV0YW1ldGhvZChnYW1lLCAiX19uZXdpbmRleCIsIGZ1bmN0aW9uKHNlbGYsIGtleSwgdmFsdWUpCiAgICAgICAgICBsb2NhbCBrZXljbGVhbiA9IHN0cmluZy5nc3ViKGtleSwgIlwwIiwgIiIpCiAgICAgICAgICBpZiAoa2V5Y2xlYW4gPT0gIldhbGtTcGVlZCIgb3Iga2V5Y2xlYW4gPT0gIndhbGtTcGVlZCIpIGFuZCBzZWxmOklzQSgiSHVtYW5vaWQiKSBhbmQgc2VsZjpJc0Rlc2NlbmRhbnRPZihjaGFyKSBhbmQgbm90IGNoZWNrY2FsbGVyKCkgdGhlbgogICAgICAgICAgICBzZXRzcGVlZCA9IHRvbnVtYmVyKHZhbHVlKQogICAgICAgICAgICByZXR1cm4gc2V0c3BlZWQKICAgICAgICAgIGVuZAogICAgICAgICAgcmV0dXJuIG5ld2luZGV4KHNlbGYsIGtleSwgdmFsdWUpCiAgICAgICAgZW5kKQogICAgICBlbHNlCiAgICAgICAgbm90aWZ5KCdJbmNvbXBhdGlibGUgRXhwbG9pdCcsJ1lvdXIgZXhwbG9pdCBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgY29tbWFuZCAobWlzc2luZyBob29rbWV0YW1ldGhvZCknKQogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2xvb3BzcGVlZCcseydsb29wd3MnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgc3BlZWQgPSBhcmdzWzFdIG9yIDE2CiAgICBpZiBhcmdzWzJdIHRoZW4KICAgICAgc3BlZWQgPSBhcmdzWzJdIG9yIDE2CiAgICBlbmQKICAgIGlmIGlzTnVtYmVyKHNwZWVkKSB0aGVuCiAgICAgIGxvY2FsIENoYXIgPSBzcGVha2VyLkNoYXJhY3RlciBvciB3b3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGQoc3BlYWtlci5OYW1lKQogICAgICBsb2NhbCBIdW1hbiA9IENoYXIgYW5kIENoYXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiSHVtYW5vaWQiKQogICAgICBsb2NhbCBmdW5jdGlvbiBXYWxrU3BlZWRDaGFuZ2UoKQogICAgICAgIGlmIENoYXIgYW5kIEh1bWFuIHRoZW4KICAgICAgICAgIEh1bWFuLldhbGtTcGVlZCA9IHNwZWVkCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICBXYWxrU3BlZWRDaGFuZ2UoKQogICAgICBIdW1hbk1vZENvbnMud3NMb29wID0gKEh1bWFuTW9kQ29ucy53c0xvb3AgYW5kIEh1bWFuTW9kQ29ucy53c0xvb3A6RGlzY29ubmVjdCgpIGFuZCBmYWxzZSkgb3IgSHVtYW46R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJXYWxrU3BlZWQiKTpDb25uZWN0KFdhbGtTcGVlZENoYW5nZSkKICAgICAgSHVtYW5Nb2RDb25zLndzQ0EgPSAoSHVtYW5Nb2RDb25zLndzQ0EgYW5kIEh1bWFuTW9kQ29ucy53c0NBOkRpc2Nvbm5lY3QoKSBhbmQgZmFsc2UpIG9yIHNwZWFrZXIuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihuQ2hhcikKICAgICAgICBDaGFyLCBIdW1hbiA9IG5DaGFyLCBuQ2hhcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIikKICAgICAgICBXYWxrU3BlZWRDaGFuZ2UoKQogICAgICAgIEh1bWFuTW9kQ29ucy53c0xvb3AgPSAoSHVtYW5Nb2RDb25zLndzTG9vcCBhbmQgSHVtYW5Nb2RDb25zLndzTG9vcDpEaXNjb25uZWN0KCkgYW5kIGZhbHNlKSBvciBIdW1hbjpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIldhbGtTcGVlZCIpOkNvbm5lY3QoV2Fsa1NwZWVkQ2hhbmdlKQogICAgICBlbmQpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd1bmxvb3BzcGVlZCcseyd1bmxvb3B3cyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBIdW1hbk1vZENvbnMud3NMb29wID0gKEh1bWFuTW9kQ29ucy53c0xvb3AgYW5kIEh1bWFuTW9kQ29ucy53c0xvb3A6RGlzY29ubmVjdCgpIGFuZCBmYWxzZSkgb3IgbmlsCiAgICBIdW1hbk1vZENvbnMud3NDQSA9IChIdW1hbk1vZENvbnMud3NDQSBhbmQgSHVtYW5Nb2RDb25zLndzQ0E6RGlzY29ubmVjdCgpIGFuZCBmYWxzZSkgb3IgbmlsCiAgZW5kKQogIAogIGFkZGNtZCgnc3Bvb2ZqdW1wcG93ZXInLHsnc3Bvb2ZqcCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBhcmdzWzFdIGFuZCBpc051bWJlcihhcmdzWzFdKSB0aGVuCiAgICAgIGlmIGhvb2ttZXRhbWV0aG9kIHRoZW4KICAgICAgICBsb2NhbCBjaGFyID0gc3BlYWtlci5DaGFyYWN0ZXIKICAgICAgICBsb2NhbCBzZXRwb3dlcjsKICAgICAgICBsb2NhbCBpbmRleDsgaW5kZXggPSBob29rbWV0YW1ldGhvZChnYW1lLCAiX19pbmRleCIsIGZ1bmN0aW9uKHNlbGYsIGtleSkKICAgICAgICAgIGxvY2FsIGtleWNsZWFuID0ga2V5OmdzdWIoIlwwIiwgIiIpCiAgICAgICAgICBpZiAoa2V5Y2xlYW4gPT0gIkp1bXBQb3dlciIgb3Iga2V5Y2xlYW4gPT0gImp1bXBQb3dlciIpIGFuZCBzZWxmOklzQSgiSHVtYW5vaWQiKSBhbmQgc2VsZjpJc0Rlc2NlbmRhbnRPZihjaGFyKSBhbmQgbm90IGNoZWNrY2FsbGVyKCkgdGhlbgogICAgICAgICAgICByZXR1cm4gc2V0cG93ZXIgb3IgYXJnc1sxXQogICAgICAgICAgZW5kCiAgICAgICAgICByZXR1cm4gaW5kZXgoc2VsZiwga2V5KQogICAgICAgIGVuZCkKICAgICAgICBsb2NhbCBuZXdpbmRleDsgbmV3aW5kZXggPSBob29rbWV0YW1ldGhvZChnYW1lLCAiX19uZXdpbmRleCIsIGZ1bmN0aW9uKHNlbGYsIGtleSwgdmFsdWUpCiAgICAgICAgICBsb2NhbCBrZXljbGVhbiA9IHN0cmluZy5nc3ViKGtleSwgIlwwIiwgIiIpCiAgICAgICAgICBpZiAoa2V5Y2xlYW4gPT0gIkp1bXBQb3dlciIgb3Iga2V5Y2xlYW4gPT0gImp1bXBQb3dlciIpIGFuZCBzZWxmOklzQSgiSHVtYW5vaWQiKSBhbmQgc2VsZjpJc0Rlc2NlbmRhbnRPZihjaGFyKSBhbmQgbm90IGNoZWNrY2FsbGVyKCkgdGhlbgogICAgICAgICAgICBzZXRwb3dlciA9IHRvbnVtYmVyKHZhbHVlKQogICAgICAgICAgICByZXR1cm4gc2V0cG93ZXIKICAgICAgICAgIGVuZAogICAgICAgICAgcmV0dXJuIG5ld2luZGV4KHNlbGYsIGtleSwgdmFsdWUpCiAgICAgICAgZW5kKQogICAgICBlbHNlCiAgICAgICAgbm90aWZ5KCdJbmNvbXBhdGlibGUgRXhwbG9pdCcsJ1lvdXIgZXhwbG9pdCBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgY29tbWFuZCAobWlzc2luZyBob29rbWV0YW1ldGhvZCknKQogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2xvb3BqdW1wcG93ZXInLHsnbG9vcGpwJywnbG9vcGpwb3dlcid9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBqcG93ZXIgPSBhcmdzWzFdIG9yIDUwCiAgICBpZiBpc051bWJlcihqcG93ZXIpIHRoZW4KICAgICAgbG9jYWwgQ2hhciA9IHNwZWFrZXIuQ2hhcmFjdGVyIG9yIHdvcmtzcGFjZTpGaW5kRmlyc3RDaGlsZChzcGVha2VyLk5hbWUpCiAgICAgIGxvY2FsIEh1bWFuID0gQ2hhciBhbmQgQ2hhcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJIdW1hbm9pZCIpCiAgICAgIGxvY2FsIGZ1bmN0aW9uIEp1bXBQb3dlckNoYW5nZSgpCiAgICAgICAgaWYgQ2hhciBhbmQgSHVtYW4gdGhlbgogICAgICAgICAgaWYgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlVzZUp1bXBQb3dlciB0aGVuCiAgICAgICAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5KdW1wUG93ZXIgPSBqcG93ZXIKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLkp1bXBIZWlnaHQgID0ganBvd2VyCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIEp1bXBQb3dlckNoYW5nZSgpCiAgICAgIEh1bWFuTW9kQ29ucy5qcExvb3AgPSAoSHVtYW5Nb2RDb25zLmpwTG9vcCBhbmQgSHVtYW5Nb2RDb25zLmpwTG9vcDpEaXNjb25uZWN0KCkgYW5kIGZhbHNlKSBvciBIdW1hbjpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIkp1bXBQb3dlciIpOkNvbm5lY3QoSnVtcFBvd2VyQ2hhbmdlKQogICAgICBIdW1hbk1vZENvbnMuanBDQSA9IChIdW1hbk1vZENvbnMuanBDQSBhbmQgSHVtYW5Nb2RDb25zLmpwQ0E6RGlzY29ubmVjdCgpIGFuZCBmYWxzZSkgb3Igc3BlYWtlci5DaGFyYWN0ZXJBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKG5DaGFyKQogICAgICAgIENoYXIsIEh1bWFuID0gbkNoYXIsIG5DaGFyOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKQogICAgICAgIEp1bXBQb3dlckNoYW5nZSgpCiAgICAgICAgSHVtYW5Nb2RDb25zLmpwTG9vcCA9IChIdW1hbk1vZENvbnMuanBMb29wIGFuZCBIdW1hbk1vZENvbnMuanBMb29wOkRpc2Nvbm5lY3QoKSBhbmQgZmFsc2UpIG9yIEh1bWFuOkdldFByb3BlcnR5Q2hhbmdlZFNpZ25hbCgiSnVtcFBvd2VyIik6Q29ubmVjdChKdW1wUG93ZXJDaGFuZ2UpCiAgICAgIGVuZCkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3VubG9vcGp1bXBwb3dlcicseyd1bmxvb3BqcCcsJ3VubG9vcGpwb3dlcid9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBDaGFyID0gc3BlYWtlci5DaGFyYWN0ZXIgb3Igd29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKHNwZWFrZXIuTmFtZSkKICAgIGxvY2FsIEh1bWFuID0gQ2hhciBhbmQgQ2hhcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJIdW1hbm9pZCIpCiAgICBIdW1hbk1vZENvbnMuanBMb29wID0gKEh1bWFuTW9kQ29ucy5qcExvb3AgYW5kIEh1bWFuTW9kQ29ucy5qcExvb3A6RGlzY29ubmVjdCgpIGFuZCBmYWxzZSkgb3IgbmlsCiAgICBIdW1hbk1vZENvbnMuanBDQSA9IChIdW1hbk1vZENvbnMuanBDQSBhbmQgSHVtYW5Nb2RDb25zLmpwQ0E6RGlzY29ubmVjdCgpIGFuZCBmYWxzZSkgb3IgbmlsCiAgICBpZiBDaGFyIGFuZCBIdW1hbiB0aGVuCiAgICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5Vc2VKdW1wUG93ZXIgdGhlbgogICAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5KdW1wUG93ZXIgPSA1MAogICAgICBlbHNlCiAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLkp1bXBIZWlnaHQgID0gNTAKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd0b29scycseydnZWFycyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBmdW5jdGlvbiBjb3B5KGluc3RhbmNlKQogICAgICBmb3IgaSxjIGluIHBhaXJzKGluc3RhbmNlOkdldENoaWxkcmVuKCkpZG8KICAgICAgICBpZiBjOklzQSgnVG9vbCcpIG9yIGM6SXNBKCdIb3BwZXJCaW4nKSB0aGVuCiAgICAgICAgICBjOkNsb25lKCkuUGFyZW50ID0gc3BlYWtlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkJhY2twYWNrIikKICAgICAgICBlbmQKICAgICAgICBjb3B5KGMpCiAgICAgIGVuZAogICAgZW5kCiAgICBjb3B5KExpZ2h0aW5nKQogICAgbG9jYWwgZnVuY3Rpb24gY29weShpbnN0YW5jZSkKICAgICAgZm9yIGksYyBpbiBwYWlycyhpbnN0YW5jZTpHZXRDaGlsZHJlbigpKWRvCiAgICAgICAgaWYgYzpJc0EoJ1Rvb2wnKSBvciBjOklzQSgnSG9wcGVyQmluJykgdGhlbgogICAgICAgICAgYzpDbG9uZSgpLlBhcmVudCA9IHNwZWFrZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJCYWNrcGFjayIpCiAgICAgICAgZW5kCiAgICAgICAgY29weShjKQogICAgICBlbmQKICAgIGVuZAogICAgY29weShSZXBsaWNhdGVkU3RvcmFnZSkKICAgIG5vdGlmeSgnVG9vbHMnLCdDb3BpZWQgdG9vbHMgZnJvbSBSZXBsaWNhdGVkU3RvcmFnZSBhbmQgTGlnaHRpbmcnKQogIGVuZCkKICAKICBhZGRjbWQoJ25vdG9vbHMnLHsncnRvb2xzJywnY2xydG9vbHMnLCdyZW1vdmV0b29scycsJ2RlbGV0ZXRvb2xzJywnZHRvb2xzJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMoc3BlYWtlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkJhY2twYWNrIik6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgaWYgdjpJc0EoJ1Rvb2wnKSBvciB2OklzQSgnSG9wcGVyQmluJykgdGhlbgogICAgICAgIHY6RGVzdHJveSgpCiAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgaSx2IGluIHBhaXJzKHNwZWFrZXIuQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgIGlmIHY6SXNBKCdUb29sJykgb3IgdjpJc0EoJ0hvcHBlckJpbicpIHRoZW4KICAgICAgICB2OkRlc3Ryb3koKQogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2RlbGV0ZXNlbGVjdGVkdG9vbCcseydkc3QnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhzcGVha2VyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiB2OklzQSgnVG9vbCcpIG9yIHY6SXNBKCdIb3BwZXJCaW4nKSB0aGVuCiAgICAgICAgdjpEZXN0cm95KCkKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdjb25zb2xlJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgLS0gVGhhbmtzIHdhbGx5ISEKICAgIG5vdGlmeSgiTG9hZGluZyIsJ0hvbGQgb24gYSBzZWMnKQogICAgbG9jYWwgXywgc3RyID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICByZXR1cm4gZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vaW5meWlmZi9iYWNrdXAvbWFpbi9jb25zb2xlLmx1YSIsIHRydWUpCiAgICBlbmQpCiAgCiAgICBsb2NhbCBzLCBlID0gbG9hZHN0cmluZyhzdHIpCiAgICBpZiB0eXBlb2Yocykgfj0gImZ1bmN0aW9uIiB0aGVuCiAgICAgIHJldHVybgogICAgZW5kCiAgCiAgICBsb2NhbCBzdWNjZXNzLCBtZXNzYWdlID0gcGNhbGwocykKICAgIGlmIChub3Qgc3VjY2VzcykgdGhlbgogICAgICBpZiBwcmludGNvbnNvbGUgdGhlbgogICAgICAgIHByaW50Y29uc29sZShtZXNzYWdlKQogICAgICBlbHNlaWYgcHJpbnRvdXRwdXQgdGhlbgogICAgICAgIHByaW50b3V0cHV0KG1lc3NhZ2UpCiAgICAgIGVuZAogICAgZW5kCiAgICB3YWl0KDEpCiAgICBub3RpZnkoJ0NvbnNvbGUnLCdQcmVzcyBGOSB0byBvcGVuIHRoZSBjb25zb2xlJykKICBlbmQpCiAgCiAgYWRkY21kKCdleHBsb3JlcicsIHsnZGV4J30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBub3RpZnkoJ0xvYWRpbmcnLCAnSG9sZCBvbiBhIHNlYycpCiAgICBsb2Fkc3RyaW5nKGdhbWU6SHR0cEdldCgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2luZnlpZmYvYmFja3VwL21haW4vZGV4Lmx1YSIpKSgpCiAgZW5kKQogIAogIGFkZGNtZCgnb2xkZGV4JywgeydvZGV4J30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBub3RpZnkoJ0xvYWRpbmcgb2xkIGV4cGxvcmVyJywgJ0hvbGQgb24gYSBzZWMnKQogIAogICAgbG9jYWwgZ2V0b2JqZWN0cyA9IGZ1bmN0aW9uKGEpCiAgICAgIGxvY2FsIE9iamVjdHMgPSB7fQogICAgICBpZiBhIHRoZW4KICAgICAgICBsb2NhbCBiID0gSW5zZXJ0U2VydmljZTpMb2FkTG9jYWxBc3NldChhKQogICAgICAgIGlmIGIgdGhlbiAKICAgICAgICAgIHRhYmxlLmluc2VydChPYmplY3RzLCBiKSAKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIHJldHVybiBPYmplY3RzCiAgICBlbmQKICAKICAgIGxvY2FsIERleCA9IGdldG9iamVjdHMoInJieGFzc2V0aWQ6Ly8xMDA1NTg0MjQzOCIpWzFdCiAgICBEZXguUGFyZW50ID0gUEFSRU5UCiAgCiAgICBsb2NhbCBmdW5jdGlvbiBMb2FkKE9iaiwgVXJsKQogICAgICBsb2NhbCBmdW5jdGlvbiBHaXZlT3duR2xvYmFscyhGdW5jLCBTY3JpcHQpCiAgICAgICAgLS0gRml4IGZvciB0aGlzIGVkaXQgb2YgZGV4IGJlaW5nIHBvb3JseSBtYWRlCiAgICAgICAgLS0gSSAoQWxleCkgd291bGQgbGlrZSB0byBjb21tZW1vcmF0ZSB3aG9ldmVyIGFkZGVkIHRoaXMgZGV4IGluIHNvbWVob3cgZmluZGluZyB0aGUgd29yc3QgZGV4IHRvIGV2ZXIgZXhpc3QKICAgICAgICBsb2NhbCBGZW52LCBSZWFsRmVudiwgRmVudk10ID0ge30sIHsKICAgICAgICAgIHNjcmlwdCA9IFNjcmlwdCwKICAgICAgICAgIGdldHVwdmFsdWUgPSBmdW5jdGlvbihhLCBiKQogICAgICAgICAgICByZXR1cm4gbmlsIC0tIGZvcmNlIGl0IHRvIHVzZSBnbG9iYWxzCiAgICAgICAgICBlbmQsCiAgICAgICAgICBnZXRyZWcgPSBmdW5jdGlvbigpIC0tIEl0IGxvb3BzIHJlZ2lzdHJ5IGZvciBzb21lIGlkaW90aWMgcmVhc29uIHNvIHN0b3AgaXQgZnJvbSBkb2luZyB0aGF0IGFuZCBqdXN0IHVzZSBhIGdsb2JhbAogICAgICAgICAgICByZXR1cm4ge30gLS0gZm9yY2UgaXQgdG8gdXNlIGdsb2JhbHMKICAgICAgICAgIGVuZCwKICAgICAgICAgIGdldHByb3BzID0gZ2V0cHJvcHMgb3IgZnVuY3Rpb24oaW5zdCkKICAgICAgICAgICAgaWYgZ2V0cHJvcGVydGllcyB0aGVuCiAgICAgICAgICAgICAgbG9jYWwgcHJvcHMgPSBnZXRwcm9wZXJ0aWVzKGluc3QpCiAgICAgICAgICAgICAgaWYgcHJvcHNbMV0gYW5kIGdldGhpZGRlbnByb3BlcnR5IHRoZW4KICAgICAgICAgICAgICAgIGxvY2FsIHJlc3VsdHMgPSB7fQogICAgICAgICAgICAgICAgZm9yIF8sbmFtZSBpbiBwYWlycyhwcm9wcykgZG8KICAgICAgICAgICAgICAgICAgbG9jYWwgc3VjY2VzcywgcmVzID0gcGNhbGwoZ2V0aGlkZGVucHJvcGVydHksIGluc3QsIG5hbWUpCiAgICAgICAgICAgICAgICAgIGlmIHN1Y2Nlc3MgdGhlbgogICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbbmFtZV0gPSByZXMKICAgICAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgICBlbmQKICAKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzCiAgICAgICAgICAgICAgZW5kCiAgCiAgICAgICAgICAgICAgcmV0dXJuIHByb3BzCiAgICAgICAgICAgIGVuZAogIAogICAgICAgICAgICByZXR1cm4ge30KICAgICAgICAgIGVuZAogICAgICAgIH0sIHt9CiAgICAgICAgRmVudk10Ll9faW5kZXggPSBmdW5jdGlvbihhLGIpCiAgICAgICAgICByZXR1cm4gUmVhbEZlbnZbYl0gPT0gbmlsIGFuZCBnZXRnZW52KClbYl0gb3IgUmVhbEZlbnZbYl0KICAgICAgICBlbmQKICAgICAgICBGZW52TXQuX19uZXdpbmRleCA9IGZ1bmN0aW9uKGEsIGIsIGMpCiAgICAgICAgICBpZiBSZWFsRmVudltiXSA9PSBuaWwgdGhlbiAKICAgICAgICAgICAgZ2V0Z2VudigpW2JdID0gYyAKICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgIFJlYWxGZW52W2JdID0gYyAKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIHNldG1ldGF0YWJsZShGZW52LCBGZW52TXQpCiAgICAgICAgcGNhbGwoc2V0ZmVudiwgRnVuYywgRmVudikKICAgICAgICByZXR1cm4gRnVuYwogICAgICBlbmQKICAKICAgICAgbG9jYWwgZnVuY3Rpb24gTG9hZFNjcmlwdHMoXywgU2NyaXB0KQogICAgICAgIGlmIFNjcmlwdDpJc0EoIkxvY2FsU2NyaXB0IikgdGhlbgogICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIEdpdmVPd25HbG9iYWxzKGxvYWRzdHJpbmcoU2NyaXB0LlNvdXJjZSwiPSIuLlNjcmlwdDpHZXRGdWxsTmFtZSgpKSwgU2NyaXB0KSgpCiAgICAgICAgICBlbmQpCiAgICAgICAgZW5kCiAgICAgICAgdGFibGUuZm9yZWFjaChTY3JpcHQ6R2V0Q2hpbGRyZW4oKSwgTG9hZFNjcmlwdHMpCiAgICAgIGVuZAogIAogICAgICBMb2FkU2NyaXB0cyhuaWwsIE9iaikKICAgIGVuZAogIAogICAgTG9hZChEZXgpCiAgZW5kKQogIAogIGFkZGNtZCgncmVtb3Rlc3B5Jyx7J3JzcHknfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbm90aWZ5KCJMb2FkaW5nIiwnSG9sZCBvbiBhIHNlYycpCiAgICAtLSBGdWxsIGNyZWRpdCB0byBleHgsIGNyZWF0b3Igb2YgU2ltcGxlU3B5CiAgICAtLSBhbHNvIHRoYW5rcyB0byBOb29iU3Bsb2l0IGZvciBmaXhpbmcKICAgIGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vaW5meWlmZi9iYWNrdXAvbWFpbi9TaW1wbGVTcHlWMy9tYWluLmx1YSIpKSgpCiAgZW5kKQogIAogIGFkZGNtZCgnYXVkaW9sb2dnZXInLHsnYWxvZ2dlcid9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBub3RpZnkoIkxvYWRpbmciLCdIb2xkIG9uIGEgc2VjJykKICAgIGxvYWRzdHJpbmcoZ2FtZTpIdHRwR2V0KCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2luZnlpZmYvYmFja3VwL21haW4vYXVkaW9sb2dnZXIubHVhJyksdHJ1ZSkpKCkKICBlbmQpCiAgCiAgbG9jYWwgbG9vcGdvdG8gPSBuaWwKICBhZGRjbWQoJ2xvb3Bnb3RvJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgcGxheWVycyA9IGdldFBsYXllcihhcmdzWzFdLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhwbGF5ZXJzKWRvCiAgICAgIGxvb3Bnb3RvID0gbmlsCiAgICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKSBhbmQgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlNlYXRQYXJ0IHRoZW4KICAgICAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2l0ID0gZmFsc2UKICAgICAgICB3YWl0KC4xKQogICAgICBlbmQKICAgICAgbG9vcGdvdG8gPSBQbGF5ZXJzW3ZdCiAgICAgIGxvY2FsIGRpc3RhbmNlID0gMwogICAgICBpZiBhcmdzWzJdIGFuZCBpc051bWJlcihhcmdzWzJdKSB0aGVuCiAgICAgICAgZGlzdGFuY2UgPSBhcmdzWzJdCiAgICAgIGVuZAogICAgICBsb2NhbCBsRGVsYXkgPSAwCiAgICAgIGlmIGFyZ3NbM10gYW5kIGlzTnVtYmVyKGFyZ3NbM10pIHRoZW4KICAgICAgICBsRGVsYXkgPSBhcmdzWzNdCiAgICAgIGVuZAogICAgICByZXBlYXQKICAgICAgICBpZiBQbGF5ZXJzOkZpbmRGaXJzdENoaWxkKHYpIHRoZW4KICAgICAgICAgIGlmIFBsYXllcnNbdl0uQ2hhcmFjdGVyIH49IG5pbCB0aGVuCiAgICAgICAgICAgIGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpLkNGcmFtZSA9IGdldFJvb3QoUGxheWVyc1t2XS5DaGFyYWN0ZXIpLkNGcmFtZSArIFZlY3RvcjMubmV3KGRpc3RhbmNlLDEsMCkKICAgICAgICAgIGVuZAogICAgICAgICAgd2FpdChsRGVsYXkpCiAgICAgICAgZWxzZQogICAgICAgICAgbG9vcGdvdG8gPSBuaWwKICAgICAgICBlbmQKICAgICAgdW50aWwgbG9vcGdvdG8gfj0gUGxheWVyc1t2XQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndW5sb29wZ290bycseydub2xvb3Bnb3RvJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvb3Bnb3RvID0gbmlsCiAgZW5kKQogIAogIGFkZGNtZCgnaGVhZHNpdCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHBsYXllcnMgPSBnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgIGlmIGhlYWRTaXQgdGhlbiBoZWFkU2l0OkRpc2Nvbm5lY3QoKSBlbmQKICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycylkbwogICAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2l0ID0gdHJ1ZQogICAgICBoZWFkU2l0ID0gUnVuU2VydmljZS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgUGxheWVyczpGaW5kRmlyc3RDaGlsZChQbGF5ZXJzW3ZdLk5hbWUpIGFuZCBQbGF5ZXJzW3ZdLkNoYXJhY3RlciB+PSBuaWwgYW5kIGdldFJvb3QoUGxheWVyc1t2XS5DaGFyYWN0ZXIpIGFuZCBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKSBhbmQgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlNpdCA9PSB0cnVlIHRoZW4KICAgICAgICAgIGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpLkNGcmFtZSA9IGdldFJvb3QoUGxheWVyc1t2XS5DaGFyYWN0ZXIpLkNGcmFtZSAqIENGcmFtZS5BbmdsZXMoMCxtYXRoLnJhZCgwKSwwKSogQ0ZyYW1lLm5ldygwLDEuNiwwLjQpCiAgICAgICAgZWxzZQogICAgICAgICAgaGVhZFNpdDpEaXNjb25uZWN0KCkKICAgICAgICBlbmQKICAgICAgZW5kKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnY2hhdCcseydzYXknfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgY1N0cmluZyA9IGdldHN0cmluZygxKQogICAgY2hhdE1lc3NhZ2UoY1N0cmluZykKICBlbmQpCiAgCiAgCiAgc3BhbW1pbmcgPSBmYWxzZQogIHNwYW1zcGVlZCA9IDEKICBhZGRjbWQoJ3NwYW0nLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBzcGFtbWluZyA9IHRydWUKICAgIGxvY2FsIHNwYW1zdHJpbmcgPSBnZXRzdHJpbmcoMSkKICAgIHJlcGVhdCB3YWl0KHNwYW1zcGVlZCkKICAgICAgY2hhdE1lc3NhZ2Uoc3BhbXN0cmluZykKICAgIHVudGlsIHNwYW1taW5nID09IGZhbHNlCiAgZW5kKQogIAogIGFkZGNtZCgnbm9zcGFtJyx7J3Vuc3BhbSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBzcGFtbWluZyA9IGZhbHNlCiAgZW5kKQogIAogIGFkZGNtZCgnd2hpc3BlcicseydwbSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpZG8KICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgbG9jYWwgcGxyTmFtZSA9IFBsYXllcnNbdl0uTmFtZQogICAgICAgIGxvY2FsIHBtc3RyaW5nID0gZ2V0c3RyaW5nKDIpCiAgICAgICAgY2hhdE1lc3NhZ2UoIi93ICIuLnBsck5hbWUuLiIgIi4ucG1zdHJpbmcpCiAgICAgIGVuZCkKICAgIGVuZAogIGVuZCkKICAKICBwbXNwYW1taW5nID0ge30KICBhZGRjbWQoJ3Btc3BhbScse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHBsYXllcnMgPSBnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycylkbwogICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBsb2NhbCBwbHJOYW1lID0gUGxheWVyc1t2XS5OYW1lCiAgICAgICAgaWYgRmluZEluVGFibGUocG1zcGFtbWluZywgcGxyTmFtZSkgdGhlbiByZXR1cm4gZW5kCiAgICAgICAgdGFibGUuaW5zZXJ0KHBtc3BhbW1pbmcsIHBsck5hbWUpCiAgICAgICAgbG9jYWwgcG1zcGFtc3RyaW5nID0gZ2V0c3RyaW5nKDIpCiAgICAgICAgcmVwZWF0CiAgICAgICAgICBpZiBQbGF5ZXJzOkZpbmRGaXJzdENoaWxkKHYpIHRoZW4KICAgICAgICAgICAgd2FpdChzcGFtc3BlZWQpCiAgICAgICAgICAgIGNoYXRNZXNzYWdlKCIvdyAiLi5wbHJOYW1lLi4iICIuLnBtc3BhbXN0cmluZykKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgZm9yIGEsYiBpbiBwYWlycyhwbXNwYW1taW5nKSBkbyBpZiBiID09IHBsck5hbWUgdGhlbiB0YWJsZS5yZW1vdmUocG1zcGFtbWluZywgYSkgZW5kIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgdW50aWwgbm90IEZpbmRJblRhYmxlKHBtc3BhbW1pbmcsIHBsck5hbWUpCiAgICAgIGVuZCkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ25vcG1zcGFtJyx7J3VucG1zcGFtJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHBsYXllcnMgPSBnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycylkbwogICAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgICBmb3IgYSxiIGluIHBhaXJzKHBtc3BhbW1pbmcpIGRvCiAgICAgICAgICBpZiBiID09IFBsYXllcnNbdl0uTmFtZSB0aGVuCiAgICAgICAgICAgIHRhYmxlLnJlbW92ZShwbXNwYW1taW5nLCBhKQogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIGVuZCkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3NwYW1zcGVlZCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHNwZWVkID0gYXJnc1sxXSBvciAxCiAgICBpZiBpc051bWJlcihzcGVlZCkgdGhlbgogICAgICBzcGFtc3BlZWQgPSBzcGVlZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnYnViYmxlY2hhdCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIENoYXRTZXJ2aWNlLkJ1YmJsZUNoYXRFbmFibGVkID0gdHJ1ZQogIGVuZCkKICAKICBhZGRjbWQoJ3VuYnViYmxlY2hhdCcseydub2J1YmJsZWNoYXQnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgQ2hhdFNlcnZpY2UuQnViYmxlQ2hhdEVuYWJsZWQgPSBmYWxzZQogIGVuZCkKICAKICBhZGRjbWQoJ3NhZmVjaGF0Jyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgc3BlYWtlcjpTZXRTdXBlclNhZmVDaGF0KHRydWUpCiAgZW5kKQogIAogIGFkZGNtZCgnbm9zYWZlY2hhdCcseydkaXNhYmxlc2FmZWNoYXQnLCd1bnNhZmVjaGF0J30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIHNwZWFrZXI6U2V0U3VwZXJTYWZlQ2hhdChmYWxzZSkKICBlbmQpCiAgCiAgYWRkY21kKCdibG9ja2hlYWQnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBzcGVha2VyLkNoYXJhY3Rlci5IZWFkOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiU3BlY2lhbE1lc2giKTpEZXN0cm95KCkKICBlbmQpCiAgCiAgYWRkY21kKCdibG9ja2hhdHMnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBmb3IgXyx2IGluIHBhaXJzKHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKTpHZXRBY2Nlc3NvcmllcygpKSBkbwogICAgICBmb3IgaSxjIGluIHBhaXJzKHY6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICBpZiBjOklzQSgiU3BlY2lhbE1lc2giKSB0aGVuCiAgICAgICAgICBjOkRlc3Ryb3koKQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2Jsb2NrdG9vbCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBfLHYgaW4gcGFpcnMoc3BlYWtlci5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgaWYgdjpJc0EoIlRvb2wiKSBvciB2OklzQSgiSG9wcGVyQmluIikgdGhlbgogICAgICAgIGZvciBpLGMgaW4gcGFpcnModjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgaWYgYzpJc0EoIlNwZWNpYWxNZXNoIikgdGhlbgogICAgICAgICAgICBjOkRlc3Ryb3koKQogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnY3JlZXBlcicse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIHIxNShzcGVha2VyKSB0aGVuCiAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJTcGVjaWFsTWVzaCIpOkRlc3Ryb3koKQogICAgICBzcGVha2VyLkNoYXJhY3Rlci5MZWZ0VXBwZXJBcm06RGVzdHJveSgpCiAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyLlJpZ2h0VXBwZXJBcm06RGVzdHJveSgpCiAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKTpSZW1vdmVBY2Nlc3NvcmllcygpCiAgICBlbHNlCiAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyLkhlYWQ6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJTcGVjaWFsTWVzaCIpOkRlc3Ryb3koKQogICAgICBzcGVha2VyLkNoYXJhY3RlclsiTGVmdCBBcm0iXTpEZXN0cm95KCkKICAgICAgc3BlYWtlci5DaGFyYWN0ZXJbIlJpZ2h0IEFybSJdOkRlc3Ryb3koKQogICAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIik6UmVtb3ZlQWNjZXNzb3JpZXMoKQogICAgZW5kCiAgZW5kKQogIAogIGZ1bmN0aW9uIGdldFRvcnNvKHgpCiAgICB4ID0geCBvciBQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgcmV0dXJuIHg6RmluZEZpcnN0Q2hpbGQoIlRvcnNvIikgb3IgeDpGaW5kRmlyc3RDaGlsZCgiVXBwZXJUb3JzbyIpIG9yIHg6RmluZEZpcnN0Q2hpbGQoIkxvd2VyVG9yc28iKSBvciB4OkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikKICBlbmQKICAKICBhZGRjbWQoImJhbmciLCB7InJhcGUifSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGV4ZWNDbWQoInVuYmFuZyIpCiAgICB3YWl0KCkKICAgIGxvY2FsIGh1bWFub2lkID0gc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiSHVtYW5vaWQiKQogICAgYmFuZ0FuaW0gPSBJbnN0YW5jZS5uZXcoIkFuaW1hdGlvbiIpCiAgICBiYW5nQW5pbS5BbmltYXRpb25JZCA9IG5vdCByMTUoc3BlYWtlcikgYW5kICJyYnhhc3NldGlkOi8vMTQ4ODQwMzcxIiBvciAicmJ4YXNzZXRpZDovLzU5MTg3MjY2NzQiCiAgICBiYW5nID0gaHVtYW5vaWQ6TG9hZEFuaW1hdGlvbihiYW5nQW5pbSkKICAgIGJhbmc6UGxheSgwLjEsIDEsIDEpCiAgICBiYW5nOkFkanVzdFNwZWVkKGFyZ3NbMl0gb3IgMykKICAgIGJhbmdEaWVkID0gaHVtYW5vaWQuRGllZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgYmFuZzpTdG9wKCkKICAgICAgYmFuZ0FuaW06RGVzdHJveSgpCiAgICAgIGJhbmdEaWVkOkRpc2Nvbm5lY3QoKQogICAgICBiYW5nTG9vcDpEaXNjb25uZWN0KCkKICAgIGVuZCkKICAgIGlmIGFyZ3NbMV0gdGhlbgogICAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICAgIGZvciBfLCB2IGluIHBhaXJzKHBsYXllcnMpIGRvCiAgICAgICAgbG9jYWwgYmFuZ3BsciA9IFBsYXllcnNbdl0uTmFtZQogICAgICAgIGxvY2FsIGJhbmdPZmZldCA9IENGcmFtZS5uZXcoMCwgMCwgMS4xKQogICAgICAgIGJhbmdMb29wID0gUnVuU2VydmljZS5TdGVwcGVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICBsb2NhbCBvdGhlclJvb3QgPSBnZXRUb3JzbyhQbGF5ZXJzW2JhbmdwbHJdLkNoYXJhY3RlcikKICAgICAgICAgICAgZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikuQ0ZyYW1lID0gb3RoZXJSb290LkNGcmFtZSAqIGJhbmdPZmZldAogICAgICAgICAgZW5kKQogICAgICAgIGVuZCkKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCJ1bmJhbmciLCB7InVucmFwZSJ9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgYmFuZ0RpZWQgdGhlbgogICAgICBiYW5nRGllZDpEaXNjb25uZWN0KCkKICAgICAgYmFuZzpTdG9wKCkKICAgICAgYmFuZ0FuaW06RGVzdHJveSgpCiAgICAgIGJhbmdMb29wOkRpc2Nvbm5lY3QoKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnY2FycGV0Jyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgbm90IHIxNShzcGVha2VyKSB0aGVuCiAgICAgIGV4ZWNDbWQoJ3VuY2FycGV0JykKICAgICAgd2FpdCgpCiAgICAgIGxvY2FsIHBsYXllcnMgPSBnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgICAgZm9yIGksdiBpbiBwYWlycyhwbGF5ZXJzKWRvCiAgICAgICAgY2FycGV0QW5pbSA9IEluc3RhbmNlLm5ldygiQW5pbWF0aW9uIikKICAgICAgICBjYXJwZXRBbmltLkFuaW1hdGlvbklkID0gInJieGFzc2V0aWQ6Ly8yODI1NzQ0NDAiCiAgICAgICAgY2FycGV0ID0gc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpOkxvYWRBbmltYXRpb24oY2FycGV0QW5pbSkKICAgICAgICBjYXJwZXQ6UGxheSguMSwgMSwgMSkKICAgICAgICBsb2NhbCBjYXJwZXRwbHIgPSBQbGF5ZXJzW3ZdLk5hbWUKICAgICAgICBjYXJwZXREaWVkID0gc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzJ0h1bWFub2lkJy5EaWVkOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgICAgICAgY2FycGV0TG9vcDpEaXNjb25uZWN0KCkKICAgICAgICAgIGNhcnBldDpTdG9wKCkKICAgICAgICAgIGNhcnBldEFuaW06RGVzdHJveSgpCiAgICAgICAgICBjYXJwZXREaWVkOkRpc2Nvbm5lY3QoKQogICAgICAgIGVuZCkKICAgICAgICBjYXJwZXRMb29wID0gUnVuU2VydmljZS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICBwY2FsbChmdW5jdGlvbigpCiAgICAgICAgICAgIGdldFJvb3QoUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIpLkNGcmFtZSA9IGdldFJvb3QoUGxheWVyc1tjYXJwZXRwbHJdLkNoYXJhY3RlcikuQ0ZyYW1lCiAgICAgICAgICBlbmQpCiAgICAgICAgZW5kKQogICAgICBlbmQKICAgIGVsc2UKICAgICAgbm90aWZ5KCdSNiBSZXF1aXJlZCcsJ1RoaXMgY29tbWFuZCByZXF1aXJlcyB0aGUgcjYgcmlnIHR5cGUnKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndW5jYXJwZXQnLHsnbm9jYXJwZXQnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgY2FycGV0TG9vcCB0aGVuCiAgICAgIGNhcnBldExvb3A6RGlzY29ubmVjdCgpCiAgICAgIGNhcnBldERpZWQ6RGlzY29ubmVjdCgpCiAgICAgIGNhcnBldDpTdG9wKCkKICAgICAgY2FycGV0QW5pbTpEZXN0cm95KCkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2ZyaWVuZCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHBsYXllcnMgPSBnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycylkbwogICAgICBzcGVha2VyOlJlcXVlc3RGcmllbmRzaGlwKHYpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd1bmZyaWVuZCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHBsYXllcnMgPSBnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycylkbwogICAgICBzcGVha2VyOlJldm9rZUZyaWVuZHNoaXAodikKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2JyaW5ncGFydCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgIGlmIHYuTmFtZTpsb3dlcigpID09IGdldHN0cmluZygxKTpsb3dlcigpIGFuZCB2OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgdi5DRnJhbWUgPSBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKS5DRnJhbWUKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdicmluZ3BhcnRjbGFzcycseydicGMnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgaWYgdi5DbGFzc05hbWU6bG93ZXIoKSA9PSBnZXRzdHJpbmcoMSk6bG93ZXIoKSBhbmQgdjpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgIHYuQ0ZyYW1lID0gZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikuQ0ZyYW1lCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGdvdG9wYXJ0RGVsYXkgPSAwLjEKICBhZGRjbWQoJ2dvdG9wYXJ0Jyx7J3RvcGFydCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiB2Lk5hbWU6bG93ZXIoKSA9PSBnZXRzdHJpbmcoMSk6bG93ZXIoKSBhbmQgdjpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKSBhbmQgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlNlYXRQYXJ0IHRoZW4KICAgICAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TaXQgPSBmYWxzZQogICAgICAgICAgd2FpdCguMSkKICAgICAgICBlbmQKICAgICAgICB3YWl0KGdvdG9wYXJ0RGVsYXkpCiAgICAgICAgZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikuQ0ZyYW1lID0gdi5DRnJhbWUKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd0d2VlbmdvdG9wYXJ0Jyx7J3Rnb3RvcGFydCcsJ3R0b3BhcnQnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgaWYgdi5OYW1lOmxvd2VyKCkgPT0gZ2V0c3RyaW5nKDEpOmxvd2VyKCkgYW5kIHY6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICBpZiBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykgYW5kIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TZWF0UGFydCB0aGVuCiAgICAgICAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2l0ID0gZmFsc2UKICAgICAgICAgIHdhaXQoLjEpCiAgICAgICAgZW5kCiAgICAgICAgd2FpdChnb3RvcGFydERlbGF5KQogICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlciksIFR3ZWVuSW5mby5uZXcodHdlZW5TcGVlZCwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpLCB7Q0ZyYW1lID0gdi5DRnJhbWV9KTpQbGF5KCkKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdnb3RvcGFydGNsYXNzJyx7J2dwYyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiB2LkNsYXNzTmFtZTpsb3dlcigpID09IGdldHN0cmluZygxKTpsb3dlcigpIGFuZCB2OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgaWYgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpIGFuZCBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2VhdFBhcnQgdGhlbgogICAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlNpdCA9IGZhbHNlCiAgICAgICAgICB3YWl0KC4xKQogICAgICAgIGVuZAogICAgICAgIHdhaXQoZ290b3BhcnREZWxheSkKICAgICAgICBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKS5DRnJhbWUgPSB2LkNGcmFtZQogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3R3ZWVuZ290b3BhcnRjbGFzcycseyd0Z3BjJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgIGlmIHYuQ2xhc3NOYW1lOmxvd2VyKCkgPT0gZ2V0c3RyaW5nKDEpOmxvd2VyKCkgYW5kIHY6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICBpZiBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykgYW5kIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TZWF0UGFydCB0aGVuCiAgICAgICAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2l0ID0gZmFsc2UKICAgICAgICAgIHdhaXQoLjEpCiAgICAgICAgZW5kCiAgICAgICAgd2FpdChnb3RvcGFydERlbGF5KQogICAgICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlciksIFR3ZWVuSW5mby5uZXcodHdlZW5TcGVlZCwgRW51bS5FYXNpbmdTdHlsZS5MaW5lYXIpLCB7Q0ZyYW1lID0gdi5DRnJhbWV9KTpQbGF5KCkKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdnb3RvbW9kZWwnLHsndG9tb2RlbCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiB2Lk5hbWU6bG93ZXIoKSA9PSBnZXRzdHJpbmcoMSk6bG93ZXIoKSBhbmQgdjpJc0EoIk1vZGVsIikgdGhlbgogICAgICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKSBhbmQgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlNlYXRQYXJ0IHRoZW4KICAgICAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TaXQgPSBmYWxzZQogICAgICAgICAgd2FpdCguMSkKICAgICAgICBlbmQKICAgICAgICB3YWl0KGdvdG9wYXJ0RGVsYXkpCiAgICAgICAgZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikuQ0ZyYW1lID0gdjpHZXRNb2RlbENGcmFtZSgpCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndHdlZW5nb3RvbW9kZWwnLHsndGdvdG9tb2RlbCcsJ3R0b21vZGVsJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgIGlmIHYuTmFtZTpsb3dlcigpID09IGdldHN0cmluZygxKTpsb3dlcigpIGFuZCB2OklzQSgiTW9kZWwiKSB0aGVuCiAgICAgICAgaWYgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpIGFuZCBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2VhdFBhcnQgdGhlbgogICAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlNpdCA9IGZhbHNlCiAgICAgICAgICB3YWl0KC4xKQogICAgICAgIGVuZAogICAgICAgIHdhaXQoZ290b3BhcnREZWxheSkKICAgICAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpLCBUd2VlbkluZm8ubmV3KHR3ZWVuU3BlZWQsIEVudW0uRWFzaW5nU3R5bGUuTGluZWFyKSwge0NGcmFtZSA9IHY6R2V0TW9kZWxDRnJhbWUoKX0pOlBsYXkoKQogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2dvdG9wYXJ0ZGVsYXknLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBndHBEZWxheSA9IGFyZ3NbMV0gb3IgMC4xCiAgICBpZiBpc051bWJlcihndHBEZWxheSkgdGhlbgogICAgICBnb3RvcGFydERlbGF5ID0gZ3RwRGVsYXkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ25vY2xpY2tkZXRlY3RvcmxpbWl0cycseydub2NkbGltaXRzJywncmVtb3ZlY2RsaW1pdHMnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBpcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgIGlmIHY6SXNBKCJDbGlja0RldGVjdG9yIikgdGhlbgogICAgICAgIHYuTWF4QWN0aXZhdGlvbkRpc3RhbmNlID0gbWF0aC5odWdlCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnZmlyZWNsaWNrZGV0ZWN0b3JzJyx7J2ZpcmVjZCcsJ2ZpcmVjZHMnfSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIGZpcmVjbGlja2RldGVjdG9yIHRoZW4KICAgICAgaWYgYXJnc1sxXSB0aGVuCiAgICAgICAgbG9jYWwgbmFtZSA9IGdldHN0cmluZygxKQogICAgICAgIGZvciBfLCBkZXNjZW5kYW50IGluIGlwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgIGlmIGRlc2NlbmRhbnQ6SXNBKCJDbGlja0RldGVjdG9yIikgYW5kIGRlc2NlbmRhbnQuTmFtZSA9PSBuYW1lIG9yIGRlc2NhbmRhbnQuUGFyZW50Lk5hbWUgPT0gbmFtZSB0aGVuCiAgICAgICAgICAgIGZpcmVjbGlja2RldGVjdG9yKGRlc2NlbmRhbnQpCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZWxzZQogICAgICAgIGZvciBfLCBkZXNjZW5kYW50IGluIGlwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgIGlmIGRlc2NlbmRhbnQ6SXNBKCJDbGlja0RldGVjdG9yIikgdGhlbgogICAgICAgICAgICBmaXJlY2xpY2tkZXRlY3RvcihkZXNjZW5kYW50KQogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZWxzZQogICAgICBub3RpZnkoIkluY29tcGF0aWJsZSBFeHBsb2l0IiwgIllvdXIgZXhwbG9pdCBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgY29tbWFuZCAobWlzc2luZyBmaXJlY2xpY2tkZXRlY3RvcikiKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnbm9wcm94aW1pdHlwcm9tcHRsaW1pdHMnLHsnbm9wcGxpbWl0cycsJ3JlbW92ZXBwbGltaXRzJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMod29ya3NwYWNlOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgIGlmIHY6SXNBKCJQcm94aW1pdHlQcm9tcHQiKSB0aGVuCiAgICAgICAgdi5NYXhBY3RpdmF0aW9uRGlzdGFuY2UgPSBtYXRoLmh1Z2UKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdmaXJlcHJveGltaXR5cHJvbXB0cycseydmaXJlcHAnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgZmlyZWNsaWNrZGV0ZWN0b3IgdGhlbgogICAgICBpZiBhcmdzWzFdIHRoZW4KICAgICAgICBsb2NhbCBuYW1lID0gZ2V0c3RyaW5nKDEpCiAgICAgICAgZm9yIF8sIGRlc2NlbmRhbnQgaW4gaXBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgaWYgZGVzY2VuZGFudDpJc0EoIlByb3hpbWl0eVByb21wdCIpIGFuZCBkZXNjZW5kYW50Lk5hbWUgPT0gbmFtZSBvciBkZXNjYW5kYW50LlBhcmVudC5OYW1lID09IG5hbWUgdGhlbgogICAgICAgICAgICBmaXJlcHJveGltaXR5cHJvbXB0KGRlc2NlbmRhbnQpCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZWxzZQogICAgICAgIGZvciBfLCBkZXNjZW5kYW50IGluIGlwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICAgIGlmIGRlc2NlbmRhbnQ6SXNBKCJQcm94aW1pdHlQcm9tcHQiKSB0aGVuCiAgICAgICAgICAgIGZpcmVwcm94aW1pdHlwcm9tcHQoZGVzY2VuZGFudCkKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVsc2UKICAgICAgbm90aWZ5KCJJbmNvbXBhdGlibGUgRXhwbG9pdCIsICJZb3VyIGV4cGxvaXQgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIGNvbW1hbmQgKG1pc3NpbmcgZmlyZXByb3hpbWl0eXByb21wdCkiKQogICAgZW5kCiAgZW5kKQogIAogIGxvY2FsIFByb21wdEJ1dHRvbkhvbGRCZWdhbiA9IG5pbAogIGFkZGNtZCgnaW5zdGFudHByb3hpbWl0eXByb21wdHMnLHsnaW5zdGFudHBwJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIGZpcmVwcm94aW1pdHlwcm9tcHQgdGhlbgogICAgICBleGVjQ21kKCJ1bmluc3RhbnRwcm94aW1pdHlwcm9tcHRzIikKICAgICAgd2FpdCgwLjEpCiAgICAgIFByb21wdEJ1dHRvbkhvbGRCZWdhbiA9IFByb3hpbWl0eVByb21wdFNlcnZpY2UuUHJvbXB0QnV0dG9uSG9sZEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24ocHJvbXB0KQogICAgICAgIGZpcmVwcm94aW1pdHlwcm9tcHQocHJvbXB0KQogICAgICBlbmQpCiAgICBlbHNlCiAgICAgIG5vdGlmeSgnSW5jb21wYXRpYmxlIEV4cGxvaXQnLCdZb3VyIGV4cGxvaXQgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIGNvbW1hbmQgKG1pc3NpbmcgZmlyZXByb3hpbWl0eXByb21wdCknKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndW5pbnN0YW50cHJveGltaXR5cHJvbXB0cycseyd1bmluc3RhbnRwcCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBQcm9tcHRCdXR0b25Ib2xkQmVnYW4gfj0gbmlsIHRoZW4KICAgICAgUHJvbXB0QnV0dG9uSG9sZEJlZ2FuOkRpc2Nvbm5lY3QoKQogICAgICBQcm9tcHRCdXR0b25Ib2xkQmVnYW4gPSBuaWwKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ25vdGlmeXBpbmcnLHsncGluZyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBub3RpZnkoIlBpbmciLCBtYXRoLnJvdW5kKHNwZWFrZXI6R2V0TmV0d29ya1BpbmcoKSAqIDEwMDApIC4uICJtcyIpCiAgZW5kKQogIAogIGFkZGNtZCgnZ3JhYnRvb2xzJywge30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBodW1hbm9pZCA9IHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIkh1bWFub2lkIikKICAgIGZvciBfLCBjaGlsZCBpbiBpcGFpcnMod29ya3NwYWNlOkdldENoaWxkcmVuKCkpIGRvCiAgICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyIGFuZCBjaGlsZDpJc0EoIkJhY2twYWNrSXRlbSIpIGFuZCBjaGlsZDpGaW5kRmlyc3RDaGlsZCgiSGFuZGxlIikgdGhlbgogICAgICAgIGh1bWFub2lkOkVxdWlwVG9vbChjaGlsZCkKICAgICAgZW5kCiAgICBlbmQKICAKICAgIGlmIGdyYWJ0b29sc0Z1bmMgdGhlbiAKICAgICAgZ3JhYnRvb2xzRnVuYzpEaXNjb25uZWN0KCkgCiAgICBlbmQKICAKICAgIGdyYWJ0b29sc0Z1bmMgPSB3b3Jrc3BhY2UuQ2hpbGRBZGRlZDpDb25uZWN0KGZ1bmN0aW9uKGNoaWxkKQogICAgICBpZiBzcGVha2VyLkNoYXJhY3RlciBhbmQgY2hpbGQ6SXNBKCJCYWNrcGFja0l0ZW0iKSBhbmQgY2hpbGQ6RmluZEZpcnN0Q2hpbGQoIkhhbmRsZSIpIHRoZW4KICAgICAgICBodW1hbm9pZDpFcXVpcFRvb2woY2hpbGQpCiAgICAgIGVuZAogICAgZW5kKQogIAogICAgbm90aWZ5KCJHcmFidG9vbHMiLCAiUGlja2luZyB1cCBhbnkgZHJvcHBlZCB0b29scyIpCiAgZW5kKQogIAogIGFkZGNtZCgnbm9ncmFidG9vbHMnLHsndW5ncmFidG9vbHMnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgZ3JhYnRvb2xzRnVuYyB0aGVuIAogICAgICBncmFidG9vbHNGdW5jOkRpc2Nvbm5lY3QoKSAKICAgIGVuZAogIAogICAgbm90aWZ5KCJHcmFidG9vbHMiLCAiR3JhYnRvb2xzIGhhcyBiZWVuIGRpc2FibGVkIikKICBlbmQpCiAgCiAgbG9jYWwgc3BlY2lmaWN0b29scmVtb3ZhbCA9IHt9CiAgYWRkY21kKCdyZW1vdmVzcGVjaWZpY3Rvb2wnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBhcmdzWzFdIGFuZCBzcGVha2VyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiQmFja3BhY2siKSB0aGVuCiAgICAgIGxvY2FsIHRvb2wgPSBzdHJpbmcubG93ZXIoZ2V0c3RyaW5nKDEpKQogICAgICBsb2NhbCBSU1QgPSBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgaWYgc3BlYWtlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkJhY2twYWNrIikgdGhlbgogICAgICAgICAgZm9yIGksdiBpbiBwYWlycyhzcGVha2VyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiQmFja3BhY2siKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgICBpZiB2Lk5hbWU6bG93ZXIoKSA9PSB0b29sIHRoZW4KICAgICAgICAgICAgICB2OlJlbW92ZSgpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIGVuZCkKICAgICAgc3BlY2lmaWN0b29scmVtb3ZhbFt0b29sXSA9IFJTVAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndW5yZW1vdmVzcGVjaWZpY3Rvb2wnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBhcmdzWzFdIHRoZW4KICAgICAgbG9jYWwgdG9vbCA9IHN0cmluZy5sb3dlcihnZXRzdHJpbmcoMSkpCiAgICAgIGlmIHNwZWNpZmljdG9vbHJlbW92YWxbdG9vbF0gfj0gbmlsIHRoZW4KICAgICAgICBzcGVjaWZpY3Rvb2xyZW1vdmFsW3Rvb2xdOkRpc2Nvbm5lY3QoKQogICAgICAgIHNwZWNpZmljdG9vbHJlbW92YWxbdG9vbF0gPSBuaWwKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdjbGVhcnJlbW92ZXNwZWNpZmljdG9vbCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBvYmogaW4gcGFpcnMoc3BlY2lmaWN0b29scmVtb3ZhbCkgZG8KICAgICAgc3BlY2lmaWN0b29scmVtb3ZhbFtvYmpdOkRpc2Nvbm5lY3QoKQogICAgICBzcGVjaWZpY3Rvb2xyZW1vdmFsW29ial0gPSBuaWwKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2xpZ2h0Jyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgbGlnaHQgPSBJbnN0YW5jZS5uZXcoIlBvaW50TGlnaHQiKQogICAgbGlnaHQuUGFyZW50ID0gZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikKICAgIGxpZ2h0LlJhbmdlID0gMzAKICAgIGlmIGFyZ3NbMV0gdGhlbgogICAgICBsaWdodC5CcmlnaHRuZXNzID0gYXJnc1syXQogICAgICBsaWdodC5SYW5nZSA9IGFyZ3NbMV0KICAgIGVsc2UKICAgICAgbGlnaHQuQnJpZ2h0bmVzcyA9IDUKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3VubGlnaHQnLHsnbm9saWdodCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHNwZWFrZXIuQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgIGlmIHYuQ2xhc3NOYW1lID09ICJQb2ludExpZ2h0IiB0aGVuCiAgICAgICAgdjpEZXN0cm95KCkKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdjb3B5dG9vbHMnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpZG8KICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgZm9yIGksdiBpbiBwYWlycyhQbGF5ZXJzW3ZdOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiQmFja3BhY2siKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgICAgaWYgdjpJc0EoJ1Rvb2wnKSBvciB2OklzQSgnSG9wcGVyQmluJykgdGhlbgogICAgICAgICAgICB2OkNsb25lKCkuUGFyZW50ID0gc3BlYWtlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkJhY2twYWNrIikKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICBlbmQpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCduYWtlZCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMoc3BlYWtlci5DaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgaWYgdjpJc0EoIkNsb3RoaW5nIikgb3IgdjpJc0EoIlNoaXJ0R3JhcGhpYyIpIHRoZW4KICAgICAgICB2OkRlc3Ryb3koKQogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ25vZmFjZScseydyZW1vdmVmYWNlJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMoc3BlYWtlci5DaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgaWYgdjpJc0EoIkRlY2FsIikgYW5kIHYuTmFtZSA9PSAnZmFjZScgdGhlbgogICAgICAgIHY6RGVzdHJveSgpCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnc3Bhd25wb2ludCcseydzcGF3bid9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBzcGF3bnBvcyA9IGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpLkNGcmFtZQogICAgc3Bhd25wb2ludCA9IHRydWUKICAgIHNwRGVsYXkgPSB0b251bWJlcihhcmdzWzFdKSBvciAwLjEKICAgIG5vdGlmeSgnU3Bhd24gUG9pbnQnLCdTcGF3biBwb2ludCBjcmVhdGVkIGF0ICcuLnRvc3RyaW5nKHNwYXducG9zKSkKICBlbmQpCiAgCiAgYWRkY21kKCdub3NwYXducG9pbnQnLHsnbm9zcGF3bicsJ3JlbW92ZXNwYXducG9pbnQnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgc3Bhd25wb2ludCA9IGZhbHNlCiAgICBub3RpZnkoJ1NwYXduIFBvaW50JywnUmVtb3ZlZCBzcGF3biBwb2ludCcpCiAgZW5kKQogIAogIGFkZGNtZCgnZmxhc2hiYWNrJyx7J2RpZWR0cCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBsYXN0RGVhdGggfj0gbmlsIHRoZW4KICAgICAgaWYgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpIGFuZCBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2VhdFBhcnQgdGhlbgogICAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TaXQgPSBmYWxzZQogICAgICAgIHdhaXQoLjEpCiAgICAgIGVuZAogICAgICBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKS5DRnJhbWUgPSBsYXN0RGVhdGgKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2hhdHNwaW4nLHsnc3BpbmhhdHMnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZXhlY0NtZCgndW5oYXRzcGluJykKICAgIHdhaXQoLjUpCiAgICBmb3IgXyx2IGluIHBhaXJzKHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKTpHZXRBY2Nlc3NvcmllcygpKSBkbwogICAgICBsb2NhbCBrZWVwID0gSW5zdGFuY2UubmV3KCJCb2R5UG9zaXRpb24iKSBrZWVwLk5hbWUgPSByYW5kb21TdHJpbmcoKSBrZWVwLlBhcmVudCA9IHYuSGFuZGxlCiAgICAgIGxvY2FsIHNwaW4gPSBJbnN0YW5jZS5uZXcoIkJvZHlBbmd1bGFyVmVsb2NpdHkiKSBzcGluLk5hbWUgPSByYW5kb21TdHJpbmcoKSBzcGluLlBhcmVudCA9IHYuSGFuZGxlCiAgICAgIHYuSGFuZGxlOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiV2VsZCIpOkRlc3Ryb3koKQogICAgICBpZiBhcmdzWzFdIHRoZW4KICAgICAgICBzcGluLkFuZ3VsYXJWZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsIGFyZ3NbMV0sIDApCiAgICAgICAgc3Bpbi5NYXhUb3JxdWUgPSBWZWN0b3IzLm5ldygwLCBhcmdzWzFdICogMiwgMCkKICAgICAgZWxzZQogICAgICAgIHNwaW4uQW5ndWxhclZlbG9jaXR5ID0gVmVjdG9yMy5uZXcoMCwgMTAwLCAwKQogICAgICAgIHNwaW4uTWF4VG9ycXVlID0gVmVjdG9yMy5uZXcoMCwgMjAwLCAwKQogICAgICBlbmQKICAgICAga2VlcC5QID0gMzAwMDAKICAgICAga2VlcC5EID0gNTAKICAgICAgc3BpbmhhdHMgPSBSdW5TZXJ2aWNlLlN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAga2VlcC5Qb3NpdGlvbiA9IFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyLkhlYWQuUG9zaXRpb24KICAgICAgICBlbmQpCiAgICAgIGVuZCkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3VuaGF0c3Bpbicseyd1bnNwaW5oYXRzJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIHNwaW5oYXRzIHRoZW4KICAgICAgc3BpbmhhdHM6RGlzY29ubmVjdCgpCiAgICBlbmQKICAgIGZvciBfLHYgaW4gcGFpcnMoc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpOkdldEFjY2Vzc29yaWVzKCkpIGRvCiAgICAgIHYuUGFyZW50ID0gd29ya3NwYWNlCiAgICAgIGZvciBpLGMgaW4gcGFpcnModi5IYW5kbGUpIGRvCiAgICAgICAgaWYgYzpJc0EoIkJvZHlQb3NpdGlvbiIpIG9yIGM6SXNBKCJCb2R5QW5ndWxhclZlbG9jaXR5IikgdGhlbgogICAgICAgICAgYzpEZXN0cm95KCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIHdhaXQoKQogICAgICB2LlBhcmVudCA9IHNwZWFrZXIuQ2hhcmFjdGVyCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdjbGVhcmhhdHMnLHsnY2xlYW5oYXRzJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIGZpcmV0b3VjaGludGVyZXN0IHRoZW4KICAgICAgbG9jYWwgUGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgogICAgICBsb2NhbCBDaGFyYWN0ZXIgPSBQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgIGxvY2FsIE9sZCA9IENoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpLkNGcmFtZQogICAgICBsb2NhbCBIYXRzID0ge30KICAKICAgICAgZm9yIF8sIGNoaWxkIGluIGlwYWlycyh3b3Jrc3BhY2U6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiBjaGlsZDpJc0EoIkFjY2Vzc29yeSIpIHRoZW4KICAgICAgICAgIHRhYmxlLmluc2VydChIYXRzLCBjaGlsZCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgCiAgICAgIGZvciBfLCBhY2Nlc3NvcnkgaW4gaXBhaXJzKENoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIik6R2V0QWNjZXNzb3JpZXMoKSkgZG8KICAgICAgICBhY2Nlc3Nvcnk6RGVzdHJveSgpCiAgICAgIGVuZAogIAogICAgICBmb3IgaSA9IDEsICNIYXRzIGRvCiAgICAgICAgcmVwZWF0IFJ1blNlcnZpY2UuSGVhcnRiZWF0OndhaXQoKSB1bnRpbCBIYXRzW2ldCiAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3QoSGF0c1tpXS5IYW5kbGUsQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IiksMCkKICAgICAgICByZXBlYXQgUnVuU2VydmljZS5IZWFydGJlYXQ6d2FpdCgpIHVudGlsIENoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkFjY2Vzc29yeSIpCiAgICAgICAgQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiQWNjZXNzb3J5Iik6RGVzdHJveSgpCiAgICAgICAgcmVwZWF0IFJ1blNlcnZpY2UuSGVhcnRiZWF0OndhaXQoKSB1bnRpbCBub3QgQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiQWNjZXNzb3J5IikKICAgICAgZW5kCiAgCiAgICAgIGV4ZWNDbWQoInJlc2V0IikKICAKICAgICAgUGxheWVyLkNoYXJhY3RlckFkZGVkOldhaXQoKQogIAogICAgICBmb3IgaSA9IDEsMjAgZG8gCiAgICAgICAgUnVuU2VydmljZS5IZWFydGJlYXQ6V2FpdCgpCiAgICAgICAgaWYgUGxheWVyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgICAgIFBsYXllci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKS5DRnJhbWUgPSBPbGQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbHNlCiAgICAgIG5vdGlmeSgiSW5jb21wYXRpYmxlIEV4cGxvaXQiLCJZb3VyIGV4cGxvaXQgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIGNvbW1hbmQgKG1pc3NpbmcgZmlyZXRvdWNoaW50ZXJlc3QpIikKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3ZyJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgLS0gRnVsbCBjcmVkaXQgdG8gQWJhY2F4bCBAVjNybWlsbGlvbgogICAgbm90aWZ5KCJMb2FkaW5nIiwgIkhvbGQgb24gYSBzZWMiKQogICAgbG9hZHN0cmluZyhnYW1lOkh0dHBHZXQoImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9pbmZ5aWZmL2JhY2t1cC9tYWluL3ZyLmx1YSIpKSgpCiAgZW5kKQogIAogIGFkZGNtZCgnc3BsaXQnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiByMTUoc3BlYWtlcikgdGhlbgogICAgICBzcGVha2VyLkNoYXJhY3Rlci5VcHBlclRvcnNvLldhaXN0OkRlc3Ryb3koKQogICAgZWxzZQogICAgICBub3RpZnkoJ1IxNSBSZXF1aXJlZCcsJ1RoaXMgY29tbWFuZCByZXF1aXJlcyB0aGUgcjE1IHJpZyB0eXBlJykKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ25pbGNoYXInLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBzcGVha2VyLkNoYXJhY3RlciB+PSBuaWwgdGhlbgogICAgICBzcGVha2VyLkNoYXJhY3Rlci5QYXJlbnQgPSBuaWwKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3VubmlsY2hhcicseydub25pbGNoYXInfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgc3BlYWtlci5DaGFyYWN0ZXIgfj0gbmlsIHRoZW4KICAgICAgc3BlYWtlci5DaGFyYWN0ZXIuUGFyZW50ID0gd29ya3NwYWNlCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdub3Jvb3QnLHsncmVtb3Zlcm9vdCcsJ3Jyb290J30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyIH49IG5pbCB0aGVuCiAgICAgIGxvY2FsIGNoYXIgPSBQbGF5ZXJzLkxvY2FsUGxheWVyLkNoYXJhY3RlcgogICAgICBjaGFyLlBhcmVudCA9IG5pbAogICAgICBjaGFyLkh1bWFub2lkUm9vdFBhcnQ6RGVzdHJveSgpCiAgICAgIGNoYXIuUGFyZW50ID0gd29ya3NwYWNlCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdyZXBsYWNlcm9vdCcseydyZXBsYWNlcm9vdHBhcnQnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgc3BlYWtlci5DaGFyYWN0ZXIgfj0gbmlsIGFuZCBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgiSHVtYW5vaWRSb290UGFydCIpIHRoZW4KICAgICAgbG9jYWwgQ2hhciA9IHNwZWFrZXIuQ2hhcmFjdGVyCiAgICAgIGxvY2FsIE9sZFBhcmVudCA9IENoYXIuUGFyZW50CiAgICAgIGxvY2FsIEhSUCA9IENoYXIgYW5kIENoYXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKQogICAgICBsb2NhbCBPbGRQb3MgPSBIUlAuQ0ZyYW1lCiAgICAgIENoYXIuUGFyZW50ID0gZ2FtZQogICAgICBsb2NhbCBIUlAxID0gSFJQOkNsb25lKCkKICAgICAgSFJQMS5QYXJlbnQgPSBDaGFyCiAgICAgIEhSUCA9IEhSUDpEZXN0cm95KCkKICAgICAgSFJQMS5DRnJhbWUgPSBPbGRQb3MKICAgICAgQ2hhci5QYXJlbnQgPSBPbGRQYXJlbnQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2NsZWFyY2hhcmFwcGVhcmFuY2UnLHsnY2xlYXJjaGFyJywnY2xyY2hhcid9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBzcGVha2VyOkNsZWFyQ2hhcmFjdGVyQXBwZWFyYW5jZSgpCiAgZW5kKQogIAogIGFkZGNtZCgnZXF1aXB0b29scycse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMoc3BlYWtlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkJhY2twYWNrIik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgaWYgdjpJc0EoIlRvb2wiKSBvciB2OklzQSgiSG9wcGVyQmluIikgdGhlbgogICAgICAgIHYuUGFyZW50ID0gc3BlYWtlci5DaGFyYWN0ZXIKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd1bmVxdWlwdG9vbHMnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJyk6VW5lcXVpcFRvb2xzKCkKICBlbmQpCiAgCiAgbG9jYWwgZnVuY3Rpb24gR2V0SGFuZGxlVG9vbHMocCkKICAgIHAgPSBwIG9yIFBsYXllcnMuTG9jYWxQbGF5ZXIKICAgIGxvY2FsIHIgPSB7fQogICAgZm9yIF8sIHYgaW4gaXBhaXJzKHAuQ2hhcmFjdGVyIGFuZCBwLkNoYXJhY3RlcjpHZXRDaGlsZHJlbigpIG9yIHt9KSBkbwogICAgICBpZiB2LklzQSh2LCAiQmFja3BhY2tJdGVtIikgYW5kIHYuRmluZEZpcnN0Q2hpbGQodiwgIkhhbmRsZSIpIHRoZW4KICAgICAgICByWyNyICsgMV0gPSB2CiAgICAgIGVuZAogICAgZW5kCiAgICBmb3IgXywgdiBpbiBpcGFpcnMocC5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICBpZiB2LklzQSh2LCAiQmFja3BhY2tJdGVtIikgYW5kIHYuRmluZEZpcnN0Q2hpbGQodiwgIkhhbmRsZSIpIHRoZW4KICAgICAgICByWyNyICsgMV0gPSB2CiAgICAgIGVuZAogICAgZW5kCiAgICByZXR1cm4gcgogIGVuZAogIGFkZGNtZCgnZHVwZXRvb2xzJywgeydjbG9uZXRvb2xzJ30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBMT09QX05VTSA9IHRvbnVtYmVyKGFyZ3NbMV0pIG9yIDEKICAgIGxvY2FsIE9yaWdQb3MgPSBzcGVha2VyLkNoYXJhY3Rlci5IdW1hbm9pZFJvb3RQYXJ0LlBvc2l0aW9uCiAgICBsb2NhbCBUb29scywgVGVtcFBvcyA9IHt9LCBWZWN0b3IzLm5ldyhtYXRoLnJhbmRvbSgtMmU1LCAyZTUpLCAyZTUsIG1hdGgucmFuZG9tKC0yZTUsIDJlNSkpCiAgICBmb3IgaSA9IDEsIExPT1BfTlVNIGRvCiAgICAgIGxvY2FsIEh1bWFuID0gc3BlYWtlci5DaGFyYWN0ZXI6V2FpdEZvckNoaWxkKCJIdW1hbm9pZCIpCiAgICAgIHdhaXQoLjEsIEh1bWFuLlBhcmVudDpNb3ZlVG8oVGVtcFBvcykpCiAgICAgIEh1bWFuLlJvb3RQYXJ0LkFuY2hvcmVkID0gc3BlYWtlcjpDbGVhckNoYXJhY3RlckFwcGVhcmFuY2Uod2FpdCguMSkpIG9yIHRydWUKICAgICAgbG9jYWwgdCA9IEdldEhhbmRsZVRvb2xzKHNwZWFrZXIpCiAgICAgIHdoaWxlICN0ID4gMCBkbwogICAgICAgIGZvciBfLCB2IGluIGlwYWlycyh0KSBkbwogICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIGZvciBfID0gMSwgMjUgZG8KICAgICAgICAgICAgICB2LlBhcmVudCA9IHNwZWFrZXIuQ2hhcmFjdGVyCiAgICAgICAgICAgICAgdi5IYW5kbGUuQW5jaG9yZWQgPSB0cnVlCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBmb3IgXyA9IDEsIDUgZG8KICAgICAgICAgICAgICB2LlBhcmVudCA9IHdvcmtzcGFjZQogICAgICAgICAgICBlbmQKICAgICAgICAgICAgdGFibGUuaW5zZXJ0KFRvb2xzLCB2LkhhbmRsZSkKICAgICAgICAgIGVuZCkKICAgICAgICBlbmQKICAgICAgICB0ID0gR2V0SGFuZGxlVG9vbHMoc3BlYWtlcikKICAgICAgZW5kCiAgICAgIHdhaXQoLjEpCiAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyID0gc3BlYWtlci5DaGFyYWN0ZXI6RGVzdHJveSgpCiAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyQWRkZWQ6V2FpdCgpOldhaXRGb3JDaGlsZCgiSHVtYW5vaWQiKS5QYXJlbnQ6TW92ZVRvKExPT1BfTlVNID09IGkgYW5kIE9yaWdQb3Mgb3IgVGVtcFBvcywgd2FpdCguMSkpCiAgICAgIGlmIGkgPT0gTE9PUF9OVU0gb3IgaSAlIDUgPT0gMCB0aGVuCiAgICAgICAgbG9jYWwgSFJQID0gc3BlYWtlci5DaGFyYWN0ZXIuSHVtYW5vaWRSb290UGFydAogICAgICAgIGlmIHR5cGUoZmlyZXRvdWNoaW50ZXJlc3QpID09ICJmdW5jdGlvbiIgdGhlbgogICAgICAgICAgZm9yIF8sIHYgaW4gaXBhaXJzKFRvb2xzKSBkbwogICAgICAgICAgICB2LkFuY2hvcmVkID0gbm90IGZpcmV0b3VjaGludGVyZXN0KHYsIEhSUCwgMSwgZmlyZXRvdWNoaW50ZXJlc3QodiwgSFJQLCAwKSkgYW5kIGZhbHNlIG9yIGZhbHNlCiAgICAgICAgICBlbmQKICAgICAgICBlbHNlCiAgICAgICAgICBmb3IgXywgdiBpbiBpcGFpcnMoVG9vbHMpIGRvCiAgICAgICAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgICAgICAgIGxvY2FsIHggPSB2LkNhbkNvbGxpZGUKICAgICAgICAgICAgICB2LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgICAgICAgIHYuQW5jaG9yZWQgPSBmYWxzZQogICAgICAgICAgICAgIGZvciBfID0gMSwgMTAgZG8KICAgICAgICAgICAgICAgIHYuQ0ZyYW1lID0gSFJQLkNGcmFtZQogICAgICAgICAgICAgICAgd2FpdCgpCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgICAgdi5DYW5Db2xsaWRlID0geAogICAgICAgICAgICBlbmQpCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICB3YWl0KC4xKQogICAgICAgIFRvb2xzID0ge30KICAgICAgZW5kCiAgICAgIFRlbXBQb3MgPSBUZW1wUG9zICsgVmVjdG9yMy5uZXcoMTAsIG1hdGgucmFuZG9tKC01LCA1KSwgMCkKICAgIGVuZAogIGVuZCkKICAKICBsb2NhbCBSUyA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZAogIGFkZGNtZCgnZ2l2ZXRvb2wnLCB7J2dpdmV0b29scyd9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgdiA9IFBsYXllcnNbZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpWzFdXS5DaGFyYWN0ZXIKICAgIHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLkNhbWVyYVN1YmplY3QgPSB2CiAgICBsb2NhbCBDaGFyID0gc3BlYWtlci5DaGFyYWN0ZXIgb3Igd29ya3NwYWNlOkZpbmRGaXJzdENoaWxkKHNwZWFrZXIuTmFtZSkKICAgIGxvY2FsIGh1bSA9IENoYXIgYW5kIENoYXI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgnSHVtYW5vaWQnKQogICAgbG9jYWwgaHJwID0gaHVtIGFuZCBodW0uUm9vdFBhcnQKICAgIGxvY2FsIGhycHBvcyA9IGhycC5DRnJhbWUKICAgIGh1bSA9IGh1bTpEZXN0cm95KCkgb3IgaHVtOkNsb25lKCkKICAgIGh1bS5QYXJlbnQgPSBDaGFyCiAgICBodW06Q2xlYXJBbGxDaGlsZHJlbigpCiAgICBzcGVha2VyOkNsZWFyQ2hhcmFjdGVyQXBwZWFyYW5jZSgpCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgc3BlYWtlci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCk6V2FpdEZvckNoaWxkKCdIdW1hbm9pZCcpLlJvb3RQYXJ0LkNGcmFtZSA9IHdhaXQoKSBhbmQgaHJwcG9zCiAgICBlbmQpCiAgICBsb2NhbCB2SFJQID0gZ2V0Um9vdCh2KQogICAgd2hpbGUgQ2hhciBhbmQgQ2hhci5QYXJlbnQgYW5kIHZIUlAgYW5kIHZIUlAuUGFyZW50IGRvCiAgICAgIGxvY2FsIFRvb2xzID0gZmFsc2UKICAgICAgZm9yIF8sIHYgaW4gaXBhaXJzKENoYXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICBpZiB2OklzQSgnQmFja3BhY2tJdGVtJykgYW5kIHY6RmluZEZpcnN0Q2hpbGQoJ0hhbmRsZScpIHRoZW4KICAgICAgICAgIFRvb2xzID0gdHJ1ZQogICAgICAgICAgZmlyZXRvdWNoaW50ZXJlc3Qodi5IYW5kbGUsIHZIUlAsIDApCiAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh2LkhhbmRsZSwgdkhSUCwgMSkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIGlmIG5vdCBUb29scyB0aGVuCiAgICAgICAgYnJlYWsKICAgICAgZW5kCiAgICAgIGhycC5DRnJhbWUgPSB2SFJQLkNGcmFtZQogICAgICBSUzpXYWl0KCkKICAgIGVuZAogICAgZXhlY0NtZCgncmUnKQogIGVuZCkKICAKICBhZGRjbWQoJ3RvdWNoaW50ZXJlc3RzJywgeyd0b3VjaGludGVyZXN0JywgJ2ZpcmV0b3VjaGludGVyZXN0cycsICdmaXJldG91Y2hpbnRlcmVzdCd9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgbm90IGZpcmV0b3VjaGludGVyZXN0IHRoZW4KICAgICAgbm90aWZ5KCJJbmNvbXBhdGlibGUgRXhwbG9pdCIsICJZb3VyIGV4cGxvaXQgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIGNvbW1hbmQgKG1pc3NpbmcgZmlyZXRvdWNoaW50ZXJlc3QpIikKICAgICAgcmV0dXJuCiAgICBlbmQKICAKICAgIGxvY2FsIHJvb3QgPSBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKSBvciBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJCYXNlUGFydCIpCiAgCiAgICBsb2NhbCBmdW5jdGlvbiB0b3VjaCh4KQogICAgICB4ID0geDpGaW5kRmlyc3RBbmNlc3RvcldoaWNoSXNBKCJQYXJ0IikKICAgICAgaWYgeCB0aGVuCiAgICAgICAgaWYgZmlyZXRvdWNoaW50ZXJlc3QgdGhlbgogICAgICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgICAgIGZpcmV0b3VjaGludGVyZXN0KHgsIHJvb3QsIDEpCiAgICAgICAgICAgIHdhaXQoKQogICAgICAgICAgICBmaXJldG91Y2hpbnRlcmVzdCh4LCByb290LCAwKQogICAgICAgICAgZW5kKQogICAgICAgIGVuZAogICAgICAgIHguQ0ZyYW1lID0gcm9vdC5DRnJhbWUKICAgICAgZW5kCiAgICBlbmQKICAKICAgIGlmIGFyZ3NbMV0gdGhlbgogICAgICBsb2NhbCBuYW1lID0gZ2V0c3RyaW5nKDEpCiAgICAgIGZvciBfLCBkZXNjZW5kYW50IGluIGlwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICBpZiBkZXNjZW5kYW50OklzQSgiVG91Y2hUcmFuc21pdHRlciIpIGFuZCBkZXNjZW5kYW50Lk5hbWUgPT0gbmFtZSBvciBkZXNjYW5kYW50LlBhcmVudC5OYW1lID09IG5hbWUgdGhlbgogICAgICAgICAgdG91Y2goZGVzY2VuZGFudCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbHNlCiAgICAgIGZvciBfLCBkZXNjZW5kYW50IGluIGlwYWlycyh3b3Jrc3BhY2U6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgICBpZiBkZXNjZW5kYW50OklzQSgiVG91Y2hUcmFuc21pdHRlciIpIHRoZW4KICAgICAgICAgIHRvdWNoKGRlc2NlbmRhbnQpCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnZnVsbGJyaWdodCcseydmYicsJ2Z1bGxicmlnaHRuZXNzJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIExpZ2h0aW5nLkJyaWdodG5lc3MgPSAyCiAgICBMaWdodGluZy5DbG9ja1RpbWUgPSAxNAogICAgTGlnaHRpbmcuRm9nRW5kID0gMTAwMDAwCiAgICBMaWdodGluZy5HbG9iYWxTaGFkb3dzID0gZmFsc2UKICAgIExpZ2h0aW5nLk91dGRvb3JBbWJpZW50ID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkKICBlbmQpCiAgCiAgYWRkY21kKCdsb29wZnVsbGJyaWdodCcseydsb29wZmInfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgYnJpZ2h0TG9vcCB0aGVuCiAgICAgIGJyaWdodExvb3A6RGlzY29ubmVjdCgpCiAgICBlbmQKICAgIGxvY2FsIGZ1bmN0aW9uIGJyaWdodEZ1bmMoKQogICAgICBMaWdodGluZy5CcmlnaHRuZXNzID0gMgogICAgICBMaWdodGluZy5DbG9ja1RpbWUgPSAxNAogICAgICBMaWdodGluZy5Gb2dFbmQgPSAxMDAwMDAKICAgICAgTGlnaHRpbmcuR2xvYmFsU2hhZG93cyA9IGZhbHNlCiAgICAgIExpZ2h0aW5nLk91dGRvb3JBbWJpZW50ID0gQ29sb3IzLmZyb21SR0IoMTI4LCAxMjgsIDEyOCkKICAgIGVuZAogIAogICAgYnJpZ2h0TG9vcCA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZDpDb25uZWN0KGJyaWdodEZ1bmMpCiAgZW5kKQogIAogIGFkZGNtZCgndW5sb29wZnVsbGJyaWdodCcseyd1bmxvb3BmYid9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBicmlnaHRMb29wIHRoZW4KICAgICAgYnJpZ2h0TG9vcDpEaXNjb25uZWN0KCkKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2FtYmllbnQnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBMaWdodGluZy5BbWJpZW50ID0gQ29sb3IzLm5ldyhhcmdzWzFdLGFyZ3NbMl0sYXJnc1szXSkKICAgIExpZ2h0aW5nLk91dGRvb3JBbWJpZW50ID0gQ29sb3IzLm5ldyhhcmdzWzFdLGFyZ3NbMl0sYXJnc1szXSkKICBlbmQpCiAgCiAgYWRkY21kKCdkYXknLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBMaWdodGluZy5DbG9ja1RpbWUgPSAxNAogIGVuZCkKICAKICBhZGRjbWQoJ25pZ2h0Jyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgTGlnaHRpbmcuQ2xvY2tUaW1lID0gMAogIGVuZCkKICAKICBhZGRjbWQoJ25vZm9nJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgTGlnaHRpbmcuRm9nRW5kID0gMTAwMDAwCiAgICBmb3IgaSx2IGluIHBhaXJzKExpZ2h0aW5nOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgIGlmIHY6SXNBKCJBdG1vc3BoZXJlIikgdGhlbgogICAgICAgIHY6RGVzdHJveSgpCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnYnJpZ2h0bmVzcycse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIExpZ2h0aW5nLkJyaWdodG5lc3MgPSBhcmdzWzFdCiAgZW5kKQogIAogIGFkZGNtZCgnZ2xvYmFsc2hhZG93cycseydnc2hhZG93cyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBMaWdodGluZy5HbG9iYWxTaGFkb3dzID0gdHJ1ZQogIGVuZCkKICAKICBhZGRjbWQoJ3VuZ2xvYmFsc2hhZG93cycseydub2dzaGFkb3dzJywndW5nc2hhZG93cycsJ25vZ2xvYmFsc2hhZG93cyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBMaWdodGluZy5HbG9iYWxTaGFkb3dzID0gZmFsc2UKICBlbmQpCiAgCiAgb3JpZ3NldHRpbmdzID0ge2FidCA9IExpZ2h0aW5nLkFtYmllbnQsIG9hYnQgPSBMaWdodGluZy5PdXRkb29yQW1iaWVudCwgYnJ0ID0gTGlnaHRpbmcuQnJpZ2h0bmVzcywgdGltZSA9IExpZ2h0aW5nLkNsb2NrVGltZSwgZmUgPSBMaWdodGluZy5Gb2dFbmQsIGZzID0gTGlnaHRpbmcuRm9nU3RhcnQsIGdzID0gTGlnaHRpbmcuR2xvYmFsU2hhZG93c30KICAKICBhZGRjbWQoJ3Jlc3RvcmVsaWdodGluZycseydybGlnaHRpbmcnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgTGlnaHRpbmcuQW1iaWVudCA9IG9yaWdzZXR0aW5ncy5hYnQKICAgIExpZ2h0aW5nLk91dGRvb3JBbWJpZW50ID0gb3JpZ3NldHRpbmdzLm9hYnQKICAgIExpZ2h0aW5nLkJyaWdodG5lc3MgPSBvcmlnc2V0dGluZ3MuYnJ0CiAgICBMaWdodGluZy5DbG9ja1RpbWUgPSBvcmlnc2V0dGluZ3MudGltZQogICAgTGlnaHRpbmcuRm9nRW5kID0gb3JpZ3NldHRpbmdzLmZlCiAgICBMaWdodGluZy5Gb2dTdGFydCA9IG9yaWdzZXR0aW5ncy5mcwogICAgTGlnaHRpbmcuR2xvYmFsU2hhZG93cyA9IG9yaWdzZXR0aW5ncy5ncwogIGVuZCkKICAKICBhZGRjbWQoJ3N0dW4nLHsncGxhdGZvcm1zdGFuZCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuUGxhdGZvcm1TdGFuZCA9IHRydWUKICBlbmQpCiAgCiAgYWRkY21kKCd1bnN0dW4nLHsnbm9zdHVuJywndW5wbGF0Zm9ybXN0YW5kJywnbm9wbGF0Zm9ybXN0YW5kJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5QbGF0Zm9ybVN0YW5kID0gZmFsc2UKICBlbmQpCiAgCiAgYWRkY21kKCdub3JvdGF0ZScseydub2F1dG9yb3RhdGUnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLkF1dG9Sb3RhdGUgID0gZmFsc2UKICBlbmQpCiAgCiAgYWRkY21kKCd1bm5vcm90YXRlJyx7J2F1dG9yb3RhdGUnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLkF1dG9Sb3RhdGUgID0gdHJ1ZQogIGVuZCkKICAKICBhZGRjbWQoJ2VuYWJsZXN0YXRlJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgeCA9IGFyZ3NbMV0KICAgIGlmIG5vdCB0b251bWJlcih4KSB0aGVuCiAgICAgIGxvY2FsIHggPSBFbnVtLkh1bWFub2lkU3RhdGVUeXBlW2FyZ3NbMV1dCiAgICBlbmQKICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKTpTZXRTdGF0ZUVuYWJsZWQoeCwgdHJ1ZSkKICBlbmQpCiAgCiAgYWRkY21kKCdkaXNhYmxlc3RhdGUnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCB4ID0gYXJnc1sxXQogICAgaWYgbm90IHRvbnVtYmVyKHgpIHRoZW4KICAgICAgbG9jYWwgeCA9IEVudW0uSHVtYW5vaWRTdGF0ZVR5cGVbYXJnc1sxXV0KICAgIGVuZAogICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpOlNldFN0YXRlRW5hYmxlZCh4LCBmYWxzZSkKICBlbmQpCiAgCiAgYWRkY21kKCdkcm9waGF0cycseydkcm9waGF0J30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyIHRoZW4KICAgICAgZm9yIF8sdiBpbiBwYWlycyhzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJyk6R2V0QWNjZXNzb3JpZXMoKSkgZG8KICAgICAgICB2LlBhcmVudCA9IHdvcmtzcGFjZQogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2RlbGV0ZWhhdHMnLHsnbm9oYXRzJywncmhhdHMnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBuZXh0LCBzcGVha2VyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpIGRvCiAgICAgIGlmIHY6SXNBKCJBY2Nlc3NvcnkiKSB0aGVuCiAgICAgICAgZm9yIGkscCBpbiBuZXh0LCB2OkdldERlc2NlbmRhbnRzKCkgZG8KICAgICAgICAgIGlmIHA6SXNBKCJXZWxkIikgdGhlbgogICAgICAgICAgICBwOkRlc3Ryb3koKQogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnZHJvcHRvb2xzJyx7J2Ryb3B0b29sJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMoUGxheWVycy5Mb2NhbFBsYXllci5CYWNrcGFjazpHZXRDaGlsZHJlbigpKSBkbwogICAgICBpZiB2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICB2LlBhcmVudCA9IFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyCiAgICAgIGVuZAogICAgZW5kCiAgICB3YWl0KCkKICAgIGZvciBpLHYgaW4gcGFpcnMoUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXI6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgaWYgdjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgdi5QYXJlbnQgPSB3b3Jrc3BhY2UKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdkcm9wcGFibGV0b29scycse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyIHRoZW4KICAgICAgZm9yIF8sb2JqIGluIHBhaXJzKHNwZWFrZXIuQ2hhcmFjdGVyOkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgaWYgb2JqOklzQSgiVG9vbCIpIHRoZW4KICAgICAgICAgIG9iai5DYW5CZURyb3BwZWQgPSB0cnVlCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgICBpZiBzcGVha2VyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiQmFja3BhY2siKSB0aGVuCiAgICAgIGZvciBfLG9iaiBpbiBwYWlycyhzcGVha2VyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiQmFja3BhY2siKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICAgIGlmIG9iajpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgICBvYmouQ2FuQmVEcm9wcGVkID0gdHJ1ZQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBsb2NhbCBjdXJyZW50VG9vbFNpemUgPSAiIgogIGxvY2FsIGN1cnJlbnRHcmlwUG9zID0gIiIKICBhZGRjbWQoJ3JlYWNoJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZXhlY0NtZCgndW5yZWFjaCcpCiAgICB3YWl0KCkKICAgIGZvciBpLHYgaW4gcGFpcnMoc3BlYWtlci5DaGFyYWN0ZXI6R2V0RGVzY2VuZGFudHMoKSkgZG8KICAgICAgaWYgdjpJc0EoIlRvb2wiKSB0aGVuCiAgICAgICAgaWYgYXJnc1sxXSB0aGVuCiAgICAgICAgICBjdXJyZW50VG9vbFNpemUgPSB2LkhhbmRsZS5TaXplCiAgICAgICAgICBjdXJyZW50R3JpcFBvcyA9IHYuR3JpcFBvcwogICAgICAgICAgbG9jYWwgYSA9IEluc3RhbmNlLm5ldygiU2VsZWN0aW9uQm94IikKICAgICAgICAgIGEuTmFtZSA9ICJTZWxlY3Rpb25Cb3hDcmVhdGVkIgogICAgICAgICAgYS5QYXJlbnQgPSB2LkhhbmRsZQogICAgICAgICAgYS5BZG9ybmVlID0gdi5IYW5kbGUKICAgICAgICAgIHYuSGFuZGxlLk1hc3NsZXNzID0gdHJ1ZQogICAgICAgICAgdi5IYW5kbGUuU2l6ZSA9IFZlY3RvcjMubmV3KDAuNSwwLjUsYXJnc1sxXSkKICAgICAgICAgIHYuR3JpcFBvcyA9IFZlY3RvcjMubmV3KDAsMCwwKQogICAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpOlVuZXF1aXBUb29scygpCiAgICAgICAgZWxzZQogICAgICAgICAgY3VycmVudFRvb2xTaXplID0gdi5IYW5kbGUuU2l6ZQogICAgICAgICAgY3VycmVudEdyaXBQb3MgPSB2LkdyaXBQb3MKICAgICAgICAgIGxvY2FsIGEgPSBJbnN0YW5jZS5uZXcoIlNlbGVjdGlvbkJveCIpCiAgICAgICAgICBhLk5hbWUgPSAiU2VsZWN0aW9uQm94Q3JlYXRlZCIKICAgICAgICAgIGEuUGFyZW50ID0gdi5IYW5kbGUKICAgICAgICAgIGEuQWRvcm5lZSA9IHYuSGFuZGxlCiAgICAgICAgICB2LkhhbmRsZS5NYXNzbGVzcyA9IHRydWUKICAgICAgICAgIHYuSGFuZGxlLlNpemUgPSBWZWN0b3IzLm5ldygwLjUsMC41LDYwKQogICAgICAgICAgdi5HcmlwUG9zID0gVmVjdG9yMy5uZXcoMCwwLDApCiAgICAgICAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJyk6VW5lcXVpcFRvb2xzKCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd1bnJlYWNoJyx7J25vcmVhY2gnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhzcGVha2VyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiB2OklzQSgiVG9vbCIpIHRoZW4KICAgICAgICB2LkhhbmRsZS5TaXplID0gY3VycmVudFRvb2xTaXplCiAgICAgICAgdi5HcmlwUG9zID0gY3VycmVudEdyaXBQb3MKICAgICAgICB2LkhhbmRsZS5TZWxlY3Rpb25Cb3hDcmVhdGVkOkRlc3Ryb3koKQogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2dyaXBwb3MnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHNwZWFrZXIuQ2hhcmFjdGVyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgIGlmIHY6SXNBKCJUb29sIikgdGhlbgogICAgICAgIHYuUGFyZW50ID0gc3BlYWtlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkJhY2twYWNrIikKICAgICAgICB2LkdyaXBQb3MgPSBWZWN0b3IzLm5ldyhhcmdzWzFdLGFyZ3NbMl0sYXJnc1szXSkKICAgICAgICB2LlBhcmVudCA9IHNwZWFrZXIuQ2hhcmFjdGVyCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndXNldG9vbHMnLCB7fSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIEJhY2twYWNrID0gc3BlYWtlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkJhY2twYWNrIikKICAgIGxvY2FsIGFtbW91bnQgPSB0b251bWJlcihhcmdzWzFdKSBvciAxCiAgICBsb2NhbCBkZWxheV8gPSB0b251bWJlcihhcmdzWzJdKSBvciBmYWxzZQogICAgZm9yIF8sIHYgaW4gaXBhaXJzKEJhY2twYWNrOkdldENoaWxkcmVuKCkpIGRvCiAgICAgIHYuUGFyZW50ID0gc3BlYWtlci5DaGFyYWN0ZXIKICAgICAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICAgICAgZm9yIF8gPSAxLCBhbW1vdW50IGRvCiAgICAgICAgICB2OkFjdGl2YXRlKCkKICAgICAgICAgIGlmIGRlbGF5XyB0aGVuCiAgICAgICAgICAgIHdhaXQoZGVsYXlfKQogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgdi5QYXJlbnQgPSBCYWNrcGFjawogICAgICBlbmQpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdsb2dzJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9nczpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLCAwLCAxLCAtMjY1KSwgIkluT3V0IiwgIlF1YXJ0IiwgMC4zLCB0cnVlLCBuaWwpCiAgZW5kKQogIAogIGFkZGNtZCgnY2hhdGxvZ3MnLHsnY2xvZ3MnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgam9pbi5WaXNpYmxlID0gZmFsc2UKICAgIGNoYXQuVmlzaWJsZSA9IHRydWUKICAgIHRhYmxlLnJlbW92ZShzaGFkZTMsdGFibGUuZmluZChzaGFkZTMsc2VsZWN0Q2hhdCkpCiAgICB0YWJsZS5yZW1vdmUoc2hhZGUyLHRhYmxlLmZpbmQoc2hhZGUyLHNlbGVjdEpvaW4pKQogICAgdGFibGUuaW5zZXJ0KHNoYWRlMixzZWxlY3RDaGF0KQogICAgdGFibGUuaW5zZXJ0KHNoYWRlMyxzZWxlY3RKb2luKQogICAgc2VsZWN0Sm9pbi5CYWNrZ3JvdW5kQ29sb3IzID0gY3VycmVudFNoYWRlMwogICAgc2VsZWN0Q2hhdC5CYWNrZ3JvdW5kQ29sb3IzID0gY3VycmVudFNoYWRlMgogICAgbG9nczpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLCAwLCAxLCAtMjY1KSwgIkluT3V0IiwgIlF1YXJ0IiwgMC4zLCB0cnVlLCBuaWwpCiAgZW5kKQogIAogIGFkZGNtZCgnam9pbmxvZ3MnLHsnamxvZ3MnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgY2hhdC5WaXNpYmxlID0gZmFsc2UKICAgIGpvaW4uVmlzaWJsZSA9IHRydWUJCiAgICB0YWJsZS5yZW1vdmUoc2hhZGUzLHRhYmxlLmZpbmQoc2hhZGUzLHNlbGVjdEpvaW4pKQogICAgdGFibGUucmVtb3ZlKHNoYWRlMix0YWJsZS5maW5kKHNoYWRlMixzZWxlY3RDaGF0KSkKICAgIHRhYmxlLmluc2VydChzaGFkZTIsc2VsZWN0Sm9pbikKICAgIHRhYmxlLmluc2VydChzaGFkZTMsc2VsZWN0Q2hhdCkKICAgIHNlbGVjdENoYXQuQmFja2dyb3VuZENvbG9yMyA9IGN1cnJlbnRTaGFkZTMKICAgIHNlbGVjdEpvaW4uQmFja2dyb3VuZENvbG9yMyA9IGN1cnJlbnRTaGFkZTIKICAgIGxvZ3M6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMCwgMCwgMSwgLTI2NSksICJJbk91dCIsICJRdWFydCIsIDAuMywgdHJ1ZSwgbmlsKQogIGVuZCkKICAKICBmbGluZ2luZyA9IGZhbHNlCiAgYWRkY21kKCdmbGluZycse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGZsaW5naW5nID0gZmFsc2UKICAgIGZvciBfLCBjaGlsZCBpbiBwYWlycyhzcGVha2VyLkNoYXJhY3RlcjpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICBpZiBjaGlsZDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgIGNoaWxkLkN1c3RvbVBoeXNpY2FsUHJvcGVydGllcyA9IFBoeXNpY2FsUHJvcGVydGllcy5uZXcobWF0aC5odWdlLCAwLjMsIDAuNSkKICAgICAgZW5kCiAgICBlbmQKICAgIGV4ZWNDbWQoJ25vY2xpcCcpCiAgICB3YWl0KC4xKQogICAgbG9jYWwgYmFtYmFtID0gSW5zdGFuY2UubmV3KCJCb2R5QW5ndWxhclZlbG9jaXR5IikKICAgIGJhbWJhbS5OYW1lID0gcmFuZG9tU3RyaW5nKCkKICAgIGJhbWJhbS5QYXJlbnQgPSBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKQogICAgYmFtYmFtLkFuZ3VsYXJWZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsOTk5OTksMCkKICAgIGJhbWJhbS5NYXhUb3JxdWUgPSBWZWN0b3IzLm5ldygwLG1hdGguaHVnZSwwKQogICAgYmFtYmFtLlAgPSBtYXRoLmh1Z2UKICAgIGxvY2FsIENoYXIgPSBzcGVha2VyLkNoYXJhY3RlcjpHZXRDaGlsZHJlbigpCiAgICBmb3IgaSwgdiBpbiBuZXh0LCBDaGFyIGRvCiAgICAgIGlmIHY6SXNBKCJCYXNlUGFydCIpIHRoZW4KICAgICAgICB2LkNhbkNvbGxpZGUgPSBmYWxzZQogICAgICAgIHYuTWFzc2xlc3MgPSB0cnVlCiAgICAgICAgdi5WZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsIDAsIDApCiAgICAgIGVuZAogICAgZW5kCiAgICBmbGluZ2luZyA9IHRydWUKICAgIGxvY2FsIGZ1bmN0aW9uIGZsaW5nRGllZEYoKQogICAgICBleGVjQ21kKCd1bmZsaW5nJykKICAgIGVuZAogICAgZmxpbmdEaWVkID0gc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLkRpZWQ6Q29ubmVjdChmbGluZ0RpZWRGKQogICAgcmVwZWF0CiAgICAgIGJhbWJhbS5Bbmd1bGFyVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDk5OTk5LDApCiAgICAgIHdhaXQoLjIpCiAgICAgIGJhbWJhbS5Bbmd1bGFyVmVsb2NpdHkgPSBWZWN0b3IzLm5ldygwLDAsMCkKICAgICAgd2FpdCguMSkKICAgIHVudGlsIGZsaW5naW5nID09IGZhbHNlCiAgZW5kKQogIAogIGFkZGNtZCgndW5mbGluZycseydub2ZsaW5nJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGV4ZWNDbWQoJ2NsaXAnKQogICAgaWYgZmxpbmdEaWVkIHRoZW4KICAgICAgZmxpbmdEaWVkOkRpc2Nvbm5lY3QoKQogICAgZW5kCiAgICBmbGluZ2luZyA9IGZhbHNlCiAgICB3YWl0KC4xKQogICAgbG9jYWwgc3BlYWtlckNoYXIgPSBzcGVha2VyLkNoYXJhY3RlcgogICAgaWYgbm90IHNwZWFrZXJDaGFyIG9yIG5vdCBnZXRSb290KHNwZWFrZXJDaGFyKSB0aGVuIHJldHVybiBlbmQKICAgIGZvciBpLHYgaW4gcGFpcnMoZ2V0Um9vdChzcGVha2VyQ2hhcik6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgaWYgdi5DbGFzc05hbWUgPT0gJ0JvZHlBbmd1bGFyVmVsb2NpdHknIHRoZW4KICAgICAgICB2OkRlc3Ryb3koKQogICAgICBlbmQKICAgIGVuZAogICAgZm9yIF8sIGNoaWxkIGluIHBhaXJzKHNwZWFrZXJDaGFyOkdldERlc2NlbmRhbnRzKCkpIGRvCiAgICAgIGlmIGNoaWxkLkNsYXNzTmFtZSA9PSAiUGFydCIgb3IgY2hpbGQuQ2xhc3NOYW1lID09ICJNZXNoUGFydCIgdGhlbgogICAgICAgIGNoaWxkLkN1c3RvbVBoeXNpY2FsUHJvcGVydGllcyA9IFBoeXNpY2FsUHJvcGVydGllcy5uZXcoMC43LCAwLjMsIDAuNSkKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd0b2dnbGVmbGluZycse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIGZsaW5naW5nIHRoZW4KICAgICAgZXhlY0NtZCgndW5mbGluZycpCiAgICBlbHNlCiAgICAgIGV4ZWNDbWQoJ2ZsaW5nJykKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoImZseWZsaW5nIiwge30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICAgIGV4ZWNDbWQoInVudmVoaWNsZWZseVxcdW5mbGluZ1xcdW5ub2NsaXAiKQogICAgICB3YWl0KCkKICAgICAgZXhlY0NtZCgidmVoaWNsZWZseVxcZmxpbmdcXG5vY2xpcCIpCiAgZW5kKQogIAogIGFkZGNtZCgidW5mbHlmbGluZyIsIHt9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgICBleGVjQ21kKCJ1bnZlaGljbGVmbHlcXHVuZmxpbmdcXHVubm9jbGlwXFxicmVha3ZlbG9jaXR5IikKICBlbmQpCiAgCiAgYWRkY21kKCJ0b2dnbGVmbHlmbGluZyIsIHt9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgICBleGVjQ21kKGZsaW5naW5nIGFuZCAidW5mbHlmbGluZyIgb3IgImZseWZsaW5nIikKICBlbmQpCiAgCiAgYWRkY21kKCdpbnZpc2ZsaW5nJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgY2ggPSBzcGVha2VyLkNoYXJhY3RlcgogICAgbG9jYWwgcHJ0PUluc3RhbmNlLm5ldygiTW9kZWwiKQogICAgcHJ0LlBhcmVudCA9IHNwZWFrZXIuQ2hhcmFjdGVyCiAgICBsb2NhbCB6MSA9IEluc3RhbmNlLm5ldygiUGFydCIpCiAgICB6MS5OYW1lPSJUb3JzbyIKICAgIHoxLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgejEuQW5jaG9yZWQgPSB0cnVlCiAgICBsb2NhbCB6MiA9IEluc3RhbmNlLm5ldygiUGFydCIpCiAgICB6Mi5OYW1lPSJIZWFkIgogICAgejIuUGFyZW50ID0gcHJ0CiAgICB6Mi5BbmNob3JlZCA9IHRydWUKICAgIHoyLkNhbkNvbGxpZGUgPSBmYWxzZQogICAgbG9jYWwgejMgPUluc3RhbmNlLm5ldygiSHVtYW5vaWQiKQogICAgejMuTmFtZT0iSHVtYW5vaWQiCiAgICB6My5QYXJlbnQgPSBwcnQKICAgIHoxLlBvc2l0aW9uID0gVmVjdG9yMy5uZXcoMCw5OTk5LDApCiAgICBzcGVha2VyLkNoYXJhY3Rlcj1wcnQKICAgIHdhaXQoMykKICAgIHNwZWFrZXIuQ2hhcmFjdGVyPWNoCiAgICB3YWl0KDMpCiAgICBsb2NhbCBIdW0gPSBJbnN0YW5jZS5uZXcoIkh1bWFub2lkIikKICAgIHoyOkNsb25lKCkKICAgIEh1bS5QYXJlbnQgPSBzcGVha2VyLkNoYXJhY3RlcgogICAgbG9jYWwgcm9vdCA9ICBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKQogICAgZm9yIGksdiBpbiBwYWlycyhzcGVha2VyLkNoYXJhY3RlcjpHZXRDaGlsZHJlbigpKSBkbwogICAgICBpZiB2IH49IHJvb3QgYW5kICB2Lk5hbWUgfj0gIkh1bWFub2lkIiB0aGVuCiAgICAgICAgdjpEZXN0cm95KCkKICAgICAgZW5kCiAgICBlbmQKICAgIHJvb3QuVHJhbnNwYXJlbmN5ID0gMAogICAgcm9vdC5Db2xvciA9IENvbG9yMy5uZXcoMSwgMSwgMSkKICAgIGxvY2FsIGludmlzZmxpbmdTdGVwcGVkCiAgICBpbnZpc2ZsaW5nU3RlcHBlZCA9IFJ1blNlcnZpY2UuU3RlcHBlZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgaWYgc3BlYWtlci5DaGFyYWN0ZXIgYW5kIGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpIHRoZW4KICAgICAgICBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKS5DYW5Db2xsaWRlID0gZmFsc2UKICAgICAgZWxzZQogICAgICAgIGludmlzZmxpbmdTdGVwcGVkOkRpc2Nvbm5lY3QoKQogICAgICBlbmQKICAgIGVuZCkKICAgIHNGTFkoKQogICAgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ2FtZXJhU3ViamVjdCA9IHJvb3QKICAgIGxvY2FsIGJhbWJhbSA9IEluc3RhbmNlLm5ldygiQm9keVRocnVzdCIpCiAgICBiYW1iYW0uUGFyZW50ID0gZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikKICAgIGJhbWJhbS5Gb3JjZSA9IFZlY3RvcjMubmV3KDk5OTk5LDk5OTk5KjEwLDk5OTk5KQogICAgYmFtYmFtLkxvY2F0aW9uID0gZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikuUG9zaXRpb24KICBlbmQpCiAgCiAgZnVuY3Rpb24gYXR0YWNoKHNwZWFrZXIsdGFyZ2V0KQogICAgaWYgdG9vbHMoc3BlYWtlcikgdGhlbgogICAgICBsb2NhbCBjaGFyID0gc3BlYWtlci5DaGFyYWN0ZXIKICAgICAgbG9jYWwgdGNoYXIgPSB0YXJnZXQuQ2hhcmFjdGVyCiAgICAgIGxvY2FsIGh1bSA9IHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgICBsb2NhbCBocnAgPSBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKQogICAgICBsb2NhbCBocnAyID0gZ2V0Um9vdCh0YXJnZXQuQ2hhcmFjdGVyKQogICAgICBodW0uTmFtZSA9ICIxIgogICAgICBsb2NhbCBuZXdIdW0gPSBodW06Q2xvbmUoKQogICAgICBuZXdIdW0uUGFyZW50ID0gY2hhcgogICAgICBuZXdIdW0uTmFtZSA9ICJIdW1hbm9pZCIKICAgICAgd2FpdCgpCiAgICAgIGh1bTpEZXN0cm95KCkKICAgICAgd29ya3NwYWNlLkN1cnJlbnRDYW1lcmEuQ2FtZXJhU3ViamVjdCA9IGNoYXIKICAgICAgbmV3SHVtLkRpc3BsYXlEaXN0YW5jZVR5cGUgPSAiTm9uZSIKICAgICAgbG9jYWwgdG9vbCA9IHNwZWFrZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJCYWNrcGFjayIpOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVG9vbCIpIG9yIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiVG9vbCIpCiAgICAgIHRvb2wuUGFyZW50ID0gY2hhcgogICAgICBocnAuQ0ZyYW1lID0gaHJwMi5DRnJhbWUgKiBDRnJhbWUubmV3KDAsIDAsIDApICogQ0ZyYW1lLm5ldyhtYXRoLnJhbmRvbSgtMTAwLCAxMDApLzIwMCxtYXRoLnJhbmRvbSgtMTAwLCAxMDApLzIwMCxtYXRoLnJhbmRvbSgtMTAwLCAxMDApLzIwMCkKICAgICAgbG9jYWwgbiA9IDAKICAgICAgcmVwZWF0CiAgICAgICAgd2FpdCguMSkKICAgICAgICBuID0gbiArIDEKICAgICAgICBocnAuQ0ZyYW1lID0gaHJwMi5DRnJhbWUKICAgICAgdW50aWwgKHRvb2wuUGFyZW50IH49IGNoYXIgb3Igbm90IGhycCBvciBub3QgaHJwMiBvciBub3QgaHJwLlBhcmVudCBvciBub3QgaHJwMi5QYXJlbnQgb3IgbiA+IDI1MCkgYW5kIG4gPiAyCiAgICBlbHNlCiAgICAgIG5vdGlmeSgnVG9vbCBSZXF1aXJlZCcsJ1lvdSBuZWVkIHRvIGhhdmUgYW4gaXRlbSBpbiB5b3VyIGludmVudG9yeSB0byB1c2UgdGhpcyBjb21tYW5kJykKICAgIGVuZAogIGVuZAogIAogIGFkZGNtZCgnYXR0YWNoJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgcGxheWVycyA9IGdldFBsYXllcihhcmdzWzFdLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhwbGF5ZXJzKSBkbwogICAgICBhdHRhY2goc3BlYWtlcixQbGF5ZXJzW3ZdKQogICAgZW5kCiAgZW5kKQogIAogIGZ1bmN0aW9uIGtpbGwoc3BlYWtlcix0YXJnZXQsZmFzdCkKICAgIGlmIHRvb2xzKHNwZWFrZXIpIHRoZW4KICAgICAgaWYgdGFyZ2V0IH49IG5pbCB0aGVuCiAgICAgICAgbG9jYWwgTm9ybVBvcyA9IGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpLkNGcmFtZQogICAgICAgIGlmIG5vdCBmYXN0IHRoZW4KICAgICAgICAgIHJlZnJlc2goc3BlYWtlcikKICAgICAgICAgIHdhaXQoKQogICAgICAgICAgcmVwZWF0IHdhaXQoKSB1bnRpbCBzcGVha2VyLkNoYXJhY3RlciB+PSBuaWwgYW5kIGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpCiAgICAgICAgICB3YWl0KDAuMykKICAgICAgICBlbmQKICAgICAgICBsb2NhbCBocnAgPSBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKQogICAgICAgIGF0dGFjaChzcGVha2VyLHRhcmdldCkKICAgICAgICByZXBlYXQKICAgICAgICAgIHdhaXQoKQogICAgICAgICAgaHJwLkNGcmFtZSA9IENGcmFtZS5uZXcoOTk5OTk5LCB3b3Jrc3BhY2UuRmFsbGVuUGFydHNEZXN0cm95SGVpZ2h0ICsgNSw5OTk5OTkpCiAgICAgICAgdW50aWwgbm90IGdldFJvb3QodGFyZ2V0LkNoYXJhY3Rlcikgb3Igbm90IGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpCiAgICAgICAgc3BlYWtlci5DaGFyYWN0ZXJBZGRlZDpXYWl0KCk6V2FpdEZvckNoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikuQ0ZyYW1lID0gTm9ybVBvcwogICAgICBlbmQKICAgIGVsc2UKICAgICAgbm90aWZ5KCdUb29sIFJlcXVpcmVkJywnWW91IG5lZWQgdG8gaGF2ZSBhbiBpdGVtIGluIHlvdXIgaW52ZW50b3J5IHRvIHVzZSB0aGlzIGNvbW1hbmQnKQogICAgZW5kCiAgZW5kCiAgCiAgYWRkY21kKCdraWxsJyx7J2Zla2lsbCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpIGRvCiAgICAgIGtpbGwoc3BlYWtlcixQbGF5ZXJzW3ZdKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnaGFuZGxla2lsbCcsIHsnaGtpbGwnfSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIG5vdCBmaXJldG91Y2hpbnRlcmVzdCB0aGVuCiAgICAgIHJldHVybiBub3RpZnkoJ0luY29tcGF0aWJsZSBFeHBsb2l0JywgJ1lvdXIgZXhwbG9pdCBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgY29tbWFuZCAobWlzc2luZyBmaXJldG91Y2hpbnRlcmVzdCknKQogICAgZW5kCiAgICBsb2NhbCBSUyA9IFJ1blNlcnZpY2UuUmVuZGVyU3RlcHBlZAogICAgbG9jYWwgVG9vbCA9IHNwZWFrZXIuQ2hhcmFjdGVyLkZpbmRGaXJzdENoaWxkV2hpY2hJc0Eoc3BlYWtlci5DaGFyYWN0ZXIsICJUb29sIikKICAgIGxvY2FsIEhhbmRsZSA9IFRvb2wgYW5kIFRvb2wuRmluZEZpcnN0Q2hpbGQoVG9vbCwgIkhhbmRsZSIpCiAgICBpZiBub3QgVG9vbCBvciBub3QgSGFuZGxlIHRoZW4KICAgICAgcmV0dXJuIG5vdGlmeSgiSGFuZGxlIEtpbGwiLCAiWW91IG5lZWQgdG8gaG9sZCBhIFwiVG9vbFwiIHRoYXQgZG9lcyBkYW1hZ2Ugb24gdG91Y2guIEZvciBleGFtcGxlIHRoZSBkZWZhdWx0IFwiU3dvcmRcIiB0b29sLiIpCiAgICBlbmQKICAgIGZvciBfLCB2IGluIGlwYWlycyhnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikpIGRvCiAgICAgIHYgPSBQbGF5ZXJzW3ZdCiAgICAgIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgICAgIHdoaWxlIFRvb2wgYW5kIHNwZWFrZXIuQ2hhcmFjdGVyIGFuZCB2LkNoYXJhY3RlciBhbmQgVG9vbC5QYXJlbnQgPT0gc3BlYWtlci5DaGFyYWN0ZXIgZG8KICAgICAgICAgIGxvY2FsIEh1bWFuID0gdi5DaGFyYWN0ZXIuRmluZEZpcnN0Q2hpbGRXaGljaElzQSh2LkNoYXJhY3RlciwgIkh1bWFub2lkIikKICAgICAgICAgIGlmIG5vdCBIdW1hbiBvciBIdW1hbi5IZWFsdGggPD0gMCB0aGVuCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICBlbmQKICAgICAgICAgIGZvciBfLCB2MSBpbiBpcGFpcnModi5DaGFyYWN0ZXIuR2V0Q2hpbGRyZW4odi5DaGFyYWN0ZXIpKSBkbwogICAgICAgICAgICB2MSA9ICgodjEuSXNBKHYxLCAiQmFzZVBhcnQiKSBhbmQgZmlyZXRvdWNoaW50ZXJlc3QoSGFuZGxlLCB2MSwgMSwgKFJTLldhaXQoUlMpIGFuZCBuaWwpIG9yIGZpcmV0b3VjaGludGVyZXN0KEhhbmRsZSwgdjEsIDApKSBhbmQgbmlsKSBvciB2MSkgb3IgdjEKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICAgIG5vdGlmeSgiSGFuZGxlIEtpbGwgU3RvcHBlZCEiLCB2Lk5hbWUgLi4gIiBkaWVkL2xlZnQgb3IgeW91IHVuZXF1aXBwZWQgdGhlIHRvb2whIikKICAgICAgZW5kKQogICAgZW5kCiAgZW5kKQogIAogIGxvY2FsIGhiID0gUnVuU2VydmljZS5IZWFydGJlYXQKICBhZGRjbWQoJ3Rwd2FsaycsIHsndGVsZXBvcnR3YWxrJ30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICB0cHdhbGtpbmcgPSB0cnVlCiAgICBsb2NhbCBjaHIgPSBzcGVha2VyLkNoYXJhY3RlcgogICAgbG9jYWwgaHVtID0gY2hyIGFuZCBjaHI6RmluZEZpcnN0Q2hpbGRXaGljaElzQSgiSHVtYW5vaWQiKQogICAgd2hpbGUgdHB3YWxraW5nIGFuZCBjaHIgYW5kIGh1bSBhbmQgaHVtLlBhcmVudCBkbwogICAgICBsb2NhbCBkZWx0YSA9IGhiOldhaXQoKQogICAgICBpZiBodW0uTW92ZURpcmVjdGlvbi5NYWduaXR1ZGUgPiAwIHRoZW4KICAgICAgICBpZiBhcmdzWzFdIGFuZCBpc051bWJlcihhcmdzWzFdKSB0aGVuCiAgICAgICAgICBjaHI6VHJhbnNsYXRlQnkoaHVtLk1vdmVEaXJlY3Rpb24gKiB0b251bWJlcihhcmdzWzFdKSAqIGRlbHRhICogMTApCiAgICAgICAgZWxzZQogICAgICAgICAgY2hyOlRyYW5zbGF0ZUJ5KGh1bS5Nb3ZlRGlyZWN0aW9uICogZGVsdGEgKiAxMCkKICAgICAgICBlbmQKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgYWRkY21kKCd1bnRwd2FsaycsIHsndW50ZWxlcG9ydHdhbGsnfSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIHRwd2Fsa2luZyA9IGZhbHNlCiAgZW5kKQogIAogIGFkZGNtZCgnZmFzdGtpbGwnLHsnZmFzdGZla2lsbCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpIGRvCiAgICAgIGtpbGwoc3BlYWtlcixQbGF5ZXJzW3ZdLHRydWUpCiAgICBlbmQKICBlbmQpCiAgCiAgZnVuY3Rpb24gYnJpbmcoc3BlYWtlcix0YXJnZXQsZmFzdCkKICAgIGlmIHRvb2xzKHNwZWFrZXIpIHRoZW4KICAgICAgaWYgdGFyZ2V0IH49IG5pbCB0aGVuCiAgICAgICAgbG9jYWwgTm9ybVBvcyA9IGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpLkNGcmFtZQogICAgICAgIGlmIG5vdCBmYXN0IHRoZW4KICAgICAgICAgIHJlZnJlc2goc3BlYWtlcikKICAgICAgICAgIHdhaXQoKQogICAgICAgICAgcmVwZWF0IHdhaXQoKSB1bnRpbCBzcGVha2VyLkNoYXJhY3RlciB+PSBuaWwgYW5kIGdldFJvb3Qoc3BlYWtlci5DaGFyYWN0ZXIpCiAgICAgICAgICB3YWl0KDAuMykKICAgICAgICBlbmQKICAgICAgICBsb2NhbCBocnAgPSBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKQogICAgICAgIGF0dGFjaChzcGVha2VyLHRhcmdldCkKICAgICAgICByZXBlYXQKICAgICAgICAgIHdhaXQoKQogICAgICAgICAgaHJwLkNGcmFtZSA9IE5vcm1Qb3MKICAgICAgICB1bnRpbCBub3QgZ2V0Um9vdCh0YXJnZXQuQ2hhcmFjdGVyKSBvciBub3QgZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikKICAgICAgICBzcGVha2VyLkNoYXJhY3RlckFkZGVkOldhaXQoKTpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKS5DRnJhbWUgPSBOb3JtUG9zCiAgICAgIGVuZAogICAgZWxzZQogICAgICBub3RpZnkoJ1Rvb2wgUmVxdWlyZWQnLCdZb3UgbmVlZCB0byBoYXZlIGFuIGl0ZW0gaW4geW91ciBpbnZlbnRvcnkgdG8gdXNlIHRoaXMgY29tbWFuZCcpCiAgICBlbmQKICBlbmQKICAKICBhZGRjbWQoJ2JyaW5nJyx7J2ZlYnJpbmcnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgcGxheWVycyA9IGdldFBsYXllcihhcmdzWzFdLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhwbGF5ZXJzKSBkbwogICAgICBicmluZyhzcGVha2VyLFBsYXllcnNbdl0pCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdmYXN0YnJpbmcnLHsnZmFzdGZlYnJpbmcnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgbG9jYWwgcGxheWVycyA9IGdldFBsYXllcihhcmdzWzFdLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhwbGF5ZXJzKSBkbwogICAgICBicmluZyhzcGVha2VyLFBsYXllcnNbdl0sdHJ1ZSkKICAgIGVuZAogIGVuZCkKICAKICBmdW5jdGlvbiB0ZWxlcG9ydChzcGVha2VyLHRhcmdldCx0YXJnZXQyLGZhc3QpCiAgICBpZiB0b29scyhzcGVha2VyKSB0aGVuCiAgICAgIGlmIHRhcmdldCB+PSBuaWwgdGhlbgogICAgICAgIGxvY2FsIE5vcm1Qb3MgPSBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKS5DRnJhbWUKICAgICAgICBpZiBub3QgZmFzdCB0aGVuCiAgICAgICAgICByZWZyZXNoKHNwZWFrZXIpCiAgICAgICAgICB3YWl0KCkKICAgICAgICAgIHJlcGVhdCB3YWl0KCkgdW50aWwgc3BlYWtlci5DaGFyYWN0ZXIgfj0gbmlsIGFuZCBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKQogICAgICAgICAgd2FpdCgwLjMpCiAgICAgICAgZW5kCiAgICAgICAgbG9jYWwgaHJwID0gZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikKICAgICAgICBsb2NhbCBocnAyID0gZ2V0Um9vdCh0YXJnZXQyLkNoYXJhY3RlcikKICAgICAgICBhdHRhY2goc3BlYWtlcix0YXJnZXQpCiAgICAgICAgcmVwZWF0CiAgICAgICAgICB3YWl0KCkKICAgICAgICAgIGhycC5DRnJhbWUgPSBocnAyLkNGcmFtZQogICAgICAgIHVudGlsIG5vdCBnZXRSb290KHRhcmdldC5DaGFyYWN0ZXIpIG9yIG5vdCBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKQogICAgICAgIHdhaXQoMSkKICAgICAgICBzcGVha2VyLkNoYXJhY3RlckFkZGVkOldhaXQoKTpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKS5DRnJhbWUgPSBOb3JtUG9zCiAgICAgIGVuZAogICAgZWxzZQogICAgICBub3RpZnkoJ1Rvb2wgUmVxdWlyZWQnLCdZb3UgbmVlZCB0byBoYXZlIGFuIGl0ZW0gaW4geW91ciBpbnZlbnRvcnkgdG8gdXNlIHRoaXMgY29tbWFuZCcpCiAgICBlbmQKICBlbmQKICAKICBhZGRjbWQoJ3RwJyx7J3RlbGVwb3J0J30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHBsYXllcnMxPWdldFBsYXllcihhcmdzWzFdLCBzcGVha2VyKQogICAgbG9jYWwgcGxheWVyczI9Z2V0UGxheWVyKGFyZ3NbMl0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMxKWRvCiAgICAgIGlmIGdldFJvb3QoUGxheWVyc1t2XS5DaGFyYWN0ZXIpIGFuZCBnZXRSb290KFBsYXllcnNbcGxheWVyczJbMV1dLkNoYXJhY3RlcikgdGhlbgogICAgICAgIGlmIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKSBhbmQgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLlNlYXRQYXJ0IHRoZW4KICAgICAgICAgIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TaXQgPSBmYWxzZQogICAgICAgICAgd2FpdCguMSkKICAgICAgICBlbmQKICAgICAgICB0ZWxlcG9ydChzcGVha2VyLFBsYXllcnNbdl0sUGxheWVyc1twbGF5ZXJzMlsxXV0pCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnZmFzdHRwJyx7J2Zhc3R0ZWxlcG9ydCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzMT1nZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgIGxvY2FsIHBsYXllcnMyPWdldFBsYXllcihhcmdzWzJdLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhwbGF5ZXJzMSlkbwogICAgICBpZiBnZXRSb290KFBsYXllcnNbdl0uQ2hhcmFjdGVyKSBhbmQgZ2V0Um9vdChQbGF5ZXJzW3BsYXllcnMyWzFdXS5DaGFyYWN0ZXIpIHRoZW4KICAgICAgICBpZiBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykgYW5kIHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygnSHVtYW5vaWQnKS5TZWF0UGFydCB0aGVuCiAgICAgICAgICBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuU2l0ID0gZmFsc2UKICAgICAgICAgIHdhaXQoLjEpCiAgICAgICAgZW5kCiAgICAgICAgdGVsZXBvcnQoc3BlYWtlcixQbGF5ZXJzW3ZdLFBsYXllcnNbcGxheWVyczJbMV1dLHRydWUpCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnc3Bpbicse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHNwaW5TcGVlZCA9IDIwCiAgICBpZiBhcmdzWzFdIGFuZCBpc051bWJlcihhcmdzWzFdKSB0aGVuCiAgICAgIHNwaW5TcGVlZCA9IGFyZ3NbMV0KICAgIGVuZAogICAgZm9yIGksdiBpbiBwYWlycyhnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICBpZiB2Lk5hbWUgPT0gIlNwaW5uaW5nIiB0aGVuCiAgICAgICAgdjpEZXN0cm95KCkKICAgICAgZW5kCiAgICBlbmQKICAgIGxvY2FsIFNwaW4gPSBJbnN0YW5jZS5uZXcoIkJvZHlBbmd1bGFyVmVsb2NpdHkiKQogICAgU3Bpbi5OYW1lID0gIlNwaW5uaW5nIgogICAgU3Bpbi5QYXJlbnQgPSBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKQogICAgU3Bpbi5NYXhUb3JxdWUgPSBWZWN0b3IzLm5ldygwLCBtYXRoLmh1Z2UsIDApCiAgICBTcGluLkFuZ3VsYXJWZWxvY2l0eSA9IFZlY3RvcjMubmV3KDAsc3BpblNwZWVkLDApCiAgZW5kKQogIAogIGFkZGNtZCgndW5zcGluJyx7fSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgZm9yIGksdiBpbiBwYWlycyhnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKTpHZXRDaGlsZHJlbigpKSBkbwogICAgICBpZiB2Lk5hbWUgPT0gIlNwaW5uaW5nIiB0aGVuCiAgICAgICAgdjpEZXN0cm95KCkKICAgICAgZW5kCiAgICBlbmQKICBlbmQpCiAgCiAgeHJheUVuYWJsZWQgPSBmYWxzZQogIHhyYXkgPSBmdW5jdGlvbigpCiAgICAgIGZvciBfLCB2IGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgaWYgdjpJc0EoIkJhc2VQYXJ0IikgYW5kIG5vdCB2LlBhcmVudDpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJIdW1hbm9pZCIpIGFuZCBub3Qgdi5QYXJlbnQuUGFyZW50OkZpbmRGaXJzdENoaWxkV2hpY2hJc0EoIkh1bWFub2lkIikgdGhlbgogICAgICAgICAgICAgIHYuTG9jYWxUcmFuc3BhcmVuY3lNb2RpZmllciA9IHhyYXlFbmFibGVkIGFuZCAwLjUgb3IgMAogICAgICAgICAgZW5kCiAgICAgIGVuZAogIGVuZAogIAogIGFkZGNtZCgieHJheSIsIHt9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgICB4cmF5RW5hYmxlZCA9IHRydWUKICAgICAgeHJheSgpCiAgZW5kKQogIAogIGFkZGNtZCgidW54cmF5IiwgeyJub3hyYXkifSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgICAgeHJheUVuYWJsZWQgPSBmYWxzZQogICAgICB4cmF5KCkKICBlbmQpCiAgCiAgYWRkY21kKCJ0b2dnbGV4cmF5Iiwge30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICAgIHhyYXlFbmFibGVkID0gbm90IHhyYXlFbmFibGVkCiAgICAgIHhyYXkoKQogIGVuZCkKICAKICBhZGRjbWQoImxvb3B4cmF5Iiwge30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICAgIGlmIHhyYXlMb29wIHRoZW4KICAgICAgICAgIHhyYXlMb29wOkRpc2Nvbm5lY3QoKQogICAgICBlbmQKICAgICAgeHJheUxvb3AgPSBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICB4cmF5RW5hYmxlZCA9IHRydWUKICAgICAgICAgIHhyYXkoKQogICAgICBlbmQpCiAgZW5kKQogIAogIGFkZGNtZCgidW5sb29weHJheSIsIHt9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgICBpZiB4cmF5TG9vcCB0aGVuCiAgICAgICAgICB4cmF5TG9vcDpEaXNjb25uZWN0KCkKICAgICAgZW5kCiAgZW5kKQogIAogIGxvY2FsIHdhbGx0cFRvdWNoID0gbmlsCiAgYWRkY21kKCd3YWxsdHAnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCB0b3JzbwogICAgaWYgcjE1KHNwZWFrZXIpIHRoZW4KICAgICAgdG9yc28gPSBzcGVha2VyLkNoYXJhY3Rlci5VcHBlclRvcnNvCiAgICBlbHNlCiAgICAgIHRvcnNvID0gc3BlYWtlci5DaGFyYWN0ZXIuVG9yc28KICAgIGVuZAogICAgbG9jYWwgZnVuY3Rpb24gdG91Y2hlZEZ1bmMoaGl0KQogICAgICBsb2NhbCBSb290ID0gZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikKICAgICAgaWYgaGl0OklzQSgiQmFzZVBhcnQiKSBhbmQgaGl0LlBvc2l0aW9uLlkgPiBSb290LlBvc2l0aW9uLlkgLSBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuSGlwSGVpZ2h0IHRoZW4KICAgICAgICBsb2NhbCBoaXRQID0gZ2V0Um9vdChoaXQuUGFyZW50KQogICAgICAgIGlmIGhpdFAgfj0gbmlsIHRoZW4KICAgICAgICAgIFJvb3QuQ0ZyYW1lID0gaGl0LkNGcmFtZSAqIENGcmFtZS5uZXcoUm9vdC5DRnJhbWUubG9va1ZlY3Rvci5YLGhpdFAuU2l6ZS5aLzIgKyBzcGVha2VyLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoJ0h1bWFub2lkJykuSGlwSGVpZ2h0LFJvb3QuQ0ZyYW1lLmxvb2tWZWN0b3IuWikKICAgICAgICBlbHNlaWYgaGl0UCA9PSBuaWwgdGhlbgogICAgICAgICAgUm9vdC5DRnJhbWUgPSBoaXQuQ0ZyYW1lICogQ0ZyYW1lLm5ldyhSb290LkNGcmFtZS5sb29rVmVjdG9yLlgsaGl0LlNpemUuWS8yICsgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdIdW1hbm9pZCcpLkhpcEhlaWdodCxSb290LkNGcmFtZS5sb29rVmVjdG9yLlopCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgICB3YWxsdHBUb3VjaCA9IHRvcnNvLlRvdWNoZWQ6Q29ubmVjdCh0b3VjaGVkRnVuYykKICBlbmQpCiAgCiAgYWRkY21kKCd1bndhbGx0cCcseydub3dhbGx0cCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiB3YWxsdHBUb3VjaCB0aGVuCiAgICAgIHdhbGx0cFRvdWNoOkRpc2Nvbm5lY3QoKQogICAgZW5kCiAgZW5kKQogIAogIGF1dG9jbGlja2luZyA9IGZhbHNlCiAgYWRkY21kKCdhdXRvY2xpY2snLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBtb3VzZTFwcmVzcyBhbmQgbW91c2UxcmVsZWFzZSB0aGVuCiAgICAgIGV4ZWNDbWQoJ3VuYXV0b2NsaWNrJykKICAgICAgd2FpdCgpCiAgICAgIGxvY2FsIGNsaWNrRGVsYXkgPSAwLjEKICAgICAgbG9jYWwgcmVsZWFzZURlbGF5ID0gMC4xCiAgICAgIGlmIGFyZ3NbMV0gYW5kIGlzTnVtYmVyKGFyZ3NbMV0pIHRoZW4gY2xpY2tEZWxheSA9IGFyZ3NbMV0gZW5kCiAgICAgIGlmIGFyZ3NbMl0gYW5kIGlzTnVtYmVyKGFyZ3NbMl0pIHRoZW4gcmVsZWFzZURlbGF5ID0gYXJnc1syXSBlbmQKICAgICAgYXV0b2NsaWNraW5nID0gdHJ1ZQogICAgICBjYW5jZWxBdXRvQ2xpY2sgPSBVc2VySW5wdXRTZXJ2aWNlLklucHV0QmVnYW46Q29ubmVjdChmdW5jdGlvbihpbnB1dCwgZ2FtZVByb2Nlc3NlZEV2ZW50KQogICAgICAgIGlmIG5vdCBnYW1lUHJvY2Vzc2VkRXZlbnQgdGhlbgogICAgICAgICAgaWYgKGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkJhY2tzcGFjZSBhbmQgVXNlcklucHV0U2VydmljZTpJc0tleURvd24oRW51bS5LZXlDb2RlLkVxdWFscykpIG9yIChpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5FcXVhbHMgYW5kIFVzZXJJbnB1dFNlcnZpY2U6SXNLZXlEb3duKEVudW0uS2V5Q29kZS5CYWNrc3BhY2UpKSB0aGVuCiAgICAgICAgICAgIGF1dG9jbGlja2luZyA9IGZhbHNlCiAgICAgICAgICAgIGNhbmNlbEF1dG9DbGljazpEaXNjb25uZWN0KCkKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICBlbmQpCiAgICAgIG5vdGlmeSgnQXV0byBDbGlja2VyJywiUHJlc3MgW2JhY2tzcGFjZV0gYW5kIFs9XSBhdCB0aGUgc2FtZSB0aW1lIHRvIHN0b3AiKQogICAgICByZXBlYXQgd2FpdChjbGlja0RlbGF5KQogICAgICAgIG1vdXNlMXByZXNzKCkKICAgICAgICB3YWl0KHJlbGVhc2VEZWxheSkKICAgICAgICBtb3VzZTFyZWxlYXNlKCkKICAgICAgdW50aWwgYXV0b2NsaWNraW5nID09IGZhbHNlCiAgICBlbHNlCiAgICAgIG5vdGlmeSgnQXV0byBDbGlja2VyJywiWW91ciBleHBsb2l0IGRvZXNuJ3QgaGF2ZSB0aGUgYWJpbGl0eSB0byB1c2UgdGhlIGF1dG9jbGljayIpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd1bmF1dG9jbGljaycseydub2F1dG9jbGljayd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBhdXRvY2xpY2tpbmcgPSBmYWxzZQogICAgaWYgY2FuY2VsQXV0b0NsaWNrIHRoZW4gY2FuY2VsQXV0b0NsaWNrOkRpc2Nvbm5lY3QoKSBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdtb3VzZXNlbnNpdGl2aXR5Jyx7J21zJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIFVzZXJJbnB1dFNlcnZpY2UuTW91c2VEZWx0YVNlbnNpdGl2aXR5ID0gYXJnc1sxXQogIGVuZCkKICAKICBsb2NhbCBuYW1lQm94ID0gbmlsCiAgbG9jYWwgbmJTZWxlY3Rpb24gPSBuaWwKICBhZGRjbWQoJ2hvdmVybmFtZScse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGV4ZWNDbWQoJ3VuaG92ZXJuYW1lJykKICAgIHdhaXQoKQogICAgbmFtZUJveCA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKICAgIG5hbWVCb3guTmFtZSA9IHJhbmRvbVN0cmluZygpCiAgICBuYW1lQm94LlBhcmVudCA9IFBBUkVOVAogICAgbmFtZUJveC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgbmFtZUJveC5TaXplID0gVURpbTIubmV3KDAsMjAwLDAsMzApCiAgICBuYW1lQm94LkZvbnQgPSBFbnVtLkZvbnQuQ29kZQogICAgbmFtZUJveC5UZXh0U2l6ZSA9IDE2CiAgICBuYW1lQm94LlRleHQgPSAiIgogICAgbmFtZUJveC5UZXh0Q29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgbmFtZUJveC5UZXh0U3Ryb2tlVHJhbnNwYXJlbmN5ID0gMAogICAgbmFtZUJveC5UZXh0WEFsaWdubWVudCA9IEVudW0uVGV4dFhBbGlnbm1lbnQuTGVmdAogICAgbmFtZUJveC5aSW5kZXggPSAxMAogICAgbmJTZWxlY3Rpb24gPSBJbnN0YW5jZS5uZXcoJ1NlbGVjdGlvbkJveCcpCiAgICBuYlNlbGVjdGlvbi5OYW1lID0gcmFuZG9tU3RyaW5nKCkKICAgIG5iU2VsZWN0aW9uLkxpbmVUaGlja25lc3MgPSAwLjAzCiAgICBuYlNlbGVjdGlvbi5Db2xvcjMgPSBDb2xvcjMubmV3KDEsIDEsIDEpCiAgICBsb2NhbCBmdW5jdGlvbiB1cGRhdGVOYW1lQm94KCkKICAgICAgbG9jYWwgdAogICAgICBsb2NhbCB0YXJnZXQgPSBJWU1vdXNlLlRhcmdldAogIAogICAgICBpZiB0YXJnZXQgdGhlbgogICAgICAgIGxvY2FsIGh1bWFub2lkID0gdGFyZ2V0LlBhcmVudDpGaW5kRmlyc3RDaGlsZE9mQ2xhc3MoIkh1bWFub2lkIikgb3IgdGFyZ2V0LlBhcmVudC5QYXJlbnQ6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpCiAgICAgICAgaWYgaHVtYW5vaWQgdGhlbgogICAgICAgICAgdCA9IGh1bWFub2lkLlBhcmVudAogICAgICAgIGVuZAogICAgICBlbmQKICAKICAgICAgaWYgdCB+PSBuaWwgdGhlbgogICAgICAgIGxvY2FsIHggPSBJWU1vdXNlLlgKICAgICAgICBsb2NhbCB5ID0gSVlNb3VzZS5ZCiAgICAgICAgbG9jYWwgeFAKICAgICAgICBsb2NhbCB5UAogICAgICAgIGlmIElZTW91c2UuWCA+IDIwMCB0aGVuCiAgICAgICAgICB4UCA9IHggLSAyMDUKICAgICAgICAgIG5hbWVCb3guVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LlJpZ2h0CiAgICAgICAgZWxzZQogICAgICAgICAgeFAgPSB4ICsgMjUKICAgICAgICAgIG5hbWVCb3guVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgICAgICBlbmQKICAgICAgICBuYW1lQm94LlBvc2l0aW9uID0gVURpbTIubmV3KDAsIHhQLCAwLCB5KQogICAgICAgIG5hbWVCb3guVGV4dCA9IHQuTmFtZQogICAgICAgIG5hbWVCb3guVmlzaWJsZSA9IHRydWUKICAgICAgICBuYlNlbGVjdGlvbi5QYXJlbnQgPSB0CiAgICAgICAgbmJTZWxlY3Rpb24uQWRvcm5lZSA9IHQKICAgICAgZWxzZQogICAgICAgIG5hbWVCb3guVmlzaWJsZSA9IGZhbHNlCiAgICAgICAgbmJTZWxlY3Rpb24uUGFyZW50ID0gbmlsCiAgICAgICAgbmJTZWxlY3Rpb24uQWRvcm5lZSA9IG5pbAogICAgICBlbmQKICAgIGVuZAogICAgbmJVcGRhdGVGdW5jID0gSVlNb3VzZS5Nb3ZlOkNvbm5lY3QodXBkYXRlTmFtZUJveCkKICBlbmQpCiAgCiAgYWRkY21kKCd1bmhvdmVybmFtZScseydub2hvdmVybmFtZSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBuYlVwZGF0ZUZ1bmMgdGhlbgogICAgICBuYlVwZGF0ZUZ1bmM6RGlzY29ubmVjdCgpCiAgICAgIG5hbWVCb3g6RGVzdHJveSgpCiAgICAgIG5iU2VsZWN0aW9uOkRlc3Ryb3koKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnaGVhZHNpemUnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpIGRvCiAgICAgIGlmIFBsYXllcnNbdl0gfj0gc3BlYWtlciBhbmQgUGxheWVyc1t2XS5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoJ0hlYWQnKSB0aGVuCiAgICAgICAgbG9jYWwgc2l6ZUFyZyA9IHRvbnVtYmVyKGFyZ3NbMl0pCiAgICAgICAgbG9jYWwgU2l6ZSA9IFZlY3RvcjMubmV3KHNpemVBcmcsc2l6ZUFyZyxzaXplQXJnKQogICAgICAgIGxvY2FsIEhlYWQgPSBQbGF5ZXJzW3ZdLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnSGVhZCcpCiAgICAgICAgaWYgSGVhZDpJc0EoIkJhc2VQYXJ0IikgdGhlbgogICAgICAgICAgaWYgbm90IGFyZ3NbMl0gb3Igc2l6ZUFyZyA9PSAxIHRoZW4KICAgICAgICAgICAgSGVhZC5TaXplID0gVmVjdG9yMy5uZXcoMiwxLDEpCiAgICAgICAgICBlbHNlCiAgICAgICAgICAgIEhlYWQuU2l6ZSA9IFNpemUKICAgICAgICAgIGVuZAogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ2hpdGJveCcse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHBsYXllcnMgPSBnZXRQbGF5ZXIoYXJnc1sxXSwgc3BlYWtlcikKICAgIGZvciBpLHYgaW4gcGFpcnMocGxheWVycykgZG8KICAgICAgaWYgUGxheWVyc1t2XSB+PSBzcGVha2VyIGFuZCBQbGF5ZXJzW3ZdLkNoYXJhY3RlcjpGaW5kRmlyc3RDaGlsZCgnSHVtYW5vaWRSb290UGFydCcpIHRoZW4KICAgICAgICBsb2NhbCBzaXplQXJnID0gdG9udW1iZXIoYXJnc1syXSkKICAgICAgICBsb2NhbCBTaXplID0gVmVjdG9yMy5uZXcoc2l6ZUFyZyxzaXplQXJnLHNpemVBcmcpCiAgICAgICAgbG9jYWwgUm9vdCA9IFBsYXllcnNbdl0uQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCdIdW1hbm9pZFJvb3RQYXJ0JykKICAgICAgICBpZiBSb290OklzQSgiQmFzZVBhcnQiKSB0aGVuCiAgICAgICAgICBpZiBub3QgYXJnc1syXSBvciBzaXplQXJnID09IDEgdGhlbgogICAgICAgICAgICBSb290LlNpemUgPSBWZWN0b3IzLm5ldygyLDEsMSkKICAgICAgICAgICAgUm9vdC5UcmFuc3BhcmVuY3kgPSAwLjQKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgUm9vdC5TaXplID0gU2l6ZQogICAgICAgICAgICBSb290LlRyYW5zcGFyZW5jeSA9IDAuNAogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgnc3RhcmVhdCcseydzdGFyZSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBsb2NhbCBwbGF5ZXJzID0gZ2V0UGxheWVyKGFyZ3NbMV0sIHNwZWFrZXIpCiAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpIGRvCiAgICAgIGlmIHN0YXJlTG9vcCB0aGVuCiAgICAgICAgc3RhcmVMb29wOkRpc2Nvbm5lY3QoKQogICAgICBlbmQKICAgICAgaWYgbm90IFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgYW5kIFBsYXllcnNbdl0uQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkKCJIdW1hbm9pZFJvb3RQYXJ0IikgdGhlbiByZXR1cm4gZW5kCiAgICAgIGxvY2FsIGZ1bmN0aW9uIHN0YXJlRnVuYygpCiAgICAgICAgaWYgUGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQgYW5kIFBsYXllcnM6RmluZEZpcnN0Q2hpbGQodikgYW5kIFBsYXllcnNbdl0uQ2hhcmFjdGVyIH49IG5pbCBhbmQgUGxheWVyc1t2XS5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKSB0aGVuCiAgICAgICAgICBsb2NhbCBjaHJQb3M9UGxheWVycy5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuUHJpbWFyeVBhcnQuUG9zaXRpb24KICAgICAgICAgIGxvY2FsIHRQb3M9UGxheWVyc1t2XS5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoIkh1bWFub2lkUm9vdFBhcnQiKS5Qb3NpdGlvbgogICAgICAgICAgbG9jYWwgbW9kVFBvcz1WZWN0b3IzLm5ldyh0UG9zLlgsY2hyUG9zLlksdFBvcy5aKQogICAgICAgICAgbG9jYWwgbmV3Q0Y9Q0ZyYW1lLm5ldyhjaHJQb3MsbW9kVFBvcykKICAgICAgICAgIFBsYXllcnMuTG9jYWxQbGF5ZXIuQ2hhcmFjdGVyOlNldFByaW1hcnlQYXJ0Q0ZyYW1lKG5ld0NGKQogICAgICAgIGVsc2VpZiBub3QgUGxheWVyczpGaW5kRmlyc3RDaGlsZCh2KSB0aGVuCiAgICAgICAgICBzdGFyZUxvb3A6RGlzY29ubmVjdCgpCiAgICAgICAgZW5kCiAgICAgIGVuZAogIAogICAgICBzdGFyZUxvb3AgPSBSdW5TZXJ2aWNlLlJlbmRlclN0ZXBwZWQ6Q29ubmVjdChzdGFyZUZ1bmMpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCd1bnN0YXJlYXQnLHsndW5zdGFyZScsJ25vc3RhcmUnLCdub3N0YXJlYXQnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgc3RhcmVMb29wIHRoZW4KICAgICAgc3RhcmVMb29wOkRpc2Nvbm5lY3QoKQogICAgZW5kCiAgZW5kKQogIAogIFJvbGV3YXRjaERhdGEgPSB7R3JvdXAgPSAwLCBSb2xlID0gIiIsIExlYXZlID0gZmFsc2V9CiAgUm9sZXdhdGNoQ29ubmVjdGlvbiA9IFBsYXllcnMuUGxheWVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihwbGF5ZXIpCiAgICBpZiBSb2xld2F0Y2hEYXRhLkdyb3VwID09IDAgdGhlbiByZXR1cm4gZW5kCiAgICBpZiBwbGF5ZXI6SXNJbkdyb3VwKFJvbGV3YXRjaERhdGEuR3JvdXApIHRoZW4KICAgICAgaWYgdG9zdHJpbmcocGxheWVyOkdldFJvbGVJbkdyb3VwKFJvbGV3YXRjaERhdGEuR3JvdXApKTpsb3dlcigpID09IFJvbGV3YXRjaERhdGEuUm9sZTpsb3dlcigpIHRoZW4KICAgICAgICBpZiBSb2xld2F0Y2hEYXRhLkxlYXZlID09IHRydWUgdGhlbgogICAgICAgICAgUGxheWVycy5Mb2NhbFBsYXllcjpLaWNrKCJcblxuUm9sZXdhdGNoXG5QbGF5ZXIgXCIiIC4uIHRvc3RyaW5nKHBsYXllci5OYW1lKSAuLiAiXCIgaGFzIGpvaW5lZCB3aXRoIHRoZSBSb2xlIFwiIiAuLiBSb2xld2F0Y2hEYXRhLlJvbGUgLi4gIlwiXG4iKQogICAgICAgIGVsc2UKICAgICAgICAgIG5vdGlmeSgiUm9sZXdhdGNoIiwgIlBsYXllciBcIiIgLi4gdG9zdHJpbmcocGxheWVyLk5hbWUpIC4uICJcIiBoYXMgam9pbmVkIHdpdGggdGhlIFJvbGUgXCIiIC4uIFJvbGV3YXRjaERhdGEuUm9sZSAuLiAiXCIiKQogICAgICAgIGVuZAogICAgICBlbmQKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoInJvbGV3YXRjaCIsIHt9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgICBsb2NhbCBncm91cElkID0gdG9udW1iZXIoYXJnc1sxXSBvciAwKQogICAgICBsb2NhbCByb2xlTmFtZSA9IGFyZ3NbMl0gYW5kIHRvc3RyaW5nKGdldHN0cmluZygyKSkKICAgICAgaWYgZ3JvdXBJZCBhbmQgcm9sZU5hbWUgdGhlbgogICAgICAgICAgUm9sZXdhdGNoRGF0YS5Hcm91cCA9IGdyb3VwSWQKICAgICAgICAgIFJvbGV3YXRjaERhdGEuUm9sZSA9IHJvbGVOYW1lCiAgICAgICAgICBub3RpZnkoIlJvbGV3YXRjaCIsICJXYXRjaGluZyBHcm91cCBJRCBcIiIgLi4gdG9zdHJpbmcoZ3JvdXBJZCkgLi4gIlwiIGZvciBSb2xlIFwiIiAuLiByb2xlTmFtZSAuLiAiXCIiKQogICAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCJyb2xld2F0Y2hzdG9wIiwge30sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICAgIFJvbGV3YXRjaERhdGEuR3JvdXAgPSAwCiAgICAgIFJvbGV3YXRjaERhdGEuUm9sZSA9ICIiCiAgICAgIFJvbGV3YXRjaERhdGEuTGVhdmUgPSBmYWxzZQogICAgICBub3RpZnkoIlJvbGV3YXRjaCIsICJEaXNhYmxlZCIpCiAgZW5kKQogIAogIGFkZGNtZCgicm9sZXdhdGNobGVhdmUiLCB7InVucm9sZXdhdGNoIn0sIGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICAgIFJvbGV3YXRjaERhdGEuTGVhdmUgPSBub3QgUm9sZXdhdGNoRGF0YS5MZWF2ZQogICAgICBub3RpZnkoIlJvbGV3YXRjaCIsIFJvbGV3YXRjaERhdGEuTGVhdmUgYW5kICJMZWF2ZSBoYXMgYmVlbiBFbmFibGVkIiBvciAiTGVhdmUgaGFzIGJlZW4gRGlzYWJsZWQiKQogIGVuZCkKICAKICBzdGFmZlJvbGVzID0geyJtb2QiLCAiYWRtaW4iLCAic3RhZmYiLCAiZGV2IiwgImZvdW5kZXIiLCAib3duZXIiLCAic3VwZXJ2aXMiLCAibWFuYWdlciIsICJtYW5hZ2VtZW50IiwgImV4ZWN1dGl2ZSIsICJwcmVzaWRlbnQiLCAiY2hhaXJtYW4iLCAiY2hhaXJ3b21hbiIsICJjaGFpcnBlcnNvbiIsICJkaXJlY3RvciJ9CiAgCiAgZ2V0U3RhZmZSb2xlID0gZnVuY3Rpb24ocGxheWVyKQogICAgICBsb2NhbCBwbGF5ZXJSb2xlID0gcGxheWVyOkdldFJvbGVJbkdyb3VwKGdhbWUuQ3JlYXRvcklkKQogICAgICBsb2NhbCByZXN1bHQgPSB7Um9sZSA9IHBsYXllclJvbGUsIFN0YWZmID0gZmFsc2V9CiAgICAgIGZvciBfLCByb2xlIGluIHBhaXJzKHN0YWZmUm9sZXMpIGRvCiAgICAgICAgICBpZiBzdHJpbmcuZmluZChzdHJpbmcubG93ZXIocGxheWVyUm9sZSksIHJvbGUpIHRoZW4KICAgICAgICAgICAgICByZXN1bHQuU3RhZmYgPSB0cnVlCiAgICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIHJldHVybiByZXN1bHQKICBlbmQKICAKICBhZGRjbWQoInN0YWZmd2F0Y2giLCB7fSwgZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgICAgaWYgc3RhZmZ3YXRjaGpvaW4gdGhlbgogICAgICAgICAgc3RhZmZ3YXRjaGpvaW46RGlzY29ubmVjdCgpCiAgICAgIGVuZAogICAgICBpZiBnYW1lLkNyZWF0b3JUeXBlID09IEVudW0uQ3JlYXRvclR5cGUuR3JvdXAgdGhlbgogICAgICAgICAgbG9jYWwgZm91bmQgPSB7fQogICAgICAgICAgc3RhZmZ3YXRjaGpvaW4gPSBQbGF5ZXJzLlBsYXllckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24ocGxheWVyKQogICAgICAgICAgICAgIGxvY2FsIHJlc3VsdCA9IGdldFN0YWZmUm9sZShwbGF5ZXIpCiAgICAgICAgICAgICAgaWYgcmVzdWx0LlN0YWZmIHRoZW4KICAgICAgICAgICAgICAgICAgbm90aWZ5KCJTdGFmZndhdGNoIiwgZm9ybWF0VXNlcm5hbWUocGxheWVyKSAuLiAiIGlzIGEgIiAuLiByZXN1bHQuUm9sZSkKICAgICAgICAgICAgICBlbmQKICAgICAgICAgIGVuZCkKICAgICAgICAgIGZvciBfLCBwbGF5ZXIgaW4gcGFpcnMoUGxheWVyczpHZXRQbGF5ZXJzKCkpIGRvCiAgICAgICAgICAgICAgbG9jYWwgcmVzdWx0ID0gZ2V0U3RhZmZSb2xlKHBsYXllcikKICAgICAgICAgICAgICBpZiByZXN1bHQuU3RhZmYgdGhlbgogICAgICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZm91bmQsIGZvcm1hdFVzZXJuYW1lKHBsYXllcikgLi4gIiBpcyBhICIgLi4gcmVzdWx0LlJvbGUpCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmQKICAgICAgICAgIGlmICNmb3VuZCA+IDAgdGhlbgogICAgICAgICAgICAgIG5vdGlmeSgiU3RhZmZ3YXRjaCIsIHRhYmxlLmNvbmNhdChmb3VuZCwgIixcbiIpKQogICAgICAgICAgZWxzZQogICAgICAgICAgICAgIG5vdGlmeSgiU3RhZmZ3YXRjaCIsICJFbmFibGVkIikKICAgICAgICAgIGVuZAogICAgICBlbHNlCiAgICAgICAgICBub3RpZnkoIlN0YWZmd2F0Y2giLCAiR2FtZSBpcyBub3Qgb3duZWQgYnkgYSBHcm91cCIpCiAgICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoInVuc3RhZmZ3YXRjaCIsIHt9LCBmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgICBpZiBzdGFmZndhdGNoam9pbiB0aGVuCiAgICAgICAgICBzdGFmZndhdGNoam9pbjpEaXNjb25uZWN0KCkKICAgICAgZW5kCiAgICAgIG5vdGlmeSgiU3RhZmZ3YXRjaCIsICJEaXNhYmxlZCIpCiAgZW5kKQogIAogIGFkZGNtZCgncmVtb3ZldGVycmFpbicseydydGVycmFpbicsJ25vdGVycmFpbid9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICB3b3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCdUZXJyYWluJyk6Q2xlYXIoKQogIGVuZCkKICAKICBhZGRjbWQoJ2NsZWFybmlsaW5zdGFuY2VzJyx7J25vbmlsaW5zdGFuY2VzJywnY25pJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGlmIGdldG5pbGluc3RhbmNlcyB0aGVuCiAgICAgIGZvciBpLHYgaW4gcGFpcnMoZ2V0bmlsaW5zdGFuY2VzKCkpIGRvCiAgICAgICAgdjpEZXN0cm95KCkKICAgICAgZW5kCiAgICBlbHNlCiAgICAgIG5vdGlmeSgnSW5jb21wYXRpYmxlIEV4cGxvaXQnLCdZb3VyIGV4cGxvaXQgZG9lcyBub3Qgc3VwcG9ydCB0aGlzIGNvbW1hbmQgKG1pc3NpbmcgZ2V0bmlsaW5zdGFuY2VzKScpCiAgICBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdkZXN0cm95aGVpZ2h0Jyx7J2RoJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIGRoID0gYXJnc1sxXSBvciAtNTAwCiAgICBpZiBpc051bWJlcihkaCkgdGhlbgogICAgICB3b3Jrc3BhY2UuRmFsbGVuUGFydHNEZXN0cm95SGVpZ2h0ID0gZGgKICAgIGVuZAogIGVuZCkKICAKICBhZGRjbWQoJ3RyaXAnLHt9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBzcGVha2VyIGFuZCBzcGVha2VyLkNoYXJhY3RlciBhbmQgc3BlYWtlci5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJIdW1hbm9pZCIpIGFuZCBnZXRSb290KHNwZWFrZXIuQ2hhcmFjdGVyKSB0aGVuCiAgICAgIGxvY2FsIGh1bSA9IHNwZWFrZXIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgICBsb2NhbCByb290ID0gZ2V0Um9vdChzcGVha2VyLkNoYXJhY3RlcikKICAgICAgaHVtOkNoYW5nZVN0YXRlKDApCiAgICAgIHJvb3QuVmVsb2NpdHkgPSByb290LkNGcmFtZS5Mb29rVmVjdG9yICogMzAKICAgIGVuZAogIGVuZCkKICAKICBsb2NhbCBmcmVlemluZ3VhID0gbmlsCiAgZnJvemVuUGFydHMgPSB7fQogIGFkZGNtZCgnZnJlZXpldW5hbmNob3JlZCcseydmcmVlemV1YSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBzZXRoaWRkZW4gdGhlbgogICAgICBsb2NhbCBiYWRuYW1lcyA9IHsKICAgICAgICAiSGVhZCIsCiAgICAgICAgIlVwcGVyVG9yc28iLAogICAgICAgICJMb3dlclRvcnNvIiwKICAgICAgICAiUmlnaHRVcHBlckFybSIsCiAgICAgICAgIkxlZnRVcHBlckFybSIsCiAgICAgICAgIlJpZ2h0TG93ZXJBcm0iLAogICAgICAgICJMZWZ0TG93ZXJBcm0iLAogICAgICAgICJSaWdodEhhbmQiLAogICAgICAgICJMZWZ0SGFuZCIsCiAgICAgICAgIlJpZ2h0VXBwZXJMZWciLAogICAgICAgICJMZWZ0VXBwZXJMZWciLAogICAgICAgICJSaWdodExvd2VyTGVnIiwKICAgICAgICAiTGVmdExvd2VyTGVnIiwKICAgICAgICAiUmlnaHRGb290IiwKICAgICAgICAiTGVmdEZvb3QiLAogICAgICAgICJUb3JzbyIsCiAgICAgICAgIlJpZ2h0IEFybSIsCiAgICAgICAgIkxlZnQgQXJtIiwKICAgICAgICAiUmlnaHQgTGVnIiwKICAgICAgICAiTGVmdCBMZWciLAogICAgICAgICJIdW1hbm9pZFJvb3RQYXJ0IgogICAgICB9CiAgICAgIGxvY2FsIGZ1bmN0aW9uIEZSRUVaRU5PT0IodikKICAgICAgICBpZiB2OklzQSgiQmFzZVBhcnQiIG9yICJVbmlvbk9wZXJhdGlvbiIpIGFuZCB2LkFuY2hvcmVkID09IGZhbHNlIHRoZW4KICAgICAgICAgIGxvY2FsIEJBREQgPSBmYWxzZQogICAgICAgICAgZm9yIGkgPSAxLCNiYWRuYW1lcyBkbwogICAgICAgICAgICBpZiB2Lk5hbWUgPT0gYmFkbmFtZXNbaV0gdGhlbgogICAgICAgICAgICAgIEJBREQgPSB0cnVlCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgICBpZiBzcGVha2VyLkNoYXJhY3RlciBhbmQgdjpJc0Rlc2NlbmRhbnRPZihzcGVha2VyLkNoYXJhY3RlcikgdGhlbgogICAgICAgICAgICBCQUREID0gdHJ1ZQogICAgICAgICAgZW5kCiAgICAgICAgICBpZiBCQUREID09IGZhbHNlIHRoZW4KICAgICAgICAgICAgZm9yIGksYyBpbiBwYWlycyh2OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgaWYgYzpJc0EoIkJvZHlQb3NpdGlvbiIpIG9yIGM6SXNBKCJCb2R5R3lybyIpIHRoZW4KICAgICAgICAgICAgICAgIGM6RGVzdHJveSgpCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBsb2NhbCBib2R5cG9zID0gSW5zdGFuY2UubmV3KCJCb2R5UG9zaXRpb24iKQogICAgICAgICAgICBib2R5cG9zLlBhcmVudCA9IHYKICAgICAgICAgICAgYm9keXBvcy5Qb3NpdGlvbiA9IHYuUG9zaXRpb24KICAgICAgICAgICAgYm9keXBvcy5NYXhGb3JjZSA9IFZlY3RvcjMubmV3KG1hdGguaHVnZSxtYXRoLmh1Z2UsbWF0aC5odWdlKQogICAgICAgICAgICBsb2NhbCBib2R5Z3lybyA9IEluc3RhbmNlLm5ldygiQm9keUd5cm8iKQogICAgICAgICAgICBib2R5Z3lyby5QYXJlbnQgPSB2CiAgICAgICAgICAgIGJvZHlneXJvLkNGcmFtZSA9IHYuQ0ZyYW1lCiAgICAgICAgICAgIGJvZHlneXJvLk1heFRvcnF1ZSA9IFZlY3RvcjMubmV3KG1hdGguaHVnZSxtYXRoLmh1Z2UsbWF0aC5odWdlKQogICAgICAgICAgICBpZiBub3QgdGFibGUuZmluZChmcm96ZW5QYXJ0cyx2KSB0aGVuCiAgICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGZyb3plblBhcnRzLHYpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICBmb3IgaSx2IGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgIEZSRUVaRU5PT0IodikKICAgICAgZW5kCiAgICAgIGZyZWV6aW5ndWEgPSB3b3Jrc3BhY2UuRGVzY2VuZGFudEFkZGVkOkNvbm5lY3QoRlJFRVpFTk9PQikKICAgIGVsc2UKICAgICAgbm90aWZ5KCdJbmNvbXBhdGlibGUgRXhwbG9pdCcsJ1lvdXIgZXhwbG9pdCBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgY29tbWFuZCAobWlzc2luZyBzZXRoaWRkZW5wcm9wZXJ0eSknKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndGhhd3VuYW5jaG9yZWQnLHsndGhhd3VhJywndW5mcmVlemV1bmFuY2hvcmVkJywndW5mcmVlemV1YSd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBpZiBzZXRoaWRkZW4gdGhlbgogICAgICBpZiBmcmVlemluZ3VhIHRoZW4KICAgICAgICBmcmVlemluZ3VhOkRpc2Nvbm5lY3QoKQogICAgICBlbmQKICAgICAgZm9yIGksdiBpbiBwYWlycyhmcm96ZW5QYXJ0cykgZG8KICAgICAgICBmb3IgaSxjIGluIHBhaXJzKHY6R2V0Q2hpbGRyZW4oKSkgZG8KICAgICAgICAgIGlmIGM6SXNBKCJCb2R5UG9zaXRpb24iKSBvciBjOklzQSgiQm9keUd5cm8iKSB0aGVuCiAgICAgICAgICAgIGM6RGVzdHJveSgpCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kCiAgICAgIGZyb3plblBhcnRzID0ge30KICAgIGVsc2UKICAgICAgbm90aWZ5KCdJbmNvbXBhdGlibGUgRXhwbG9pdCcsJ1lvdXIgZXhwbG9pdCBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgY29tbWFuZCAobWlzc2luZyBzZXRoaWRkZW5wcm9wZXJ0eSknKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndHB1bmFuY2hvcmVkJyx7J3RwdWEnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYgc2V0aGlkZGVuIHRoZW4KICAgICAgbG9jYWwgcGxheWVycyA9IGdldFBsYXllcihhcmdzWzFdLCBzcGVha2VyKQogICAgICBmb3IgaSx2IGluIHBhaXJzKHBsYXllcnMpIGRvCiAgICAgICAgbG9jYWwgRm9yY2VzID0ge30KICAgICAgICBmb3IgXyxwYXJ0IGluIHBhaXJzKHdvcmtzcGFjZTpHZXREZXNjZW5kYW50cygpKSBkbwogICAgICAgICAgaWYgUGxheWVyc1t2XS5DaGFyYWN0ZXI6RmluZEZpcnN0Q2hpbGQoJ0hlYWQnKSBhbmQgcGFydDpJc0EoIkJhc2VQYXJ0IiBvciAiVW5pb25PcGVyYXRpb24iIG9yICJNb2RlbCIpIGFuZCBwYXJ0LkFuY2hvcmVkID09IGZhbHNlIGFuZCBub3QgcGFydDpJc0Rlc2NlbmRhbnRPZihzcGVha2VyLkNoYXJhY3RlcikgYW5kIHBhcnQuTmFtZSA9PSAiVG9yc28iID09IGZhbHNlIGFuZCBwYXJ0Lk5hbWUgPT0gIkhlYWQiID09IGZhbHNlIGFuZCBwYXJ0Lk5hbWUgPT0gIlJpZ2h0IEFybSIgPT0gZmFsc2UgYW5kIHBhcnQuTmFtZSA9PSAiTGVmdCBBcm0iID09IGZhbHNlIGFuZCBwYXJ0Lk5hbWUgPT0gIlJpZ2h0IExlZyIgPT0gZmFsc2UgYW5kIHBhcnQuTmFtZSA9PSAiTGVmdCBMZWciID09IGZhbHNlIGFuZCBwYXJ0Lk5hbWUgPT0gIkh1bWFub2lkUm9vdFBhcnQiID09IGZhbHNlIHRoZW4KICAgICAgICAgICAgZm9yIGksYyBpbiBwYWlycyhwYXJ0OkdldENoaWxkcmVuKCkpIGRvCiAgICAgICAgICAgICAgaWYgYzpJc0EoIkJvZHlQb3NpdGlvbiIpIG9yIGM6SXNBKCJCb2R5R3lybyIpIHRoZW4KICAgICAgICAgICAgICAgIGM6RGVzdHJveSgpCiAgICAgICAgICAgICAgZW5kCiAgICAgICAgICAgIGVuZAogICAgICAgICAgICBsb2NhbCBGb3JjZUluc3RhbmNlID0gSW5zdGFuY2UubmV3KCJCb2R5UG9zaXRpb24iKQogICAgICAgICAgICBGb3JjZUluc3RhbmNlLlBhcmVudCA9IHBhcnQKICAgICAgICAgICAgRm9yY2VJbnN0YW5jZS5NYXhGb3JjZSA9IFZlY3RvcjMubmV3KG1hdGguaHVnZSwgbWF0aC5odWdlLCBtYXRoLmh1Z2UpCiAgICAgICAgICAgIHRhYmxlLmluc2VydChGb3JjZXMsIEZvcmNlSW5zdGFuY2UpCiAgICAgICAgICAgIGlmIG5vdCB0YWJsZS5maW5kKGZyb3plblBhcnRzLHBhcnQpIHRoZW4KICAgICAgICAgICAgICB0YWJsZS5pbnNlcnQoZnJvemVuUGFydHMscGFydCkKICAgICAgICAgICAgZW5kCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgICBmb3IgaSxjIGluIHBhaXJzKEZvcmNlcykgZG8KICAgICAgICAgIGMuUG9zaXRpb24gPSBQbGF5ZXJzW3ZdLkNoYXJhY3Rlci5IZWFkLlBvc2l0aW9uCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgZWxzZQogICAgICBub3RpZnkoJ0luY29tcGF0aWJsZSBFeHBsb2l0JywnWW91ciBleHBsb2l0IGRvZXMgbm90IHN1cHBvcnQgdGhpcyBjb21tYW5kIChtaXNzaW5nIHNldGhpZGRlbnByb3BlcnR5KScpCiAgICBlbmQKICBlbmQpCiAgCiAga2V5Y29kZU1hcCA9IHsKICAgIFsiMCJdID0gMHgzMCwKICAgIFsiMSJdID0gMHgzMSwKICAgIFsiMiJdID0gMHgzMiwKICAgIFsiMyJdID0gMHgzMywKICAgIFsiNCJdID0gMHgzNCwKICAgIFsiNSJdID0gMHgzNSwKICAgIFsiNiJdID0gMHgzNiwKICAgIFsiNyJdID0gMHgzNywKICAgIFsiOCJdID0gMHgzOCwKICAgIFsiOSJdID0gMHgzOSwKICAgIFsiYSJdID0gMHg0MSwKICAgIFsiYiJdID0gMHg0MiwKICAgIFsiYyJdID0gMHg0MywKICAgIFsiZCJdID0gMHg0NCwKICAgIFsiZSJdID0gMHg0NSwKICAgIFsiZiJdID0gMHg0NiwKICAgIFsiZyJdID0gMHg0NywKICAgIFsiaCJdID0gMHg0OCwKICAgIFsiaSJdID0gMHg0OSwKICAgIFsiaiJdID0gMHg0QSwKICAgIFsiayJdID0gMHg0QiwKICAgIFsibCJdID0gMHg0QywKICAgIFsibSJdID0gMHg0RCwKICAgIFsibiJdID0gMHg0RSwKICAgIFsibyJdID0gMHg0RiwKICAgIFsicCJdID0gMHg1MCwKICAgIFsicSJdID0gMHg1MSwKICAgIFsiciJdID0gMHg1MiwKICAgIFsicyJdID0gMHg1MywKICAgIFsidCJdID0gMHg1NCwKICAgIFsidSJdID0gMHg1NSwKICAgIFsidiJdID0gMHg1NiwKICAgIFsidyJdID0gMHg1NywKICAgIFsieCJdID0gMHg1OCwKICAgIFsieSJdID0gMHg1OSwKICAgIFsieiJdID0gMHg1QSwKICAgIFsiZW50ZXIiXSA9IDB4MEQsCiAgICBbInNoaWZ0Il0gPSAweDEwLAogICAgWyJjdHJsIl0gPSAweDExLAogICAgWyJhbHQiXSA9IDB4MTIsCiAgICBbInBhdXNlIl0gPSAweDEzLAogICAgWyJjYXBzbG9jayJdID0gMHgxNCwKICAgIFsic3BhY2ViYXIiXSA9IDB4MjAsCiAgICBbInNwYWNlIl0gPSAweDIwLAogICAgWyJwYWdldXAiXSA9IDB4MjEsCiAgICBbInBhZ2Vkb3duIl0gPSAweDIyLAogICAgWyJlbmQiXSA9IDB4MjMsCiAgICBbImhvbWUiXSA9IDB4MjQsCiAgICBbImxlZnQiXSA9IDB4MjUsCiAgICBbInVwIl0gPSAweDI2LAogICAgWyJyaWdodCJdID0gMHgyNywKICAgIFsiZG93biJdID0gMHgyOCwKICAgIFsiaW5zZXJ0Il0gPSAweDJELAogICAgWyJkZWxldGUiXSA9IDB4MkUsCiAgICBbImYxIl0gPSAweDcwLAogICAgWyJmMiJdID0gMHg3MSwKICAgIFsiZjMiXSA9IDB4NzIsCiAgICBbImY0Il0gPSAweDczLAogICAgWyJmNSJdID0gMHg3NCwKICAgIFsiZjYiXSA9IDB4NzUsCiAgICBbImY3Il0gPSAweDc2LAogICAgWyJmOCJdID0gMHg3NywKICAgIFsiZjkiXSA9IDB4NzgsCiAgICBbImYxMCJdID0gMHg3OSwKICAgIFsiZjExIl0gPSAweDdBLAogICAgWyJmMTIiXSA9IDB4N0IsCiAgfQogIGF1dG9LZXlQcmVzc2luZyA9IGZhbHNlCiAgY2FuY2VsQXV0b0tleVByZXNzID0gbmlsCiAgCiAgYWRkY21kKCdhdXRva2V5cHJlc3MnLHsna2V5cHJlc3MnfSxmdW5jdGlvbihhcmdzLCBzcGVha2VyKQogICAgaWYga2V5cHJlc3MgYW5kIGtleXJlbGVhc2UgYW5kIGFyZ3NbMV0gdGhlbgogICAgICBsb2NhbCBjb2RlID0ga2V5Y29kZU1hcFthcmdzWzFdOmxvd2VyKCldCiAgICAgIGlmIG5vdCBjb2RlIHRoZW4gbm90aWZ5KCdBdXRvIEtleSBQcmVzcycsIkludmFsaWQga2V5IikgcmV0dXJuIGVuZAogICAgICBleGVjQ21kKCd1bmF1dG9rZXlwcmVzcycpCiAgICAgIHdhaXQoKQogICAgICBsb2NhbCBjbGlja0RlbGF5ID0gMC4xCiAgICAgIGxvY2FsIHJlbGVhc2VEZWxheSA9IDAuMQogICAgICBpZiBhcmdzWzJdIGFuZCBpc051bWJlcihhcmdzWzJdKSB0aGVuIGNsaWNrRGVsYXkgPSBhcmdzWzJdIGVuZAogICAgICBpZiBhcmdzWzNdIGFuZCBpc051bWJlcihhcmdzWzNdKSB0aGVuIHJlbGVhc2VEZWxheSA9IGFyZ3NbM10gZW5kCiAgICAgIGF1dG9LZXlQcmVzc2luZyA9IHRydWUKICAgICAgY2FuY2VsQXV0b0tleVByZXNzID0gVXNlcklucHV0U2VydmljZS5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oaW5wdXQsIGdhbWVQcm9jZXNzZWRFdmVudCkKICAgICAgICBpZiBub3QgZ2FtZVByb2Nlc3NlZEV2ZW50IHRoZW4KICAgICAgICAgIGlmIChpbnB1dC5LZXlDb2RlID09IEVudW0uS2V5Q29kZS5CYWNrc3BhY2UgYW5kIFVzZXJJbnB1dFNlcnZpY2U6SXNLZXlEb3duKEVudW0uS2V5Q29kZS5FcXVhbHMpKSBvciAoaW5wdXQuS2V5Q29kZSA9PSBFbnVtLktleUNvZGUuRXF1YWxzIGFuZCBVc2VySW5wdXRTZXJ2aWNlOklzS2V5RG93bihFbnVtLktleUNvZGUuQmFja3NwYWNlKSkgdGhlbgogICAgICAgICAgICBhdXRvS2V5UHJlc3NpbmcgPSBmYWxzZQogICAgICAgICAgICBjYW5jZWxBdXRvS2V5UHJlc3M6RGlzY29ubmVjdCgpCiAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgICAgZW5kKQogICAgICBub3RpZnkoJ0F1dG8gS2V5IFByZXNzJywiUHJlc3MgW2JhY2tzcGFjZV0gYW5kIFs9XSBhdCB0aGUgc2FtZSB0aW1lIHRvIHN0b3AiKQogICAgICByZXBlYXQgd2FpdChjbGlja0RlbGF5KQogICAgICAgIGtleXByZXNzKGNvZGUpCiAgICAgICAgd2FpdChyZWxlYXNlRGVsYXkpCiAgICAgICAga2V5cmVsZWFzZShjb2RlKQogICAgICB1bnRpbCBhdXRvS2V5UHJlc3NpbmcgPT0gZmFsc2UKICAgICAgaWYgY2FuY2VsQXV0b0tleVByZXNzIHRoZW4gY2FuY2VsQXV0b0tleVByZXNzOkRpc2Nvbm5lY3QoKSBrZXlyZWxlYXNlKGNvZGUpIGVuZAogICAgZWxzZQogICAgICBub3RpZnkoJ0F1dG8gS2V5IFByZXNzJywiWW91ciBleHBsb2l0IGRvZXNuJ3QgaGF2ZSB0aGUgYWJpbGl0eSB0byB1c2UgYXV0byBrZXkgcHJlc3MiKQogICAgZW5kCiAgZW5kKQogIAogIGFkZGNtZCgndW5hdXRva2V5cHJlc3MnLHsnbm9hdXRva2V5cHJlc3MnLCd1bmtleXByZXNzJywnbm9rZXlwcmVzcyd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBhdXRvS2V5UHJlc3NpbmcgPSBmYWxzZQogICAgaWYgY2FuY2VsQXV0b0tleVByZXNzIHRoZW4gY2FuY2VsQXV0b0tleVByZXNzOkRpc2Nvbm5lY3QoKSBlbmQKICBlbmQpCiAgCiAgYWRkY21kKCdhZGRwbHVnaW4nLHsncGx1Z2luJ30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGFkZFBsdWdpbihnZXRzdHJpbmcoMSkpCiAgZW5kKQogIAogIGFkZGNtZCgncmVtb3ZlcGx1Z2luJyx7J2RlbGV0ZXBsdWdpbid9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICBkZWxldGVQbHVnaW4oZ2V0c3RyaW5nKDEpKQogIGVuZCkKICAKICBhZGRjbWQoJ3JlbG9hZHBsdWdpbicse30sZnVuY3Rpb24oYXJncywgc3BlYWtlcikKICAgIGxvY2FsIHBsdWdpbk5hbWUgPSBnZXRzdHJpbmcoMSkKICAgIGRlbGV0ZVBsdWdpbihwbHVnaW5OYW1lKQogICAgd2FpdCgxKQogICAgYWRkUGx1Z2luKHBsdWdpbk5hbWUpCiAgZW5kKQogIAogIGFkZGNtZCgncmVtb3ZlY21kJyx7J2RlbGV0ZWNtZCd9LGZ1bmN0aW9uKGFyZ3MsIHNwZWFrZXIpCiAgICByZW1vdmVjbWQoYXJnc1sxXSkKICBlbmQpCiAgCiAgaWYgSXNPbk1vYmlsZSB0aGVuCiAgICBsb2NhbCBRdWlja0NhcHR1cmUgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgbG9jYWwgVUlDb3JuZXIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKICAgIFF1aWNrQ2FwdHVyZS5OYW1lID0gcmFuZG9tU3RyaW5nKCkKICAgIFF1aWNrQ2FwdHVyZS5QYXJlbnQgPSBQQVJFTlQKICAgIFF1aWNrQ2FwdHVyZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNDYsIDQ2LCA0NykKICAgIFF1aWNrQ2FwdHVyZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMC4xNAogICAgUXVpY2tDYXB0dXJlLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNDg5LCAwLCAwLCAwKQogICAgUXVpY2tDYXB0dXJlLlNpemUgPSBVRGltMi5uZXcoMCwgMzIsIDAsIDMzKQogICAgUXVpY2tDYXB0dXJlLkZvbnQgPSBFbnVtLkZvbnQuU291cmNlU2Fuc0JvbGQKICAgIFF1aWNrQ2FwdHVyZS5UZXh0ID0gIklZIgogICAgUXVpY2tDYXB0dXJlLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQogICAgUXVpY2tDYXB0dXJlLlRleHRTaXplID0gMjAuMDAwCiAgICBRdWlja0NhcHR1cmUuVGV4dFdyYXBwZWQgPSB0cnVlCiAgICBRdWlja0NhcHR1cmUuRHJhZ2dhYmxlID0gdHJ1ZQogICAgVUlDb3JuZXIuTmFtZSA9IHJhbmRvbVN0cmluZygpCiAgICBVSUNvcm5lci5Db3JuZXJSYWRpdXMgPSBVRGltLm5ldygwLjUsIDApCiAgICBVSUNvcm5lci5QYXJlbnQgPSBRdWlja0NhcHR1cmUKICAgIFF1aWNrQ2FwdHVyZS5Nb3VzZUJ1dHRvbjFDbGljazpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgQ21kYmFyOkNhcHR1cmVGb2N1cygpCiAgICAgIG1heGltaXplSG9sZGVyKCkKICAgIGVuZCkKICAgIHRhYmxlLmluc2VydChzaGFkZTEsIFF1aWNrQ2FwdHVyZSkKICAgIHRhYmxlLmluc2VydCh0ZXh0MSwgUXVpY2tDYXB0dXJlKQogIGVuZAogIAogIHVwZGF0ZUNvbG9ycyhjdXJyZW50U2hhZGUxLHNoYWRlMSkKICB1cGRhdGVDb2xvcnMoY3VycmVudFNoYWRlMixzaGFkZTIpCiAgdXBkYXRlQ29sb3JzKGN1cnJlbnRTaGFkZTMsc2hhZGUzKQogIHVwZGF0ZUNvbG9ycyhjdXJyZW50VGV4dDEsdGV4dDEpCiAgdXBkYXRlQ29sb3JzKGN1cnJlbnRUZXh0Mix0ZXh0MikKICB1cGRhdGVDb2xvcnMoY3VycmVudFNjcm9sbCxzY3JvbGwpCiAgCiAgaWYgUGx1Z2luc1RhYmxlIH49IG5pbCBvciBQbHVnaW5zVGFibGUgfj0ge30gdGhlbgogICAgRmluZFBsdWdpbnMoUGx1Z2luc1RhYmxlKQogIGVuZAogIAogIC0tIEV2ZW50cwogIGV2ZW50RWRpdG9yLlJlZ2lzdGVyRXZlbnQoIk9uRXhlY3V0ZSIpCiAgZXZlbnRFZGl0b3IuUmVnaXN0ZXJFdmVudCgiT25TcGF3biIsewogICAge1R5cGU9IlBsYXllciIsTmFtZT0iUGxheWVyIEZpbHRlciAoJDEpIn0KICB9KQogIGV2ZW50RWRpdG9yLlJlZ2lzdGVyRXZlbnQoIk9uRGllZCIsewogICAge1R5cGU9IlBsYXllciIsTmFtZT0iUGxheWVyIEZpbHRlciAoJDEpIn0KICB9KQogIGV2ZW50RWRpdG9yLlJlZ2lzdGVyRXZlbnQoIk9uRGFtYWdlIix7CiAgICB7VHlwZT0iUGxheWVyIixOYW1lPSJQbGF5ZXIgRmlsdGVyICgkMSkifSwKICAgIHtUeXBlPSJOdW1iZXIiLE5hbWU9IkJlbG93IEhlYWx0aCAoJDIpIn0KICB9KQogIGV2ZW50RWRpdG9yLlJlZ2lzdGVyRXZlbnQoIk9uS2lsbGVkIix7CiAgICB7VHlwZT0iUGxheWVyIixOYW1lPSJWaWN0aW0gUGxheWVyICgkMSkifSwKICAgIHtUeXBlPSJQbGF5ZXIiLE5hbWU9IktpbGxlciBQbGF5ZXIgKCQyKSIsRGVmYXVsdCA9IDF9CiAgfSkKICBldmVudEVkaXRvci5SZWdpc3RlckV2ZW50KCJPbkpvaW4iLHsKICAgIHtUeXBlPSJQbGF5ZXIiLE5hbWU9IlBsYXllciBGaWx0ZXIgKCQxKSIsRGVmYXVsdCA9IDF9CiAgfSkKICBldmVudEVkaXRvci5SZWdpc3RlckV2ZW50KCJPbkxlYXZlIix7CiAgICB7VHlwZT0iUGxheWVyIixOYW1lPSJQbGF5ZXIgRmlsdGVyICgkMSkiLERlZmF1bHQgPSAxfQogIH0pCiAgZXZlbnRFZGl0b3IuUmVnaXN0ZXJFdmVudCgiT25DaGF0dGVkIix7CiAgICB7VHlwZT0iUGxheWVyIixOYW1lPSJQbGF5ZXIgRmlsdGVyICgkMSkiLERlZmF1bHQgPSAxfSwKICAgIHtUeXBlPSJTdHJpbmciLE5hbWU9Ik1lc3NhZ2UgRmlsdGVyICgkMikifQogIH0pCiAgCiAgZnVuY3Rpb24gaG9va0NoYXJFdmVudHMocGxyLGluc3RhbnQpCiAgICB0YXNrLnNwYXduKGZ1bmN0aW9uKCkKICAgICAgbG9jYWwgY2hhciA9IHBsci5DaGFyYWN0ZXIKICAgICAgaWYgbm90IGNoYXIgdGhlbiByZXR1cm4gZW5kCiAgCiAgICAgIGxvY2FsIGh1bWFub2lkID0gY2hhcjpXYWl0Rm9yQ2hpbGQoIkh1bWFub2lkIiwxMCkKICAgICAgaWYgbm90IGh1bWFub2lkIHRoZW4gcmV0dXJuIGVuZAogIAogICAgICBsb2NhbCBvbGRIZWFsdGggPSBodW1hbm9pZC5IZWFsdGgKICAgICAgaHVtYW5vaWQuSGVhbHRoQ2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKGhlYWx0aCkKICAgICAgICBsb2NhbCBjaGFuZ2UgPSBtYXRoLmFicyhvbGRIZWFsdGggLSBoZWFsdGgpCiAgICAgICAgaWYgb2xkSGVhbHRoID4gaGVhbHRoIHRoZW4KICAgICAgICAgIGV2ZW50RWRpdG9yLkZpcmVFdmVudCgiT25EYW1hZ2UiLHBsci5OYW1lLHRvbnVtYmVyKGhlYWx0aCkpCiAgICAgICAgZW5kCiAgICAgICAgb2xkSGVhbHRoID0gaGVhbHRoCiAgICAgIGVuZCkKICAKICAgICAgaHVtYW5vaWQuRGllZDpDb25uZWN0KGZ1bmN0aW9uKCkKICAgICAgICBldmVudEVkaXRvci5GaXJlRXZlbnQoIk9uRGllZCIscGxyLk5hbWUpCiAgCiAgICAgICAgbG9jYWwga2lsbGVkQnkgPSBodW1hbm9pZDpGaW5kRmlyc3RDaGlsZCgiY3JlYXRvciIpCiAgICAgICAgaWYga2lsbGVkQnkgYW5kIGtpbGxlZEJ5LlZhbHVlIGFuZCBraWxsZWRCeS5WYWx1ZS5QYXJlbnQgdGhlbgogICAgICAgICAgZXZlbnRFZGl0b3IuRmlyZUV2ZW50KCJPbktpbGxlZCIscGxyLk5hbWUsa2lsbGVkQnkuTmFtZSkKICAgICAgICBlbmQKICAgICAgZW5kKQogICAgZW5kKQogIGVuZAogIAogIFBsYXllcnMuUGxheWVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbihwbHIpCiAgICBldmVudEVkaXRvci5GaXJlRXZlbnQoIk9uSm9pbiIscGxyLk5hbWUpCiAgICBwbHIuQ2hhdHRlZDpDb25uZWN0KGZ1bmN0aW9uKG1zZykgZXZlbnRFZGl0b3IuRmlyZUV2ZW50KCJPbkNoYXR0ZWQiLHRvc3RyaW5nKHBsciksbXNnKSBlbmQpCiAgICBwbHIuQ2hhcmFjdGVyQWRkZWQ6Q29ubmVjdChmdW5jdGlvbigpIGV2ZW50RWRpdG9yLkZpcmVFdmVudCgiT25TcGF3biIsdG9zdHJpbmcocGxyKSkgaG9va0NoYXJFdmVudHMocGxyKSBlbmQpCiAgICBKb2luTG9nKHBscikKICAgIENoYXRMb2cocGxyKQogICAgaWYgRVNQZW5hYmxlZCB0aGVuCiAgICAgIHJlcGVhdCB3YWl0KDEpIHVudGlsIHBsci5DaGFyYWN0ZXIgYW5kIGdldFJvb3QocGxyLkNoYXJhY3RlcikKICAgICAgRVNQKHBscikKICAgIGVuZAogICAgaWYgQ0hNU2VuYWJsZWQgdGhlbgogICAgICByZXBlYXQgd2FpdCgxKSB1bnRpbCBwbHIuQ2hhcmFjdGVyIGFuZCBnZXRSb290KHBsci5DaGFyYWN0ZXIpCiAgICAgIENITVMocGxyKQogICAgZW5kCiAgZW5kKQogIAogIGZvciBfLHBsciBpbiBwYWlycyhQbGF5ZXJzOkdldFBsYXllcnMoKSkgZG8KICAgIHBjYWxsKGZ1bmN0aW9uKCkKICAgICAgcGxyLkNoYXJhY3RlckFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oKSBldmVudEVkaXRvci5GaXJlRXZlbnQoIk9uU3Bhd24iLHRvc3RyaW5nKHBscikpIGhvb2tDaGFyRXZlbnRzKHBscikgZW5kKQogICAgICBob29rQ2hhckV2ZW50cyhwbHIpCiAgICBlbmQpCiAgZW5kCiAgCiAgaWYgc3Bhd25DbWRzIGFuZCAjc3Bhd25DbWRzID4gMCB0aGVuCiAgICBmb3IgaSx2IGluIHBhaXJzKHNwYXduQ21kcykgZG8KICAgICAgZXZlbnRFZGl0b3IuQWRkQ21kKCJPblNwYXduIix7di5DT01NQU5EIG9yICIiLHswfSx2LkRFTEFZIG9yIDB9KQogICAgZW5kCiAgICB1cGRhdGVzYXZlcygpCiAgZW5kCiAgCiAgaWYgbG9hZGVkRXZlbnREYXRhIHRoZW4gZXZlbnRFZGl0b3IuTG9hZERhdGEobG9hZGVkRXZlbnREYXRhKSBlbmQKICBldmVudEVkaXRvci5SZWZyZXNoKCkKICAKICBldmVudEVkaXRvci5GaXJlRXZlbnQoIk9uRXhlY3V0ZSIpCiAgCiAgaWYgYWxpYXNlcyBhbmQgI2FsaWFzZXMgPiAwIHRoZW4KICAgIGxvY2FsIGNtZE1hcCA9IHt9CiAgICBmb3IgaSx2IGluIHBhaXJzKGNtZHMpIGRvCiAgICAgIGNtZE1hcFt2Lk5BTUU6bG93ZXIoKV0gPSB2CiAgICAgIGZvciBfLGFsaWFzIGluIHBhaXJzKHYuQUxJQVMpIGRvCiAgICAgICAgY21kTWFwW2FsaWFzOmxvd2VyKCldID0gdgogICAgICBlbmQKICAgIGVuZAogICAgZm9yIGkgPSAxLCAjYWxpYXNlcyBkbwogICAgICBsb2NhbCBjbWQgPSBzdHJpbmcubG93ZXIoYWxpYXNlc1tpXS5DTUQpCiAgICAgIGxvY2FsIGFsaWFzID0gc3RyaW5nLmxvd2VyKGFsaWFzZXNbaV0uQUxJQVMpCiAgICAgIGlmIGNtZE1hcFtjbWRdIHRoZW4KICAgICAgICBjdXN0b21BbGlhc1thbGlhc10gPSBjbWRNYXBbY21kXQogICAgICBlbmQKICAgIGVuZAogICAgcmVmcmVzaGFsaWFzZXMoKQogIGVuZAogIAogIElZTW91c2UuTW92ZTpDb25uZWN0KGNoZWNrVFQpCiAgCiAgdGFzay5zcGF3bihmdW5jdGlvbigpCiAgICBsb2NhbCBzdWNjZXNzLCBsYXRlc3RWZXJzaW9uSW5mbyA9IHBjYWxsKGZ1bmN0aW9uKCkgCiAgICAgIGxvY2FsIHZlcnNpb25Kc29uID0gZ2FtZTpIdHRwR2V0KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vRWRnZUlZL2luZmluaXRleWllbGQvbWFzdGVyL3ZlcnNpb24nKQogICAgICByZXR1cm4gSHR0cFNlcnZpY2U6SlNPTkRlY29kZSh2ZXJzaW9uSnNvbikKICAgIGVuZCkKICAKICAgIGlmIHN1Y2Nlc3MgdGhlbgogICAgICBpZiBjdXJyZW50VmVyc2lvbiB+PSBsYXRlc3RWZXJzaW9uSW5mby5WZXJzaW9uIHRoZW4KICAgICAgICBub3RpZnkoJ091dGRhdGVkJywnR2V0IHRoZSBuZXcgdmVyc2lvbiBhdCBpbmZ5aWZmLmdpdGh1Yi5pbycpCiAgICAgIGVuZAogIAogICAgICBpZiBsYXRlc3RWZXJzaW9uSW5mby5Bbm5vdW5jZW1lbnQgYW5kIGxhdGVzdFZlcnNpb25JbmZvLkFubm91bmNlbWVudCB+PSAnJyB0aGVuCiAgICAgICAgbG9jYWwgQW5uR1VJID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgbG9jYWwgYmFja2dyb3VuZCA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQogICAgICAgIGxvY2FsIFRleHRCb3ggPSBJbnN0YW5jZS5uZXcoIlRleHRMYWJlbCIpCiAgICAgICAgbG9jYWwgc2hhZG93ID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCiAgICAgICAgbG9jYWwgUG9wdXBUZXh0ID0gSW5zdGFuY2UubmV3KCJUZXh0TGFiZWwiKQogICAgICAgIGxvY2FsIEV4aXQgPSBJbnN0YW5jZS5uZXcoIlRleHRCdXR0b24iKQogICAgICAgIGxvY2FsIEV4aXRJbWFnZSA9IEluc3RhbmNlLm5ldygiSW1hZ2VMYWJlbCIpCiAgCiAgICAgICAgQW5uR1VJLk5hbWUgPSByYW5kb21TdHJpbmcoKQogICAgICAgIEFubkdVSS5QYXJlbnQgPSBQQVJFTlQKICAgICAgICBBbm5HVUkuQWN0aXZlID0gdHJ1ZQogICAgICAgIEFubkdVSS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIEFubkdVSS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLjUsIC0xODAsIDAsIC01MDApCiAgICAgICAgQW5uR1VJLlNpemUgPSBVRGltMi5uZXcoMCwgMzYwLCAwLCAyMCkKICAgICAgICBBbm5HVUkuWkluZGV4ID0gMTAKICAKICAgICAgICBiYWNrZ3JvdW5kLk5hbWUgPSAiYmFja2dyb3VuZCIKICAgICAgICBiYWNrZ3JvdW5kLlBhcmVudCA9IEFubkdVSQogICAgICAgIGJhY2tncm91bmQuQWN0aXZlID0gdHJ1ZQogICAgICAgIGJhY2tncm91bmQuQmFja2dyb3VuZENvbG9yMyA9IGN1cnJlbnRTaGFkZTEKICAgICAgICBiYWNrZ3JvdW5kLkJvcmRlclNpemVQaXhlbCA9IDAKICAgICAgICBiYWNrZ3JvdW5kLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDAsIDAsIDIwKQogICAgICAgIGJhY2tncm91bmQuU2l6ZSA9IFVEaW0yLm5ldygwLCAzNjAsIDAsIDE1MCkKICAgICAgICBiYWNrZ3JvdW5kLlpJbmRleCA9IDEwCiAgCiAgICAgICAgVGV4dEJveC5QYXJlbnQgPSBiYWNrZ3JvdW5kCiAgICAgICAgVGV4dEJveC5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIFRleHRCb3guUG9zaXRpb24gPSBVRGltMi5uZXcoMCwgNSwgMCwgNSkKICAgICAgICBUZXh0Qm94LlNpemUgPSBVRGltMi5uZXcoMCwgMzUwLCAwLCAxNDApCiAgICAgICAgVGV4dEJveC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICAgICAgICBUZXh0Qm94LlRleHRTaXplID0gMTgKICAgICAgICBUZXh0Qm94LlRleHRXcmFwcGVkID0gdHJ1ZQogICAgICAgIFRleHRCb3guVGV4dCA9IEFubm91bmNlbWVudAogICAgICAgIFRleHRCb3guVGV4dENvbG9yMyA9IGN1cnJlbnRUZXh0MQogICAgICAgIFRleHRCb3guVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKICAgICAgICBUZXh0Qm94LlRleHRZQWxpZ25tZW50ID0gRW51bS5UZXh0WUFsaWdubWVudC5Ub3AKICAgICAgICBUZXh0Qm94LlpJbmRleCA9IDEwCiAgCiAgICAgICAgc2hhZG93Lk5hbWUgPSAic2hhZG93IgogICAgICAgIHNoYWRvdy5QYXJlbnQgPSBBbm5HVUkKICAgICAgICBzaGFkb3cuQmFja2dyb3VuZENvbG9yMyA9IGN1cnJlbnRTaGFkZTIKICAgICAgICBzaGFkb3cuQm9yZGVyU2l6ZVBpeGVsID0gMAogICAgICAgIHNoYWRvdy5TaXplID0gVURpbTIubmV3KDAsIDM2MCwgMCwgMjApCiAgICAgICAgc2hhZG93LlpJbmRleCA9IDEwCiAgCiAgICAgICAgUG9wdXBUZXh0Lk5hbWUgPSAiUG9wdXBUZXh0IgogICAgICAgIFBvcHVwVGV4dC5QYXJlbnQgPSBzaGFkb3cKICAgICAgICBQb3B1cFRleHQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKICAgICAgICBQb3B1cFRleHQuU2l6ZSA9IFVEaW0yLm5ldygxLCAwLCAwLjk1LCAwKQogICAgICAgIFBvcHVwVGV4dC5aSW5kZXggPSAxMAogICAgICAgIFBvcHVwVGV4dC5Gb250ID0gRW51bS5Gb250LlNvdXJjZVNhbnMKICAgICAgICBQb3B1cFRleHQuVGV4dFNpemUgPSAxNAogICAgICAgIFBvcHVwVGV4dC5UZXh0ID0gIlNlcnZlciBBbm5vdW5jZW1lbnQiCiAgICAgICAgUG9wdXBUZXh0LlRleHRDb2xvcjMgPSBjdXJyZW50VGV4dDEKICAgICAgICBQb3B1cFRleHQuVGV4dFdyYXBwZWQgPSB0cnVlCiAgCiAgICAgICAgRXhpdC5OYW1lID0gIkV4aXQiCiAgICAgICAgRXhpdC5QYXJlbnQgPSBzaGFkb3cKICAgICAgICBFeGl0LkJhY2tncm91bmRUcmFuc3BhcmVuY3kgPSAxCiAgICAgICAgRXhpdC5Qb3NpdGlvbiA9IFVEaW0yLm5ldygxLCAtMjAsIDAsIDApCiAgICAgICAgRXhpdC5TaXplID0gVURpbTIubmV3KDAsIDIwLCAwLCAyMCkKICAgICAgICBFeGl0LlRleHQgPSAiIgogICAgICAgIEV4aXQuWkluZGV4ID0gMTAKICAKICAgICAgICBFeGl0SW1hZ2UuUGFyZW50ID0gRXhpdAogICAgICAgIEV4aXRJbWFnZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLm5ldygxLCAxLCAxKQogICAgICAgIEV4aXRJbWFnZS5CYWNrZ3JvdW5kVHJhbnNwYXJlbmN5ID0gMQogICAgICAgIEV4aXRJbWFnZS5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCA1LCAwLCA1KQogICAgICAgIEV4aXRJbWFnZS5TaXplID0gVURpbTIubmV3KDAsIDEwLCAwLCAxMCkKICAgICAgICBFeGl0SW1hZ2UuSW1hZ2UgPSAicmJ4YXNzZXRpZDovLzUwNTQ2NjM2NTAiCiAgICAgICAgRXhpdEltYWdlLlpJbmRleCA9IDEwCiAgCiAgICAgICAgd2FpdCgxKQogICAgICAgIEFubkdVSTpUd2VlblBvc2l0aW9uKFVEaW0yLm5ldygwLjUsIC0xODAsIDAsIDE1MCksICJJbk91dCIsICJRdWFydCIsIDAuNSwgdHJ1ZSwgbmlsKQogIAogICAgICAgIEV4aXQuTW91c2VCdXR0b24xQ2xpY2s6Q29ubmVjdChmdW5jdGlvbigpCiAgICAgICAgICBBbm5HVUk6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMC41LCAtMTgwLCAwLCAtNTAwKSwgIkluT3V0IiwgIlF1YXJ0IiwgMC41LCB0cnVlLCBuaWwpCiAgICAgICAgICB3YWl0KDAuNikKICAgICAgICAgIEFubkdVSTpEZXN0cm95KCkKICAgICAgICBlbmQpCiAgICAgIGVuZAogICAgZW5kCiAgZW5kKQogIAogIHRhc2suc3Bhd24oZnVuY3Rpb24oKQogICAgd2FpdCgpCiAgICBDcmVkaXRzOlR3ZWVuUG9zaXRpb24oVURpbTIubmV3KDAsIDAsIDAuOSwgMCksICJPdXQiLCAiUXVhcnQiLCAwLjIpCiAgICBMb2dvOlR3ZWVuU2l6ZUFuZFBvc2l0aW9uKFVEaW0yLm5ldygwLCAxNzUsIDAsIDE3NSksIFVEaW0yLm5ldygwLCAzNywgMCwgNDUpLCAiT3V0IiwgIlF1YXJ0IiwgMC4zKQogICAgd2FpdCgxKQogICAgbG9jYWwgT3V0SW5mbyA9IFR3ZWVuSW5mby5uZXcoMS42ODA5LCBFbnVtLkVhc2luZ1N0eWxlLlNpbmUsIEVudW0uRWFzaW5nRGlyZWN0aW9uLk91dCwgMCwgZmFsc2UsIDApCiAgICBUd2VlblNlcnZpY2U6Q3JlYXRlKExvZ28sIE91dEluZm8sIHtJbWFnZVRyYW5zcGFyZW5jeSA9IDF9KTpQbGF5KCkKICAgIFR3ZWVuU2VydmljZTpDcmVhdGUoSW50cm9CYWNrZ3JvdW5kLCBPdXRJbmZvLCB7QmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDF9KTpQbGF5KCkKICAgIENyZWRpdHM6VHdlZW5Qb3NpdGlvbihVRGltMi5uZXcoMCwgMCwgMC45LCAzMCksICJPdXQiLCAiUXVhcnQiLCAwLjIpCiAgICB3YWl0KDAuMikKICAgIExvZ286RGVzdHJveSgpCiAgICBDcmVkaXRzOkRlc3Ryb3koKQogICAgSW50cm9CYWNrZ3JvdW5kOkRlc3Ryb3koKQogICAgbWluaW1pemVIb2xkZXIoKQogICAgaWYgSXNPbk1vYmlsZSB0aGVuIG5vdGlmeSgiVW5zdGFibGUgRGV2aWNlIiwgIk9uIG1vYmlsZSwgSW5maW5pdGUgWWllbGQgbWF5IGhhdmUgaXNzdWVzIG9yIGZlYXR1cmVzIHRoYXQgYXJlIG5vdCBmdW5jdGlvbmluZyBjb3JyZWN0bHkuIikgZW5kCiAgZW5kKQogIAogIGVuZAoJZW52aXJvbm1lbnQuZ2xvYmFsLmdldGV4ZWN1dG9ydmVyc2lvbiA9IGVudmlyb25tZW50Lmdsb2JhbC5iaW5jb2d2ZXIKCgllbnZpcm9ubWVudC5nbG9iYWwuY2xvbmVyZWYgPSBmdW5jdGlvbihyZWZlcmVuY2UpCgkJYXNzZXJ0KHJlZmVyZW5jZSwgIk1pc3NpbmcgIzEgYXJndW1lbnQiKQoJCWFzc2VydCh0eXBlb2YocmVmZXJlbmNlKSA9PSAiSW5zdGFuY2UiLCAiRXhwZWN0ZWQgIzEgYXJndW1lbnQgdG8gYmUgSW5zdGFuY2UsIGdvdCAiLi50b3N0cmluZyh0eXBlb2YocmVmZXJlbmNlKSkuLiIgaW5zdGVhZCIpCgkJZ2V0ZmVudigpLmNsb25lcmVmZWQgPSB0cnVlCgkJaWYgZ2FtZTpGaW5kRmlyc3RDaGlsZChyZWZlcmVuY2UuTmFtZSkgIG9yIHJlZmVyZW5jZS5QYXJlbnQgPT0gZ2FtZSB0aGVuIC0tICBkb250IG1ha2UgaXQgY2xvbmUgc2VydmljZXMKCQkJcmV0dXJuIHJlZmVyZW5jZQoJCWVsc2UKCQkJbG9jYWwgY2xhc3MgPSByZWZlcmVuY2UuQ2xhc3NOYW1lCgoJCQlsb2NhbCBjbG9uZWQgPSBJbnN0YW5jZS5uZXcoY2xhc3MpCgoJCQlsb2NhbCBtdCA9IHsKCQkJCV9faW5kZXggPSByZWZlcmVuY2UsCgkJCQlfX25ld2luZGV4ID0gZnVuY3Rpb24odCwgaywgdikKCgkJCQkJaWYgayA9PSAiTmFtZSIgdGhlbgoJCQkJCQlyZWZlcmVuY2UuTmFtZSA9IHYKCQkJCQllbmQKCQkJCQlyYXdzZXQodCwgaywgdikKCQkJCWVuZAoJCQl9CgoJCQlsb2NhbCBwcm94eSA9IHNldG1ldGF0YWJsZSh7fSwgbXQpCgoJCQlyZXR1cm4gcHJveHkKCQllbmQKCgllbmQKCgllbnZpcm9ubWVudC5nbG9iYWwuY29tcGFyZWluc3RhbmNlcyA9IGZ1bmN0aW9uKCkKCQlpZiBjbG9uZXJlZmVkIHRoZW4gcmV0dXJuIHRydWUgZWxzZSByZXR1cm4gZmFsc2UgZW5kCgllbmQKCgktLSBjYWNoZSBzdHVmZgoKCWxvY2FsIENhY2hlZEluc3RhbmNlcyA9IHt9CgoJZW52aXJvbm1lbnQuZ2xvYmFsLmNhY2hlLmlzY2FjaGVkID0gZnVuY3Rpb24oZCkKCQkJCXJldHVybiBDYWNoZWRJbnN0YW5jZXNbZF0gfj0gJ2ludmFsaWQnCgllbmQKCWVudmlyb25tZW50Lmdsb2JhbC5jYWNoZS5pbnZhbGlkYXRlID0gZnVuY3Rpb24oZCkKCQlDYWNoZWRJbnN0YW5jZXNbZF0gPSAnaW52YWxpZCcKCQlkLlBhcmVudCA9IG5pbAoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuY2FjaGUucmVwbGFjZSA9IGZ1bmN0aW9uKGEsIGIpCgkJQ2FjaGVkSW5zdGFuY2VzW2FdID0gYgoJCWIuTmFtZSA9IGEuTmFtZQoJCWIuUGFyZW50ID0gYS5QYXJlbnQKCQlhLlBhcmVudCA9IG5pbAoJZW5kCgoJLS0gRU5EIE9GIENBQ0hFCgoJCgllbnZpcm9ubWVudC5nbG9iYWwuc2V0Y2xpcGJvYXJkID0gZnVuY3Rpb24oZGF0YSkKCQlhc3NlcnQoZGF0YSwgIk1pc3NpbmcgIzEgYXJndW1lbnQiKQoKCQlicmlkZ2U6c2VuZCgic2V0Y2xpcGJvYXJkIiwgdG9zdHJpbmcoZGF0YSkpCgllbmQKCWVudmlyb25tZW50Lmdsb2JhbC5nZXRjbGlwYm9hcmQgPSBmdW5jdGlvbigpCgkJcmV0dXJuIGJyaWRnZTpzZW5kKCJnZXRjbGlwYm9hcmQiKS5tZXNzYWdlCgllbmQKCWxvY2FsIGhvb2tmdW5jdGlvbiA9IGZ1bmN0aW9uKGEsYikgCgkJaWYgbm90IHJhd2dldChnZXRmZW52KCksIGEpIGFuZCBhIH49IG5pbCBhbmQgdHlwZShhKSA9PSAiZnVuY3Rpb24iIHRoZW4KCQkJbG9jYWwgYyA9IGRlYnVnLmluZm8oYSwgIm4iKQoJCQlhID0gYyB+PSAiIiBhbmQgYyBvciBhCgkJZW5kCgkJaWYgdHlwZShhKSA9PSAiZnVuY3Rpb24iIG9yIHR5cGUoYSkgPT0gInN0cmluZyIgdGhlbiAKCQkJZm9yIGksdiBpbiBwYWlycyhnZXRmZW52KCkpIGRvCgkJCQlpZiB2ID09IGEgdGhlbgoJCQkJCWEgPSBpIAoJCQkJZW5kCgkJCWVuZAoJCQlsb2NhbCBjID0gcmF3c2V0KGdldGZlbnYoKSwgYSwgYikKCQkJcmV0dXJuIHJhd2dldChnZXRmZW52KCksIGEpIG9yIGEgCgkJZWxzZWlmIHR5cGUoYSkgPT0gInRhYmxlIiB0aGVuCgkJCWxvY2FsIHRibCA9IGdldGZlbnYoKQoJCQlsb2NhbCBob29raW5nID0gIiIKCQkJZ2V0ZmVudigpW2FbMV1dID0gdGFibGUuY2xvbmUoZ2V0ZmVudigpW2FbMV1dKQoJCQlmb3IgaT0xLCNhIGRvCgkJCQl0YmwgPSB0YmxbYVtpXV0KCQkJCWhvb2tpbmcgPSBob29raW5nIH49ICIiIGFuZCBob29raW5nLi4iLiIuLnRvc3RyaW5nKGFbaV0pIG9yIHRvc3RyaW5nKGFbaV0pCgkJCQlpZiBpID09ICNhIHRoZW4KCQkJCQlnZXRmZW52KClbYVtpLTFdXVthW2ldXSA9IGIKCQkJCQlyZXR1cm4gZ2V0ZmVudigpW2FbaS0xXV1bYVtpXV0KCQkJCWVuZAoJCQllbmQKCQllbmQKCWVuZAoJbG9jYWwgX3NldG10YmwgPSBzZXRtZXRhdGFibGUKCWxvY2FsIG1ldGF0YmwgPSB7fQoJaG9va2Z1bmN0aW9uKHNldG1ldGF0YWJsZSwgZnVuY3Rpb24oYSwgYikKICAgIAlsb2NhbCBjLCBkID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgIAlsb2NhbCBjID0gX3NldG10YmwoYSwgYikKICAgIAllbmQpCiAgICAJbWV0YXRibFthXSA9IGIKICAgIAlyZXR1cm4gYQoJZW5kKQoJCgllbnZpcm9ubWVudC5nbG9iYWwuZ2V0cmF3bWV0YXRhYmxlID0gZnVuY3Rpb24ob2JqZWN0KQogICAgCXJldHVybiBtZXRhdGJsW29iamVjdF0KCWVuZAoJZW52aXJvbm1lbnQuZ2xvYmFsLnNldHJhd21ldGF0YWJsZSA9IGZ1bmN0aW9uKG9iamVjdCwgbWV0YXRhYmxlKQoJCWxvY2FsIG10YmwgPSBnZXRyYXdtZXRhdGFibGUob2JqZWN0KQoJCXRhYmxlLmZvcmVhY2gobWV0YXRhYmxlLCBmdW5jdGlvbihzb21lLCB0aGluZykKCQkJbXRibFtzb21lXSA9IHRoaW5nCgkJZW5kKQoJCXJldHVybiBvYmplY3QKCWVuZAoKCgllbnZpcm9ubWVudC5nbG9iYWwudG9jbGlwYm9hcmQgPSBlbnZpcm9ubWVudC5nbG9iYWwuc2V0Y2xpcGJvYXJkCgllbnZpcm9ubWVudC5nbG9iYWwuc2V0cmJ4Y2xpcGJvYXJkID0gZW52aXJvbm1lbnQuZ2xvYmFsLnNldGNsaXBib2FyZAoJZW52aXJvbm1lbnQuZ2xvYmFsLnN5bi53cml0ZV9jbGlwYm9hcmQgPSBlbnZpcm9ubWVudC5nbG9iYWwuc2V0Y2xpcGJvYXJkCgllbnZpcm9ubWVudC5nbG9iYWwud3JpdGVjbGlwYm9hcmQgPSBlbnZpcm9ubWVudC5nbG9iYWwuc2V0Y2xpcGJvYXJkCgllbnZpcm9ubWVudC5nbG9iYWwuc3luLnNldF9jbGlwYm9hcmQgPSBlbnZpcm9ubWVudC5nbG9iYWwuc2V0Y2xpcGJvYXJkCgoJZW52aXJvbm1lbnQuZ2xvYmFsLnN5bnNhdmVpbnN0YW5jZSA9IGVudmlyb25tZW50Lmdsb2JhbC5zYXZlaW5zdGFuY2UKCWVudmlyb25tZW50Lmdsb2JhbC5zYXZlcGxhY2UgPSBlbnZpcm9ubWVudC5nbG9iYWwuc2F2ZWluc3RhbmNlCglsb2NhbCBldmVyeXRoaW5nID0ge2dhbWV9CgoJZ2FtZS5EZXNjZW5kYW50UmVtb3Zpbmc6Q29ubmVjdChmdW5jdGlvbihkZXMpCgkJQ2FjaGVkSW5zdGFuY2VzW2Rlc10gPSAnaW52YWxpZCcKCWVuZCkKCWdhbWUuRGVzY2VuZGFudEFkZGVkOkNvbm5lY3QoZnVuY3Rpb24oZGVzKQoJCUNhY2hlZEluc3RhbmNlc1tkZXNdID0gZGVzCgkJdGFibGUuaW5zZXJ0KGV2ZXJ5dGhpbmcsIGRlcykKCWVuZCkKCglmb3IgaSwgdiBpbiBwYWlycyhnYW1lOkdldERlc2NlbmRhbnRzKCkpIGRvCgkJdGFibGUuaW5zZXJ0KGV2ZXJ5dGhpbmcsIHYpCgllbmQKCgllbnZpcm9ubWVudC5nbG9iYWwuZ2V0bmlsaW5zdGFuY2VzID0gZnVuY3Rpb24oKQoJCWxvY2FsIG5pbGkgPSB7fQoJCWZvciBpLCB2IGluIHBhaXJzKGV2ZXJ5dGhpbmcpIGRvCgkJCWlmIHYuUGFyZW50IH49IG5pbCB0aGVuIGNvbnRpbnVlIGVuZAoJCQl0YWJsZS5pbnNlcnQobmlsaSwgdikKCQllbmQKCQlyZXR1cm4gbmlsaQoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuZ2V0Z2MgPSBlbnZpcm9ubWVudC5nbG9iYWwuZ2V0bmlsaW5zdGFuY2VzCgkKCWVudmlyb25tZW50Lmdsb2JhbC5tZXNzYWdlYm94ID0gZnVuY3Rpb24odGV4dCwgdGl0bGUsIC4uLikKCQlsb2NhbCB0aXRsZSA9IHRpdGxlIG9yICIiCgkJYXNzZXJ0KHRleHQgfj0gbmlsLCAiTWlzc2luZyBhcmd1bWVudCAjMSIpCgkJYnJpZGdlOnNlbmQoIm1lc3NhZ2Vib3giLCB0aXRsZSwgdGV4dCkKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5tb3VzZTFjbGljayA9IGZ1bmN0aW9uKHgsIHkpCgkJeCA9IHggb3IgMAoJCXkgPSB5IG9yIDAKCQlWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRNb3VzZUJ1dHRvbkV2ZW50KHgsIHksIDAsIHRydWUsIGdhbWUsIGZhbHNlKQoJCXRhc2sud2FpdCgpCgkJVmlydHVhbElucHV0TWFuYWdlcjpTZW5kTW91c2VCdXR0b25FdmVudCh4LCB5LCAwLCBmYWxzZSwgZ2FtZSwgZmFsc2UpCgkgICBlbmQKCSAgIGVudmlyb25tZW50Lmdsb2JhbC5tb3VzZTJjbGljayA9IGZ1bmN0aW9uKHgsIHkpCgkJeCA9IHggb3IgMAoJCXkgPSB5IG9yIDAKCQlWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRNb3VzZUJ1dHRvbkV2ZW50KHgsIHksIDEsIHRydWUsIGdhbWUsIGZhbHNlKQoJCXRhc2sud2FpdCgpCgkJVmlydHVhbElucHV0TWFuYWdlcjpTZW5kTW91c2VCdXR0b25FdmVudCh4LCB5LCAxLCBmYWxzZSwgZ2FtZSwgZmFsc2UpCgkgICBlbmQKCSAgIGVudmlyb25tZW50Lmdsb2JhbC5tb3VzZTFwcmVzcyA9IGZ1bmN0aW9uKHgsIHkpCgkJeCA9IHggb3IgMAoJCXkgPSB5IG9yIDAKCQlWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRNb3VzZUJ1dHRvbkV2ZW50KHgsIHksIDAsIHRydWUsIGdhbWUsIGZhbHNlKQoJICAgZW5kCgkgICBlbnZpcm9ubWVudC5nbG9iYWwubW91c2UxcmVsZWFzZSA9IGZ1bmN0aW9uKHgsIHkpCgkJeCA9IHggb3IgMAoJCXkgPSB5IG9yIDAKCQlWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRNb3VzZUJ1dHRvbkV2ZW50KHgsIHksIDAsIGZhbHNlLCBnYW1lLCBmYWxzZSkKCSAgIGVuZAoJICAgZW52aXJvbm1lbnQuZ2xvYmFsLm1vdXNlMnByZXNzID0gZnVuY3Rpb24oeCwgeSkKCQl4ID0geCBvciAwCgkJeSA9IHkgb3IgMAoJCVZpcnR1YWxJbnB1dE1hbmFnZXI6U2VuZE1vdXNlQnV0dG9uRXZlbnQoeCwgeSwgMSwgdHJ1ZSwgZ2FtZSwgZmFsc2UpCgkgICBlbmQKCSAgIGVudmlyb25tZW50Lmdsb2JhbC5tb3VzZTJyZWxlYXNlID0gZnVuY3Rpb24oeCwgeSkKCQl4ID0geCBvciAwCgkJeSA9IHkgb3IgMAoJCVZpcnR1YWxJbnB1dE1hbmFnZXI6U2VuZE1vdXNlQnV0dG9uRXZlbnQoeCwgeSwgMSwgZmFsc2UsIGdhbWUsIGZhbHNlKQoJICAgZW5kCgkgICBlbnZpcm9ubWVudC5nbG9iYWwubW91c2VzY3JvbGwgPSBmdW5jdGlvbih4LCB5LCBhKQoJCXggPSB4IG9yIDAKCQl5ID0geSBvciAwCgkJYSA9IGEgYW5kIHRydWUgb3IgZmFsc2UKCQlWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRNb3VzZVdoZWVsRXZlbnQoeCwgeSwgYSwgZ2FtZSkKCSAgIGVuZAoJICAgZW52aXJvbm1lbnQuZ2xvYmFsLmtleWNsaWNrID0gZnVuY3Rpb24oa2V5KQoJCWlmIHR5cGVvZihrZXkpID09ICdudW1iZXInIHRoZW4KCQlpZiBub3Qga2V5c1trZXldIHRoZW4gcmV0dXJuIGVycm9yKCJLZXkgIi4udG9zdHJpbmcoa2V5KSAuLiAnIG5vdCBmb3VuZCEnKSBlbmQKCQlWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRLZXlFdmVudCh0cnVlLCBrZXlzW2tleV0sIGZhbHNlLCBnYW1lKQoJCXRhc2sud2FpdCgpCgkJVmlydHVhbElucHV0TWFuYWdlcjpTZW5kS2V5RXZlbnQoZmFsc2UsIGtleXNba2V5XSwgZmFsc2UsIGdhbWUpCgkJZWxzZWlmIHR5cGVvZihLZXkpID09ICdFbnVtSXRlbScgdGhlbgoJCSBWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRLZXlFdmVudCh0cnVlLCBrZXksIGZhbHNlLCBnYW1lKQoJCSB0YXNrLndhaXQoKQoJCSBWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRLZXlFdmVudChmYWxzZSwga2V5LCBmYWxzZSwgZ2FtZSkKCQllbmQKCSAgIGVuZAoJICAgZW52aXJvbm1lbnQuZ2xvYmFsLmtleXByZXNzID0gZnVuY3Rpb24oa2V5KQoJCWlmIHR5cGVvZihrZXkpID09ICdudW1iZXInIHRoZW4KCQlpZiBub3Qga2V5c1trZXldIHRoZW4gcmV0dXJuIGVycm9yKCJLZXkgIi4udG9zdHJpbmcoa2V5KSAuLiAnIG5vdCBmb3VuZCEnKSBlbmQKCQlWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRLZXlFdmVudCh0cnVlLCBrZXlzW2tleV0sIGZhbHNlLCBnYW1lKQoJCWVsc2VpZiB0eXBlb2YoS2V5KSA9PSAnRW51bUl0ZW0nIHRoZW4KCQkgVmlydHVhbElucHV0TWFuYWdlcjpTZW5kS2V5RXZlbnQodHJ1ZSwga2V5LCBmYWxzZSwgZ2FtZSkKCQllbmQKCSAgIGVuZAoJICAgZW52aXJvbm1lbnQuZ2xvYmFsLmtleXJlbGVhc2UgPSBmdW5jdGlvbihrZXkpCgkJaWYgdHlwZW9mKGtleSkgPT0gJ251bWJlcicgdGhlbgoJCWlmIG5vdCBrZXlzW2tleV0gdGhlbiByZXR1cm4gZXJyb3IoIktleSAiLi50b3N0cmluZyhrZXkpIC4uICcgbm90IGZvdW5kIScpIGVuZAoJCVZpcnR1YWxJbnB1dE1hbmFnZXI6U2VuZEtleUV2ZW50KGZhbHNlLCBrZXlzW2tleV0sIGZhbHNlLCBnYW1lKQoJCWVsc2VpZiB0eXBlb2YoS2V5KSA9PSAnRW51bUl0ZW0nIHRoZW4KCQkgVmlydHVhbElucHV0TWFuYWdlcjpTZW5kS2V5RXZlbnQoZmFsc2UsIGtleSwgZmFsc2UsIGdhbWUpCgkJZW5kCgkgICBlbmQKCSAgIGVudmlyb25tZW50Lmdsb2JhbC5tb3VzZW1vdmVyZWwgPSBmdW5jdGlvbihyZWx4LCByZWx5KQoJCWxvY2FsIFBvcyA9IHdvcmtzcGFjZS5DdXJyZW50Q2FtZXJhLlZpZXdwb3J0U2l6ZQoJCXJlbHggPSByZWx4IG9yIDAKCQlyZWx5ID0gcmVseSBvciAwCgkJbG9jYWwgeCA9IFBvcy5YICogcmVseAoJCWxvY2FsIHkgPSBQb3MuWSAqIHJlbHkKCQlWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRNb3VzZU1vdmVFdmVudCh4LCB5LCBnYW1lKQoJICAgZW5kCgkgICBlbnZpcm9ubWVudC5nbG9iYWwubW91c2Vtb3ZlYWJzID0gZnVuY3Rpb24oeCwgeSkKCQl4ID0geCBvciAwIHkgPSB5IG9yIDAKCQlWaXJ0dWFsSW5wdXRNYW5hZ2VyOlNlbmRNb3VzZU1vdmVFdmVudCh4LCB5LCBnYW1lKQoJICAgZW5kCgoJbG9jYWwgcm9ibG94X2FjdGl2ZSA9IHRydWUKCglnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKS5XaW5kb3dGb2N1c2VkOkNvbm5lY3QoZnVuY3Rpb24oKQoJCXJvYmxveF9hY3RpdmUgPSB0cnVlCgllbmQpCglnYW1lOkdldFNlcnZpY2UoIlVzZXJJbnB1dFNlcnZpY2UiKS5XaW5kb3dGb2N1c1JlbGVhc2VkOkNvbm5lY3QoZnVuY3Rpb24oKQoJCXJvYmxveF9hY3RpdmUgPSBmYWxzZQoJZW5kKQoKCWVudmlyb25tZW50LnJvYmxveC5sb2FkID0gZnVuY3Rpb24oZywgYSkKCgllbmQKCWVudmlyb25tZW50Lmdsb2JhbC5pc3JieGFjdGl2ZSA9IGZ1bmN0aW9uKCkKCQlyZXR1cm4gcm9ibG94X2FjdGl2ZQoJZW5kCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmlzZ2FtZWFjdGl2ZSA9IGVudmlyb25tZW50Lmdsb2JhbC5pc3JieGFjdGl2ZQoKCWVudmlyb25tZW50Lmdsb2JhbC5pc3JlYWRvbmx5ID0gZnVuY3Rpb24odGJsKQoJCWFzc2VydCh0eXBlb2YodGFibGUpID09ICJ0YWJsZSIsICJpbnZhbGlkIGFyZ3VtZW50ICMxOiBFeHBlY3RlZCB0YWJsZSIpCgkJcmV0dXJuIHRhYmxlLmlzZnJvemVuKHRibCkKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC53cml0ZWZpbGUgPSBmdW5jdGlvbihsb2NhdGlvbiwgY29udGVudCkKCQlhc3NlcnQoc3RyaW5nLmZpbmQobG9jYXRpb24sICcuZXhlJykgPT0gbmlsLCAiQXR0ZW1wdCB0byB1c2Ugd3JpdGVmaWxlIG9uIGEgYmxhY2tsaXN0ZWQgZmlsZSBleHRlbnNpb24iKQoJCWFzc2VydChzdHJpbmcuZmluZChsb2NhdGlvbiwgJy5iYXQnKSA9PSBuaWwsICJBdHRlbXB0IHRvIHVzZSB3cml0ZWZpbGUgb24gYSBibGFja2xpc3RlZCBmaWxlIGV4dGVuc2lvbiIpCgkJYXNzZXJ0KHN0cmluZy5maW5kKGxvY2F0aW9uLCAnLnB5JykgPT0gbmlsLCAiQXR0ZW1wdCB0byB1c2Ugd3JpdGVmaWxlIG9uIGEgYmxhY2tsaXN0ZWQgZmlsZSBleHRlbnNpb24iKQoJCWFzc2VydChzdHJpbmcuZmluZChsb2NhdGlvbiwgJy5jb20nKSA9PSBuaWwsICJBdHRlbXB0IHRvIHVzZSB3cml0ZWZpbGUgb24gYSBibGFja2xpc3RlZCBmaWxlIGV4dGVuc2lvbiIpCgkJYXNzZXJ0KHN0cmluZy5maW5kKGxvY2F0aW9uLCAnLmNtZCcpID09IG5pbCwgIkF0dGVtcHQgdG8gdXNlIHdyaXRlZmlsZSBvbiBhIGJsYWNrbGlzdGVkIGZpbGUgZXh0ZW5zaW9uIikKCQlhc3NlcnQoc3RyaW5nLmZpbmQobG9jYXRpb24sICcuaW5mJykgPT0gbmlsLCAiQXR0ZW1wdCB0byB1c2Ugd3JpdGVmaWxlIG9uIGEgYmxhY2tsaXN0ZWQgZmlsZSBleHRlbnNpb24iKQoJCWFzc2VydChzdHJpbmcuZmluZChsb2NhdGlvbiwgJy5pcGEnKSA9PSBuaWwsICJBdHRlbXB0IHRvIHVzZSB3cml0ZWZpbGUgb24gYSBibGFja2xpc3RlZCBmaWxlIGV4dGVuc2lvbiIpCgkJYXNzZXJ0KHN0cmluZy5maW5kKGxvY2F0aW9uLCAnLmFwaycpID09IG5pbCwgIkF0dGVtcHQgdG8gdXNlIHdyaXRlZmlsZSBvbiBhIGJsYWNrbGlzdGVkIGZpbGUgZXh0ZW5zaW9uIikKCQlhc3NlcnQoc3RyaW5nLmZpbmQobG9jYXRpb24sICcuYXBrbScpID09IG5pbCwgIkF0dGVtcHQgdG8gdXNlIHdyaXRlZmlsZSBvbiBhIGJsYWNrbGlzdGVkIGZpbGUgZXh0ZW5zaW9uIikKCQlhc3NlcnQoc3RyaW5nLmZpbmQobG9jYXRpb24sICcuanMnKSA9PSBuaWwsICJBdHRlbXB0IHRvIHVzZSB3cml0ZWZpbGUgb24gYSBibGFja2xpc3RlZCBmaWxlIGV4dGVuc2lvbiIpCgkJYXNzZXJ0KHN0cmluZy5maW5kKGxvY2F0aW9uLCAnLnZiJykgPT0gbmlsLCAiQXR0ZW1wdCB0byB1c2Ugd3JpdGVmaWxlIG9uIGEgYmxhY2tsaXN0ZWQgZmlsZSBleHRlbnNpb24iKQoJCWFzc2VydChzdHJpbmcuZmluZChsb2NhdGlvbiwgJy52YnMnKSA9PSBuaWwsICJBdHRlbXB0IHRvIHVzZSB3cml0ZWZpbGUgb24gYSBibGFja2xpc3RlZCBmaWxlIGV4dGVuc2lvbiIpCgkJYXNzZXJ0KHN0cmluZy5maW5kKGxvY2F0aW9uLCAnLnN5cycpID09IG5pbCwgIkF0dGVtcHQgdG8gdXNlIHdyaXRlZmlsZSBvbiBhIGJsYWNrbGlzdGVkIGZpbGUgZXh0ZW5zaW9uIikKCQlhc3NlcnQoc3RyaW5nLmZpbmQobG9jYXRpb24sICcuZGxsJykgPT0gbmlsLCAiQXR0ZW1wdCB0byB1c2Ugd3JpdGVmaWxlIG9uIGEgYmxhY2tsaXN0ZWQgZmlsZSBleHRlbnNpb24iKQoJCWFzc2VydChzdHJpbmcuZmluZChsb2NhdGlvbiwgJy5yYXInKSA9PSBuaWwsICJBdHRlbXB0IHRvIHVzZSB3cml0ZWZpbGUgb24gYSBibGFja2xpc3RlZCBmaWxlIGV4dGVuc2lvbiIpCgkJYXNzZXJ0KHN0cmluZy5maW5kKGxvY2F0aW9uLCAnLnppcCcpID09IG5pbCwgIkF0dGVtcHQgdG8gdXNlIHdyaXRlZmlsZSBvbiBhIGJsYWNrbGlzdGVkIGZpbGUgZXh0ZW5zaW9uIikKCQlicmlkZ2U6c2VuZCgid3JpdGVmaWxlIiwgbG9jYXRpb24sIHRvc3RyaW5nKGNvbnRlbnQpKQoJZW5kCgoJZW52aXJvbm1lbnQuZ2xvYmFsLnJlYWRmaWxlID0gZnVuY3Rpb24obG9jYXRpb24pCgkJcmV0dXJuIGJyaWRnZTpzZW5kKCJyZWFkZmlsZSIsIGxvY2F0aW9uKS5tZXNzYWdlCgllbmQKCgllbnZpcm9ubWVudC5nbG9iYWwuZ2V0aHdpZCA9IGZ1bmN0aW9uKCkKCQlyZXR1cm4gYnJpZGdlOnNlbmQoImdldGh3aWQiKS5tZXNzYWdlCgllbmQKCgllbnZpcm9ubWVudC5nbG9iYWwubWFrZWZvbGRlciA9IGZ1bmN0aW9uKGxvY2F0aW9uKQoJCWJyaWRnZTpzZW5kKCJtYWtlZm9sZGVyIiwgbG9jYXRpb24pCgllbmQKCWVudmlyb25tZW50Lmdsb2JhbC5zeW4uaXNfYmV0YSA9IGZ1bmN0aW9uKCkKCQlyZXR1cm4gdHJ1ZQoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwubG9hZGZpbGUgPSBmdW5jdGlvbihwYXRoLCAuLi4pCgkJbG9jYWwgY29udGVudCA9IHJlYWRmaWxlKHBhdGgpCgkJbG9jYWwgcyxlID0gcGNhbGwoZnVuY3Rpb24oKSAKCQkJbG9hZHN0cmluZyhjb250ZW50KSgpIAoJCWVuZCkKCQlyZXR1cm4gZSBvciBuaWwKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5pc2ZpbGUgPSBmdW5jdGlvbihsb2NhdGlvbikKIAkJcmV0dXJuIGJyaWRnZTpzZW5kKCJpc2ZpbGUiLCBsb2NhdGlvbikubWVzc2FnZQoJZW5kCgkKCWVudmlyb25tZW50Lmdsb2JhbC5IdHRwR2V0ID0gZnVuY3Rpb24odXJsKQoJCWFzc2VydCh1cmwgfj0gbmlsLCAiTWlzc2luZyBhcmd1bWVudCAjMSIpCgkJYXNzZXJ0KHR5cGUodXJsKSA9PSAic3RyaW5nIiwgIkludmFsaWQgYXJndW1lbnQgIzE6IEV4cGVjdGVkIHN0cmluZywgZ290ICIuLiB0eXBlKHVybCkpCiAgICAgICAgbG9jYWwgZCxpc2UsQm9keSA9IGZhbHNlLGZhbHNlLCIiCiAgICAgICAgZ2FtZTpHZXRTZXJ2aWNlKCJIdHRwU2VydmljZSIpOlJlcXVlc3RJbnRlcm5hbCh7VXJsID0gdXJsLE1ldGhvZCA9ICJHRVQifSk6U3RhcnQoZnVuY3Rpb24oc3VjLCByZXMpIGlmIG5vdCBzdWMgdGhlbiBCb2R5ID0gcmVzLlN0YXR1c0NvZGUgaXNlID0gdHJ1ZSBkPXRydWUgcmV0dXJuIGVuZCBCb2R5PXJlcy5Cb2R5IGQ9dHJ1ZSBlbmQpCgkJcmVwZWF0IHRhc2sud2FpdCgpIHVudGlsIGQKICAgICAgICBpZiBpc2UgdGhlbiBlcnJvcihCb2R5LCAwKSBlbmQJCQogICAgICAgIHJldHVybiBCb2R5CiAgICBlbmQKCQoJZW52aXJvbm1lbnQuZ2xvYmFsLmlzZm9sZGVyID0gZnVuY3Rpb24obG9jYXRpb24pCiAJCXJldHVybiBicmlkZ2U6c2VuZCgiaXNmb2xkZXIiLCBsb2NhdGlvbikubWVzc2FnZQoJZW5kCgoJCgllbnZpcm9ubWVudC5nbG9iYWwuZGVsZmlsZSA9IGZ1bmN0aW9uKGxvY2F0aW9uKQoJCWJyaWRnZTpzZW5kKCJkZWxmaWxlIiwgbG9jYXRpb24pCgllbmQKCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmFwcGVuZGZpbGUgPSBmdW5jdGlvbihsb2NhdGlvbiwgZGF0YSkKCQlpZiBpc2ZpbGUobG9jYXRpb24pIHRoZW4KCQkJbG9jYWwgc3RyaW5nID0gcmVhZGZpbGUobG9jYXRpb24pLi5kYXRhCgkJCXdyaXRlZmlsZShsb2NhdGlvbiwgc3RyaW5nKQoJCWVsc2UKCQkJd3JpdGVmaWxlKGxvY2F0aW9uLCBkYXRhKQoJCWVuZAoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuc2V0ZmZsYWcgPSBmdW5jdGlvbihmZmxhZywgdmFsdWUpCgkJaWYgdHlwZSh2YWx1ZSkgPT0gImJvb2wiIHRoZW4KCQkJZ2FtZTpEZWZpbmVGYXN0RmxhZyhmZmxhZywgdmFsdWUpCgkJZWxzZWlmIHR5cGUodmFsdWUpID09ICJzdHJpbmciIHRoZW4KCQkJZ2FtZTpEZWZpbmVGYXN0U3RyaW5nKGZmbGFnLCB2YWx1ZSkKCQllbHNlaWYgdHlwZSh2YWx1ZSkgPT0gIm51bWJlciIgdGhlbgoJCQlnYW1lOkRlZmluZUZhc3RJbnQoZmZsYWcsIHZhbHVlKQoJCWVuZAoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuZ2V0ZmZsYWcgPSBmdW5jdGlvbihmZmxhZykKCQlyZXR1cm4gZ2FtZTpHZXRGYXN0RmxhZyhmZmxhZykKCWVuZAoKCS0tZnBzIHN0dWZmCglsb2NhbCBmcHNjYXAgPSA2MAoJbG9jYWwgUnVuU2VydmljZSA9IGdhbWU6R2V0U2VydmljZSgiUnVuU2VydmljZSIpCglsb2NhbCBmcmFtZVRpbWUgPSAxIC8gNjAKCWxvY2FsIGNhcHBlZCA9IGZhbHNlCgllbnZpcm9ubWVudC5nbG9iYWwuc2V0ZnBzY2FwID0gZnVuY3Rpb24oZnBzKQoJCWlmIGZwcyA9PSAwIHRoZW4KCQkJY2FwcGVkID0gZmFsc2UKCQkJUnVuU2VydmljZTpTZXQzZFJlbmRlcmluZ0VuYWJsZWQodHJ1ZSkKCQllbHNlCgkJCWZyYW1lVGltZSA9IDEgLyBmcHMKCQkJY2FwcGVkID0gdHJ1ZQoJCQlSdW5TZXJ2aWNlOlNldDNkUmVuZGVyaW5nRW5hYmxlZChmYWxzZSkKCQllbmQKCgllbmQKCWVudmlyb25tZW50Lmdsb2JhbC5nZXRmcHNjYXAgPSBmdW5jdGlvbigpCgkJcmV0dXJuIGZwc2NhcAoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuZG9maWxlID0gZnVuY3Rpb24oZmlsZSkKCQluZXdjY2xvc3VyZShsb2FkZmlsZShmaWxlKSkKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5kdW1wdGFibGUgPSBmdW5jdGlvbihvKQoJCWlmIHR5cGUobykgPT0gJ3RhYmxlJyB0aGVuCgkJbG9jYWwgcyA9ICd7ICcKCQlmb3Igayx2IGluIHBhaXJzKG8pIGRvCgkJCWlmIHR5cGUoaykgfj0gJ251bWJlcicgdGhlbiBrID0gJyInLi5rLi4nIicgZW5kCgkJCXMgPSBzIC4uICdbJy4uay4uJ10gPSAnIC4uIGR1bXB0YWJsZSh2KSAuLiAnLCcKCQllbmQKCQlyZXR1cm4gcyAuLiAnfSAnCgkJZWxzZQoJCQlyZXR1cm4gdG9zdHJpbmcobykKCQllbmQKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5zZXR0aHJlYWRpZGVudGl0eSA9IGZ1bmN0aW9uKGlkZW50aXR5KQoJCWFzc2VydChpZGVudGl0eSB+PSBuaWwsICJNaXNzaW5nIGFyZ3VtZW50ICMxIikKCQlhc3NlcnQodHlwZW9mKGlkZW50aXR5KSA9PSAibnVtYmVyIiwgIkludmFsaWQgYXJndW1lbnQgIzE6IEV4cGVjdGVkIHZhbGlkIGlkZW50aXR5LCBnb3QgIi4uIHR5cGVvZihpZGVudGl0eSkpCgkJYXNzZXJ0KGlkZW50aXR5ID4gLTEsICJJbnZhbGlkIGFyZ3VtZW50ICMxOiBFeHBlY3RlZCB2YWxpZCBpZGVudGl0eSwgZ290ICIuLiBpZGVudGl0eSkKCQlhc3NlcnQoaWRlbnRpdHkgPCA5LCAiSW52YWxpZCBhcmd1bWVudCAjMTogRXhwZWN0ZWQgdmFsaWQgaWRlbnRpdHksIGdvdCAiLi4gaWRlbnRpdHkpCgkJZ2V0ZmVudigpLmlkZW50aXR5ID0gaWRlbnRpdHkKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5zZXRpZGVudGl0eSA9IGVudmlyb25tZW50Lmdsb2JhbC5zZXR0aHJlYWRpZGVudGl0eQoJZW52aXJvbm1lbnQuZ2xvYmFsLnNldHRocmVhZGNvbnRleHQgPSBlbnZpcm9ubWVudC5nbG9iYWwuc2V0dGhyZWFkaWRlbnRpdHkKCWVudmlyb25tZW50Lmdsb2JhbC5zeW4uc2V0X3RocmVhZF9pZGVudGl0eSA9IGVudmlyb25tZW50Lmdsb2JhbC5zZXR0aHJlYWRpZGVudGl0eQoJZW52aXJvbm1lbnQuZ2xvYmFsLmRlZXBjbG9uZSA9IGZ1bmN0aW9uKGEpCiAJCWxvY2FsIFJlc3VsdCA9IHt9CiAJCWZvciBpLCB2IGluIHBhaXJzKGEpIGRvCiAgCQkJaWYgdHlwZSh2KSA9PSAndGFibGUnIHRoZW4KICAgIAkJCVJlc3VsdFtpXSA9IGRlZXBjbG9uZSh2KQogIAkJCWVuZAogIAkJCVJlc3VsdFtpXSA9IHYKIAkJZW5kCiAJCXJldHVybiBSZXN1bHQKCWVuZAoJZW52aXJvbm1lbnQuZ2xvYmFsLnNldHJlYWRvbmx5ID0gZnVuY3Rpb24odGJsLCBjb25kKQoJCWlmIGNvbmQgPT0gdHJ1ZSB0aGVuCgkJCXRhYmxlLmZyZWV6ZSh0YmwpCgkJZWxzZQoJCQlyZXR1cm4gdGFibGUuY2xvbmUodGJsKQoJCWVuZAoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuZ2V0bG9hZGVkbW9kdWxlcyA9IGZ1bmN0aW9uKCkKCQlsb2NhbCBtb2R1bGVTY3JpcHRzID0ge30KCQlmb3IgXywgb2JqIGluIHBhaXJzKGdhbWU6R2V0RGVzY2VuZGFudHMoKSkgZG8KCQkJaWYgdHlwZW9mKG9iaikgPT0gIkluc3RhbmNlIiBhbmQgb2JqOklzQSgiTW9kdWxlU2NyaXB0IikgdGhlbiB0YWJsZS5pbnNlcnQobW9kdWxlU2NyaXB0cywgb2JqKSBlbmQKCQllbmQKCQlyZXR1cm4gbW9kdWxlU2NyaXB0cwoJZW5kCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmdldHJ1bm5pbmdzY3JpcHRzID0gZnVuY3Rpb24oKQoJCWxvY2FsIHJ1bm5pbmdTY3JpcHRzID0ge30KCgkJZm9yIF8sIG9iaiBpbiBwYWlycyhnYW1lOkdldERlc2NlbmRhbnRzKCkpIGRvCgkJCWlmIHR5cGVvZihvYmopID09ICJJbnN0YW5jZSIgYW5kIG9iajpJc0EoIk1vZHVsZVNjcmlwdCIpIHRoZW4KCQkJCXRhYmxlLmluc2VydChydW5uaW5nU2NyaXB0cywgb2JqKQoJCQllbHNlaWYgdHlwZW9mKG9iaikgPT0gIkluc3RhbmNlIiBhbmQgb2JqOklzQSgiTG9jYWxTY3JpcHQiKSB0aGVuCgkJCQlpZiBvYmouRW5hYmxlZCA9PSB0cnVlIHRoZW4KCQkJCQl0YWJsZS5pbnNlcnQocnVubmluZ1NjcmlwdHMsIG9iaikKCQkJCWVuZAoJCQllbmQKCQllbmQKCgkJcmV0dXJuIHJ1bm5pbmdTY3JpcHRzCgllbmQKCWdldGZlbnYoKS5QUk9UT1NNQVNIRVJfTE9BREVEID0gdHJ1ZQoJZ2V0ZmVudigpLnN5biA9IHRydWUKCWVudmlyb25tZW50Lmdsb2JhbC5nZXRpbnN0YW5jZXMgPSBmdW5jdGlvbigpCgkJcmV0dXJuIGdhbWU6R2V0RGVzY2VuZGFudHMoKQoJZW5kCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmdldGFmZmlsaWF0ZWlkID0gZnVuY3Rpb24oKQoJCXJldHVybiAnTm9uZScKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5nZXRkZXZpY2UgPSBmdW5jdGlvbigpCgkJcmV0dXJuICdXaW5kb3dzJwoJZW5kCgoJZW52aXJvbm1lbnQuZ2xvYmFsLm1ha2V3cml0ZWFibGUgPSBmdW5jdGlvbigpCgkJcmV0dXJuIHNldHJlYWRvbmx5KHRibCwgZmFsc2UpCgllbmQKCglsb2NhbCBBUElfRHVtcF9VcmwgPSAiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL01heGltdW1BREhEL1JvYmxveC1DbGllbnQtVHJhY2tlci9yb2Jsb3gvTWluaS1BUEktRHVtcC5qc29uIgoJbG9jYWwgQVBJX0R1bXAgPSBlbnZpcm9ubWVudC5nbG9iYWwuSHR0cEdldChBUElfRHVtcF9VcmwpCglsb2NhbCBIaWRkZW4gPSB7fQoKCWZvciBfLCBBUElfQ2xhc3MgaW4gcGFpcnMoSHR0cFNlcnZpY2U6SlNPTkRlY29kZShBUElfRHVtcCkuQ2xhc3NlcykgZG8KCQlmb3IgXywgTWVtYmVyIGluIHBhaXJzKEFQSV9DbGFzcy5NZW1iZXJzKSBkbwoJCQlpZiBNZW1iZXIuTWVtYmVyVHlwZSA9PSAiUHJvcGVydHkiIHRoZW4KCQkJCWxvY2FsIFByb3BlcnR5TmFtZSA9IE1lbWJlci5OYW1lCgoJCQkJbG9jYWwgTWVtYmVyVGFncyA9IE1lbWJlci5UYWdzCgoJCQkJbG9jYWwgU3BlY2lhbAoKCQkJCWlmIE1lbWJlclRhZ3MgdGhlbgoJCQkJCVNwZWNpYWwgPSB0YWJsZS5maW5kKE1lbWJlclRhZ3MsICJOb3RTY3JpcHRhYmxlIikKCQkJCWVuZAoJCQkJaWYgU3BlY2lhbCB0aGVuCgkJCQkJdGFibGUuaW5zZXJ0KEhpZGRlbiwgUHJvcGVydHlOYW1lKQoJCQkJZW5kCgkJCWVuZAoJCWVuZAoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuaXNzY3JpcHRhYmxlID0gZnVuY3Rpb24oc2VsZiwgcHJvcCkKIAkJcmV0dXJuIHRhYmxlLmZpbmQoSGlkZGVuLCBwcm9wKSA9PSBuaWwKCWVuZAoJZW52aXJvbm1lbnQuZ2xvYmFsLmdldG9zID0gZW52aXJvbm1lbnQuZ2xvYmFsLmdldGRldmljZQoJZW52aXJvbm1lbnQuZ2xvYmFsLmdldHBsYXRmb3JtID0gZW52aXJvbm1lbnQuZ2xvYmFsLmdldGRldmljZQoKCWVudmlyb25tZW50Lmdsb2JhbC5wbGF5YW5pbWF0aW9uID0gZnVuY3Rpb24oYW5pbWF0aW9uSWQsIHBsYXllcikKCQlhc3NlcnQodHlwZW9mKGFuaW1hdGlvbklkKSA9PSAic3RyaW5nIiBvciB0eXBlb2YoYW5pbWF0aW9uSWQpID09ICJudW1iZXIiLCAiaW52YWxpZCBhcmd1bWVudCAjMTogRXhwZWN0ZWQgcmJ4YXNzZXRpZCIpCgkJbG9jYWwgcGxyID0gcGxheWVyIG9yIGdldHBsYXllcigpCgkJYXNzZXJ0KHRhYmxlLmZpbmQoZ2FtZS5QbGF5ZXJzOkdldFBsYXllcnMoKSwgcGxyKSwgImludmFsaWQgYXJndW1lbnQgIzI6IEV4cGVjdGVkIHZhbGlkIHBsYXllciIpCiAgICAJbG9jYWwgaHVtYW5vaWQgPSBwbHIuQ2hhcmFjdGVyOkZpbmRGaXJzdENoaWxkT2ZDbGFzcygiSHVtYW5vaWQiKQogICAgCWlmIGh1bWFub2lkIHRoZW4KICAgICAgICAJbG9jYWwgYW5pbWF0aW9uID0gSW5zdGFuY2UubmV3KCJBbmltYXRpb24iKQogICAgICAgIAlhbmltYXRpb24uQW5pbWF0aW9uSWQgPSAicmJ4YXNzZXRpZDovLyIgLi4gdG9zdHJpbmcoYW5pbWF0aW9uSWQpCiAgICAgICAgCWh1bWFub2lkOkxvYWRBbmltYXRpb24oYW5pbWF0aW9uKTpQbGF5KCkKICAgIAllbmQKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5nZXRwaW5nID0gZnVuY3Rpb24oKQoJCWxvY2FsIHJhd3BpbmcgPSBnYW1lOkdldFNlcnZpY2UoIlN0YXRzIikuTmV0d29yay5TZXJ2ZXJTdGF0c0l0ZW1bIkRhdGEgUGluZyJdOkdldFZhbHVlU3RyaW5nKCkKICAgIAlsb2NhbCBwaW5nc3RyID0gcmF3cGluZzpzdWIoMSwjcmF3cGluZy03KQogICAgCWxvY2FsIHBpbmdudW0gPSB0b251bWJlcihwaW5nc3RyKQogICAgCWxvY2FsIHBpbmcgPSB0b3N0cmluZyhtYXRoLnJvdW5kKHBpbmdudW0pKQogICAgCXJldHVybiBwaW5nCgllbmQKCgllbnZpcm9ubWVudC5nbG9iYWwuZ2V0ZnBzID0gZnVuY3Rpb24oKQoJCWxvY2FsIHJhd2ZwcyA9IGdhbWU6R2V0U2VydmljZSgiU3RhdHMiKS5Xb3Jrc3BhY2UuSGVhcnRiZWF0OkdldFZhbHVlKCkKCQlsb2NhbCBmcHNudW0gPSB0b251bWJlcihyYXdmcHMpCgkJbG9jYWwgZnBzID0gdG9zdHJpbmcobWF0aC5yb3VuZChmcHNudW0pKQoJCXJldHVybiBmcHMKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5jdXN0b21wcmludCA9IGZ1bmN0aW9uKHRleHQsIHByb3BlcnRpZXMsIGltYWdlSWQpCgkgICAgcHJpbnQodGV4dCkKICAgIAl0YXNrLndhaXQoLjAyNSkKICAgIAlsb2NhbCBtc2cgPSBnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKS5EZXZDb25zb2xlTWFzdGVyLkRldkNvbnNvbGVXaW5kb3cuRGV2Q29uc29sZVVJOldhaXRGb3JDaGlsZCgiTWFpblZpZXciKS5DbGllbnRMb2dbdG9zdHJpbmcoI2dhbWU6R2V0U2VydmljZSgiQ29yZUd1aSIpLkRldkNvbnNvbGVNYXN0ZXIuRGV2Q29uc29sZVdpbmRvdy5EZXZDb25zb2xlVUkuTWFpblZpZXcuQ2xpZW50TG9nOkdldENoaWxkcmVuKCkpLTFdLm1zZwogICAgCWZvciBpLCB4IGluIHBhaXJzKHByb3BlcnRpZXMpIGRvCiAgICAgICAgCW1zZ1tpXSA9IHgKICAgIAllbmQKICAgIAlpZiBpbWFnZUlkIHRoZW4gbXNnLlBhcmVudC5pbWFnZS5JbWFnZSA9IGltYWdlSWQgZW5kCgllbmQKCgllbnZpcm9ubWVudC5nbG9iYWwucnVuYW5pbWF0aW9uID0gZW52aXJvbm1lbnQuZ2xvYmFsLnBsYXlhbmltYXRpb24KCgllbnZpcm9ubWVudC5nbG9iYWwuZ2V0cGxheWVyID0gZnVuY3Rpb24obmFtZSkKCQlyZXR1cm4gbm90IG5hbWUgYW5kIGdldHBsYXllcnMoKVsiTG9jYWxQbGF5ZXIiXSBvciBnZXRwbGF5ZXJzKClbbmFtZV0KCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5nZXRwbGF5ZXJzID0gZnVuY3Rpb24oKQoJCWxvY2FsIHBsYXllcnMgPSB7fQogIAkJZm9yIF8sIHggaW4gcGFpcnMoZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6R2V0UGxheWVycygpKSBkbwogICAgCQlwbGF5ZXJzW3guTmFtZV0gPSB4CiAgCQllbmQKICAJCXBsYXllcnNbIkxvY2FsUGxheWVyIl0gPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllcgogIAkJcmV0dXJuIHBsYXllcnMKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5nZXRodWkgPSBmdW5jdGlvbigpCgkJcmV0dXJuIGdhbWU6R2V0U2VydmljZSgiQ29yZUd1aSIpCgllbmQKCWxvY2FsIG9iamVjdGJyaWRnZSA9IEluc3RhbmNlLm5ldygiT2JqZWN0VmFsdWUiLCBnYW1lLkNvcmVHdWkpCglvYmplY3RicmlkZ2UuTmFtZSA9ICJHRVRCWVRFQ09ERSIKCWVudmlyb25tZW50Lmdsb2JhbC51bndyYXAgPSBmdW5jdGlvbih3cmFwcGVkdykKCQlsb2NhbCB3b3JrZWQsIHVud3JhcHBlZCA9IHBjYWxsKGZ1bmN0aW9uKCkKCQkJbG9jYWwgaWRhID0gd3JhcHBlZHdbaW5kZXhhYmxlXQoJCQlsb2NhbCBpZCA9IGlkYSgpCgkJCXJldHVybiB3cmFwcGVkW2lkXQoJCWVuZCkKCQlpZiB3b3JrZWQgPT0gZmFsc2UgdGhlbgoJCQktLWhhbmRsZSBlcnJvcnMgbWF5YmUKCQllbmQKCQlsb2NhbCB1bndyYXBwZWQgPSB1bndyYXBwZWQgb3Igd3JhcHBlZHcKCQlpZiB0eXBlKHVud3JhcHBlZCkgPT0gInN0cmluZyIgdGhlbgoJCQl1bndyYXBwZWQgPSB3cmFwcGVkdwoJCWVuZAoJCXJldHVybiB1bndyYXBwZWQKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5nZXRzY3JpcHRzID0gZnVuY3Rpb24oKQoJCWxvY2FsIHNjcmlwdHMgPSB7fQoJCWZvciBfLCBzY3JpcHR0IGluIGdhbWU6R2V0RGVzY2VuZGFudHMoKSBkbwoJCQlpZiBzY3JpcHR0OmlzQSgiTG9jYWxTY3JpcHQiKSBvciBzY3JpcHR0OmlzQSgiTW9kdWxlU2NyaXB0IikgdGhlbgoJCQkJdGFibGUuaW5zZXJ0KHNjcmlwdHMsIHNjcmlwdHQpCgkJCWVuZAoJCWVuZAoJCXJldHVybiBzY3JpcHRzCgllbmQKCQllbnZpcm9ubWVudC5nbG9iYWwuZ2V0c2NyaXB0Y2xvc3VyZSA9IGZ1bmN0aW9uKG1vZHVsZSkKCQkJcmV0dXJuIGVudmlyb25tZW50Lmdsb2JhbC5nZXRyZW52KCkucnJycnJycmVxdWlyZShtb2R1bGUpCgkJZW5kCgoJCWVudmlyb25tZW50Lmdsb2JhbC5nZXRzY3JpcHRmdW5jdGlvbiA9IGVudmlyb25tZW50Lmdsb2JhbC5nZXRzY3JpcHRjbG9zdXJlCgkJZW52aXJvbm1lbnQuZ2xvYmFsLmZpcmVwcm94aW1pdHlwcm9tcHQgPSBmdW5jdGlvbihwKQoJCWxvY2FsIEhvbGQsIERpc3RhbmNlLCBFbmFibGVkLCBUaGluZywgQ0ZyYW1lMT0gcC5Ib2xkRHVyYXRpb24sIHAuTWF4QWN0aXZhdGlvbkRpc3RhbmNlLCBwLkVuYWJsZWQsIHAuUmVxdWlyZXNMaW5lT2ZTaWdodCwgbmlsZQoJCXAuTWF4QWN0aXZhdGlvbkRpc3RhbmNlID0gbWF0aC5odWdlCgkJcC5Ib2xkRHVyYXRpb24gPSAwCgkJcC5FbmFibGVkID0gdHJ1ZQoJCXAuUmVxdWlyZXNMaW5lT2ZTaWdodCA9IGZhbHNlCgkJbG9jYWwgZnVuY3Rpb24gZ2V0KCkKCQlsb2NhbCBjbGFzc2VzID0geydCYXNlUGFydCcsICdQYXJ0JywgJ01lc2hQYXJ0J30KCQlmb3IgXywgdiBpbiBwYWlycyhjbGFzc2VzKSBkbwoJCWlmIHA6RmluZEZpcnN0QW5jZXN0b3JPZkNsYXNzKHYpIHRoZW4KCQkJcmV0dXJuIHA6RmluZEZpcnN0QW5jZXN0b3JPZkNsYXNzKHYpCgkJZW5kCgkJZW5kCgkJZW5kCgkJbG9jYWwgYSA9IGdldCgpCgkJaWYgbm90IGEgdGhlbgoJCWxvY2FsIHBhcmVudCA9IHAuUGFyZW50CgkJcC5QYXJlbnQgPSBJbnN0YW5jZS5uZXcoIlBhcnQiLCB3b3Jrc3BhY2UpCgkJYSA9IHAuUGFyZW50CgkJZW5kCgkJQ0ZyYW1lMSA9IGEuQ0ZyYW1lCgkJYS5DRnJhbWUgPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5DRnJhbWUgKyBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKS5Mb2NhbFBsYXllci5DaGFyYWN0ZXIuSGVhZC5DRnJhbWUuTG9va1ZlY3RvciAqIDIKCQl0YXNrLndhaXQoKQoJCXA6SW5wdXRIb2xkQmVnaW4oKQoJCXRhc2sud2FpdCgpCgkJcDpJbnB1dEhvbGRFbmQoKQoJCXAuSG9sZER1cmF0aW9uID0gSG9sZAoJCXAuTWF4QWN0aXZhdGlvbkRpc3RhbmNlID0gRGlzdGFuY2UKCQlwLkVuYWJsZWQgPSBFbmFibGVkCgkJcC5SZXF1aXJlc0xpbmVPZlNpZ2h0ID0gVGhpbmcKCQlhLkNGcmFtZSA9IENGcmFtZTEKCQlwLlBhcmVudCA9IHBhcmVudCBvciBwLlBhcmVudAoJCWVuZAoJCWVudmlyb25tZW50Lmdsb2JhbC5pc3NjcmlwdGFibGUgPSBmdW5jdGlvbihzZWxmLCBwcm9wKQogCQkJcmV0dXJuIHRhYmxlLmZpbmQoSGlkZGVuLCBwcm9wKSA9PSBuaWwKCQllbmQKCgoJCWVudmlyb25tZW50Lmdsb2JhbC5maXJlY2xpY2tkZXRlY3RvciA9IGZ1bmN0aW9uKGlkaywgZGlzdGFuY2UsIGV2ZW50KQoJCQlsb2NhbCBDbGlja0RldGVjdG9yID0gaWRrOkZpbmRGaXJzdENoaWxkKCJDbGlja0RldGVjdG9yIikgb3IgaWRrCgkJCWxvY2FsIFZpcnR1YWxJbnB1dE1hbmFnZXIgPSBnYW1lOkdldFNlcnZpY2UoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKQoJCQlsb2NhbCB1cHZhbDEgPSBDbGlja0RldGVjdG9yLlBhcmVudAoJCQlsb2NhbCBwYXJ0ID0gSW5zdGFuY2UubmV3KCJQYXJ0IikKCQkJcGFydC5UcmFuc3BhcmVuY3kgPSAxCgkJCXBhcnQuU2l6ZSA9IFZlY3RvcjMubmV3KDMwLCAzMCwgMzApCgkJCXBhcnQuQW5jaG9yZWQgPSB0cnVlCgkJCXBhcnQuQ2FuQ29sbGlkZSA9IGZhbHNlCgkJCXBhcnQuUGFyZW50ID0gd29ya3NwYWNlCgkJCUNsaWNrRGV0ZWN0b3IuUGFyZW50ID0gcGFydAoJCQlDbGlja0RldGVjdG9yLk1heEFjdGl2YXRpb25EaXN0YW5jZSA9IG1hdGguaHVnZQoJCQlsb2NhbCBjb25uZWN0aW9uID0gbmlsCgkJCWNvbm5lY3Rpb24gPSBnYW1lOkdldFNlcnZpY2UoIlJ1blNlcnZpY2UiKS5IZWFydGJlYXQ6Q29ubmVjdChmdW5jdGlvbigpCgkJCQlwYXJ0LkNGcmFtZSA9IHdvcmtzcGFjZS5DYW1lcmEuQ0ZyYW1lICogQ0ZyYW1lLm5ldygwLCAwLCAtMjApICogQ0ZyYW1lLm5ldyh3b3Jrc3BhY2UuQ2FtZXJhLkNGcmFtZS5Mb29rVmVjdG9yLlgsIHdvcmtzcGFjZS5DYW1lcmEuQ0ZyYW1lLkxvb2tWZWN0b3IuWSwgd29ya3NwYWNlLkNhbWVyYS5DRnJhbWUuTG9va1ZlY3Rvci5aKQoJCQkJZ2FtZTpHZXRTZXJ2aWNlKCJWaXJ0dWFsVXNlciIpOkNsaWNrQnV0dG9uMShWZWN0b3IyLm5ldygyMCwgMjApLCB3b3Jrc3BhY2U6RmluZEZpcnN0Q2hpbGRPZkNsYXNzKCJDYW1lcmEiKS5DRnJhbWUpCgkJCWVuZCkKCQkJQ2xpY2tEZXRlY3Rvci5Nb3VzZUNsaWNrOk9uY2UoZnVuY3Rpb24oKQoJCQkJY29ubmVjdGlvbjpEaXNjb25uZWN0KCkKCQkJCUNsaWNrRGV0ZWN0b3IuUGFyZW50ID0gdXB2YWwxCgkJCQlwYXJ0OkRlc3Ryb3koKQoJCQllbmQpCgkJZW5kCgkJCgkJZW52aXJvbm1lbnQuZ2xvYmFsLmZpcmV0b3VjaGludGVyZXN0ID0gZnVuY3Rpb24odG9Ub3VjaCwgVG91Y2hXaXRoLCBvbikKCQkJaWYgb24gPT0gMCB0aGVuIHJldHVybiBlbmQKCQlpZiB0b1RvdWNoLkNsYXNzTmFtZSA9PSAnVG91Y2hUcmFuc21pdHRlcicgdGhlbgoJCQlsb2NhbCBmdW5jdGlvbiBnZXQoKQoJCQkJbG9jYWwgY2xhc3NlcyA9IHsnQmFzZVBhcnQnLCAnUGFydCcsICdNZXNoUGFydCd9CgkJCQlmb3IgXywgdiBpbiBwYWlycyhjbGFzc2VzKSBkbwoJCQkJCWlmIHRvVG91Y2g6RmluZEZpcnN0QW5jZXN0b3JPZkNsYXNzKHYpIHRoZW4KCQkJCQkJcmV0dXJuIHRvVG91Y2g6RmluZEZpcnN0QW5jZXN0b3JPZkNsYXNzKHYpCgkJCQkJZW5kCgkJCQllbmQKCQkJZW5kCgkJCXRvVG91Y2ggPSBnZXQoKQoJCWVuZAoJCWxvY2FsIGNmID0gdG9Ub3VjaC5DRnJhbWUKCQlsb2NhbCBhbmMgPSB0b1RvdWNoLkNhbkNvbGxpZGUKCQl0b1RvdWNoLkNhbkNvbGxpZGUgPSBmYWxzZQoJCXRvVG91Y2guQ0ZyYW1lID0gVG91Y2hXaXRoLkNGcmFtZQoJCXRhc2sud2FpdCgpCgkJdG9Ub3VjaC5DRnJhbWUgPSBjZgoJCXRvVG91Y2guQ2FuQ29sbGlkZSA9IGFuYwoJZW5kCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmZpcmV0b3VjaHRyYW5zbWl0dGVyID0gZW52aXJvbm1lbnQuZ2xvYmFsLmZpcmV0b3VjaGludGVyZXN0CgkKCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmRlYnVnLmdldGluZm8gPSBmdW5jdGlvbihmLCBvcHRpb25zKQoJCWlmIHR5cGUob3B0aW9ucykgPT0gInN0cmluZyIgdGhlbgoJCQlvcHRpb25zID0gc3RyaW5nLmxvd2VyKG9wdGlvbnMpIAoJCWVsc2UKCQkJb3B0aW9ucyA9ICJzZmxudSIKCQllbmQKCQlsb2NhbCByZXN1bHQgPSB7fQoJCWZvciBpbmRleCA9IDEsICNvcHRpb25zIGRvCgkJCWxvY2FsIG9wdGlvbiA9IHN0cmluZy5zdWIob3B0aW9ucywgaW5kZXgsIGluZGV4KQoJCQlpZiAicyIgPT0gb3B0aW9uIHRoZW4KCQkJCWxvY2FsIHNob3J0X3NyYyA9IGRlYnVnLmluZm8oZiwgInMiKQoJCQkJcmVzdWx0LnNob3J0X3NyYyA9IHNob3J0X3NyYwoJCQkJcmVzdWx0LnNvdXJjZSA9ICI9IiAuLiBzaG9ydF9zcmMKCQkJCXJlc3VsdC53aGF0ID0gaWYgc2hvcnRfc3JjID09ICJbQ10iIHRoZW4gIkMiIGVsc2UgIkx1YSIKCQkJZWxzZWlmICJmIiA9PSBvcHRpb24gdGhlbgoJCQkJcmVzdWx0LmZ1bmMgPSBkZWJ1Zy5pbmZvKGYsICJmIikKCQkJZWxzZWlmICJsIiA9PSBvcHRpb24gdGhlbgoJCQkJcmVzdWx0LmN1cnJlbnRsaW5lID0gZGVidWcuaW5mbyhmLCAibCIpCgkJCWVsc2VpZiAibiIgPT0gb3B0aW9uIHRoZW4KCQkJCXJlc3VsdC5uYW1lID0gZGVidWcuaW5mbyhmLCAibiIpCgkJCWVsc2VpZiAidSIgPT0gb3B0aW9uIG9yIG9wdGlvbiA9PSAiYSIgdGhlbgoJCQkJbG9jYWwgbnVtcGFyYW1zLCBpc192YXJhcmcgPSBkZWJ1Zy5pbmZvKGYsICJhIikKCQkJCXJlc3VsdC5udW1wYXJhbXMgPSBudW1wYXJhbXMKCQkJCXJlc3VsdC5pc192YXJhcmcgPSBpZiBpc192YXJhcmcgdGhlbiAxIGVsc2UgMAoJCQkJaWYgInUiID09IG9wdGlvbiB0aGVuCgkJCQkJcmVzdWx0Lm51cHMgPSAtMQoJCQkJZW5kCgkJCWVuZAoJCWVuZAoJCXJldHVybiByZXN1bHQKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5sejRjb21wcmVzcyA9IGZ1bmN0aW9uKHN0cikKCQlsb2NhbCBjb21wcmVzc2VkID0gbHo0LmNvbXByZXNzKCBzdHIgKSAKCgkJcmV0dXJuIGNvbXByZXNzZWQKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5sejRkZWNvbXByZXNzID0gZnVuY3Rpb24obHo0ZGF0YSkKCQlsb2NhbCBkZWNvbXByZXNzZWQgPSBsejQuZGVjb21wcmVzcyggbHo0ZGF0YSApIAoJCXJldHVybiBkZWNvbXByZXNzZWQKCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5yZXF1ZXN0ID0gZnVuY3Rpb24oT3B0aW9ucykKCQlhc3NlcnQodHlwZShPcHRpb25zKSA9PSAndGFibGUnLCAnQXJndW1lbnQgIzEgdG8gXCdyZXF1ZXN0XCcgbXVzdCBiZSBhIHRhYmxlLCBnb3QgJyAuLiB0eXBlb2YoT3B0aW9ucykpCgkJaWYgdHlwZW9mKHNjcmlwdCkgPT0gJ0luc3RhbmNlJyBhbmQgc2NyaXB0LkNsYXNzTmFtZSA9PSAnU2NyaXB0JyB0aGVuCgkJCXJldHVybiBIdHRwU2VydmljZTpSZXF1ZXN0QXN5bmMoT3B0aW9ucykKCQllbmQKCQlsb2NhbCBUaW1lb3V0LCBEb25lLCBUaW1lID0gNSwgZmFsc2UsIDAKCQlsb2NhbCBSZXR1cm4gPSB7CgkJCVN1Y2Nlc3MgPSBmYWxzZSwKCQkJU3RhdHVzQ29kZSA9IDQwOCwKCQkJU3RhdHVzTWVzc2FnZSA9ICdSZXF1ZXN0IFRpbWVvdXQnLAoJCQlIZWFkZXJzID0ge30sCgkJCUJvZHkgPSAnJwoJCX0KCQlsb2NhbCBmdW5jdGlvbiBDYWxsYmFjayhTdWNjZXNzLCBSZXNwb25zZSkKCQkJRG9uZSA9IHRydWUKCQkJUmV0dXJuLlN1Y2Nlc3MgPSBTdWNjZXNzCgkJCVJldHVybi5TdGF0dXNDb2RlID0gUmVzcG9uc2UuU3RhdHVzQ29kZQoJCQlSZXR1cm4uU3RhdHVzTWVzc2FnZSA9IFJlc3BvbnNlLlN0YXR1c01lc3NhZ2UKCQkJUmV0dXJuLkhlYWRlcnMgPSBSZXNwb25zZS5IZWFkZXJzCgkJCVJldHVybi5Cb2R5ID0gUmVzcG9uc2UuQm9keQoJCWVuZAoJCUh0dHBTZXJ2aWNlOlJlcXVlc3RJbnRlcm5hbChPcHRpb25zKTpTdGFydChDYWxsYmFjaykKCQl3aGlsZSBub3QgRG9uZSBhbmQgVGltZSA8IFRpbWVvdXQgZG8gLS0gcHJvYmFibHkgYSBiYWQgYXBwcm9hY2g/CgkJCVRpbWUgPSBUaW1lICsgLjEKCQkJdGFzay53YWl0KC4xKQoJCWVuZAoJCXJldHVybiBSZXR1cm4KCWVuZAoKCWVudmlyb25tZW50Lmdsb2JhbC5odHRwX3JlcXVlc3QgPSBlbnZpcm9ubWVudC5nbG9iYWwucmVxdWVzdAoJZW52aXJvbm1lbnQuZ2xvYmFsLmh0dHAucmVxdWVzdCA9IGVudmlyb25tZW50Lmdsb2JhbC5yZXF1ZXN0CgllbnZpcm9ubWVudC5nbG9iYWwuc3luLnJlcXVlc3QgPSBlbnZpcm9ubWVudC5nbG9iYWwucmVxdWVzdAoJZW52aXJvbm1lbnQuZ2xvYmFsLmZsdXh1cy5yZXF1ZXN0ID0gZW52aXJvbm1lbnQuZ2xvYmFsLnJlcXVlc3QKCWVudmlyb25tZW50Lmdsb2JhbC5odHRwcmVxdWVzdCA9IGVudmlyb25tZW50Lmdsb2JhbC5yZXF1ZXN0CgoJbG9jYWwgcGF0dGVybnMgPSB7CgkJeyBwYXR0ZXJuID0gJygldyspJXMqJSs9JXMqKCV3KyknLCBmb3JtYXQgPSAiJXMgPSAlcyArICVzIiB9LAoJCXsgcGF0dGVybiA9ICcoJXcrKSVzKiUtPSVzKigldyspJywgZm9ybWF0ID0gIiVzID0gJXMgLSAlcyIgfSwKCQl7IHBhdHRlcm4gPSAnKCV3KyklcyolKj0lcyooJXcrKScsIGZvcm1hdCA9ICIlcyA9ICVzICogJXMiIH0sCgkJeyBwYXR0ZXJuID0gJygldyspJXMqLz0lcyooJXcrKScsIGZvcm1hdCA9ICIlcyA9ICVzIC8gJXMiIH0KCX0KCWxvY2FsIHBhdHRlcm5zMiA9IHsKCQl7IHBhdHRlcm4gPSAnZm9yJXMrKCV3KyklcyosJXMqKCV3KyklcyppbiVzKigldyspJXMqZG8nLCBmb3JtYXQgPSAiZm9yICVzLCAlcyBpbiBwYWlycyglcykgZG8iIH0KCX0KCglsb2NhbCBmdW5jdGlvbiBUb1BhaXJzTG9vcChjb2RlKQoJCWZvciBfLCBwIGluIGlwYWlycyhwYXR0ZXJuczIpIGRvCgkJCWNvZGUgPSBjb2RlOmdzdWIocC5wYXR0ZXJuLCBmdW5jdGlvbih2YXIxLCB2YXIyLCB0YmwpCgkJCQlyZXR1cm4gcC5mb3JtYXQ6Zm9ybWF0KHZhcjEsIHZhcjIsIHRibCkKCQkJZW5kKQoJCWVuZAoJCXJldHVybiBjb2RlCgllbmQKCWxvY2FsIGZ1bmN0aW9uIHRvbHVhdShjb2RlKQoJCWZvciBfLCBwIGluIGlwYWlycyhwYXR0ZXJucykgZG8KCQkJY29kZSA9IGNvZGU6Z3N1YihwLnBhdHRlcm4sIGZ1bmN0aW9uKHZhciwgdmFsdWUpCgkJCQlyZXR1cm4gcC5mb3JtYXQ6Zm9ybWF0KHZhciwgdmFyLCB2YWx1ZSkKCQkJZW5kKQoJCWVuZAoJCWNvZGUgPSBUb1BhaXJzTG9vcChjb2RlKQoJCXJldHVybiBjb2RlCgllbmQKCgllbnZpcm9ubWVudC5nbG9iYWwuY2xvbmVmdW5jdGlvbiA9IGZ1bmN0aW9uKGZuYykKCQlyZXR1cm4gZnVuY3Rpb24oLi4uKSByZXR1cm4gZm5jKC4uLikgZW5kCgllbmQKCgllbnZpcm9ubWVudC5nbG9iYWwuaXNleGVjdXRvcmNsb3N1cmUgPSBmdW5jdGlvbihjbG9zdXJlKQoJCWlmIGNsb3N1cmUgPT0gcHJpbnQgdGhlbgoJCQlyZXR1cm4gZmFsc2UKCQllbmQKCQlpZiB0YWJsZS5maW5kKGVudmlyb25tZW50Lmdsb2JhbC5nZXRyZW52KCksIGNsb3N1cmUpIHRoZW4KCQkJcmV0dXJuIGZhbHNlCgkJZWxzZQoJCQlyZXR1cm4gdHJ1ZQoJCWVuZAoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuY2hlY2tjbG9zdXJlID0gZW52aXJvbm1lbnQuZ2xvYmFsLmlzZXhlY3V0b3JjbG9zdXJlCgllbnZpcm9ubWVudC5nbG9iYWwuaXNvdXJjbG9zdXJlID0gZW52aXJvbm1lbnQuZ2xvYmFsLmlzZXhlY3V0b3JjbG9zdXJlCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmNoZWNrY2FsbGVyID0gZnVuY3Rpb24oKQoJCWxvY2FsIGluZm8gPSBkZWJ1Zy5pbmZvKGdldGdlbnYsICdzbG5hZicpCgkJcmV0dXJuIGRlYnVnLmluZm8oMSwgJ3NsbmFmJyk9PWluZm8KCWVuZAoKCgllbnZpcm9ubWVudC5nbG9iYWwuaXNjY2xvc3VyZSA9IGZ1bmN0aW9uKGZ1bmMpCgkJcmV0dXJuIGRlYnVnLmluZm8oZnVuYywgInMiKSA9PSAiW0NdIgoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuaXNsY2xvc3VyZSA9IGZ1bmN0aW9uKGZ1bmMpCgkJcmV0dXJuIGRlYnVnLmluZm8oZnVuYywgInMiKSB+PSAiW0NdIgoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwubmV3bGNsb3N1cmUgPSBmdW5jdGlvbihmdW5jKQoJCXJldHVybiBmdW5jdGlvbihidWxsKQoJCQlyZXR1cm4gZnVuYyhidWxsKQoJCWVuZAoJZW5kCgoJZW52aXJvbm1lbnQuZ2xvYmFsLl9fVEVTVF9HTE9CQUwgPSB0cnVlCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmxvYWRzdHJpbmcgPSBmdW5jdGlvbihzb3VyY2UpCgkJYXNzZXJ0KHR5cGUoc291cmNlKSA9PSAic3RyaW5nIiwgIkludmFsaWQgYXJndW1lbnQgIzE6IEV4cGVjdGVkIHN0cmluZywgZ290ICIuLiB0eXBlKHNvdXJjZSkpCgkJbG9jYWwgczEsIHZhbDEgPSBwY2FsbChmdW5jdGlvbigpCgkJCXJldHVybiBsb2FkKCJsb2NhbCB2MT0xNTt2MSs9MTtyZXR1cm4gdjEiLCBnZXRmZW52KCkpKCkKCQllbmQpCgkJbG9jYWwgczIsIHZhbDIgPSBwY2FsbChmdW5jdGlvbigpCgkJCXJldHVybiBsb2FkKCdsb2NhbCB2MT17ImEifTtmb3IgaSwgdiBpbiB2MSBkbyByZXR1cm4gdiBlbmQnLCBnZXRmZW52KCkpKCkKCQllbmQpCgoJCQoJCWxvY2FsIEdFTlYgPSBzZXRtZXRhdGFibGUoewoJCQlfRyA9IHt9LAoJCQlzaGFyZWQgPSB7fSwKCQkJZ2FtZSA9IGdhbWUsCgkJfSwgewoJCQlfX2luZGV4ID0gZnVuY3Rpb24oc2VsZiwgaW5kZXgpCgkJCQlyZXR1cm4gcmF3Z2V0KHNlbGYsIGluZGV4KSBvciBnZXRmZW52KClbaW5kZXhdCgkJCWVuZCwKCQkJX19uZXdpbmRleCA9IGZ1bmN0aW9uKHNlbGYsIGluZGV4LCB2YWx1ZSkKCQkJCXJhd3NldChzZWxmLCBpbmRleCwgdmFsdWUpCgkJCWVuZCwKCQl9KQoJCS0tIGNsaWNrIG9uIGxpdmUgc2hhcmUgdGhlbiBteSBuYW1lIHRoZW4gdW5mb2xsb3cKCgkJbG9jYWwgX19HRVRfRkFLRV9FTlYgPSBmdW5jdGlvbigpCgkJCWxvY2FsIEZBS0VfU0NSSVBUID0gSW5zdGFuY2UubmV3KCJMb2NhbFNjcmlwdCIpCgkJCUZBS0VfU0NSSVBULk5hbWUgPSAieXVycmd1cnRlbiIKCgkJCXJldHVybiBzZXRtZXRhdGFibGUoeyBzY3JpcHQgPSBGQUtFX1NDUklQVCB9LCB7IF9fbWV0YXRhYmxlID0gZ2V0bWV0YXRhYmxlKGdhbWUpLCBfX2luZGV4ID0gR0VOViB9KQoJCWVuZAoKCQlmb3IgaSwgZiBpbiBwYWlycyhzYW5kYm94LmVudmlyb25tZW50Lmdsb2JhbCkgZG8gCgkJCUdFTlZbaV0gPSBmCgkJCWdldGZlbnYoMClbaV0gPSBmCgkJZW5kCgoJCWlmIHZhbDEgfj0gMTYgYW5kIHZhbDIgfj0gImEiIHRoZW4KCQkJcmV0dXJuIG9sZCh0b2x1YXUoc291cmNlKSwgX19HRVRfRkFLRV9FTlYoKSkKCQllbHNlCgkJCXJldHVybiBvbGQoc291cmNlLCBfX0dFVF9GQUtFX0VOVigpKQoJCWVuZAoJZW5kCgoJLS1DcnlwdCBsaWIKCS0tIHRoYXRzIGluIHRoZSBjcnlwdCBsaWIgbG9sCgktLSBwb29raWUgd2UgaGF2ZSBiYXNlNjQgYWxyZWFkeQoJZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0LmhleC5lbmNvZGUgPSBmdW5jdGlvbih0eHQpCgkJdHh0ID0gdG9zdHJpbmcodHh0KQoJCWxvY2FsIGhleCA9ICcnCgkJZm9yIGkgPSAxLCAjdHh0IGRvCgkJCWhleCA9IGhleCAuLiBzdHJpbmcuZm9ybWF0KCIlMDJ4Iiwgc3RyaW5nLmJ5dGUodHh0LCBpKSkKCQllbmQKCQlyZXR1cm4gaGV4CgllbmQKCgllbnZpcm9ubWVudC5nbG9iYWwuY3J5cHQuaGV4LmRlY29kZSA9IGZ1bmN0aW9uKGhleCkKCQloZXggPSB0b3N0cmluZyhoZXgpCgkJbG9jYWwgdGV4dCA9ICIiCgkJZm9yIGkgPSAxLCAjaGV4LCAyIGRvCgkJCWxvY2FsIGJ5dGVfc3RyID0gc3RyaW5nLnN1YihoZXgsIGksIGkrMSkKCQkJbG9jYWwgYnl0ZSA9IHRvbnVtYmVyKGJ5dGVfc3RyLCAxNikKCQkJdGV4dCA9IHRleHQgLi4gc3RyaW5nLmNoYXIoYnl0ZSkKCQllbmQKCQlyZXR1cm4gdGV4dAoJZW5kCgoJZW52aXJvbm1lbnQuZ2xvYmFsLmNyeXB0LnVybC5lbmNvZGUgPSBmdW5jdGlvbihhKQoJCXJldHVybiBnYW1lOkdldFNlcnZpY2UoIkh0dHBTZXJ2aWNlIik6VXJsRW5jb2RlKGEpCgllbmQKCgllbnZpcm9ubWVudC5nbG9iYWwuZ2V0bG9jYWxwbGF5ZXIgPSBmdW5jdGlvbigpCgkJcmV0dXJuIGdldHBsYXllcnMoKVsiTG9jYWxQbGF5ZXIiXQoJZW5kCgllbnZpcm9ubWVudC5nbG9iYWwuY3J5cHQudXJsLmRlY29kZSA9IGZ1bmN0aW9uKGEpCgkJYSA9IHRvc3RyaW5nKGEpCgkJYSA9IHN0cmluZy5nc3ViKGEsICIrIiwgIiAiKQoJCWEgPSBzdHJpbmcuZ3N1YihhLCAiJSUoJXgleCkiLCBmdW5jdGlvbihoZXgpCgkJCXJldHVybiBzdHJpbmcuY2hhcih0b251bWJlcihoZXgsIDE2KSkKCQllbmQpCgkJYSA9IHN0cmluZy5nc3ViKGEsICJcclxuIiwgIlxuIikKCQlyZXR1cm4gYQoJZW5kCgoJLS15ZWFoCgktLSBjYW4gaSB0ZXN0PwoJLS0gawoJLS0gZmF2b3VyaXRlIGZ1bmN0aW9uIC0+IHRhYmxlLmNsb25lIAoJLS1mciBpdHMgb3AgaW1hIGZpeCBnYW1lOkh0dHBnZXQgbm93CgoJLS0gYWZ0ZXIgaSBleGVjdXRlIG9rCgktLWtrCgktLSBpbmplY3RlZAoJLS0gYnJ1aCBzbXRoIGNhdXNlcyBtZW1sZWFrCgktLSBpZiBpIHJ1biB1bmMgdHdpY2UgaXQgY3Jhc2ggCgktLSBicnVoCgoJY2xvbmVkX2Vudmlyb25tZW50ID0gdGFibGUuY2xvbmUoZW52aXJvbm1lbnQpCglmb3IgZW52X25hbWUsIGVudiBpbiBlbnZpcm9ubWVudCBkbwoJCWNsb25lZF9lbnZpcm9ubWVudFtlbnZfbmFtZV0gPSB0YWJsZS5jbG9uZShlbnYpIC0tICogV2UgZG9uJ3QgbmVlZCB0byBkbyBhIGRlZXAgY2xvbmUgYXMgbG9uZyBhcyBldmVyeSB0YWJsZSBpbiB0aGUgZ2VudiAoZ2xvYmFsKSBlbnZpcm9ubWVudCBpcyBmcm96ZW4KCWVuZAoKCXNlbGYuZW52aXJvbm1lbnQgPSBjbG9uZWRfZW52aXJvbm1lbnQgLS0gRGlzY29ubmVjdHMgdXNlcidzIGVudmlyb25tZW50IGZyb20gb3VyIGluaXQgbW9kdWxlJ3MgZW52aXJvbm1lbnQgc28gdGhhdCB1c2VycyBjYW5ub3QgbWVzcyB3aXRoIGN1c3RvbSBmdW5jdGlvbnMgdGhhdCBvdGhlciBjdXN0b20gZnVuY3Rpb25zIHJlbHkgb24KCXNlbGYuaGlkZGVuX2VudiA9IGhpZGRlbl9lbnYKZW5kCgoKbG9jYWwgZnVuY3Rpb24gR2l2ZU93bkdsb2JhbHMoRnVuYywgU2NyaXB0KQoJLS0gRml4IGZvciB0aGlzIGVkaXQgb2YgZGV4IGJlaW5nIHBvb3JseSBtYWRlCgktLSBJIChBbGV4KSB3b3VsZCBsaWtlIHRvIGNvbW1lbW9yYXRlIHdob2V2ZXIgYWRkZWQgdGhpcyBkZXggaW4gc29tZWhvdyBmaW5kaW5nIHRoZSB3b3JzdCBkZXggdG8gZXZlciBleGlzdAoJbG9jYWwgRmVudiwgUmVhbEZlbnYsIEZlbnZNdCA9IHt9LCB7CgkJc2NyaXB0ID0gU2NyaXB0LAoJCWdldHVwdmFsdWUgPSBmdW5jdGlvbihhLCBiKQoJCQlyZXR1cm4gbmlsIC0tIGZvcmNlIGl0IHRvIHVzZSBnbG9iYWxzCgkJZW5kLAoJCWdldHJlZyA9IGZ1bmN0aW9uKCkgLS0gSXQgbG9vcHMgcmVnaXN0cnkgZm9yIHNvbWUgaWRpb3RpYyByZWFzb24gc28gc3RvcCBpdCBmcm9tIGRvaW5nIHRoYXQgYW5kIGp1c3QgdXNlIGEgZ2xvYmFsCgkJCXJldHVybiB7fSAtLSBmb3JjZSBpdCB0byB1c2UgZ2xvYmFscwoJCWVuZCwKCQlpZGVudGlmeWV4ZWN1dG9yID0gZnVuY3Rpb24oKQoJCQlyZXR1cm4gIkJldHRlckluY29nbml0byIsIGJpbmNvZ3ZlcigpCgkJZW5kCgl9LCB7fQoJRmVudk10Ll9faW5kZXggPSBmdW5jdGlvbihhLGIpCgkJcmV0dXJuIFJlYWxGZW52W2JdID09IG5pbCBhbmQgc2FuZGJveC5lbnZpcm9ubWVudC5nbG9iYWwuZ2V0Z2VudigpW2JdIG9yIFJlYWxGZW52W2JdCgllbmQKCUZlbnZNdC5fX25ld2luZGV4ID0gZnVuY3Rpb24oYSwgYiwgYykKCQlpZiBSZWFsRmVudltiXSA9PSBuaWwgdGhlbiAKCQkJc2FuZGJveC5lbnZpcm9ubWVudC5nbG9iYWwuZ2V0Z2VudigpW2JdID0gYyAKCQllbHNlIAoJCQlSZWFsRmVudltiXSA9IGMgCgkJZW5kCgllbmQKCXNldG1ldGF0YWJsZShGZW52LCBGZW52TXQpCglwY2FsbChzZXRmZW52LCBGdW5jLCBGZW52KQoJcmV0dXJuIEZ1bmMKZW5kCgoKLS0gdGhhbmsgdG8gemVuYyBmb3IgdGhvc2UgYW1hemluZyBndWkgZnVuY3Rpb24gdGhhdCBpIHNraWRkZWQgLSBnb29kbWFuCgpsb2NhbCBndWkgPSB7fQoKCmZ1bmN0aW9uIGd1aTpDcmVhdGUoKQoJcGNhbGwoZnVuY3Rpb24oKQoJCWxvY2FsIF9zY3JpcHRfID0gc2NyaXB0CgkJaWYgX3NjcmlwdF8gdGhlbgoJCQlzY3JpcHQgPSBuaWwKCQkJX3NjcmlwdF8uUGFyZW50ID0gbmlsCgkJCV9zY3JpcHRfID0gbmlsCgkJCWdldGZlbnYoKS5zY3JpcHQgPSBuaWwKCQllbmQKCWVuZCkKCQoJCgktLT8gU2VydmljZXMKCQoJbG9jYWwgUGxheWVycyA9IGdhbWU6R2V0U2VydmljZSgiUGxheWVycyIpCglsb2NhbCBUd2VlblNlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoIlR3ZWVuU2VydmljZSIpCglsb2NhbCBVc2VySW5wdXRTZXJ2aWNlID0gZ2FtZTpHZXRTZXJ2aWNlKCJVc2VySW5wdXRTZXJ2aWNlIikKCWxvY2FsIENvcmVHdWkgPSBnYW1lOkdldFNlcnZpY2UoIkNvcmVHdWkiKQoJCgkKCS0tPyBDb25zdGFudHMKCQoJbG9jYWwgUGxheWVyID0gUGxheWVycy5Mb2NhbFBsYXllcgoJCglsb2NhbCBFeGVjdXRvclR3ZWVuSW5mbyA9IFR3ZWVuSW5mby5uZXcoMC4wNzUpCglsb2NhbCBTdHJva2VUd2VlbkluZm8gPSBUd2VlbkluZm8ubmV3KDAuMSwgRW51bS5FYXNpbmdTdHlsZS5TaW5lLCBFbnVtLkVhc2luZ0RpcmVjdGlvbi5PdXQpCgkKCWxvY2FsIEJ1dHRvbkhvdmVyID0gQ29sb3IzLmZyb21SR0IoMTIwLCAxMjAsIDEyMCkKCWxvY2FsIEJ1dHRvbkRvd24gPSBDb2xvcjMuZnJvbVJHQigxNzAsIDE3MCwgMTcwKQoJCgkKCS0tPyBJbnN0YW5jZXMKCQoJbG9jYWwgRXhlY3V0b3IgPSBJbnN0YW5jZS5uZXcoIkNhbnZhc0dyb3VwIikKCWxvY2FsIFVJQ29ybmVyID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCglsb2NhbCBUaXRsZSA9IEluc3RhbmNlLm5ldygiVGV4dExhYmVsIikKCWxvY2FsIFVJQ29ybmVyXzIgPSBJbnN0YW5jZS5uZXcoIlVJQ29ybmVyIikKCWxvY2FsIEVkaXRvciA9IEluc3RhbmNlLm5ldygiRnJhbWUiKQoJbG9jYWwgQ29kZSA9IEluc3RhbmNlLm5ldygiU2Nyb2xsaW5nRnJhbWUiKQoJbG9jYWwgQ29udGVudCA9IEluc3RhbmNlLm5ldygiVGV4dEJveCIpCglsb2NhbCBVSVBhZGRpbmcgPSBJbnN0YW5jZS5uZXcoIlVJUGFkZGluZyIpCglsb2NhbCBCdXR0b25zID0gSW5zdGFuY2UubmV3KCJGcmFtZSIpCglsb2NhbCBVSUxpc3RMYXlvdXQgPSBJbnN0YW5jZS5uZXcoIlVJTGlzdExheW91dCIpCglsb2NhbCBFeGVjdXRlID0gSW5zdGFuY2UubmV3KCJUZXh0QnV0dG9uIikKCWxvY2FsIFVJU3Ryb2tlID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpCglsb2NhbCBVSUNvcm5lcl8zID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCglsb2NhbCBDbGVhciA9IEluc3RhbmNlLm5ldygiVGV4dEJ1dHRvbiIpCglsb2NhbCBVSVN0cm9rZV8yID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpCglsb2NhbCBVSUNvcm5lcl80ID0gSW5zdGFuY2UubmV3KCJVSUNvcm5lciIpCglsb2NhbCBVSVN0cm9rZV8zID0gSW5zdGFuY2UubmV3KCJVSVN0cm9rZSIpCgoJCgktLT8gRnVuY3Rpb25zCgkKCWxvY2FsIGZ1bmN0aW9uIFJhbmRvbVN0cmluZygpCgkJbG9jYWwgTGVuZ3RoID0gbWF0aC5yYW5kb20oMTEsIDIyKQoJCWxvY2FsIEFycmF5ID0ge30KCQlmb3IgSW5kZXggPSAxLCBMZW5ndGggZG8KCQkJQXJyYXlbSW5kZXhdID0gc3RyaW5nLmNoYXIobWF0aC5yYW5kb20oMzUsIDkxKSkKCQllbmQKCQlyZXR1cm4gdGFibGUuY29uY2F0KEFycmF5KQoJZW5kCgkKCWxvY2FsIGZ1bmN0aW9uIEF1dG9SZW5hbWUoT2JqZWN0KQoJCXdoaWxlIHRhc2sud2FpdCgpIGRvCgkJCWlmIHR5cGVvZihPYmplY3QpID09ICJJbnN0YW5jZSIgYW5kIE9iamVjdC5QYXJlbnQgdGhlbgoJCQkJT2JqZWN0Lk5hbWUgPSBSYW5kb21TdHJpbmcoKQoJCQllbHNlCgkJCQlicmVhawoJCQllbmQKCQllbmQKCWVuZAoJCglsb2NhbCBmdW5jdGlvbiBUd2VlbihPYmplY3QsIFR3ZWVuSW5mbywgUHJvcGVydGllcykKCQlpZiB0eXBlb2YoT2JqZWN0KSA9PSAiSW5zdGFuY2UiIGFuZCB0eXBlb2YoVHdlZW5JbmZvKSA9PSAiVHdlZW5JbmZvIiBhbmQgdHlwZShQcm9wZXJ0aWVzKSA9PSAidGFibGUiIHRoZW4KCQkJVHdlZW5TZXJ2aWNlOkNyZWF0ZShPYmplY3QsIFR3ZWVuSW5mbywgUHJvcGVydGllcyk6UGxheSgpCgkJZW5kCgllbmQKCQoJbG9jYWwgZnVuY3Rpb24gU21vb3RoRHJhZyhPYmplY3QpCgkJaWYgdHlwZShPYmplY3QpID09ICJ1c2VyZGF0YSIgdGhlbgoJCQlsb2NhbCBUb2dnbGUsIElucHV0LCBTdGFydCwgU3RhcnRQb3NpdGlvbgoJCQlsb2NhbCBmdW5jdGlvbiBVcGRhdGUoS2V5KQoJCQkJbG9jYWwgRGVsdGEgPSBLZXkuUG9zaXRpb24gLSBTdGFydAoJCQkJbG9jYWwgTmV3UG9zaXRpb24gPSBVRGltMi5uZXcoU3RhcnRQb3NpdGlvbi5YLlNjYWxlLCBTdGFydFBvc2l0aW9uLlguT2Zmc2V0ICsgRGVsdGEuWCwgU3RhcnRQb3NpdGlvbi5ZLlNjYWxlLCBTdGFydFBvc2l0aW9uLlkuT2Zmc2V0ICsgRGVsdGEuWSkKCQkJCVR3ZWVuKE9iamVjdCwgRXhlY3V0b3JUd2VlbkluZm8sIHtQb3NpdGlvbiA9IE5ld1Bvc2l0aW9ufSkKCQkJZW5kCgkJCU9iamVjdC5JbnB1dEJlZ2FuOkNvbm5lY3QoZnVuY3Rpb24oTmV3SW5wdXQpCgkJCQlpZiAoTmV3SW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VCdXR0b24xIG9yIE5ld0lucHV0LlVzZXJJbnB1dFR5cGUgPT0gRW51bS5Vc2VySW5wdXRUeXBlLlRvdWNoKSBhbmQgbm90IFVzZXJJbnB1dFNlcnZpY2U6R2V0Rm9jdXNlZFRleHRCb3goKSB0aGVuCgkJCQkJVG9nZ2xlID0gdHJ1ZQoJCQkJCVN0YXJ0ID0gTmV3SW5wdXQuUG9zaXRpb24KCQkJCQlTdGFydFBvc2l0aW9uID0gT2JqZWN0LlBvc2l0aW9uCgkJCQkJTmV3SW5wdXQuQ2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKCkKCQkJCQkJaWYgTmV3SW5wdXQuVXNlcklucHV0U3RhdGUgPT0gRW51bS5Vc2VySW5wdXRTdGF0ZS5FbmQgdGhlbgoJCQkJCQkJVG9nZ2xlID0gZmFsc2UKCQkJCQkJZW5kCgkJCQkJZW5kKQoJCQkJZW5kCgkJCWVuZCkKCQkJT2JqZWN0LklucHV0Q2hhbmdlZDpDb25uZWN0KGZ1bmN0aW9uKE5ld0lucHV0KQoJCQkJaWYgTmV3SW5wdXQuVXNlcklucHV0VHlwZSA9PSBFbnVtLlVzZXJJbnB1dFR5cGUuTW91c2VNb3ZlbWVudCBvciBOZXdJbnB1dC5Vc2VySW5wdXRUeXBlID09IEVudW0uVXNlcklucHV0VHlwZS5Ub3VjaCB0aGVuCgkJCQkJSW5wdXQgPSBOZXdJbnB1dAoJCQkJZW5kCgkJCWVuZCkKCQkJVXNlcklucHV0U2VydmljZS5JbnB1dENoYW5nZWQ6Q29ubmVjdChmdW5jdGlvbihOZXdJbnB1dCkKCQkJCWlmIE5ld0lucHV0ID09IElucHV0IGFuZCBUb2dnbGUgdGhlbgoJCQkJCVVwZGF0ZShOZXdJbnB1dCkKCQkJCWVuZAoJCQllbmQpCgkJZW5kCgllbmQKCQoJCglsb2NhbCBMdWFTdGF0ZSA9IHt9CgkKCWxvY2FsIGZ1bmN0aW9uIEV4ZWN1dGVDb2RlKHN0ciwgZW52KQoJCWlmIG5vdCBnZXRmZW52KCkuWmVuY1ZNIHRoZW4KCQkJZ2V0ZmVudigpLlplbmNWTSA9IHRydWUKCQllbmQKCQoJCWxvY2FsIGYsIHdyaXRlciwgYnVmZgoJCWxvY2FsIHJhbiA9IHhwY2FsbChmdW5jdGlvbigpCgkJCWxvY2FsIHppbyA9IGx1YVo6aW5pdChsdWFaOm1ha2VfZ2V0UyhzdHIpLCBuaWwpCgkJCWxvY2FsIGZ1bmMgPSBsdWFZOnBhcnNlcihMdWFTdGF0ZSwgemlvLCBuaWwsICJaZW5jVk0iKQoJCQl3cml0ZXIsIGJ1ZmYgPSBsdWFVOm1ha2Vfc2V0UygpCgkJCWx1YVU6ZHVtcChMdWFTdGF0ZSwgZnVuYywgd3JpdGVyLCBidWZmKQoJCQlmID0gbG9hZF9sdWFfZnVuYyhidWZmLmRhdGEsIGVudiBvciBnZXRmZW52KCkpCgkJZW5kLCBmdW5jdGlvbihlcnIpCgkJCXJldHVybiB3YXJuKGVycikKCQllbmQpCgkKCQlpZiByYW4gdGhlbgoJCQlyZXR1cm4gZiwgYnVmZiBhbmQgYnVmZi5kYXRhCgkJZW5kCgllbmQKCQoJCgktLT8gQ29uZmlndXJhdGlvbgoJCgl0YXNrLnNwYXduKEF1dG9SZW5hbWUsIEV4ZWN1dG9yKQoJeHBjYWxsKGZ1bmN0aW9uKCkKCQlFeGVjdXRvci5QYXJlbnQgPSBDb3JlR3VpOldhaXRGb3JDaGlsZCgiUm9ibG94R3VpIiwgbWF0aC5odWdlKQoJZW5kLCBmdW5jdGlvbigpCgkJbG9jYWwgWmVuYyA9IEluc3RhbmNlLm5ldygiU2NyZWVuR3VpIikKCQlzYW5kYm94LmVudmlyb25tZW50Lmdsb2JhbC5zeW4ucHJvdGVjdF9ndWkoWmVuYykKCQl0YXNrLnNwYXduKEF1dG9SZW5hbWUsIFplbmMpCgkJWmVuYy5aSW5kZXhCZWhhdmlvciA9IEVudW0uWkluZGV4QmVoYXZpb3IuU2libGluZwoJCVplbmMuRGlzcGxheU9yZGVyID0gOWU4CgkJWmVuYy5JZ25vcmVHdWlJbnNldCA9IHRydWUKCQlaZW5jLlBhcmVudCA9IFBsYXllcjpXYWl0Rm9yQ2hpbGQoIlBsYXllckd1aSIsIG1hdGguaHVnZSkKCQlFeGVjdXRvci5QYXJlbnQgPSBaZW5jCgllbmQpCgkKCUV4ZWN1dG9yLkFuY2hvclBvaW50ID0gVmVjdG9yMi5uZXcoMC41LCAwLjUpCglFeGVjdXRvci5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoNjAsIDYwLCA2MCkKCUV4ZWN1dG9yLkJvcmRlclNpemVQaXhlbCA9IDAKCUV4ZWN1dG9yLlBvc2l0aW9uID0gVURpbTIubmV3KDAuNSwgMCwgMC41LCAwKQoJRXhlY3V0b3IuU2l6ZSA9IFVEaW0yLm5ldygwLCA1MDAsIDAsIDMwMCkKCQoJdGFzay5zcGF3bihBdXRvUmVuYW1lLCBVSUNvcm5lcikKCVVJQ29ybmVyLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpCglVSUNvcm5lci5QYXJlbnQgPSBFeGVjdXRvcgoJCgl0YXNrLnNwYXduKEF1dG9SZW5hbWUsIFRpdGxlKQoJVGl0bGUuQmFja2dyb3VuZENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDUwLCA1MCwgNTApCglUaXRsZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCglUaXRsZS5TaXplID0gVURpbTIubmV3KDEsIDAsIDAsIDMwKQoJVGl0bGUuWkluZGV4ID0gMgoJVGl0bGUuRm9udCA9IEVudW0uRm9udC5Hb3RoYW0KCVRpdGxlLlRleHQgPSAiQmV0dGVySW5jb2duaXRvICIuLiBzYW5kYm94LmVudmlyb25tZW50Lmdsb2JhbC5iaW5jb2d2ZXIoKQoJVGl0bGUuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCglUaXRsZS5UZXh0U2l6ZSA9IDE0CglUaXRsZS5QYXJlbnQgPSBFeGVjdXRvcgoJCgl0YXNrLnNwYXduKEF1dG9SZW5hbWUsIFVJQ29ybmVyXzIpCglVSUNvcm5lcl8yLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpCglVSUNvcm5lcl8yLlBhcmVudCA9IFRpdGxlCgkKCXRhc2suc3Bhd24oQXV0b1JlbmFtZSwgRWRpdG9yKQoJRWRpdG9yLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig1MCwgNTAsIDUwKQoJRWRpdG9yLkJvcmRlclNpemVQaXhlbCA9IDAKCUVkaXRvci5DbGlwc0Rlc2NlbmRhbnRzID0gdHJ1ZQoJRWRpdG9yLlBvc2l0aW9uID0gVURpbTIubmV3KDAsIDEwLCAwLCA0MCkKCUVkaXRvci5TaXplID0gVURpbTIubmV3KDEsIC0yMCwgMSwgLTkwKQoJRWRpdG9yLlBhcmVudCA9IEV4ZWN1dG9yCgkKCXRhc2suc3Bhd24oQXV0b1JlbmFtZSwgQ29kZSkKCUNvZGUuQWN0aXZlID0gdHJ1ZQoJQ29kZS5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKCUNvZGUuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCUNvZGUuQm9yZGVyU2l6ZVBpeGVsID0gMAoJQ29kZS5TaXplID0gVURpbTIubmV3KDEuMDQ1ODMzMzUsIC0yMiwgMSwgMCkKCUNvZGUuQXV0b21hdGljQ2FudmFzU2l6ZSA9IEVudW0uQXV0b21hdGljU2l6ZS5YWQoJQ29kZS5DYW52YXNTaXplID0gVURpbTIubmV3KDAsIDAsIDAsIDApCglDb2RlLlNjcm9sbEJhclRoaWNrbmVzcyA9IDYKCUNvZGUuUGFyZW50ID0gRWRpdG9yCgkKCXRhc2suc3Bhd24oQXV0b1JlbmFtZSwgQ29udGVudCkKCUNvbnRlbnQuQXV0b21hdGljU2l6ZSA9IEVudW0uQXV0b21hdGljU2l6ZS5YWQoJQ29udGVudC5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKCUNvbnRlbnQuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCUNvbnRlbnQuQm9yZGVyU2l6ZVBpeGVsID0gMAoJQ29udGVudC5TaXplID0gVURpbTIubmV3KDEsIDAsIDEsIDApCglDb250ZW50LkNsZWFyVGV4dE9uRm9jdXMgPSBmYWxzZQoJQ29udGVudC5Gb250ID0gRW51bS5Gb250LkNvZGUKCUNvbnRlbnQuTXVsdGlMaW5lID0gdHJ1ZQoJQ29udGVudC5UZXh0ID0gIi0tIGkgYWxsb3cgZWRnZSIKCUNvbnRlbnQuUGxhY2Vob2xkZXJUZXh0ID0gIiIKCUNvbnRlbnQuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCglDb250ZW50LlRleHRTaXplID0gMTQKCUNvbnRlbnQuVGV4dFhBbGlnbm1lbnQgPSBFbnVtLlRleHRYQWxpZ25tZW50LkxlZnQKCUNvbnRlbnQuVGV4dFlBbGlnbm1lbnQgPSBFbnVtLlRleHRZQWxpZ25tZW50LlRvcAoJQ29udGVudC5QYXJlbnQgPSBDb2RlCgkKCXRhc2suc3Bhd24oQXV0b1JlbmFtZSwgVUlQYWRkaW5nKQoJVUlQYWRkaW5nLlBhZGRpbmdMZWZ0ID0gVURpbS5uZXcoMCwgOCkKCVVJUGFkZGluZy5QYWRkaW5nVG9wID0gVURpbS5uZXcoMCwgNSkKCVVJUGFkZGluZy5QYXJlbnQgPSBDb250ZW50CgkKCXRhc2suc3Bhd24oQXV0b1JlbmFtZSwgQnV0dG9ucykKCUJ1dHRvbnMuQW5jaG9yUG9pbnQgPSBWZWN0b3IyLm5ldygwLCAxKQoJQnV0dG9ucy5CYWNrZ3JvdW5kQ29sb3IzID0gQ29sb3IzLmZyb21SR0IoMjU1LCAyNTUsIDI1NSkKCUJ1dHRvbnMuQmFja2dyb3VuZFRyYW5zcGFyZW5jeSA9IDEKCUJ1dHRvbnMuQm9yZGVyU2l6ZVBpeGVsID0gMAoJQnV0dG9ucy5Qb3NpdGlvbiA9IFVEaW0yLm5ldygwLCAxMCwgMSwgLTEwKQoJQnV0dG9ucy5TaXplID0gVURpbTIubmV3KDEsIC0yMCwgMCwgMzApCglCdXR0b25zLlBhcmVudCA9IEV4ZWN1dG9yCgoJCQoJdGFzay5zcGF3bihBdXRvUmVuYW1lLCBVSUxpc3RMYXlvdXQpCglVSUxpc3RMYXlvdXQuRmlsbERpcmVjdGlvbiA9IEVudW0uRmlsbERpcmVjdGlvbi5Ib3Jpem9udGFsCglVSUxpc3RMYXlvdXQuU29ydE9yZGVyID0gRW51bS5Tb3J0T3JkZXIuTGF5b3V0T3JkZXIKCVVJTGlzdExheW91dC5QYWRkaW5nID0gVURpbS5uZXcoMCwgMTApCglVSUxpc3RMYXlvdXQuUGFyZW50ID0gQnV0dG9ucwoJCgl0YXNrLnNwYXduKEF1dG9SZW5hbWUsIEV4ZWN1dGUpCglFeGVjdXRlLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig1MCwgNTAsIDUwKQoJRXhlY3V0ZS5Cb3JkZXJTaXplUGl4ZWwgPSAwCglFeGVjdXRlLkxheW91dE9yZGVyID0gMQoJRXhlY3V0ZS5TaXplID0gVURpbTIubmV3KDAsIDgwLCAxLCAwKQoJRXhlY3V0ZS5BdXRvQnV0dG9uQ29sb3IgPSBmYWxzZQoJRXhlY3V0ZS5Gb250ID0gRW51bS5Gb250LkdvdGhhbQoJRXhlY3V0ZS5UZXh0ID0gIkV4ZWN1dGUiCglFeGVjdXRlLlRleHRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQigyNTUsIDI1NSwgMjU1KQoJRXhlY3V0ZS5UZXh0U2l6ZSA9IDE0CglFeGVjdXRlLlBhcmVudCA9IEJ1dHRvbnMKCQoJdGFzay5zcGF3bihBdXRvUmVuYW1lLCBVSVN0cm9rZSkKCVVJU3Ryb2tlLkFwcGx5U3Ryb2tlTW9kZSA9IEVudW0uQXBwbHlTdHJva2VNb2RlLkJvcmRlcgoJVUlTdHJva2UuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigxNTAsIDE1MCwgMTUwKQoJVUlTdHJva2UuVHJhbnNwYXJlbmN5ID0gMQoJVUlTdHJva2UuUGFyZW50ID0gRXhlY3V0ZQoJCgl0YXNrLnNwYXduKEF1dG9SZW5hbWUsIFVJQ29ybmVyXzMpCglVSUNvcm5lcl8zLkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpCglVSUNvcm5lcl8zLlBhcmVudCA9IEV4ZWN1dGUKCQoJdGFzay5zcGF3bihBdXRvUmVuYW1lLCBDbGVhcikKCUNsZWFyLkJhY2tncm91bmRDb2xvcjMgPSBDb2xvcjMuZnJvbVJHQig1MCwgNTAsIDUwKQoJQ2xlYXIuQm9yZGVyU2l6ZVBpeGVsID0gMAoJQ2xlYXIuTGF5b3V0T3JkZXIgPSAyCglDbGVhci5TaXplID0gVURpbTIubmV3KDAsIDgwLCAxLCAwKQoJQ2xlYXIuQXV0b0J1dHRvbkNvbG9yID0gZmFsc2UKCUNsZWFyLkZvbnQgPSBFbnVtLkZvbnQuR290aGFtCglDbGVhci5UZXh0ID0gIkNsZWFyIgoJQ2xlYXIuVGV4dENvbG9yMyA9IENvbG9yMy5mcm9tUkdCKDI1NSwgMjU1LCAyNTUpCglDbGVhci5UZXh0U2l6ZSA9IDE0CglDbGVhci5QYXJlbnQgPSBCdXR0b25zCgkKCXRhc2suc3Bhd24oQXV0b1JlbmFtZSwgVUlTdHJva2VfMikKCVVJU3Ryb2tlXzIuQXBwbHlTdHJva2VNb2RlID0gRW51bS5BcHBseVN0cm9rZU1vZGUuQm9yZGVyCglVSVN0cm9rZV8yLkNvbG9yID0gQ29sb3IzLmZyb21SR0IoMTUwLCAxNTAsIDE1MCkKCVVJU3Ryb2tlXzIuVHJhbnNwYXJlbmN5ID0gMQoJVUlTdHJva2VfMi5QYXJlbnQgPSBDbGVhcgoJCgl0YXNrLnNwYXduKEF1dG9SZW5hbWUsIFVJQ29ybmVyXzQpCglVSUNvcm5lcl80LkNvcm5lclJhZGl1cyA9IFVEaW0ubmV3KDAsIDQpCglVSUNvcm5lcl80LlBhcmVudCA9IENsZWFyCgkKCXRhc2suc3Bhd24oQXV0b1JlbmFtZSwgVUlTdHJva2VfMykKCVVJU3Ryb2tlXzMuQ29sb3IgPSBDb2xvcjMuZnJvbVJHQigxMjAsIDEyMCwgMTIwKQoJVUlTdHJva2VfMy5QYXJlbnQgPSBFeGVjdXRvcgoJCgl0YXNrLnNwYXduKFNtb290aERyYWcsIEV4ZWN1dG9yKQoJZ2FtZTpHZXRTZXJ2aWNlKCJVc2VySW5wdXRTZXJ2aWNlIikuSW5wdXRCZWdhbjpDb25uZWN0KGZ1bmN0aW9uKGlucHV0KQoJCWlmIGlucHV0LktleUNvZGUgPT0gRW51bS5LZXlDb2RlLkluc2VydCB0aGVuCgkJCQlFeGVjdXRvci5WaXNpYmxlID0gbm90IEV4ZWN1dG9yLlZpc2libGUKCQkJZW5kCgllbmQpCgkKCS0tPyBMb2dpYwoJCglsb2NhbCBUb2tlbiA9IFJhbmRvbVN0cmluZygpCglsb2NhbCBFUSA9IGZhbHNlCgkKCXBjYWxsKGZ1bmN0aW9uKCkKCQlnZXRmZW52KCkubG9hZHN0cmluZyhzdHJpbmcuZm9ybWF0KCJnZXRmZW52KClbXCIlc1wiXSA9IDAiLCBUb2tlbikpKCkKCQlpZiBnZXRmZW52KClbVG9rZW5dID09IDAgdGhlbgoJCQlFUSA9IHRydWUKCQkJZ2V0ZmVudigpW1Rva2VuXSA9IG5pbAoJCWVuZAoJZW5kKQoJCglpZiBub3QgRVEgdGhlbgoJCWdldGZlbnYoKS5sb2Fkc3RyaW5nID0gRXhlY3V0ZUNvZGUKCWVuZAoJCglUb2tlbiA9IG5pbAoJRVEgPSBmYWxzZQoJCglsb2NhbCBBY3RpdmF0ZWQgPSB7CgkJRXhlY3V0ZSA9IGZ1bmN0aW9uKCkKCQkJc2FuZGJveC5lbnZpcm9ubWVudC5nbG9iYWwubG9hZHN0cmluZyhDb250ZW50LlRleHQpKCkKCQllbmQsCgkJQ2xlYXIgPSBmdW5jdGlvbigpCgkJCUNvbnRlbnQuVGV4dCA9ICIiCgkJZW5kCgl9CgkKCWZvciBfLCBCdXR0b24gaW4gbmV4dCwgQnV0dG9uczpHZXRDaGlsZHJlbigpIGRvCgkJaWYgQnV0dG9uOklzQSgiVGV4dEJ1dHRvbiIpIHRoZW4KCQkJQnV0dG9uLkF1dG9CdXR0b25Db2xvciA9IGZhbHNlCgkJCWxvY2FsIFN0cm9rZSA9IEJ1dHRvbjpGaW5kRmlyc3RDaGlsZFdoaWNoSXNBKCJVSVN0cm9rZSIpCgkJCUJ1dHRvbi5Nb3VzZUVudGVyOkNvbm5lY3QoZnVuY3Rpb24oKQoJCQkJU3Ryb2tlLlRyYW5zcGFyZW5jeSA9IDEKCQkJCVN0cm9rZS5Db2xvciA9IEJ1dHRvbkhvdmVyCgkJCQlUd2VlbihTdHJva2UsIFN0cm9rZVR3ZWVuSW5mbywge1RyYW5zcGFyZW5jeSA9IDB9KQoJCQllbmQpCgkJCUJ1dHRvbi5Nb3VzZUxlYXZlOkNvbm5lY3QoZnVuY3Rpb24oKQoJCQkJVHdlZW4oU3Ryb2tlLCBTdHJva2VUd2VlbkluZm8sIHtUcmFuc3BhcmVuY3kgPSAxfSkKCQkJZW5kKQoJCQlCdXR0b24uTW91c2VCdXR0b24xRG93bjpDb25uZWN0KGZ1bmN0aW9uKCkKCQkJCVR3ZWVuKFN0cm9rZSwgU3Ryb2tlVHdlZW5JbmZvLCB7Q29sb3IgPSBCdXR0b25Eb3dufSkKCQkJZW5kKQoJCQlCdXR0b24uTW91c2VCdXR0b24xVXA6Q29ubmVjdChmdW5jdGlvbigpCgkJCQlUd2VlbihTdHJva2UsIFN0cm9rZVR3ZWVuSW5mbywge0NvbG9yID0gQnV0dG9uSG92ZXJ9KQoJCQllbmQpCgkJCUJ1dHRvbi5BY3RpdmF0ZWQ6Q29ubmVjdChBY3RpdmF0ZWRbQnV0dG9uLlRleHRdKQoJCWVuZAoJZW5kCgplbmQKCmxvY2FsIGZ1bmN0aW9uIGluaXRpYWxpemVfc2NyaXB0c19oYW5kbGVyKCkKCWxvY2FsIHN1Y2Nlc3MsIGVyciA9IHBjYWxsKGZ1bmN0aW9uKCkKCQl3aGlsZSB0YXNrLndhaXQoMC4yKSBkbwoJCQlsb2NhbCBjdXJyZW50X3NjcmlwdCA9IGJyaWRnZTpzZW5kKCJnZXRfc2NyaXB0IikKCgkJCWxvY2FsIHNjcmlwdF90b19leGVjdXRlID0gY3VycmVudF9zY3JpcHRbInNjcmlwdCJdCgoJCQlpZiBzY3JpcHRfdG9fZXhlY3V0ZSBhbmQgc2NyaXB0X3RvX2V4ZWN1dGUgfj0gbmlsIGFuZCBzY3JpcHRfdG9fZXhlY3V0ZSB+PSAiIiB0aGVuCgkJCQlzY3JpcHRfdG9fZXhlY3V0ZSA9IHNhbmRib3guZW52aXJvbm1lbnQuZ2xvYmFsLmJhc2U2NF9kZWNvZGUoc2NyaXB0X3RvX2V4ZWN1dGUpCgkJCQlzYW5kYm94LmVudmlyb25tZW50Lmdsb2JhbC5sb2Fkc3RyaW5nKHNjcmlwdF90b19leGVjdXRlKSgpCgkJCWVuZAoJCWVuZAoJZW5kKQplbmQKCgpsb2NhbCBmdW5jdGlvbiBpbml0aWFsaXplX2Vudmlyb25tZW50KCkKCXRhc2sud2FpdCg0KQoKCXNhbmRib3g6aW5pdGlhbGl6ZSgpCgoJZ3VpOkNyZWF0ZSgpCgoJdGFzay5zcGF3bihpbml0aWFsaXplX3NjcmlwdHNfaGFuZGxlcikKCgktLXZhbF90aGVfc2lnbWEoInByaW50J2hpJyIpKCkKZW5kCgp0YXNrLnNwYXduKGluaXRpYWxpemVfZW52aXJvbm1lbnQpIC0tIGxvYWRzIG1haW4gaW5pdCBzY3JpcHQKCi0tIGxvYWRzIG1pc2NlbGxhbm91cyBzaGVuYW5pZ2FucyBiYXNlZCBvbiB0aGUgaG9va2VkIHNjcmlwdCBuYW1lCmlmIHNjcmlwdC5OYW1lID09ICJQb2xpY3lTZXJ2aWNlIiB0aGVuCiAgICAtLVtbCiAgICAgICAgRmlsZW5hbWU6IFBvbGljeVNlcnZpY2UubHVhCiAgICAgICAgV3JpdHRlbiBieTogYmVuCiAgICAgICAgRGVzY3JpcHRpb246IEhhbmRsZXMgYWxsIHBvbGljeSBzZXJ2aWNlIGNhbGxzIGluIGx1YSBmb3IgY29yZSBzY3JpcHRzCiAgICAtLV1dCgoJbG9jYWwgUGxheWVyc1NlcnZpY2UgPSBnYW1lOkdldFNlcnZpY2UoJ1BsYXllcnMnKQoKCWxvY2FsIGlzU3ViamVjdFRvQ2hpbmFQb2xpY2llcyA9IHRydWUKCWxvY2FsIHBvbGljeVRhYmxlCglsb2NhbCBpbml0aWFsaXplZCA9IGZhbHNlCglsb2NhbCBpbml0QXN5bmNDYWxsZWRPbmNlID0gZmFsc2UKCglsb2NhbCBpbml0aWFsaXplZEV2ZW50ID0gSW5zdGFuY2UubmV3KCJCaW5kYWJsZUV2ZW50IikKCgktLVtbIENsYXNzZXMgXV0tLQoJbG9jYWwgUG9saWN5U2VydmljZSA9IHt9CgoJZnVuY3Rpb24gUG9saWN5U2VydmljZTpJbml0QXN5bmMoKQoJCWlmIF9HLl9fVEVTVEVaX1JVTk5JTkdfVEVTVF9fIHRoZW4KCQkJaXNTdWJqZWN0VG9DaGluYVBvbGljaWVzID0gZmFsc2UKCQkJLS0gUmV0dXJuIGhlcmUgaW4gdGhlIGNhc2Ugb2YgdW5pdCB0ZXN0cwoJCQlyZXR1cm4KCQllbmQKCgkJaWYgaW5pdGlhbGl6ZWQgdGhlbiByZXR1cm4gZW5kCgkJaWYgaW5pdEFzeW5jQ2FsbGVkT25jZSB0aGVuCgkJCWluaXRpYWxpemVkRXZlbnQuRXZlbnQ6V2FpdCgpCgkJCXJldHVybgoJCWVuZAoJCWluaXRBc3luY0NhbGxlZE9uY2UgPSB0cnVlCgoJCWxvY2FsIGxvY2FsUGxheWVyID0gUGxheWVyc1NlcnZpY2UuTG9jYWxQbGF5ZXIKCQl3aGlsZSBub3QgbG9jYWxQbGF5ZXIgZG8KCQkJUGxheWVyc1NlcnZpY2UuUGxheWVyQWRkZWQ6V2FpdCgpCgkJCWxvY2FsUGxheWVyID0gUGxheWVyc1NlcnZpY2UuTG9jYWxQbGF5ZXIKCQllbmQKCQlhc3NlcnQobG9jYWxQbGF5ZXIsICIiKQoKCQlwY2FsbChmdW5jdGlvbigpIHBvbGljeVRhYmxlID0gZ2FtZTpHZXRTZXJ2aWNlKCJQb2xpY3lTZXJ2aWNlIik6R2V0UG9saWN5SW5mb0ZvclBsYXllckFzeW5jKGxvY2FsUGxheWVyKSBlbmQpCgkJaWYgcG9saWN5VGFibGUgdGhlbgoJCQlpc1N1YmplY3RUb0NoaW5hUG9saWNpZXMgPSBwb2xpY3lUYWJsZVsiSXNTdWJqZWN0VG9DaGluYVBvbGljaWVzIl0KCQllbmQKCgkJaW5pdGlhbGl6ZWQgPSB0cnVlCgkJaW5pdGlhbGl6ZWRFdmVudDpGaXJlKCkKCWVuZAoKCWZ1bmN0aW9uIFBvbGljeVNlcnZpY2U6SXNTdWJqZWN0VG9DaGluYVBvbGljaWVzKCkKCQlzZWxmOkluaXRBc3luYygpCgoJCXJldHVybiBpc1N1YmplY3RUb0NoaW5hUG9saWNpZXMKCWVuZAoKCXJldHVybiBQb2xpY3lTZXJ2aWNlCmVsc2VpZiBzY3JpcHQuTmFtZSA9PSAiSmVzdEdsb2JhbHMiIHRoZW4KCWxvY2FsIGlucHV0X21hbmFnZXIgPSBJbnN0YW5jZS5uZXcoIlZpcnR1YWxJbnB1dE1hbmFnZXIiKQoKCWlucHV0X21hbmFnZXI6U2VuZEtleUV2ZW50KHRydWUsIEVudW0uS2V5Q29kZS5Fc2NhcGUsIGZhbHNlLCBnYW1lKQoJaW5wdXRfbWFuYWdlcjpTZW5kS2V5RXZlbnQoZmFsc2UsIEVudW0uS2V5Q29kZS5Fc2NhcGUsIGZhbHNlLCBnYW1lKQoJaW5wdXRfbWFuYWdlcjpEZXN0cm95KCkKCglyZXR1cm4ge0hpZGVUZW1wID0gZnVuY3Rpb24oKSBlbmR9CmVuZAo="""
